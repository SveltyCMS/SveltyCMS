---
path: 'docs/widgets/widget-system-overview.mdx'
title: 'Widget System Overview'
description: 'Complete overview of SveltyCMS widget system with 3-pillar architecture, management, and marketplace capabilities'
order: 1
icon: 'mdi:widgets'
author: 'admin'
created: '2025-10-17'
updated: '2025-10-17'
tags:
  - 'widgets'
  - 'overview'
  - 'architecture'
  - '3-pillar'
  - 'system'
---

# Widget System Overview

SveltyCMS features a comprehensive widget system based on the **3-Pillar Architecture** with integrated management and marketplace capabilities. This modern architecture provides type safety, performance optimization, and developer-friendly patterns.

## 🏗️ Core Concepts

### 3-Pillar Architecture

The widget system separates concerns into three distinct pillars:

```mermaid
graph TB
    subgraph "Widget Structure"
        D[📋 Definition<br/>index.ts]
        I[✏️ Input Component<br/>Input.svelte]
        V[👁️ Display Component<br/>Display.svelte]
    end

    D --> |"Configuration &<br/>Validation"| I
    D --> |"Schema &<br/>Defaults"| V
    I --> |"Interactive<br/>Editing"| U[User Interface]
    V --> |"Read-only<br/>Display"| L[Lists & Views]

    style D fill:#e1f5fe
    style I fill:#f3e5f5
    style V fill:#e8f5e8
```

**Benefits:**

- 🚀 **Performance**: Lightweight display components for lists
- 🔧 **Maintainability**: Clear separation of concerns
- 🔄 **Reusability**: Components can be shared across implementations
- 🛡️ **Type Safety**: Full TypeScript support throughout

### Widget Types

```mermaid
graph LR
    subgraph "Core Widgets"
        C1[Input Controls<br/>text, email, number]
        C2[Selection<br/>checkbox, radio]
        C3[Media<br/>image, video, upload]
        C4[Content<br/>richText, markdown]
        C5[Date/Time<br/>date, dateRange]
        C6[Relations<br/>relation, references]
    end

    subgraph "Custom Widgets"
        X1[SEO<br/>meta tags, schema]
        X2[Address<br/>geocoding, maps]
        X3[Currency<br/>monetary values]
        X4[Color Picker<br/>visual color selection]
        X5[Rating<br/>star ratings]
    end

    C1 --> A[Always Available]
    C2 --> A
    C3 --> A
    C4 --> A
    C5 --> A
    C6 --> A

    X1 --> O[Optional]
    X2 --> O
    X3 --> O
    X4 --> O
    X5 --> O

    style A fill:#c8e6c9
    style O fill:#fff3e0
```

## 🎯 System Features

### Widget Management

```mermaid
flowchart TD
    FS[📁 Filesystem<br/>Widget Discovery] --> WS[🏪 Widget Store<br/>State Management]
    WS --> DB[(🗄️ Database<br/>Persistent Config)]
    WS --> UI[🖥️ Admin Interface<br/>Enable/Disable]
    WS --> COL[📋 Collections<br/>Field Configuration]

    subgraph "Multi-Tenant Support"
        T1[Tenant A Config]
        T2[Tenant B Config]
        T3[Tenant C Config]
    end

    DB --> T1
    DB --> T2
    DB --> T3

    style FS fill:#e3f2fd
    style WS fill:#f3e5f5
    style DB fill:#fff8e1
    style UI fill:#e8f5e8
```

### Key Capabilities

- **🔄 Dynamic Loading**: Code splitting with `import.meta.glob`
- **📦 Dependency Management**: Automatic resolution and validation
- **🏢 Multi-Tenant**: Per-tenant widget configurations
- **🔒 Security**: Permission-based access control
- **📚 Self-Documenting**: MDX documentation per widget
- **✅ Validation**: Valibot schemas for type safety

## 📁 Directory Structure

```
src/widgets/
├── factory.ts              # Widget factory system
├── index.ts                # Widget loader and registry
├── types.ts                # TypeScript definitions
├── MissingWidget.svelte    # Fallback component
├── core/                   # Always available widgets
│   ├── input/
│   │   ├── index.ts        # Definition pillar
│   │   ├── Input.svelte    # Input pillar
│   │   ├── Display.svelte  # Display pillar
│   │   ├── input.mdx       # Documentation
│   │   └── types.ts        # Widget-specific types
│   ├── richText/
│   ├── date/
│   └── ...
└── custom/                 # Optional widgets
    ├── seo/
    ├── address/
    ├── currency/
    └── ...
```

## 🔄 Widget Lifecycle

```mermaid
sequencer
    participant FS as Filesystem
    participant WD as Widget Discovery
    participant WS as Widget Store
    participant DB as Database
    participant UI as User Interface
    participant COL as Collection

    FS->>WD: Scan widgets on startup
    WD->>DB: Compare with stored config
    WD->>WS: Load active widgets
    WS->>UI: Populate widget list
    UI->>WS: Enable/disable widgets
    WS->>DB: Persist changes
    COL->>WS: Request available widgets
    WS->>COL: Return active widgets
```

## 🎨 User Experience

### Collection Builder Integration

When building collections, users interact with widgets through:

1. **Widget Selection**: Choose from available widgets
2. **Configuration**: Set widget-specific properties via GuiSchema
3. **Validation**: Real-time validation feedback
4. **Preview**: Live preview of widget behavior

### Admin Interface

Administrators can:

- **Enable/Disable** widgets per tenant
- **View Dependencies** and resolve conflicts
- **Monitor Usage** across collections
- **Manage Permissions** for widget access

## 🚀 Performance Optimizations

### Code Splitting

```mermaid
graph TD
    A[Widget Request] --> B{Widget Type}
    B -->|Core| C[Always Loaded]
    B -->|Custom| D[Dynamic Import]
    D --> E[Lazy Loading]
    E --> F[Component Cached]
    C --> G[Render Widget]
    F --> G

    style C fill:#c8e6c9
    style D fill:#fff3e0
    style E fill:#ffeb3b,color:#000
```

### Memory Management

- **Lazy Loading**: Components loaded only when needed
- **Tree Shaking**: Unused widgets excluded from bundle
- **Caching**: Widget instances cached for reuse
- **Cleanup**: Automatic disposal of unused components

## 📚 Documentation Structure

The widget system includes comprehensive documentation:

- **System Overview** (this document): High-level concepts and features
- **[Widget Architecture](/docs/widgets/widget-architecture.mdx)**: Technical implementation details
- **[Development Guide](/docs/widgets/widget-development-guide.mdx)**: Creating and customizing widgets
- **Individual Widget Docs**: Each widget has its own `.mdx` file

## 🔧 Quick Start

### Using Existing Widgets

```typescript
// In a collection schema
import { widgets } from '@src/widgets';

export default {
	fields: [
		widgets.Input({
			label: 'Title',
			required: true
		}),
		widgets.RichText({
			label: 'Content'
		}),
		widgets.Date({
			label: 'Published Date'
		})
	]
};
```

### Creating Custom Widgets

```typescript
// src/widgets/custom/myWidget/index.ts
import { createWidget } from '@src/widgets/factory';

const MyWidget = createWidget({
	Name: 'MyWidget',
	Icon: 'mdi:star',
	Description: 'Custom widget example',
	inputComponentPath: '/src/widgets/custom/myWidget/Input.svelte',
	displayComponentPath: '/src/widgets/custom/myWidget/Display.svelte',
	validationSchema: string(),
	GuiSchema: {
		label: { widget: Input, required: true }
	}
});

export default MyWidget;
```

## 🎯 Next Steps

- **Developers**: Read the [Widget Architecture](/docs/widgets/widget-architecture.mdx) for technical details
- **Content Creators**: Explore available widgets in the Collection Builder
- **Administrators**: Configure widget settings in the Admin Interface

---

## Related Documentation

- [Widget Architecture](/docs/widgets/widget-architecture.mdx) - Technical implementation
- [Development Guide](/docs/widgets/widget-development-guide.mdx) - Creating widgets
- [API Documentation](/docs/api/Widget_API.mdx) - Widget API reference
