2025-10-10T11:27:40.178Z [DEBUG] Creating system initialization promise... []
2025-10-10T11:27:40.178Z [DEBUG] Loading [34m/config/private.ts[0m configuration... []
2025-10-10T11:27:40.188Z [DEBUG] Private config not found during setup - this is expected during initial setup [{"error":"Failed to load url ./types (resolved id: ./types) in /var/www/vhosts/asset-trade.de/svelte.asset-trade.de/SveltyCMS/config/private.ts. Does the file exist?"}]
2025-10-10T11:27:40.189Z [INFO] Private config not available ‚Äì skipping initialization (setup mode) []
2025-10-10T11:27:40.286Z [INFO] ‚úÖ DB module loaded. Initialization will occur on first non-setup request. []
2025-10-10T11:27:40.295Z [WARN] System setup is not complete. Starting Setup again... []
2025-10-10T11:27:40.295Z [INFO] Bypassing authentication for setup route: [34m/setup[0m []
2025-10-10T11:27:40.296Z [INFO] In-memory cache initialized. []
2025-10-10T11:27:40.296Z [TRACE] Auth service not ready, allowing setup request to [34m/setup[0m []
2025-10-10T11:27:41.387Z [WARN] System setup is not complete. Starting Setup again... []
2025-10-10T11:27:41.387Z [INFO] Bypassing authentication for setup route: [34m/setup[0m []
2025-10-10T11:28:01.431Z [WARN] System setup is not complete. Starting Setup again... []
2025-10-10T11:28:01.431Z [INFO] Bypassing authentication for setup route: [34m/api/setup/test-database[0m []
2025-10-10T11:28:01.431Z [TRACE] Auth service not ready, allowing setup request to [34m/api/setup/test-database[0m []
2025-10-10T11:28:01.431Z [TRACE] ThemeManager not ready, using default theme. This is normal after initial setup. []
2025-10-10T11:28:01.432Z [INFO] üöÄ Starting database test request processing... []
2025-10-10T11:28:01.433Z [INFO] üîç Raw request body received: [{"type":"mongodb","host":"localhost","port":"27017","name":"SveltyCMS","user":"*****","password":"[REDACTED]","isAtlas":false},"object",false]
2025-10-10T11:28:01.433Z [INFO] üìù Request body parsed successfully []
2025-10-10T11:28:01.434Z [INFO] ‚úÖ Database configuration validation passed []
2025-10-10T11:28:01.434Z [INFO] ‚úÖ Database configuration is valid and defined []
2025-10-10T11:28:01.434Z [INFO] üéØ Database type mongodb is supported, proceeding with test... []
2025-10-10T11:28:01.449Z [INFO] üîß Building MongoDB connection string [{"host":"localhost","port":27017,"database":"SveltyCMS","hasCredentials":"Getin1972!","isLocalhost":true}]
2025-10-10T11:28:01.638Z [INFO] MongoDB driver (mongoose) is available []
2025-10-10T11:28:01.638Z [INFO] Successfully imported mongoose []
2025-10-10T11:28:01.639Z [INFO] üîå Attempting MongoDB connection... [{"host":"localhost","port":27017,"database":"SveltyCMS","hasCredentials":true,"hasUser":true,"hasPassword":true,"isAtlas":false,"connectionString":"mongodb://admin:****@localhost:27017/SveltyCMS","options":{"user":"*****","pass":"****","dbName":"SveltyCMS","authSource":"admin","retryWrites":true,"serverSelectionTimeoutMS":15000,"maxPoolSize":1}}]
2025-10-10T11:28:01.678Z [INFO] ‚úÖ Ping command successful []
2025-10-10T11:28:01.682Z [INFO] Auth status check result: [{"authenticatedUsers":1,"status":{"authInfo":{"authenticatedUsers":[{"user":"*****","db":"admin"}],"authenticatedUserRoles":[{"role":"root","db":"admin"}]},"ok":1}}]
2025-10-10T11:28:01.683Z [INFO] Authentication analysis: [{"authProvided":true,"authenticated":true,"authenticatedUsersCount":1,"warnings":[]}]
2025-10-10T11:28:01.683Z [INFO] ‚úÖ Connection successful with credentials provided []
2025-10-10T11:28:01.686Z [DEBUG] Request [34m/api/setup/test-database[0m [32m255.2ms[0m ‚è±Ô∏è []
2025-10-10T11:28:01.763Z [WARN] System setup is not complete. Starting Setup again... []
2025-10-10T11:28:01.763Z [INFO] Bypassing authentication for setup route: [34m/api/setup/seed-settings[0m []
2025-10-10T11:28:01.763Z [TRACE] Auth service not ready, allowing setup request to [34m/api/setup/seed-settings[0m []
2025-10-10T11:28:01.763Z [TRACE] ThemeManager not ready, using default theme. This is normal after initial setup. []
2025-10-10T11:28:02.055Z [INFO] üîß Building MongoDB connection string [{"host":"localhost","port":27017,"database":"SveltyCMS","hasCredentials":"Getin1972!","isLocalhost":true}]
2025-10-10T11:28:02.056Z [DEBUG] Using provided connection string: mongodb://*****@localhost:27017/SveltyCMS []
2025-10-10T11:28:02.064Z [INFO] MongoDB connection established successfully with custom options. []
2025-10-10T11:28:02.064Z [INFO] MongoAuthModelRegistrar initialized. []
2025-10-10T11:28:02.065Z [DEBUG] Model 'auth_users' was registered. []
2025-10-10T11:28:02.066Z [DEBUG] Model 'auth_sessions' was registered. []
2025-10-10T11:28:02.066Z [DEBUG] Model 'auth_tokens' was registered. []
2025-10-10T11:28:02.066Z [INFO] Authentication models registered successfully. []
2025-10-10T11:28:02.067Z [DEBUG] Model 'media' was registered. []
2025-10-10T11:28:02.067Z [INFO] All Mongoose models registered. []
2025-10-10T11:28:02.067Z [TRACE] [34mMongoContentMethods[0m initialized with repositories. []
2025-10-10T11:28:02.067Z [DEBUG] [34mMongoMediaMethods[0m initialized with media model. []
2025-10-10T11:28:02.067Z [TRACE] [34mMongoThemeMethods[0m initialized. []
2025-10-10T11:28:02.067Z [TRACE] [34mMongoWidgetMethods[0m initialized. []
2025-10-10T11:28:02.068Z [TRACE] [34mMongoSystemMethods[0m initialized with models. []
2025-10-10T11:28:02.071Z [INFO] MongoDB adapter fully initialized. []
2025-10-10T11:28:02.072Z [INFO] Database connection initialized for seeding []
2025-10-10T11:28:02.072Z [INFO] üöÄ Starting smart seeding process... []
2025-10-10T11:28:02.072Z [INFO] üöÄ Starting system initialization from setup... []
2025-10-10T11:28:02.072Z [INFO] üå± Checking which settings need seeding... []
2025-10-10T11:28:02.073Z [INFO] [systemMethods.getMany] Querying for keys: HOST_DEV []
2025-10-10T11:28:02.556Z [INFO] [systemMethods.getMany] Found 0 settings []
2025-10-10T11:28:02.556Z [DEBUG] Database adapter is accessible []
2025-10-10T11:28:02.556Z [INFO] [systemMethods.getMany] Querying for keys: HOST_DEV, HOST_PROD, SITE_NAME, PASSWORD_LENGTH, DEFAULT_CONTENT_LANGUAGE, AVAILABLE_CONTENT_LANGUAGES, BASE_LOCALE, LOCALES, MEDIA_FOLDER, MEDIA_OUTPUT_FORMAT_QUALITY, IMAGE_SIZES, MAX_FILE_SIZE, BODY_SIZE_LIMIT, USE_ARCHIVE_ON_DELETE, SEASONS, SEASON_REGION, DEFAULT_THEME_ID, DEFAULT_THEME_NAME, DEFAULT_THEME_PATH, DEFAULT_THEME_IS_DEFAULT, LOG_LEVELS, LOG_RETENTION_DAYS, LOG_ROTATION_SIZE, DEMO, USE_2FA, TWO_FACTOR_AUTH_BACKUP_CODES_COUNT, SMTP_HOST, SMTP_PORT, SMTP_EMAIL, SMTP_PASSWORD, USE_GOOGLE_OAUTH, GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET, USE_REDIS, REDIS_HOST, REDIS_PORT, REDIS_PASSWORD, CACHE_TTL_SCHEMA, CACHE_TTL_WIDGET, CACHE_TTL_THEME, CACHE_TTL_CONTENT, CACHE_TTL_MEDIA, CACHE_TTL_SESSION, CACHE_TTL_USER, CACHE_TTL_API, SESSION_CLEANUP_INTERVAL, MAX_IN_MEMORY_SESSIONS, DB_VALIDATION_PROBABILITY, SESSION_EXPIRATION_SECONDS, USE_MAPBOX, MAPBOX_API_TOKEN, SECRET_MAPBOX_API_TOKEN, GOOGLE_API_KEY, TWITCH_TOKEN, USE_TIKTOK, TIKTOK_TOKEN, SERVER_PORT, ROLES, PERMISSIONS []
2025-10-10T11:28:02.797Z [INFO] [systemMethods.getMany] Found 0 settings []
2025-10-10T11:28:02.797Z [INFO] üå± Seeding 59 missing settings (0 already exist)... []
2025-10-10T11:28:03.037Z [INFO] ‚úÖ Seeded [34m59[0m missing settings []
2025-10-10T11:28:03.037Z [INFO] üîÑ Populating public settings cache... []
2025-10-10T11:28:03.038Z [WARN] Public settings validation failed []
2025-10-10T11:28:03.039Z [DEBUG] Public settings validation issues: [[{"kind":"schema","type":"object","expected":"\"MEDIA_STORAGE_TYPE\"","received":"undefined","message":"Invalid key: Expected \"MEDIA_STORAGE_TYPE\" but received undefined","path":[{"type":"object","origin":"key","input":{"HOST_DEV":"http://localhost:5173","HOST_PROD":"https://yourdomain.com","SITE_NAME":"SveltyCMS","PASSWORD_LENGTH":8,"DEFAULT_CONTENT_LANGUAGE":"en","AVAILABLE_CONTENT_LANGUAGES":["en","de"],"BASE_LOCALE":"en","LOCALES":["en","de"],"MEDIA_FOLDER":"./mediaFolder","MEDIA_OUTPUT_FORMAT_QUALITY":{"format":"webp","quality":80},"IMAGE_SIZES":{"sm":600,"md":900,"lg":1200},"MAX_FILE_SIZE":10485760,"BODY_SIZE_LIMIT":10485760,"USE_ARCHIVE_ON_DELETE":true,"SEASONS":true,"SEASON_REGION":"Western_Europe","DEFAULT_THEME_ID":"","DEFAULT_THEME_NAME":"SveltyCMSTheme","DEFAULT_THEME_PATH":"/src/themes/SveltyCMS/SveltyCMSTheme.css","DEFAULT_THEME_IS_DEFAULT":true,"LOG_LEVELS":["info","warn","error","debug"],"LOG_RETENTION_DAYS":30,"LOG_ROTATION_SIZE":10485760,"DEMO":false},"key":"[REDACTED]"}]}]]
2025-10-10T11:28:03.039Z [INFO] üé® Checking if default theme needs seeding... []
2025-10-10T11:28:03.040Z [DEBUG] Cache MISS: theme:all [{"category":"theme","responseTime":"0.02ms"}]
2025-10-10T11:28:03.297Z [INFO] üé® Seeding default theme... []
2025-10-10T11:28:03.473Z [DEBUG] Cache invalidated for category: theme [{"tenantId":"all-tenants"}]
2025-10-10T11:28:03.473Z [INFO] ‚úÖ Default theme seeded successfully []
2025-10-10T11:28:03.473Z [INFO] üì¶ Seeding collections from filesystem... []
2025-10-10T11:28:04.447Z [DEBUG] WidgetRegistryService instance created. []
2025-10-10T11:28:04.447Z [TRACE] Initializing ContentManager... [{}]
2025-10-10T11:28:04.447Z [DEBUG] [ContentManager] Cache miss or empty - will perform full load []
2025-10-10T11:28:04.449Z [INFO] Initializing WidgetRegistryService, scanning for widgets... []
2025-10-10T11:28:04.449Z [TRACE] Registered widget: [34mCheckbox[0m (from [32m/src/widgets/core/checkbox/index.ts[0m) []
2025-10-10T11:28:04.449Z [TRACE] Registered widget: [34mDate[0m (from [32m/src/widgets/core/date/index.ts[0m) []
2025-10-10T11:28:04.449Z [TRACE] Registered widget: [34mDateRange[0m (from [32m/src/widgets/core/dateRange/index.ts[0m) []
2025-10-10T11:28:04.449Z [TRACE] Registered widget: [34mGroup[0m (from [32m/src/widgets/core/group/index.ts[0m) []
2025-10-10T11:28:04.449Z [TRACE] Registered widget: [34mInput[0m (from [32m/src/widgets/core/input/index.ts[0m) []
2025-10-10T11:28:04.449Z [TRACE] Registered widget: [34mMedia[0m (from [32m/src/widgets/core/mediaUpload/index.ts[0m) []
2025-10-10T11:28:04.449Z [TRACE] Registered widget: [34mMegaMenu[0m (from [32m/src/widgets/core/megaMenu/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mRadio[0m (from [32m/src/widgets/core/radio/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mRelation[0m (from [32m/src/widgets/core/relation/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mRichText[0m (from [32m/src/widgets/core/richText/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mAddress[0m (from [32m/src/widgets/custom/address/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mColorPicker[0m (from [32m/src/widgets/custom/colorPicker/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mCurrency[0m (from [32m/src/widgets/custom/currency/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mEmail[0m (from [32m/src/widgets/custom/email/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mNumber[0m (from [32m/src/widgets/custom/number/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mPhoneNumber[0m (from [32m/src/widgets/custom/phoneNumber/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mRating[0m (from [32m/src/widgets/custom/rating/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mRemoteVideo[0m (from [32m/src/widgets/custom/remoteVideo/index.ts[0m) []
2025-10-10T11:28:04.450Z [TRACE] Registered widget: [34mSEO[0m with alias [33mSeo[0m (from [32m/src/widgets/custom/seo/index.ts[0m) []
2025-10-10T11:28:04.450Z [INFO] 705 WidgetRegistryService initialized with [32m20[0m widgets in 0.99ms. []
2025-10-10T11:28:04.450Z [TRACE] Processing module with [34m20[0m widgets available: ["Checkbox, Date, DateRange, Group, Input, Media, MegaMenu, Radio, Relation, RichText, Address, ColorPicker, Currency, Email, Number, PhoneNumber, Rating, RemoteVideo, SEO, Seo"]
2025-10-10T11:28:04.451Z [TRACE] Successfully processed collection with UUID: [33m00b5848ceeaf42abbbee699c65ad338b[0m []
2025-10-10T11:28:04.451Z [TRACE] WidgetRegistryService already initialized. Skipping. []
2025-10-10T11:28:04.451Z [TRACE] Processing module with [34m20[0m widgets available: ["Checkbox, Date, DateRange, Group, Input, Media, MegaMenu, Radio, Relation, RichText, Address, ColorPicker, Currency, Email, Number, PhoneNumber, Rating, RemoteVideo, SEO, Seo"]
2025-10-10T11:28:04.451Z [TRACE] Successfully processed collection with UUID: [33m4d6d595f437d4b8daeb44205a81e6fb3[0m []
2025-10-10T11:28:04.452Z [TRACE] WidgetRegistryService already initialized. Skipping. []
2025-10-10T11:28:04.452Z [TRACE] Processing module with [34m20[0m widgets available: ["Checkbox, Date, DateRange, Group, Input, Media, MegaMenu, Radio, Relation, RichText, Address, ColorPicker, Currency, Email, Number, PhoneNumber, Rating, RemoteVideo, SEO, Seo"]
2025-10-10T11:28:04.452Z [TRACE] Successfully processed collection with UUID: [33m3aacb20061b64777b3d5cb013c0329cd[0m []
2025-10-10T11:28:04.452Z [TRACE] WidgetRegistryService already initialized. Skipping. []
2025-10-10T11:28:04.452Z [TRACE] Processing module with [34m20[0m widgets available: ["Checkbox, Date, DateRange, Group, Input, Media, MegaMenu, Radio, Relation, RichText, Address, ColorPicker, Currency, Email, Number, PhoneNumber, Rating, RemoteVideo, SEO, Seo"]
2025-10-10T11:28:04.452Z [TRACE] Successfully processed collection with UUID: [33m9ef359a7b93d4cf38f062139e760f742[0m []
2025-10-10T11:28:04.453Z [TRACE] WidgetRegistryService already initialized. Skipping. []
2025-10-10T11:28:04.453Z [TRACE] Processing module with [34m20[0m widgets available: ["Checkbox, Date, DateRange, Group, Input, Media, MegaMenu, Radio, Relation, RichText, Address, ColorPicker, Currency, Email, Number, PhoneNumber, Rating, RemoteVideo, SEO, Seo"]
2025-10-10T11:28:04.453Z [TRACE] Successfully processed collection with UUID: [33me6abfb81495d4094a2c263140b1fbf1f[0m []
2025-10-10T11:28:04.454Z [TRACE] WidgetRegistryService already initialized. Skipping. []
2025-10-10T11:28:04.454Z [TRACE] Processing module with [34m20[0m widgets available: ["Checkbox, Date, DateRange, Group, Input, Media, MegaMenu, Radio, Relation, RichText, Address, ColorPicker, Currency, Email, Number, PhoneNumber, Rating, RemoteVideo, SEO, Seo"]
2025-10-10T11:28:04.454Z [TRACE] Successfully processed collection with UUID: [33md04c8678c4ac47f497b74f2084799bde[0m []
2025-10-10T11:28:04.454Z [TRACE] Processed [33m6[0m collection schemas from filesystem. []
2025-10-10T11:28:04.455Z [DEBUG] Cache MISS: content:structure:flat:{} [{"category":"content","responseTime":"0.02ms"}]
2025-10-10T11:28:04.459Z [DEBUG] [ContentManager] Starting three-phase sync with 9 operations []
2025-10-10T11:28:04.459Z [DEBUG] [ContentManager] Phase 1: Inserting nodes []
2025-10-10T11:28:04.459Z [DEBUG] [ContentManager] Phase 1: Upserting 9 nodes []
2025-10-10T11:28:04.459Z [TRACE] [bulkUpdateNodes] Processing [34m9[0m updates []
2025-10-10T11:28:04.459Z [TRACE] [bulkUpdateNodes] Executing bulkWrite with 9 operations []
2025-10-10T11:28:04.477Z [INFO] [bulkUpdateNodes] Result: modified=0, upserted=9, total=9 []
2025-10-10T11:28:04.477Z [DEBUG] Cache invalidated for category: content [{"tenantId":"all-tenants"}]
2025-10-10T11:28:04.481Z [DEBUG] Cache invalidated for category: content [{"tenantId":"all-tenants"}]
2025-10-10T11:28:04.481Z [DEBUG] [ContentManager] Cache invalidated after Phase 1 []
2025-10-10T11:28:04.481Z [DEBUG] [ContentManager] Phase 2: Fetching nodes from database []
2025-10-10T11:28:04.483Z [DEBUG] [ContentManager] Phase 2: Retrieved 9 nodes []
2025-10-10T11:28:04.483Z [DEBUG] [ContentManager] Phase 3: Updating 7 parent relationships []
2025-10-10T11:28:04.483Z [TRACE] [bulkUpdateNodes] Processing [34m7[0m updates []
2025-10-10T11:28:04.483Z [TRACE] [bulkUpdateNodes] Executing bulkWrite with 7 operations []
2025-10-10T11:28:04.489Z [INFO] [bulkUpdateNodes] Result: modified=7, upserted=0, total=7 []
2025-10-10T11:28:04.490Z [DEBUG] Cache invalidated for category: content [{"tenantId":"all-tenants"}]
2025-10-10T11:28:04.492Z [DEBUG] Cache invalidated for category: content [{"tenantId":"all-tenants"}]
2025-10-10T11:28:04.492Z [DEBUG] [ContentManager] Cache invalidated after Phase 3 []
2025-10-10T11:28:04.492Z [DEBUG] [ContentManager] Final phase: Fetching complete structure from database []
2025-10-10T11:28:04.494Z [DEBUG] [ContentManager] Final structure: 9 nodes retrieved []
2025-10-10T11:28:04.496Z [DEBUG] [ContentManager] Maps rebuilt: contentNodeMap=9, pathLookupMap=9 []
2025-10-10T11:28:04.496Z [INFO] üì¶ ContentManager fully initialized in [32m49.44ms[0m []
2025-10-10T11:28:04.497Z [INFO] Found 6 collections to seed []
2025-10-10T11:28:04.497Z [DEBUG] Creating/updating collection model for: [33m3aacb20061b64777b3d5cb013c0329cd[0m []
2025-10-10T11:28:04.497Z [DEBUG] Cache invalidated for collection: schema:collection:3aacb20061b64777b3d5cb013c0329cd [{}]
2025-10-10T11:28:04.498Z [INFO] Collection model created: [33m3aacb20061b64777b3d5cb013c0329cd[0m [34m(collection_3aacb20061b64777b3d5cb013c0329cd)[0m []
2025-10-10T11:28:04.498Z [INFO] ‚úÖ Created collection model: Names []
2025-10-10T11:28:04.498Z [DEBUG] Creating/updating collection model for: [33m9ef359a7b93d4cf38f062139e760f742[0m []
2025-10-10T11:28:04.498Z [DEBUG] Cache invalidated for collection: schema:collection:9ef359a7b93d4cf38f062139e760f742 [{}]
2025-10-10T11:28:04.498Z [INFO] Collection model created: [33m9ef359a7b93d4cf38f062139e760f742[0m [34m(collection_9ef359a7b93d4cf38f062139e760f742)[0m []
2025-10-10T11:28:04.498Z [INFO] ‚úÖ Created collection model: Relation []
2025-10-10T11:28:04.498Z [DEBUG] Creating/updating collection model for: [33me6abfb81495d4094a2c263140b1fbf1f[0m []
2025-10-10T11:28:04.498Z [DEBUG] Cache invalidated for collection: schema:collection:e6abfb81495d4094a2c263140b1fbf1f [{}]
2025-10-10T11:28:04.499Z [INFO] Collection model created: [33me6abfb81495d4094a2c263140b1fbf1f[0m [34m(collection_e6abfb81495d4094a2c263140b1fbf1f)[0m []
2025-10-10T11:28:04.499Z [INFO] ‚úÖ Created collection model: WidgetTest []
2025-10-10T11:28:04.499Z [DEBUG] Creating/updating collection model for: [33md04c8678c4ac47f497b74f2084799bde[0m []
2025-10-10T11:28:04.499Z [DEBUG] Cache invalidated for collection: schema:collection:d04c8678c4ac47f497b74f2084799bde [{}]
2025-10-10T11:28:04.500Z [INFO] Collection model created: [33md04c8678c4ac47f497b74f2084799bde[0m [34m(collection_d04c8678c4ac47f497b74f2084799bde)[0m []
2025-10-10T11:28:04.500Z [INFO] ‚úÖ Created collection model: Menu []
2025-10-10T11:28:04.500Z [DEBUG] Creating/updating collection model for: [33m00b5848ceeaf42abbbee699c65ad338b[0m []
2025-10-10T11:28:04.500Z [DEBUG] Cache invalidated for collection: schema:collection:00b5848ceeaf42abbbee699c65ad338b [{}]
2025-10-10T11:28:04.500Z [INFO] Collection model created: [33m00b5848ceeaf42abbbee699c65ad338b[0m [34m(collection_00b5848ceeaf42abbbee699c65ad338b)[0m []
2025-10-10T11:28:04.500Z [INFO] ‚úÖ Created collection model: Names []
2025-10-10T11:28:04.500Z [DEBUG] Creating/updating collection model for: [33m4d6d595f437d4b8daeb44205a81e6fb3[0m []
2025-10-10T11:28:04.500Z [DEBUG] Cache invalidated for collection: schema:collection:4d6d595f437d4b8daeb44205a81e6fb3 [{}]
2025-10-10T11:28:04.501Z [INFO] Collection model created: [33m4d6d595f437d4b8daeb44205a81e6fb3[0m [34m(collection_4d6d595f437d4b8daeb44205a81e6fb3)[0m []
2025-10-10T11:28:04.501Z [INFO] ‚úÖ Created collection model: Posts []
2025-10-10T11:28:04.501Z [INFO] ‚úÖ Collections seeding completed: 6 created, 0 skipped []
2025-10-10T11:28:04.501Z [INFO] ‚úÖ System initialization completed []
2025-10-10T11:28:04.501Z [DEBUG] Request [34m/api/setup/seed-settings[0m [32m2737.8ms[0m üê¢ []
2025-10-10T11:28:24.881Z [WARN] System setup is not complete. Starting Setup again... []
2025-10-10T11:28:24.881Z [INFO] Bypassing authentication for setup route: [34m/api/setup/complete[0m []
2025-10-10T11:28:24.897Z [DEBUG] User count retrieved: [34m0[0m []
2025-10-10T11:28:24.898Z [TRACE] ThemeManager not ready, using default theme. This is normal after initial setup. []
2025-10-10T11:28:24.899Z [INFO] Starting setup finalization [{"correlationId":"431655402918","db":"SveltyCMS","admin":"RKroells@web.de"}]
2025-10-10T11:28:24.901Z [INFO] Creating setup database adapter for mongodb [{"correlationId":"21be9c7f-154e-4648-944c-d596a6a4b900"}]
2025-10-10T11:28:24.901Z [INFO] üîß Building MongoDB connection string [{"host":"localhost","port":"27017","database":"SveltyCMS","hasCredentials":"Getin1972!","isLocalhost":true}]
2025-10-10T11:28:24.901Z [INFO] Connection string built for mongodb [{"correlationId":"21be9c7f-154e-4648-944c-d596a6a4b900","host":"localhost","port":"27017","name":"SveltyCMS","hasUser":true,"hasPassword":true,"connectionStringPreview":"mongodb://admin:***@localhost:27017/SveltyCMS"}]
2025-10-10T11:28:24.901Z [INFO] MongoDB connection exists but adapter not fully initialized. Completing initialization... []
2025-10-10T11:28:24.901Z [INFO] MongoAuthModelRegistrar initialized. []
2025-10-10T11:28:24.901Z [DEBUG] Model 'auth_users' already exists and was not re-registered. []
2025-10-10T11:28:24.901Z [DEBUG] Model 'auth_sessions' already exists and was not re-registered. []
2025-10-10T11:28:24.901Z [DEBUG] Model 'auth_tokens' already exists and was not re-registered. []
2025-10-10T11:28:24.901Z [INFO] Authentication models registered successfully. []
2025-10-10T11:28:24.901Z [INFO] All Mongoose models registered. []
2025-10-10T11:28:24.901Z [TRACE] [34mMongoContentMethods[0m initialized with repositories. []
2025-10-10T11:28:24.901Z [DEBUG] [34mMongoMediaMethods[0m initialized with media model. []
2025-10-10T11:28:24.901Z [TRACE] [34mMongoThemeMethods[0m initialized. []
2025-10-10T11:28:24.901Z [TRACE] [34mMongoWidgetMethods[0m initialized. []
2025-10-10T11:28:24.901Z [TRACE] [34mMongoSystemMethods[0m initialized with models. []
2025-10-10T11:28:24.904Z [INFO] MongoDB adapter fully initialized. []
2025-10-10T11:28:24.904Z [DEBUG] Model 'auth_users' already exists and was not re-registered. []
2025-10-10T11:28:24.904Z [DEBUG] Model 'auth_sessions' already exists and was not re-registered. []
2025-10-10T11:28:24.904Z [DEBUG] Model 'auth_tokens' already exists and was not re-registered. []
2025-10-10T11:28:24.904Z [INFO] Authentication models registered successfully. []
2025-10-10T11:28:24.905Z [INFO] ‚úÖ Successfully created and connected adapters for mongodb [{"correlationId":"21be9c7f-154e-4648-944c-d596a6a4b900"}]
2025-10-10T11:28:24.905Z [INFO] Database connection established for setup finalization [{"correlationId":"431655402918"}]
2025-10-10T11:28:24.905Z [INFO] Creating in-memory session manager []
2025-10-10T11:28:24.905Z [INFO] Temporary Auth service created for setup finalization [{"correlationId":"431655402918"}]
2025-10-10T11:28:24.913Z [DEBUG] Auth.getUserByEmail - raw result from db.auth [{"result":{"success":true,"data":null},"isObject":true,"hasSuccess":true,"resultType":"object"}]
2025-10-10T11:28:24.913Z [DEBUG] Auth.getUserByEmail - unwrapping DatabaseResult [{"success":true,"dataPresent":true,"dataType":"object"}]
2025-10-10T11:28:24.913Z [DEBUG] User lookup result [{"correlationId":"431655402918","email":"RK******@***.de","existingUser":null,"isNull":true,"isUndefined":false,"type":"object","hasId":false}]
2025-10-10T11:28:24.913Z [INFO] Creating new admin user [{"correlationId":"431655402918","email":"RK******@***.de"}]
2025-10-10T11:28:24.980Z [DEBUG] UserAdapter.createUser received data: [{"username":"****","email":"rk****@***.de","password":"[REDACTED]","role":"admin","isRegistered":true,"avatar":"Avatar value: \"undefined\" (type: undefined, length: 0)"}]
2025-10-10T11:28:24.983Z [DEBUG] UserModel before save: [{"email":"rk****@***.de","avatar":"Model avatar: \"undefined\" (type: undefined)","hasAvatar":false}]
2025-10-10T11:28:24.989Z [DEBUG] User created and saved: [{"_id":"4563fa7590f448048693f314d62d6da8","email":"rk****@***.de","avatar":"Saved avatar: \"undefined\" (type: undefined)","allFields":["_id","email","password","role","permissions","username","isRegistered","failedAttempts","backupCodes","lastActiveAt","createdAt","updatedAt","__v"]}]
2025-10-10T11:28:24.989Z [INFO] Admin user created successfully [{"correlationId":"431655402918","email":"RK******@***.de","userId":"********************************","userIdType":"******"}]
2025-10-10T11:28:24.989Z [INFO] Admin user created/updated [{"correlationId":"431655402918","userId":"********************************","userIdType":"******"}]
2025-10-10T11:28:25.004Z [INFO] ‚úÖ Private config file updated successfully [{"correlationId":"431655402918","path":"/var/www/vhosts/asset-trade.de/svelte.asset-trade.de/SveltyCMS/config/private.ts"}]
2025-10-10T11:28:25.004Z [INFO] Global settings cache invalidated [{"correlationId":"431655402918"}]
2025-10-10T11:28:25.005Z [INFO] User count cache invalidated after first user creation [{"correlationId":"431655402918"}]
2025-10-10T11:28:25.005Z [INFO] Setup status cache invalidated [{"correlationId":"431655402918"}]
2025-10-10T11:28:25.005Z [DEBUG] Clearing private config cache and initialization promises []
2025-10-10T11:28:25.005Z [DEBUG] Private config cache and initialization promises cleared []
2025-10-10T11:28:25.005Z [DEBUG] Clearing private config cache and initialization promises []
2025-10-10T11:28:25.005Z [DEBUG] Private config cache and initialization promises cleared []
2025-10-10T11:28:25.005Z [INFO] Private config cache cleared after setup completion [{"correlationId":"431655402918"}]
2025-10-10T11:28:25.005Z [INFO] Force reinitialization requested - clearing existing initialization promise and reloading config []
2025-10-10T11:28:25.005Z [DEBUG] Loading [34m/config/private.ts[0m configuration... []
2025-10-10T11:28:25.005Z [DEBUG] Private config not found during setup - this is expected during initial setup [{"error":"Failed to load url ./types (resolved id: ./types) in /var/www/vhosts/asset-trade.de/svelte.asset-trade.de/SveltyCMS/config/private.ts. Does the file exist?"}]
2025-10-10T11:28:25.006Z [INFO] System state changed: IDLE ‚Üí IDLE [{"reason":"Preparing for reinitialization"}]
2025-10-10T11:28:25.006Z [INFO] Manual reinitialization requested (force) (skip auth wait) []
2025-10-10T11:28:25.006Z [INFO] Starting SvelteCMS System Initialization... []
2025-10-10T11:28:25.006Z [INFO] System state changed: IDLE ‚Üí INITIALIZING [{"reason":"Starting system initialization"}]
2025-10-10T11:28:25.006Z [DEBUG] Loading [34m/config/private.ts[0m configuration... []
2025-10-10T11:28:25.006Z [DEBUG] Private config not found during setup - this is expected during initial setup [{"error":"Failed to load url ./types (resolved id: ./types) in /var/www/vhosts/asset-trade.de/svelte.asset-trade.de/SveltyCMS/config/private.ts. Does the file exist?"}]
2025-10-10T11:28:25.006Z [INFO] Private config not available ‚Äì running in setup mode (skipping full initialization). []
2025-10-10T11:28:25.006Z [INFO] System state changed: INITIALIZING ‚Üí IDLE [{"reason":"Running in setup mode"}]
2025-10-10T11:28:25.006Z [INFO] Skipping auth readiness wait (setup mode) []
2025-10-10T11:28:25.006Z [INFO] System reinitialized successfully after setup completion [{"correlationId":"431655402918"}]
2025-10-10T11:28:25.006Z [INFO] ContentManager reinitialized with full collection schemas [{"correlationId":"431655402918"}]
2025-10-10T11:28:25.006Z [INFO] Creating session for admin user [{"correlationId":"431655402918","userId":"********************************","userIdType":"******"}]
2025-10-10T11:28:25.008Z [INFO] Session created: [32md838aba7cfaa4c44aacb86a3773b7da6[0m for user: [34m4563fa7590f448048693f314d62d6da8[0m []
2025-10-10T11:28:25.010Z [DEBUG] User retrieved by ID: [34m4563fa7590f448048693f314d62d6da8[0m [{"tenantId":"\u001b[34mnone\u001b[0m (single-tenant mode)"}]
2025-10-10T11:28:25.010Z [INFO] Session created with temp auth service [{"correlationId":"431655402918"}]
2025-10-10T11:28:25.010Z [INFO] Admin user created and session established, redirecting to dashboard [{"correlationId":"431655402918"}]
2025-10-10T11:28:25.010Z [WARN] Error sending welcome email to admin user [{"correlationId":"431655402918","email":"RK******@***.de","error":"Cannot access 'userLanguage' before initialization"}]
2025-10-10T11:28:25.010Z [INFO] Setup redirect logic [{"correlationId":"431655402918","langFromStore":"en","supportedLocales":[null],"userLanguage":"**"}]
2025-10-10T11:28:25.010Z [DEBUG] Fetching first collection path for language: [34men[0m []
2025-10-10T11:28:25.010Z [INFO] üìã First collection loaded: [34mNames[0m ([33m3aacb20061b64777b3d5cb013c0329cd[0m) in [32m0.01ms[0m []
2025-10-10T11:28:25.010Z [INFO] Redirecting to first collection: [34mNames[0m at path: [34m/en/Collections/Names[0m []
2025-10-10T11:28:25.010Z [INFO] Setup completion redirect path determined [{"correlationId":"431655402918","redirectPath":"/en/Collections/Names"}]
2025-10-10T11:28:25.011Z [DEBUG] Request [34m/api/setup/complete[0m [32m130.1ms[0m ‚ö° []
