{"version":3,"file":"6.6auL1Bzq.js","sources":["../../../../../../src/routes/config/+page.svelte"],"sourcesContent":["<!--\n@files src/routes/(app)/config/+page.svelte\n@component\n**This file sets up and displays the config page. It provides a user-friendly interface for managing configuration settings.**\n-->\n\n<script lang=\"ts\">\n\timport PageTitle from '@cms/components/PageTitle.svelte';\n\timport PermissionGuard from '@cms/components/PermissionGuard.svelte';\n\timport * as m from '@shared/paraglide/messages';\n\timport { collections } from '@shared/stores/collectionStore.svelte';\n\timport { ui } from '@shared/stores/UIStore.svelte';\n\timport { onMount } from 'svelte';\n\n\tonMount(() => {\n\t\tcollections.setCollection(null);\n\t});\n\n\tfunction handleMobileSidebarClose() {\n\t\t// Hide sidebar on mobile before navigation\n\t\tif (typeof window !== 'undefined' && window.innerWidth < 768) {\n\t\t\tui.toggle('leftSidebar', 'hidden');\n\t\t}\n\t}\n\n\t// A single, data-driven array to define all configuration items.\n\tconst configItems = [\n\t\t{\n\t\t\tid: 'collectionbuilder',\n\t\t\thref: '/config/collectionbuilder',\n\t\t\tlabel: m.config_collectionbuilder(),\n\t\t\ticon: 'fluent-mdl2:build-definition',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-tertiary-600',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:collectionManagement',\n\t\t\t\tname: 'Collection Builder',\n\t\t\t\tdescription: 'Manage and build collections',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'configuration'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'graphql',\n\t\t\thref: '/api/graphql',\n\t\t\tlabel: m.config_graphql(),\n\t\t\ticon: 'teenyicons:graphql-solid',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-warning-600',\n\t\t\ttarget: '_blank',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'api:graphql',\n\t\t\t\tname: 'GraphQL',\n\t\t\t\tdescription: 'Access GraphQL API',\n\t\t\t\trequiredRole: 'developer',\n\t\t\t\taction: 'access',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'emailPreviews',\n\t\t\thref: '/email-previews',\n\t\t\tlabel: m.config_emailPreviews(),\n\t\t\ticon: 'mdi:email-outline',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-primary-600',\n\t\t\ttarget: '_blank',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'system:admin',\n\t\t\t\tname: 'Email Previews',\n\t\t\t\tdescription: 'Preview system emails',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'access',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'dashboard',\n\t\t\thref: '/dashboard',\n\t\t\tlabel: m.dashboard(),\n\t\t\ticon: 'bi:bar-chart-line',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-error-600',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'system:dashboard',\n\t\t\t\tname: 'Dashboard',\n\t\t\t\tdescription: 'Access system dashboard',\n\t\t\t\trequiredRole: 'user',\n\t\t\t\taction: 'access',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'marketplace',\n\t\t\thref: 'https://www.sveltyCMS.com',\n\t\t\tlabel: m.marketplace(),\n\t\t\ticon: 'icon-park-outline:shopping-bag',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-secondary-500',\n\t\t\ttarget: '_blank',\n\t\t\tpermission: null\n\t\t},\n\t\t{\n\t\t\tid: 'widgetManagement',\n\t\t\thref: '/config/widgetManagement',\n\t\t\tlabel: m.config_widgetManagement(),\n\t\t\ticon: 'mdi:widgets',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-tertiary-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:widgetManagement',\n\t\t\t\tname: 'Widget Management',\n\t\t\t\tdescription: 'Manage system widgets',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'configuration'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'themeManagement',\n\t\t\thref: '/config/themeManagement',\n\t\t\tlabel: m.config_themeManagement(),\n\t\t\ticon: 'ph:layout',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-primary-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:themeManagement',\n\t\t\t\tname: 'Theme Management',\n\t\t\t\tdescription: 'Manage system themes',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'configuration'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'settings',\n\t\t\thref: '/config/systemsetting',\n\t\t\tlabel: m.config_settings(),\n\t\t\ticon: 'uil:setting',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-surface-500',\n\t\t\tpermission: {\n\t\t\t\t// FIX: Changed from 'system:settings' to 'config:settings' to match +page.server.ts\n\t\t\t\tcontextId: 'config:settings',\n\t\t\t\tname: 'Settings',\n\t\t\t\tdescription: 'Manage system settings',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'importExport',\n\t\t\thref: '/config/import-export',\n\t\t\tlabel: 'Import & Export',\n\t\t\ticon: 'mdi:database-import',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-warning-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:importExport',\n\t\t\t\tname: 'Import & Export',\n\t\t\t\tdescription: 'Import and export system data',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t// START: New Configuration Manager Button\n\t\t{\n\t\t\tid: 'configurationManager',\n\t\t\thref: '/config/configurationManager',\n\t\t\tlabel: 'Config Manager',\n\t\t\ticon: 'mdi:sync-circle',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-secondary-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:synchronization',\n\t\t\t\tname: 'Configuration Manager',\n\t\t\t\tdescription: 'Synchronize configuration between filesystem and database.',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t// END: New Configuration Manager Button\n\t\t// START: System Health Monitor\n\t\t{\n\t\t\tid: 'systemHealth',\n\t\t\thref: '/config/system-health',\n\t\t\tlabel: 'System Health',\n\t\t\ticon: 'mdi:heart-pulse',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-success-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:systemHealth',\n\t\t\t\tname: 'System Health',\n\t\t\t\tdescription: 'Monitor system services and health status',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'view',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t// END: System Health Monitor\n\t\t{\n\t\t\tid: 'accessManagement',\n\t\t\t// FIX: Corrected typo from 'assessManagement'\n\t\t\thref: '/config/accessManagement',\n\t\t\tlabel: m.config_accessManagement(),\n\t\t\ticon: 'mdi:account-group',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-error-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:accessManagement',\n\t\t\t\tname: 'Access Management',\n\t\t\t\tdescription: 'Manage user access and roles',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'configuration'\n\t\t\t}\n\t\t}\n\t];\n</script>\n\n<PageTitle name={m.config_pagetitle()} showBackButton={true} backUrl=\"/\" icon=\"material-symbols:build-circle\" />\n\n<div class=\"wrapper mb-2 max-h-[calc(100vh-65px)] overflow-auto p-2\">\n\t<h2 class=\"h2 mb-4 text-center font-bold text-tertiary-600 dark:text-primary-500\">\n\t\t{m.config_body()}\n\t</h2>\n\n\t<div class=\"grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-4\">\n\t\t{#each configItems as item (item.id)}\n\t\t\t{@const usePermissionGuard = !!item.permission}\n\n\t\t\t{#if usePermissionGuard}\n\t\t\t\t<PermissionGuard config={item.permission}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={item.href}\n\t\t\t\t\t\tclass={`flex h-24 flex-col items-center justify-center gap-2 rounded p-2 text-center shadow-md transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg lg:h-20 ${item.classes}`}\n\t\t\t\t\t\taria-label={item.label}\n\t\t\t\t\t\ttarget={item.target}\n\t\t\t\t\t\trel={item.target === '_blank' ? 'noopener noreferrer' : undefined}\n\t\t\t\t\t\tdata-sveltekit-preload-data={item.target === '_blank' ? undefined : 'hover'}\n\t\t\t\t\t\tonclick={handleMobileSidebarClose}\n\t\t\t\t\t>\n\t\t\t\t\t\t<iconify-icon icon={item.icon} class={`text-3xl lg:text-2xl ${item.iconColor || ''}`}></iconify-icon>\n\t\t\t\t\t\t<p class=\"w-full truncate text-xs font-medium uppercase lg:text-sm\">{item.label}</p>\n\t\t\t\t\t</a>\n\t\t\t\t</PermissionGuard>\n\t\t\t{:else}\n\t\t\t\t<a\n\t\t\t\t\thref={item.href}\n\t\t\t\t\tclass={`flex h-24 flex-col items-center justify-center gap-2 rounded p-2 text-center shadow-md transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg lg:h-20 ${item.classes}`}\n\t\t\t\t\taria-label={item.label}\n\t\t\t\t\ttarget={item.target}\n\t\t\t\t\trel={item.target === '_blank' ? 'noopener noreferrer' : undefined}\n\t\t\t\t\tdata-sveltekit-preload-data={item.target === '_blank' ? undefined : 'hover'}\n\t\t\t\t\tonclick={handleMobileSidebarClose}\n\t\t\t\t>\n\t\t\t\t\t<iconify-icon icon={item.icon} class={`text-3xl lg:text-2xl ${item.iconColor || ''}`}></iconify-icon>\n\t\t\t\t\t<p class=\"w-full truncate text-xs font-medium uppercase lg:text-sm\">{item.label}</p>\n\t\t\t\t</a>\n\t\t\t{/if}\n\t\t{/each}\n\t</div>\n</div>\n"],"names":["onMount","collections","handleMobileSidebarClose","ui","configItems","m.config_collectionbuilder","m.config_graphql","m.config_emailPreviews","m.dashboard","m.marketplace","m.config_widgetManagement","m.config_themeManagement","m.config_settings","m.config_accessManagement","$0","$.derived","m.config_pagetitle","PageTitle","node","div","$.sibling","h2","div_1","item","$$anchor","usePermissionGuard","$.get","PermissionGuard","root_3","iconify_icon","$.child","p","$.reset","$.set_class","$.set_text","text_1","$.append","a_1","root_4","iconify_icon_1","p_1","text_2","$$render","consequent","alternate","$.template_effect","text","m.config_body"],"mappings":"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"}