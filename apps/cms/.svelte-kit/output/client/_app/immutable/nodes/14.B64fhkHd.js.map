{"version":3,"file":"14.B64fhkHd.js","sources":["../../../../../../src/routes/config/themeManagement/+page.svelte"],"sourcesContent":["<!-- \n@file src/routes/(app)/config/themeManagement/+page.svelte\n@description This file manages the theme management page. It provides a user-friendly interface for managing themes and custom themes. \n-->\n\n<script lang=\"ts\">\n\timport { themeStore, updateTheme } from '@shared/stores/themeStore.svelte';\n\timport type { DatabaseId } from '@cms-types';\n\timport type { Theme } from '@shared/database/dbInterface';\n\timport { dateToISODateString } from '@shared/utils/dateUtils';\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\t// Component\n\timport PageTitle from '@cms/components/PageTitle.svelte';\n\n\tlet selectedTheme = $state<any | null>(null);\n\tlet livePreviewTheme = $state<any | null>(null);\n\n\t// This will hold the custom themes\n\tlet customThemes = $state<Theme[]>([]);\n\n\t// Load custom themes dynamically\n\tloadCustomThemes();\n\n\tasync function loadCustomThemes() {\n\t\t// Use Vite's glob feature to load all theme.css files from the custom themes directory\n\t\tconst customThemesFiles = import.meta.glob('../themes/custom/*/theme.css', { eager: true });\n\n\t\t// Convert the imported files to Theme objects\n\t\tcustomThemes = Object.entries(customThemesFiles).map(([key, value], index) => {\n\t\t\tconst nowIso = dateToISODateString(new Date());\n\t\t\treturn {\n\t\t\t\t_id: `custom-theme-${index}` as unknown as DatabaseId,\n\t\t\t\tname: key.split('/')[3],\n\t\t\t\tpath: value as string,\n\t\t\t\tisDefault: false,\n\t\t\t\tisActive: false,\n\t\t\t\tconfig: { tailwindConfigPath: '', assetsPath: '' },\n\t\t\t\tcreatedAt: nowIso,\n\t\t\t\tupdatedAt: nowIso\n\t\t\t} as Theme;\n\t\t});\n\t}\n\n\t// Combine default theme with dynamically loaded custom themes\n\tconst themes = $derived([\n\t\t{\n\t\t\t_id: 'default-theme' as unknown as DatabaseId,\n\t\t\tname: 'SveltyCMSTheme',\n\t\t\tpath: '/path/to/default/theme.css',\n\t\t\tisDefault: true,\n\t\t\tisActive: true,\n\t\t\tconfig: { tailwindConfigPath: '', assetsPath: '' },\n\t\t\tcreatedAt: dateToISODateString(new Date()),\n\t\t\tupdatedAt: dateToISODateString(new Date())\n\t\t} as Theme,\n\t\t...customThemes\n\t]);\n\n\t// Effects for theme changes\n\t$effect.root(() => {\n\t\tif (selectedTheme) updateTheme(selectedTheme.name);\n\t});\n\n\t$effect.root(() => {\n\t\tif (livePreviewTheme) updateTheme(livePreviewTheme.name);\n\t});\n\n\t// Initialize selectedTheme with current theme\n\t$effect.root(() => {\n\t\tif (themeStore.currentTheme) {\n\t\t\tselectedTheme = themeStore.currentTheme;\n\t\t}\n\t});\n\n\tfunction applyTheme(theme: Theme) {\n\t\tselectedTheme = theme;\n\t\tlivePreviewTheme = null;\n\t}\n\n\tfunction previewThemeChange(theme: Theme) {\n\t\tlivePreviewTheme = theme;\n\t}\n\n\tfunction resetPreview() {\n\t\tlivePreviewTheme = null;\n\t\tif (selectedTheme) updateTheme(selectedTheme.name);\n\t}\n\n\tfunction handleThemeChange() {\n\t\tif (selectedTheme) {\n\t\t\tapplyTheme(selectedTheme);\n\t\t}\n\t}\n</script>\n\n<!-- Page Title with Back Button -->\n<PageTitle name=\"Theme Management\" icon=\"ph:layout\" showBackButton={true} backUrl=\"/config\" />\n\n<div class=\"mb-4\">\n\t<label for=\"theme-select\" class=\"mb-2 block font-bold\">Current System Theme:</label>\n\t<select id=\"theme-select\" bind:value={selectedTheme} class=\"select\" onchange={handleThemeChange}>\n\t\t{#each themes as theme (theme._id)}\n\t\t\t<option value={theme}>{theme.name}</option>\n\t\t{/each}\n\t</select>\n</div>\n\n<div class=\"mt-4\">\n\t<h3 class=\"font-bold\">Available Themes:</h3>\n\t{#each customThemes as theme (theme._id)}\n\t\t<button\n\t\t\tonmouseover={() => previewThemeChange(theme)}\n\t\t\tonfocus={() => previewThemeChange(theme)}\n\t\t\tonmouseout={resetPreview}\n\t\t\tonblur={resetPreview}\n\t\t\tclass=\"preset-outline-tertiary-500 btn mt-2\"\n\t\t>\n\t\t\tPreview {theme.name}\n\t\t</button>\n\t{/each}\n</div>\n\n{#if customThemes.length === 0}\n\t<p class=\"my-2 text-center text-tertiary-500 dark:text-primary-500 sm:text-left\">\n\t\tThere are currently no custom themes available. Visit the SveltyCMS marketplace to find new themes.\n\t</p>\n\n\t<!-- Market Place -->\n\t<a\n\t\thref=\"https://www.sveltyCMS.com\"\n\t\ttarget=\"_blank\"\n\t\trel=\"noopener noreferrer\"\n\t\taria-label={m.marketplace()}\n\t\tclass=\"preset-outlined-primary-500 btn w-full gap-2 py-6\"\n\t>\n\t\t<iconify-icon icon=\"icon-park-outline:shopping-bag\" width=\"28\" class=\"text-white\"></iconify-icon>\n\t\t<p class=\"uppercase\">{m.marketplace()}</p>\n\t</a>\n{/if}\n"],"names":["selectedTheme","$.state","livePreviewTheme","customThemes","$.proxy","loadCustomThemes","key","value","index","nowIso","dateToISODateString","themes","$.derived","$.get","$.effect_root","updateTheme","themeStore","applyTheme","theme","$.set","previewThemeChange","resetPreview","handleThemeChange","PageTitle","node","div","$.sibling","select","$$anchor","option","root_1","$.set_text","text","div_1","$.each","node_1","button","root_2","text_1","$.child","$.reset","$.template_effect","$.event","$.append","a","$.first_child","fragment_1","iconify_icon","p","$.set_attribute","$0","m.marketplace","$$render","consequent","$$value"],"mappings":"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"}