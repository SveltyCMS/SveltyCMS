{"version":3,"file":"18.BitMmASG.js","sources":["../../../../../../../../node_modules/.bun/graphql-ws@6.0.6+c80b7e550afee05e/node_modules/graphql-ws/dist/common-CGW11Fyb.js","../../../../../../../../node_modules/.bun/graphql-ws@6.0.6+c80b7e550afee05e/node_modules/graphql-ws/dist/client.js","../../../../../../src/routes/graphql-test/+page.svelte"],"sourcesContent":["function extendedTypeof(val) {\n  if (val === null) {\n    return \"null\";\n  }\n  if (Array.isArray(val)) {\n    return \"array\";\n  }\n  return typeof val;\n}\nfunction isObject(val) {\n  return extendedTypeof(val) === \"object\";\n}\nfunction isAsyncIterable(val) {\n  return typeof Object(val)[Symbol.asyncIterator] === \"function\";\n}\nfunction isAsyncGenerator(val) {\n  return isObject(val) && typeof Object(val)[Symbol.asyncIterator] === \"function\" && typeof val.return === \"function\";\n}\nfunction areGraphQLFormattedErrors(obj) {\n  return Array.isArray(obj) && // must be at least one error\n  obj.length > 0 && // error has at least a message\n  obj.every((ob) => \"message\" in ob);\n}\nfunction limitCloseReason(reason, whenTooLong) {\n  return reason.length < 124 ? reason : whenTooLong;\n}\n\nconst GRAPHQL_TRANSPORT_WS_PROTOCOL = \"graphql-transport-ws\";\nconst DEPRECATED_GRAPHQL_WS_PROTOCOL = \"graphql-ws\";\nvar CloseCode = /* @__PURE__ */ ((CloseCode2) => {\n  CloseCode2[CloseCode2[\"InternalServerError\"] = 4500] = \"InternalServerError\";\n  CloseCode2[CloseCode2[\"InternalClientError\"] = 4005] = \"InternalClientError\";\n  CloseCode2[CloseCode2[\"BadRequest\"] = 4400] = \"BadRequest\";\n  CloseCode2[CloseCode2[\"BadResponse\"] = 4004] = \"BadResponse\";\n  CloseCode2[CloseCode2[\"Unauthorized\"] = 4401] = \"Unauthorized\";\n  CloseCode2[CloseCode2[\"Forbidden\"] = 4403] = \"Forbidden\";\n  CloseCode2[CloseCode2[\"SubprotocolNotAcceptable\"] = 4406] = \"SubprotocolNotAcceptable\";\n  CloseCode2[CloseCode2[\"ConnectionInitialisationTimeout\"] = 4408] = \"ConnectionInitialisationTimeout\";\n  CloseCode2[CloseCode2[\"ConnectionAcknowledgementTimeout\"] = 4504] = \"ConnectionAcknowledgementTimeout\";\n  CloseCode2[CloseCode2[\"SubscriberAlreadyExists\"] = 4409] = \"SubscriberAlreadyExists\";\n  CloseCode2[CloseCode2[\"TooManyInitialisationRequests\"] = 4429] = \"TooManyInitialisationRequests\";\n  return CloseCode2;\n})(CloseCode || {});\nvar MessageType = /* @__PURE__ */ ((MessageType2) => {\n  MessageType2[\"ConnectionInit\"] = \"connection_init\";\n  MessageType2[\"ConnectionAck\"] = \"connection_ack\";\n  MessageType2[\"Ping\"] = \"ping\";\n  MessageType2[\"Pong\"] = \"pong\";\n  MessageType2[\"Subscribe\"] = \"subscribe\";\n  MessageType2[\"Next\"] = \"next\";\n  MessageType2[\"Error\"] = \"error\";\n  MessageType2[\"Complete\"] = \"complete\";\n  return MessageType2;\n})(MessageType || {});\nfunction validateMessage(val) {\n  if (!isObject(val)) {\n    throw new Error(\n      `Message is expected to be an object, but got ${extendedTypeof(val)}`\n    );\n  }\n  if (!val.type) {\n    throw new Error(`Message is missing the 'type' property`);\n  }\n  if (typeof val.type !== \"string\") {\n    throw new Error(\n      `Message is expects the 'type' property to be a string, but got ${extendedTypeof(\n        val.type\n      )}`\n    );\n  }\n  switch (val.type) {\n    case \"connection_init\" /* ConnectionInit */:\n    case \"connection_ack\" /* ConnectionAck */:\n    case \"ping\" /* Ping */:\n    case \"pong\" /* Pong */: {\n      if (val.payload != null && !isObject(val.payload)) {\n        throw new Error(\n          `\"${val.type}\" message expects the 'payload' property to be an object or nullish or missing, but got \"${val.payload}\"`\n        );\n      }\n      break;\n    }\n    case \"subscribe\" /* Subscribe */: {\n      if (typeof val.id !== \"string\") {\n        throw new Error(\n          `\"${val.type}\" message expects the 'id' property to be a string, but got ${extendedTypeof(\n            val.id\n          )}`\n        );\n      }\n      if (!val.id) {\n        throw new Error(\n          `\"${val.type}\" message requires a non-empty 'id' property`\n        );\n      }\n      if (!isObject(val.payload)) {\n        throw new Error(\n          `\"${val.type}\" message expects the 'payload' property to be an object, but got ${extendedTypeof(\n            val.payload\n          )}`\n        );\n      }\n      if (typeof val.payload.query !== \"string\") {\n        throw new Error(\n          `\"${val.type}\" message payload expects the 'query' property to be a string, but got ${extendedTypeof(\n            val.payload.query\n          )}`\n        );\n      }\n      if (val.payload.variables != null && !isObject(val.payload.variables)) {\n        throw new Error(\n          `\"${val.type}\" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${extendedTypeof(\n            val.payload.variables\n          )}`\n        );\n      }\n      if (val.payload.operationName != null && extendedTypeof(val.payload.operationName) !== \"string\") {\n        throw new Error(\n          `\"${val.type}\" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${extendedTypeof(\n            val.payload.operationName\n          )}`\n        );\n      }\n      if (val.payload.extensions != null && !isObject(val.payload.extensions)) {\n        throw new Error(\n          `\"${val.type}\" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${extendedTypeof(\n            val.payload.extensions\n          )}`\n        );\n      }\n      break;\n    }\n    case \"next\" /* Next */: {\n      if (typeof val.id !== \"string\") {\n        throw new Error(\n          `\"${val.type}\" message expects the 'id' property to be a string, but got ${extendedTypeof(\n            val.id\n          )}`\n        );\n      }\n      if (!val.id) {\n        throw new Error(\n          `\"${val.type}\" message requires a non-empty 'id' property`\n        );\n      }\n      if (!isObject(val.payload)) {\n        throw new Error(\n          `\"${val.type}\" message expects the 'payload' property to be an object, but got ${extendedTypeof(\n            val.payload\n          )}`\n        );\n      }\n      break;\n    }\n    case \"error\" /* Error */: {\n      if (typeof val.id !== \"string\") {\n        throw new Error(\n          `\"${val.type}\" message expects the 'id' property to be a string, but got ${extendedTypeof(\n            val.id\n          )}`\n        );\n      }\n      if (!val.id) {\n        throw new Error(\n          `\"${val.type}\" message requires a non-empty 'id' property`\n        );\n      }\n      if (!areGraphQLFormattedErrors(val.payload)) {\n        throw new Error(\n          `\"${val.type}\" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(\n            val.payload\n          )}`\n        );\n      }\n      break;\n    }\n    case \"complete\" /* Complete */: {\n      if (typeof val.id !== \"string\") {\n        throw new Error(\n          `\"${val.type}\" message expects the 'id' property to be a string, but got ${extendedTypeof(\n            val.id\n          )}`\n        );\n      }\n      if (!val.id) {\n        throw new Error(\n          `\"${val.type}\" message requires a non-empty 'id' property`\n        );\n      }\n      break;\n    }\n    default:\n      throw new Error(`Invalid message 'type' property \"${val.type}\"`);\n  }\n  return val;\n}\nfunction parseMessage(data, reviver) {\n  return validateMessage(\n    typeof data === \"string\" ? JSON.parse(data, reviver) : data\n  );\n}\nfunction stringifyMessage(msg, replacer) {\n  validateMessage(msg);\n  return JSON.stringify(msg, replacer);\n}\n\nexport { CloseCode as C, DEPRECATED_GRAPHQL_WS_PROTOCOL as D, GRAPHQL_TRANSPORT_WS_PROTOCOL as G, MessageType as M, isAsyncGenerator as a, isAsyncIterable as b, isObject as i, limitCloseReason as l, parseMessage as p, stringifyMessage as s, validateMessage as v };\n","import { i as isObject, G as GRAPHQL_TRANSPORT_WS_PROTOCOL, s as stringifyMessage, M as MessageType, C as CloseCode, l as limitCloseReason, p as parseMessage } from './common-CGW11Fyb.js';\nexport { D as DEPRECATED_GRAPHQL_WS_PROTOCOL, v as validateMessage } from './common-CGW11Fyb.js';\n\nfunction createClient(options) {\n  const {\n    url,\n    connectionParams,\n    lazy = true,\n    onNonLazyError = console.error,\n    lazyCloseTimeout: lazyCloseTimeoutMs = 0,\n    keepAlive = 0,\n    disablePong,\n    connectionAckWaitTimeout = 0,\n    retryAttempts = 5,\n    retryWait = async function randomisedExponentialBackoff(retries2) {\n      const retryDelaySeconds = Math.pow(2, retries2);\n      await new Promise(\n        (resolve) => setTimeout(\n          resolve,\n          retryDelaySeconds * 1e3 + // add random timeout from 300ms to 3s\n          Math.floor(Math.random() * (3e3 - 300) + 300)\n        )\n      );\n    },\n    shouldRetry = isLikeCloseEvent,\n    on,\n    webSocketImpl,\n    /**\n     * Generates a v4 UUID to be used as the ID using `Math`\n     * as the random number generator. Supply your own generator\n     * in case you need more uniqueness.\n     *\n     * Reference: https://gist.github.com/jed/982883\n     */\n    generateID = function generateUUID() {\n      return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n        const r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\n        return v.toString(16);\n      });\n    },\n    jsonMessageReplacer: replacer,\n    jsonMessageReviver: reviver\n  } = options;\n  let ws;\n  if (webSocketImpl) {\n    if (!isWebSocket(webSocketImpl)) {\n      throw new Error(\"Invalid WebSocket implementation provided\");\n    }\n    ws = webSocketImpl;\n  } else if (typeof WebSocket !== \"undefined\") {\n    ws = WebSocket;\n  } else if (typeof global !== \"undefined\") {\n    ws = global.WebSocket || // @ts-expect-error: Support more browsers\n    global.MozWebSocket;\n  } else if (typeof window !== \"undefined\") {\n    ws = window.WebSocket || // @ts-expect-error: Support more browsers\n    window.MozWebSocket;\n  }\n  if (!ws)\n    throw new Error(\n      \"WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`\"\n    );\n  const WebSocketImpl = ws;\n  const emitter = (() => {\n    const message = /* @__PURE__ */ (() => {\n      const listeners2 = {};\n      return {\n        on(id, listener) {\n          listeners2[id] = listener;\n          return () => {\n            delete listeners2[id];\n          };\n        },\n        emit(message2) {\n          if (\"id\" in message2) listeners2[message2.id]?.(message2);\n        }\n      };\n    })();\n    const listeners = {\n      connecting: on?.connecting ? [on.connecting] : [],\n      opened: on?.opened ? [on.opened] : [],\n      connected: on?.connected ? [on.connected] : [],\n      ping: on?.ping ? [on.ping] : [],\n      pong: on?.pong ? [on.pong] : [],\n      message: on?.message ? [message.emit, on.message] : [message.emit],\n      closed: on?.closed ? [on.closed] : [],\n      error: on?.error ? [on.error] : []\n    };\n    return {\n      onMessage: message.on,\n      on(event, listener) {\n        const l = listeners[event];\n        l.push(listener);\n        return () => {\n          l.splice(l.indexOf(listener), 1);\n        };\n      },\n      emit(event, ...args) {\n        for (const listener of [...listeners[event]]) {\n          listener(...args);\n        }\n      }\n    };\n  })();\n  function errorOrClosed(cb) {\n    const listening = [\n      // errors are fatal and more critical than close events, throw them first\n      emitter.on(\"error\", (err) => {\n        listening.forEach((unlisten) => unlisten());\n        cb(err);\n      }),\n      // closes can be graceful and not fatal, throw them second (if error didnt throw)\n      emitter.on(\"closed\", (event) => {\n        listening.forEach((unlisten) => unlisten());\n        cb(event);\n      })\n    ];\n  }\n  let connecting, locks = 0, lazyCloseTimeout, retrying = false, retries = 0, disposed = false;\n  async function connect() {\n    clearTimeout(lazyCloseTimeout);\n    const [socket, throwOnClose] = await (connecting ?? (connecting = new Promise(\n      (connected, denied) => (async () => {\n        if (retrying) {\n          await retryWait(retries);\n          if (!locks) {\n            connecting = void 0;\n            return denied({ code: 1e3, reason: \"All Subscriptions Gone\" });\n          }\n          retries++;\n        }\n        emitter.emit(\"connecting\", retrying);\n        const socket2 = new WebSocketImpl(\n          typeof url === \"function\" ? await url() : url,\n          GRAPHQL_TRANSPORT_WS_PROTOCOL\n        );\n        let connectionAckTimeout, queuedPing;\n        function enqueuePing() {\n          if (isFinite(keepAlive) && keepAlive > 0) {\n            clearTimeout(queuedPing);\n            queuedPing = setTimeout(() => {\n              if (socket2.readyState === WebSocketImpl.OPEN) {\n                socket2.send(stringifyMessage({ type: MessageType.Ping }));\n                emitter.emit(\"ping\", false, void 0);\n              }\n            }, keepAlive);\n          }\n        }\n        errorOrClosed((errOrEvent) => {\n          connecting = void 0;\n          clearTimeout(connectionAckTimeout);\n          clearTimeout(queuedPing);\n          denied(errOrEvent);\n          if (errOrEvent instanceof TerminatedCloseEvent) {\n            socket2.close(4499, \"Terminated\");\n            socket2.onerror = null;\n            socket2.onclose = null;\n          }\n        });\n        socket2.onerror = (err) => emitter.emit(\"error\", err);\n        socket2.onclose = (event) => emitter.emit(\"closed\", event);\n        socket2.onopen = async () => {\n          try {\n            emitter.emit(\"opened\", socket2);\n            const payload = typeof connectionParams === \"function\" ? await connectionParams() : connectionParams;\n            if (socket2.readyState !== WebSocketImpl.OPEN) return;\n            socket2.send(\n              stringifyMessage(\n                payload ? {\n                  type: MessageType.ConnectionInit,\n                  payload\n                } : {\n                  type: MessageType.ConnectionInit\n                  // payload is completely absent if not provided\n                },\n                replacer\n              )\n            );\n            if (isFinite(connectionAckWaitTimeout) && connectionAckWaitTimeout > 0) {\n              connectionAckTimeout = setTimeout(() => {\n                socket2.close(\n                  CloseCode.ConnectionAcknowledgementTimeout,\n                  \"Connection acknowledgement timeout\"\n                );\n              }, connectionAckWaitTimeout);\n            }\n            enqueuePing();\n          } catch (err) {\n            emitter.emit(\"error\", err);\n            socket2.close(\n              CloseCode.InternalClientError,\n              limitCloseReason(\n                err instanceof Error ? err.message : String(err),\n                \"Internal client error\"\n              )\n            );\n          }\n        };\n        let acknowledged = false;\n        socket2.onmessage = ({ data }) => {\n          try {\n            const message = parseMessage(data, reviver);\n            emitter.emit(\"message\", message);\n            if (message.type === \"ping\" || message.type === \"pong\") {\n              emitter.emit(message.type, true, message.payload);\n              if (message.type === \"pong\") {\n                enqueuePing();\n              } else if (!disablePong) {\n                socket2.send(\n                  stringifyMessage(\n                    message.payload ? {\n                      type: MessageType.Pong,\n                      payload: message.payload\n                    } : {\n                      type: MessageType.Pong\n                      // payload is completely absent if not provided\n                    }\n                  )\n                );\n                emitter.emit(\"pong\", false, message.payload);\n              }\n              return;\n            }\n            if (acknowledged) return;\n            if (message.type !== MessageType.ConnectionAck)\n              throw new Error(\n                `First message cannot be of type ${message.type}`\n              );\n            clearTimeout(connectionAckTimeout);\n            acknowledged = true;\n            emitter.emit(\"connected\", socket2, message.payload, retrying);\n            retrying = false;\n            retries = 0;\n            connected([\n              socket2,\n              new Promise((_, reject) => errorOrClosed(reject))\n            ]);\n          } catch (err) {\n            socket2.onmessage = null;\n            emitter.emit(\"error\", err);\n            socket2.close(\n              CloseCode.BadResponse,\n              limitCloseReason(\n                err instanceof Error ? err.message : String(err),\n                \"Bad response\"\n              )\n            );\n          }\n        };\n      })()\n    )));\n    if (socket.readyState === WebSocketImpl.CLOSING) await throwOnClose;\n    let release = () => {\n    };\n    const released = new Promise((resolve) => release = resolve);\n    return [\n      socket,\n      release,\n      Promise.race([\n        // wait for\n        released.then(() => {\n          if (!locks) {\n            const complete = () => socket.close(1e3, \"Normal Closure\");\n            if (isFinite(lazyCloseTimeoutMs) && lazyCloseTimeoutMs > 0) {\n              lazyCloseTimeout = setTimeout(() => {\n                if (socket.readyState === WebSocketImpl.OPEN) complete();\n              }, lazyCloseTimeoutMs);\n            } else {\n              complete();\n            }\n          }\n        }),\n        // or\n        throwOnClose\n      ])\n    ];\n  }\n  function shouldRetryConnectOrThrow(errOrCloseEvent) {\n    if (isLikeCloseEvent(errOrCloseEvent) && (isFatalInternalCloseCode(errOrCloseEvent.code) || [\n      CloseCode.InternalServerError,\n      CloseCode.InternalClientError,\n      CloseCode.BadRequest,\n      CloseCode.BadResponse,\n      CloseCode.Unauthorized,\n      // CloseCode.Forbidden, might grant access out after retry\n      CloseCode.SubprotocolNotAcceptable,\n      // CloseCode.ConnectionInitialisationTimeout, might not time out after retry\n      // CloseCode.ConnectionAcknowledgementTimeout, might not time out after retry\n      CloseCode.SubscriberAlreadyExists,\n      CloseCode.TooManyInitialisationRequests\n      // 4499, // Terminated, probably because the socket froze, we want to retry\n    ].includes(errOrCloseEvent.code)))\n      throw errOrCloseEvent;\n    if (disposed) return false;\n    if (isLikeCloseEvent(errOrCloseEvent) && errOrCloseEvent.code === 1e3)\n      return locks > 0;\n    if (!retryAttempts || retries >= retryAttempts) throw errOrCloseEvent;\n    if (!shouldRetry(errOrCloseEvent)) throw errOrCloseEvent;\n    return retrying = true;\n  }\n  if (!lazy) {\n    (async () => {\n      locks++;\n      for (; ; ) {\n        try {\n          const [, , throwOnClose] = await connect();\n          await throwOnClose;\n        } catch (errOrCloseEvent) {\n          try {\n            if (!shouldRetryConnectOrThrow(errOrCloseEvent)) return;\n          } catch (errOrCloseEvent2) {\n            return onNonLazyError?.(errOrCloseEvent2);\n          }\n        }\n      }\n    })();\n  }\n  function subscribe(payload, sink) {\n    const id = generateID(payload);\n    let done = false, errored = false, releaser = () => {\n      locks--;\n      done = true;\n    };\n    (async () => {\n      locks++;\n      for (; ; ) {\n        try {\n          const [socket, release, waitForReleaseOrThrowOnClose] = await connect();\n          if (done) return release();\n          const unlisten = emitter.onMessage(id, (message) => {\n            switch (message.type) {\n              case MessageType.Next: {\n                sink.next(message.payload);\n                return;\n              }\n              case MessageType.Error: {\n                errored = true, done = true;\n                sink.error(message.payload);\n                releaser();\n                return;\n              }\n              case MessageType.Complete: {\n                done = true;\n                releaser();\n                return;\n              }\n            }\n          });\n          socket.send(\n            stringifyMessage(\n              {\n                id,\n                type: MessageType.Subscribe,\n                payload\n              },\n              replacer\n            )\n          );\n          releaser = () => {\n            if (!done && socket.readyState === WebSocketImpl.OPEN)\n              socket.send(\n                stringifyMessage(\n                  {\n                    id,\n                    type: MessageType.Complete\n                  },\n                  replacer\n                )\n              );\n            locks--;\n            done = true;\n            release();\n          };\n          await waitForReleaseOrThrowOnClose.finally(unlisten);\n          return;\n        } catch (errOrCloseEvent) {\n          if (!shouldRetryConnectOrThrow(errOrCloseEvent)) return;\n        }\n      }\n    })().then(() => {\n      if (!errored) sink.complete();\n    }).catch((err) => {\n      sink.error(err);\n    });\n    return () => {\n      if (!done) releaser();\n    };\n  }\n  return {\n    on: emitter.on,\n    subscribe,\n    iterate(request) {\n      const pending = [];\n      const deferred = {\n        done: false,\n        error: null,\n        resolve: () => {\n        }\n      };\n      const dispose = subscribe(request, {\n        next(val) {\n          pending.push(val);\n          deferred.resolve();\n        },\n        error(err) {\n          deferred.done = true;\n          deferred.error = err;\n          deferred.resolve();\n        },\n        complete() {\n          deferred.done = true;\n          deferred.resolve();\n        }\n      });\n      const iterator = async function* iterator2() {\n        for (; ; ) {\n          if (!pending.length) {\n            await new Promise((resolve) => deferred.resolve = resolve);\n          }\n          while (pending.length) {\n            yield pending.shift();\n          }\n          if (deferred.error) {\n            throw deferred.error;\n          }\n          if (deferred.done) {\n            return;\n          }\n        }\n      }();\n      iterator.throw = async (err) => {\n        if (!deferred.done) {\n          deferred.done = true;\n          deferred.error = err;\n          deferred.resolve();\n        }\n        return { done: true, value: void 0 };\n      };\n      iterator.return = async () => {\n        dispose();\n        return { done: true, value: void 0 };\n      };\n      return iterator;\n    },\n    async dispose() {\n      disposed = true;\n      if (connecting) {\n        const [socket] = await connecting;\n        socket.close(1e3, \"Normal Closure\");\n      }\n    },\n    terminate() {\n      if (connecting) {\n        emitter.emit(\"closed\", new TerminatedCloseEvent());\n      }\n    }\n  };\n}\nclass TerminatedCloseEvent extends Error {\n  name = \"TerminatedCloseEvent\";\n  message = \"4499: Terminated\";\n  code = 4499;\n  reason = \"Terminated\";\n  wasClean = false;\n}\nfunction isLikeCloseEvent(val) {\n  return isObject(val) && \"code\" in val && \"reason\" in val;\n}\nfunction isFatalInternalCloseCode(code) {\n  if ([\n    1e3,\n    // Normal Closure is not an erroneous close code\n    1001,\n    // Going Away\n    1006,\n    // Abnormal Closure\n    1005,\n    // No Status Received\n    1012,\n    // Service Restart\n    1013,\n    // Try Again Later\n    1014\n    // Bad Gateway\n  ].includes(code))\n    return false;\n  return code >= 1e3 && code <= 1999;\n}\nfunction isWebSocket(val) {\n  return typeof val === \"function\" && \"constructor\" in val && \"CLOSED\" in val && \"CLOSING\" in val && \"CONNECTING\" in val && \"OPEN\" in val;\n}\n\nexport { CloseCode, GRAPHQL_TRANSPORT_WS_PROTOCOL, MessageType, TerminatedCloseEvent, createClient, parseMessage, stringifyMessage };\n","<!--\n@file src/routes/(app)/graphql-test/+page.svelte\n@component\n**GraphQL Subscription Test Page for SveltyCMS**\n\n### Features:\n- Connects to the GraphQL WebSocket endpoint using graphql-ws.\n- Subscribes to the `postAdded` event and displays new posts in real time.\n- Shows errors if the subscription fails.\n- Demonstrates live updates from the backend using GraphQL subscriptions.\n-->\n<script lang=\"ts\">\n\timport { logger } from '@shared/utils/logger';\n\timport { onMount } from 'svelte';\n\timport { createClient } from 'graphql-ws';\n\n\tlet posts: any[] = $state([]);\n\tlet error: any = $state(null);\n\n\tonMount(() => {\n\t\tconst client = createClient({\n\t\t\turl: 'ws://localhost:3001/api/graphql'\n\t\t});\n\n\t\tclient.subscribe(\n\t\t\t{\n\t\t\t\tquery: `\n\t\t\t\t\tsubscription PostAdded {\n\t\t\t\t\t\tpostAdded {\n\t\t\t\t\t\t\t_id\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`\n\t\t\t},\n\t\t\t{\n\t\t\t\tnext: (data) => {\n\t\t\t\t\tif (data?.data?.postAdded) {\n\t\t\t\t\t\tposts = [...posts, data.data.postAdded];\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: (err) => {\n\t\t\t\t\terror = err;\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tlogger.debug('Subscription complete');\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t});\n</script>\n\n<h1>GraphQL Subscription Test</h1>\n\n{#if error}\n\t<p style=\"color: red\">{JSON.stringify(error, null, 2)}</p>\n{/if}\n\n<h2>New Posts:</h2>\n<ul>\n\t{#each posts as post}\n\t\t<li>{post.title} ({post._id})</li>\n\t{/each}\n</ul>\n"],"names":["extendedTypeof","val","isObject","areGraphQLFormattedErrors","obj","ob","limitCloseReason","reason","whenTooLong","GRAPHQL_TRANSPORT_WS_PROTOCOL","CloseCode","CloseCode2","MessageType","MessageType2","validateMessage","parseMessage","data","reviver","stringifyMessage","msg","replacer","createClient","options","url","connectionParams","lazy","onNonLazyError","lazyCloseTimeoutMs","keepAlive","disablePong","connectionAckWaitTimeout","retryAttempts","retryWait","retries2","retryDelaySeconds","resolve","shouldRetry","isLikeCloseEvent","on","webSocketImpl","generateID","c","r","ws","isWebSocket","WebSocketImpl","emitter","message","listeners2","id","listener","message2","listeners","event","l","args","errorOrClosed","cb","listening","err","unlisten","connecting","locks","lazyCloseTimeout","retrying","retries","disposed","connect","socket","throwOnClose","connected","denied","socket2","connectionAckTimeout","queuedPing","enqueuePing","errOrEvent","TerminatedCloseEvent","payload","acknowledged","_","reject","release","released","complete","shouldRetryConnectOrThrow","errOrCloseEvent","isFatalInternalCloseCode","errOrCloseEvent2","subscribe","sink","done","errored","releaser","waitForReleaseOrThrowOnClose","request","pending","deferred","dispose","iterator","code","posts","$.state","$.proxy","error","onMount","$.set","logger","p","root_1","$.template_effect","$0","$.set_text","text","$.get","$$render","consequent","ul","$.sibling","node","$.index","$$anchor","post","li","root_2","text_1"],"mappings":"mWAAA,SAASA,EAAeC,EAAK,CAC3B,OAAIA,IAAQ,KACH,OAEL,MAAM,QAAQA,CAAG,EACZ,QAEF,OAAOA,CAChB,CACA,SAASC,EAASD,EAAK,CACrB,OAAOD,EAAeC,CAAG,IAAM,QACjC,CAOA,SAASE,GAA0BC,EAAK,CACtC,OAAO,MAAM,QAAQA,CAAG,GACxBA,EAAI,OAAS,GACbA,EAAI,MAAOC,GAAO,YAAaA,CAAE,CACnC,CACA,SAASC,GAAiBC,EAAQC,EAAa,CAC7C,OAAOD,EAAO,OAAS,IAAMA,EAASC,CACxC,CAEA,MAAMC,GAAgC,uBAEtC,IAAIC,GAA8BC,IAChCA,EAAWA,EAAW,oBAAyB,IAAI,EAAI,sBACvDA,EAAWA,EAAW,oBAAyB,IAAI,EAAI,sBACvDA,EAAWA,EAAW,WAAgB,IAAI,EAAI,aAC9CA,EAAWA,EAAW,YAAiB,IAAI,EAAI,cAC/CA,EAAWA,EAAW,aAAkB,IAAI,EAAI,eAChDA,EAAWA,EAAW,UAAe,IAAI,EAAI,YAC7CA,EAAWA,EAAW,yBAA8B,IAAI,EAAI,2BAC5DA,EAAWA,EAAW,gCAAqC,IAAI,EAAI,kCACnEA,EAAWA,EAAW,iCAAsC,IAAI,EAAI,mCACpEA,EAAWA,EAAW,wBAA6B,IAAI,EAAI,0BAC3DA,EAAWA,EAAW,8BAAmC,IAAI,EAAI,gCAC1DA,IACND,GAAa,CAAA,CAAE,EACdE,GAAgCC,IAClCA,EAAa,eAAoB,kBACjCA,EAAa,cAAmB,iBAChCA,EAAa,KAAU,OACvBA,EAAa,KAAU,OACvBA,EAAa,UAAe,YAC5BA,EAAa,KAAU,OACvBA,EAAa,MAAW,QACxBA,EAAa,SAAc,WACpBA,IACND,GAAe,CAAA,CAAE,EACpB,SAASE,GAAgBb,EAAK,CAC5B,GAAI,CAACC,EAASD,CAAG,EACf,MAAM,IAAI,MACR,gDAAgDD,EAAeC,CAAG,CAAC,EACzE,EAEE,GAAI,CAACA,EAAI,KACP,MAAM,IAAI,MAAM,wCAAwC,EAE1D,GAAI,OAAOA,EAAI,MAAS,SACtB,MAAM,IAAI,MACR,kEAAkED,EAChEC,EAAI,IACZ,CAAO,EACP,EAEE,OAAQA,EAAI,KAAI,CACd,IAAK,kBACL,IAAK,iBACL,IAAK,OACL,IAAK,OAAmB,CACtB,GAAIA,EAAI,SAAW,MAAQ,CAACC,EAASD,EAAI,OAAO,EAC9C,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,4FAA4FA,EAAI,OAAO,GAC7H,EAEM,KACF,CACA,IAAK,YAA6B,CAChC,GAAI,OAAOA,EAAI,IAAO,SACpB,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,+DAA+DD,EACzEC,EAAI,EAChB,CAAW,EACX,EAEM,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,8CACtB,EAEM,GAAI,CAACC,EAASD,EAAI,OAAO,EACvB,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,qEAAqED,EAC/EC,EAAI,OAChB,CAAW,EACX,EAEM,GAAI,OAAOA,EAAI,QAAQ,OAAU,SAC/B,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,0EAA0ED,EACpFC,EAAI,QAAQ,KACxB,CAAW,EACX,EAEM,GAAIA,EAAI,QAAQ,WAAa,MAAQ,CAACC,EAASD,EAAI,QAAQ,SAAS,EAClE,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,uGAAuGD,EACjHC,EAAI,QAAQ,SACxB,CAAW,EACX,EAEM,GAAIA,EAAI,QAAQ,eAAiB,MAAQD,EAAeC,EAAI,QAAQ,aAAa,IAAM,SACrF,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,wGAAwGD,EAClHC,EAAI,QAAQ,aACxB,CAAW,EACX,EAEM,GAAIA,EAAI,QAAQ,YAAc,MAAQ,CAACC,EAASD,EAAI,QAAQ,UAAU,EACpE,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,wGAAwGD,EAClHC,EAAI,QAAQ,UACxB,CAAW,EACX,EAEM,KACF,CACA,IAAK,OAAmB,CACtB,GAAI,OAAOA,EAAI,IAAO,SACpB,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,+DAA+DD,EACzEC,EAAI,EAChB,CAAW,EACX,EAEM,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,8CACtB,EAEM,GAAI,CAACC,EAASD,EAAI,OAAO,EACvB,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,qEAAqED,EAC/EC,EAAI,OAChB,CAAW,EACX,EAEM,KACF,CACA,IAAK,QAAqB,CACxB,GAAI,OAAOA,EAAI,IAAO,SACpB,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,+DAA+DD,EACzEC,EAAI,EAChB,CAAW,EACX,EAEM,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,8CACtB,EAEM,GAAI,CAACE,GAA0BF,EAAI,OAAO,EACxC,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,sFAAsF,KAAK,UACrGA,EAAI,OAChB,CAAW,EACX,EAEM,KACF,CACA,IAAK,WAA2B,CAC9B,GAAI,OAAOA,EAAI,IAAO,SACpB,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,+DAA+DD,EACzEC,EAAI,EAChB,CAAW,EACX,EAEM,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MACR,IAAIA,EAAI,IAAI,8CACtB,EAEM,KACF,CACA,QACE,MAAM,IAAI,MAAM,oCAAoCA,EAAI,IAAI,GAAG,CACrE,CACE,OAAOA,CACT,CACA,SAASc,GAAaC,EAAMC,EAAS,CACnC,OAAOH,GACL,OAAOE,GAAS,SAAW,KAAK,MAAMA,EAAMC,CAAO,EAAID,CAC3D,CACA,CACA,SAASE,EAAiBC,EAAKC,EAAU,CACvC,OAAAN,GAAgBK,CAAG,EACZ,KAAK,UAAUA,EAAKC,CAAQ,CACrC,CCzMA,SAASC,GAAaC,EAAS,CAC7B,KAAM,CACJ,IAAAC,EACA,iBAAAC,EACA,KAAAC,EAAO,GACP,eAAAC,EAAiB,QAAQ,MACzB,iBAAkBC,EAAqB,EACvC,UAAAC,EAAY,EACZ,YAAAC,EACA,yBAAAC,EAA2B,EAC3B,cAAAC,EAAgB,EAChB,UAAAC,EAAY,eAA4CC,EAAU,CAChE,MAAMC,EAAoB,KAAK,IAAI,EAAGD,CAAQ,EAC9C,MAAM,IAAI,QACPE,GAAY,WACXA,EACAD,EAAoB,IACpB,KAAK,MAAM,KAAK,OAAM,EAAM,KAAa,GAAG,CACtD,CACA,CACI,EACA,YAAAE,EAAcC,EACd,GAAAC,EACA,cAAAC,EAQA,WAAAC,GAAa,UAAwB,CACnC,MAAO,uCAAuC,QAAQ,QAAUC,GAAM,CACpE,MAAMC,EAAI,KAAK,OAAM,EAAK,GAAK,EAC/B,OADsCD,GAAK,IAAMC,EAAIA,EAAI,EAAI,GACpD,SAAS,EAAE,CACtB,CAAC,CACH,EACA,oBAAqBtB,EACrB,mBAAoBH,EACxB,EAAMK,EACJ,IAAIqB,EACJ,GAAIJ,EAAe,CACjB,GAAI,CAACK,GAAYL,CAAa,EAC5B,MAAM,IAAI,MAAM,2CAA2C,EAE7DI,EAAKJ,CACP,MAAW,OAAO,UAAc,IAC9BI,EAAK,UACI,OAAO,OAAW,IAC3BA,EAAK,OAAO,WACZ,OAAO,aACE,OAAO,OAAW,MAC3BA,EAAK,OAAO,WACZ,OAAO,cAET,GAAI,CAACA,EACH,MAAM,IAAI,MACR,uIACN,EACE,MAAME,EAAgBF,EAChBG,GAAW,IAAM,CACrB,MAAMC,GAA2B,IAAM,CACrC,MAAMC,EAAa,CAAA,EACnB,MAAO,CACL,GAAGC,EAAIC,EAAU,CACf,OAAAF,EAAWC,CAAE,EAAIC,EACV,IAAM,CACX,OAAOF,EAAWC,CAAE,CACtB,CACF,EACA,KAAKE,EAAU,CACT,OAAQA,GAAUH,EAAWG,EAAS,EAAE,IAAIA,CAAQ,CAC1D,CACR,CACI,GAAC,EACKC,EAAY,CAChB,WAAYd,GAAI,WAAa,CAACA,EAAG,UAAU,EAAI,CAAA,EAC/C,OAAQA,GAAI,OAAS,CAACA,EAAG,MAAM,EAAI,CAAA,EACnC,UAAWA,GAAI,UAAY,CAACA,EAAG,SAAS,EAAI,CAAA,EAC5C,KAAMA,GAAI,KAAO,CAACA,EAAG,IAAI,EAAI,CAAA,EAC7B,KAAMA,GAAI,KAAO,CAACA,EAAG,IAAI,EAAI,CAAA,EAC7B,QAASA,GAAI,QAAU,CAACS,EAAQ,KAAMT,EAAG,OAAO,EAAI,CAACS,EAAQ,IAAI,EACjE,OAAQT,GAAI,OAAS,CAACA,EAAG,MAAM,EAAI,CAAA,EACnC,MAAOA,GAAI,MAAQ,CAACA,EAAG,KAAK,EAAI,CAAA,CACtC,EACI,MAAO,CACL,UAAWS,EAAQ,GACnB,GAAGM,EAAOH,EAAU,CAClB,MAAMI,EAAIF,EAAUC,CAAK,EACzB,OAAAC,EAAE,KAAKJ,CAAQ,EACR,IAAM,CACXI,EAAE,OAAOA,EAAE,QAAQJ,CAAQ,EAAG,CAAC,CACjC,CACF,EACA,KAAKG,KAAUE,EAAM,CACnB,UAAWL,IAAY,CAAC,GAAGE,EAAUC,CAAK,CAAC,EACzCH,EAAS,GAAGK,CAAI,CAEpB,CACN,CACE,GAAC,EACD,SAASC,EAAcC,EAAI,CACzB,MAAMC,EAAY,CAEhBZ,EAAQ,GAAG,QAAUa,GAAQ,CAC3BD,EAAU,QAASE,GAAaA,EAAQ,CAAE,EAC1CH,EAAGE,CAAG,CACR,CAAC,EAEDb,EAAQ,GAAG,SAAWO,GAAU,CAC9BK,EAAU,QAASE,GAAaA,EAAQ,CAAE,EAC1CH,EAAGJ,CAAK,CACV,CAAC,CACP,CACE,CACA,IAAIQ,EAAYC,EAAQ,EAAGC,EAAkBC,EAAW,GAAOC,EAAU,EAAGC,EAAW,GACvF,eAAeC,GAAU,CACvB,aAAaJ,CAAgB,EAC7B,KAAM,CAACK,EAAQC,CAAY,EAAI,MAAOR,IAAeA,EAAa,IAAI,QACpE,CAACS,EAAWC,KAAY,SAAY,CAClC,GAAIP,EAAU,CAEZ,GADA,MAAMhC,EAAUiC,CAAO,EACnB,CAACH,EACH,OAAAD,EAAa,OACNU,EAAO,CAAE,KAAM,IAAK,OAAQ,wBAAwB,CAAE,EAE/DN,GACF,CACAnB,EAAQ,KAAK,aAAckB,CAAQ,EACnC,MAAMQ,EAAU,IAAI3B,EAClB,OAAOtB,GAAQ,WAAa,MAAMA,EAAG,EAAKA,EAC1Cd,EACV,EACQ,IAAIgE,EAAsBC,EAC1B,SAASC,GAAc,CACjB,SAAS/C,CAAS,GAAKA,EAAY,IACrC,aAAa8C,CAAU,EACvBA,EAAa,WAAW,IAAM,CACxBF,EAAQ,aAAe3B,EAAc,OACvC2B,EAAQ,KAAKtD,EAAiB,CAAE,KAAMN,EAAY,IAAI,CAAE,CAAC,EACzDkC,EAAQ,KAAK,OAAQ,GAAO,MAAM,EAEtC,EAAGlB,CAAS,EAEhB,CACA4B,EAAeoB,GAAe,CAC5Bf,EAAa,OACb,aAAaY,CAAoB,EACjC,aAAaC,CAAU,EACvBH,EAAOK,CAAU,EACbA,aAAsBC,KACxBL,EAAQ,MAAM,KAAM,YAAY,EAChCA,EAAQ,QAAU,KAClBA,EAAQ,QAAU,KAEtB,CAAC,EACDA,EAAQ,QAAWb,GAAQb,EAAQ,KAAK,QAASa,CAAG,EACpDa,EAAQ,QAAWnB,GAAUP,EAAQ,KAAK,SAAUO,CAAK,EACzDmB,EAAQ,OAAS,SAAY,CAC3B,GAAI,CACF1B,EAAQ,KAAK,SAAU0B,CAAO,EAC9B,MAAMM,EAAU,OAAOtD,GAAqB,WAAa,MAAMA,EAAgB,EAAKA,EACpF,GAAIgD,EAAQ,aAAe3B,EAAc,KAAM,OAC/C2B,EAAQ,KACNtD,EACE4D,EAAU,CACR,KAAMlE,EAAY,eAClB,QAAAkE,CAClB,EAAoB,CACF,KAAMlE,EAAY,cAEpC,EACgBQ,CAChB,CACA,EACgB,SAASU,CAAwB,GAAKA,EAA2B,IACnE2C,EAAuB,WAAW,IAAM,CACtCD,EAAQ,MACN9D,EAAU,iCACV,oCAClB,CACc,EAAGoB,CAAwB,GAE7B6C,EAAW,CACb,OAAShB,EAAK,CACZb,EAAQ,KAAK,QAASa,CAAG,EACzBa,EAAQ,MACN9D,EAAU,oBACVJ,GACEqD,aAAe,MAAQA,EAAI,QAAU,OAAOA,CAAG,EAC/C,uBAChB,CACA,CACU,CACF,EACA,IAAIoB,EAAe,GACnBP,EAAQ,UAAY,CAAC,CAAE,KAAAxD,KAAW,CAChC,GAAI,CACF,MAAM+B,EAAUhC,GAAaC,EAAMC,EAAO,EAE1C,GADA6B,EAAQ,KAAK,UAAWC,CAAO,EAC3BA,EAAQ,OAAS,QAAUA,EAAQ,OAAS,OAAQ,CACtDD,EAAQ,KAAKC,EAAQ,KAAM,GAAMA,EAAQ,OAAO,EAC5CA,EAAQ,OAAS,OACnB4B,EAAW,EACD9C,IACV2C,EAAQ,KACNtD,EACE6B,EAAQ,QAAU,CAChB,KAAMnC,EAAY,KAClB,QAASmC,EAAQ,OACvC,EAAwB,CACF,KAAMnC,EAAY,IAExC,CACA,CACA,EACgBkC,EAAQ,KAAK,OAAQ,GAAOC,EAAQ,OAAO,GAE7C,MACF,CACA,GAAIgC,EAAc,OAClB,GAAIhC,EAAQ,OAASnC,EAAY,cAC/B,MAAM,IAAI,MACR,mCAAmCmC,EAAQ,IAAI,EAC/D,EACY,aAAa0B,CAAoB,EACjCM,EAAe,GACfjC,EAAQ,KAAK,YAAa0B,EAASzB,EAAQ,QAASiB,CAAQ,EAC5DA,EAAW,GACXC,EAAU,EACVK,EAAU,CACRE,EACA,IAAI,QAAQ,CAACQ,GAAGC,KAAWzB,EAAcyB,EAAM,CAAC,CAC9D,CAAa,CACH,OAAStB,EAAK,CACZa,EAAQ,UAAY,KACpB1B,EAAQ,KAAK,QAASa,CAAG,EACzBa,EAAQ,MACN9D,EAAU,YACVJ,GACEqD,aAAe,MAAQA,EAAI,QAAU,OAAOA,CAAG,EAC/C,cAChB,CACA,CACU,CACF,CACF,GAAC,CACP,IACQS,EAAO,aAAevB,EAAc,SAAS,MAAMwB,EACvD,IAAIa,EAAU,IAAM,CACpB,EACA,MAAMC,EAAW,IAAI,QAAShD,GAAY+C,EAAU/C,CAAO,EAC3D,MAAO,CACLiC,EACAc,EACA,QAAQ,KAAK,CAEXC,EAAS,KAAK,IAAM,CAClB,GAAI,CAACrB,EAAO,CACV,MAAMsB,EAAW,IAAMhB,EAAO,MAAM,IAAK,gBAAgB,EACrD,SAASzC,CAAkB,GAAKA,EAAqB,EACvDoC,EAAmB,WAAW,IAAM,CAC9BK,EAAO,aAAevB,EAAc,MAAMuC,EAAQ,CACxD,EAAGzD,CAAkB,EAErByD,EAAQ,CAEZ,CACF,CAAC,EAEDf,CACR,CAAO,CACP,CACE,CACA,SAASgB,EAA0BC,EAAiB,CAClD,GAAIjD,EAAiBiD,CAAe,IAAMC,GAAyBD,EAAgB,IAAI,GAAK,CAC1F5E,EAAU,oBACVA,EAAU,oBACVA,EAAU,WACVA,EAAU,YACVA,EAAU,aAEVA,EAAU,yBAGVA,EAAU,wBACVA,EAAU,6BAEhB,EAAM,SAAS4E,EAAgB,IAAI,GAC7B,MAAMA,EACR,GAAIpB,EAAU,MAAO,GACrB,GAAI7B,EAAiBiD,CAAe,GAAKA,EAAgB,OAAS,IAChE,OAAOxB,EAAQ,EAEjB,GADI,CAAC/B,GAAiBkC,GAAWlC,GAC7B,CAACK,EAAYkD,CAAe,EAAG,MAAMA,EACzC,OAAOtB,EAAW,EACpB,CACKvC,IACF,SAAY,CAEX,IADAqC,MAEE,GAAI,CACF,KAAM,CAAA,CAAA,CAAKO,CAAY,EAAI,MAAMF,EAAO,EACxC,MAAME,CACR,OAASiB,EAAiB,CACxB,GAAI,CACF,GAAI,CAACD,EAA0BC,CAAe,EAAG,MACnD,OAASE,EAAkB,CACzB,OAAO9D,IAAiB8D,CAAgB,CAC1C,CACF,CAEJ,GAAC,EAEH,SAASC,EAAUX,EAASY,EAAM,CAChC,MAAMzC,EAAKT,GAAWsC,CAAO,EAC7B,IAAIa,EAAO,GAAOC,EAAU,GAAOC,EAAW,IAAM,CAClD/B,IACA6B,EAAO,EACT,EACA,OAAC,SAAY,CAEX,IADA7B,MAEE,GAAI,CACF,KAAM,CAACM,EAAQc,EAASY,CAA4B,EAAI,MAAM3B,EAAO,EACrE,GAAIwB,EAAM,OAAOT,EAAO,EACxB,MAAMtB,EAAWd,EAAQ,UAAUG,EAAKF,GAAY,CAClD,OAAQA,EAAQ,KAAI,CAClB,KAAKnC,EAAY,KAAM,CACrB8E,EAAK,KAAK3C,EAAQ,OAAO,EACzB,MACF,CACA,KAAKnC,EAAY,MAAO,CACtBgF,EAAU,GAAMD,EAAO,GACvBD,EAAK,MAAM3C,EAAQ,OAAO,EAC1B8C,EAAQ,EACR,MACF,CACA,KAAKjF,EAAY,SAAU,CACzB+E,EAAO,GACPE,EAAQ,EACR,MACF,CACd,CACU,CAAC,EACDzB,EAAO,KACLlD,EACE,CACE,GAAA+B,EACA,KAAMrC,EAAY,UAClB,QAAAkE,CAChB,EACc1D,CACd,CACA,EACUyE,EAAW,IAAM,CACX,CAACF,GAAQvB,EAAO,aAAevB,EAAc,MAC/CuB,EAAO,KACLlD,EACE,CACE,GAAA+B,EACA,KAAMrC,EAAY,QACtC,EACkBQ,CAClB,CACA,EACY0C,IACA6B,EAAO,GACPT,EAAO,CACT,EACA,MAAMY,EAA6B,QAAQlC,CAAQ,EACnD,MACF,OAAS0B,EAAiB,CACxB,GAAI,CAACD,EAA0BC,CAAe,EAAG,MACnD,CAEJ,GAAC,EAAI,KAAK,IAAM,CACTM,GAASF,EAAK,SAAQ,CAC7B,CAAC,EAAE,MAAO/B,GAAQ,CAChB+B,EAAK,MAAM/B,CAAG,CAChB,CAAC,EACM,IAAM,CACNgC,GAAME,EAAQ,CACrB,CACF,CACA,MAAO,CACL,GAAI/C,EAAQ,GACZ,UAAA2C,EACA,QAAQM,EAAS,CACf,MAAMC,EAAU,CAAA,EACVC,EAAW,CACf,KAAM,GACN,MAAO,KACP,QAAS,IAAM,CACf,CACR,EACYC,EAAUT,EAAUM,EAAS,CACjC,KAAK9F,EAAK,CACR+F,EAAQ,KAAK/F,CAAG,EAChBgG,EAAS,QAAO,CAClB,EACA,MAAMtC,EAAK,CACTsC,EAAS,KAAO,GAChBA,EAAS,MAAQtC,EACjBsC,EAAS,QAAO,CAClB,EACA,UAAW,CACTA,EAAS,KAAO,GAChBA,EAAS,QAAO,CAClB,CACR,CAAO,EACKE,GAAW,iBAA4B,CAC3C,OAAW,CAIT,IAHKH,EAAQ,QACX,MAAM,IAAI,QAAS7D,GAAY8D,EAAS,QAAU9D,CAAO,EAEpD6D,EAAQ,QACb,MAAMA,EAAQ,MAAK,EAErB,GAAIC,EAAS,MACX,MAAMA,EAAS,MAEjB,GAAIA,EAAS,KACX,MAEJ,CACF,GAAC,EACD,OAAAE,EAAS,MAAQ,MAAOxC,IACjBsC,EAAS,OACZA,EAAS,KAAO,GAChBA,EAAS,MAAQtC,EACjBsC,EAAS,QAAO,GAEX,CAAE,KAAM,GAAM,MAAO,MAAM,GAEpCE,EAAS,OAAS,UAChBD,EAAO,EACA,CAAE,KAAM,GAAM,MAAO,MAAM,GAE7BC,CACT,EACA,MAAM,SAAU,CAEd,GADAjC,EAAW,GACPL,EAAY,CACd,KAAM,CAACO,CAAM,EAAI,MAAMP,EACvBO,EAAO,MAAM,IAAK,gBAAgB,CACpC,CACF,EACA,WAAY,CACNP,GACFf,EAAQ,KAAK,SAAU,IAAI+B,EAAsB,CAErD,CACJ,CACA,CACA,MAAMA,WAA6B,KAAM,CACvC,KAAO,uBACP,QAAU,mBACV,KAAO,KACP,OAAS,aACT,SAAW,EACb,CACA,SAASxC,EAAiBpC,EAAK,CAC7B,OAAOC,EAASD,CAAG,GAAK,SAAUA,GAAO,WAAYA,CACvD,CACA,SAASsF,GAAyBa,EAAM,CACtC,MAAI,CACF,IAEA,KAEA,KAEA,KAEA,KAEA,KAEA,IAEJ,EAAI,SAASA,CAAI,EACN,GACFA,GAAQ,KAAOA,GAAQ,IAChC,CACA,SAASxD,GAAY3C,EAAK,CACxB,OAAO,OAAOA,GAAQ,YAAc,gBAAiBA,GAAO,WAAYA,GAAO,YAAaA,GAAO,eAAgBA,GAAO,SAAUA,CACtI,2JC/dA,UAKK,IAAAoG,EAAeC,EAAMC,GAAA,CAAA,CAAA,CAAA,EACrBC,EAAaF,EAAO,IAAI,EAE5BG,GAAO,IAAO,CACEpF,GAAY,CAC1B,IAAK,iCAAgC,CAAA,EAG/B,WAEL,MAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAUL,KAAOL,GAAS,CACXA,GAAM,MAAM,WACf0F,EAAAL,QAAYA,CAAK,EAAErF,EAAK,KAAK,SAAS,EAAA,EAAA,CAExC,EACA,MAAQ2C,GAAQ,CACf+C,EAAAF,EAAQ7C,EAAG,EAAA,CACZ,EACA,SAAQ,IAAQ,CACfgD,GAAO,MAAM,uBAAuB,CACrC,GAGH,CAAC,yCAMAC,EAACC,GAAA,OAADD,EAAC,EAAA,IAADA,CAAC,EAAqBE,GAAAC,GAAAC,GAAAC,EAAAF,CAAA,EAAA,CAAA,IAAA,KAAK,UAASG,EAACV,CAAK,EAAE,KAAM,CAAC,CAAA,CAAA,MAAnDI,CAAC,cADEJ,CAAK,GAAAW,EAAAC,CAAA,QAKTC,EAAEC,EAAAC,EAAA,CAAA,KAAFF,EAAE,GAAA,IAAAH,EACKb,CAAK,EAAAmB,GAAA,CAAAC,EAAIC,IAAI,KAClBC,EAAEC,GAAA,OAAFD,CAAE,IAAFA,CAAE,EAAEb,GAAA,IAAAE,GAAAa,EAAA,GAAAX,EAAAQ,CAAI,EAAC,OAAK,EAAA,KAAAR,EAAIQ,CAAI,EAAC,KAAG,EAAA,GAAA,CAAA,MAA1BC,CAAE,MAFJN,CAAE,aATK","x_google_ignoreList":[0,1]}