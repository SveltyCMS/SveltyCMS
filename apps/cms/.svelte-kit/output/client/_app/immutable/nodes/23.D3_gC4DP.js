const __vite__mapDeps = (i, m = __vite__mapDeps, d = m.f || (m.f = ['../chunks/GeUt2_20.js', '../chunks/DrlZFkx8.js', '../chunks/rsSWfq8L.js'])) =>
	i.map((i) => d[i]);
import { i as O } from '../chunks/zi73tRJP.js';
import { o as Ar, a as Wr } from '../chunks/CMZtchEj.js';
import {
	p as Le,
	f as B,
	a as ze,
	g as e,
	u as F,
	c as r,
	A as ht,
	r as a,
	bx as ut,
	aZ as Jr,
	n as Gt,
	e as Dr,
	t as R,
	s as l,
	z as $t,
	b as C,
	d as me,
	x as Ht,
	B as rr
} from '../chunks/DrlZFkx8.js';
import { c as se, a as c, f as k, t as bt, p as Kr, s as D, d as Ot, e as oa } from '../chunks/CTjXDULS.js';
import { e as Pt, i as ha } from '../chunks/BXe5mj2j.js';
import { c as Ut } from '../chunks/7bh91wXp.js';
import { f as ft, c as G, d as Ya, b as P, e as Yr, r as Yt, a as Xe, h as ir } from '../chunks/MEFvoR_D.js';
import { b as Oa, c as Qr } from '../chunks/D4QnGYgQ.js';
import { r as vt, p as Re, s as Xr, a as ei } from '../chunks/DePHBZW_.js';
import { i as yt } from '../chunks/DHPSYX_z.js';
import { h as ti } from '../chunks/IGLJqrie.js';
import { t as ai, a as ri, b as ii } from '../chunks/0XeaN6pZ.js';
import { a as oi } from '../chunks/BEiD40NV.js';
import { d as si } from '../chunks/D3eWcrZU.js';
import { l as it } from '../chunks/BvngfGKt.js';
import {
	q as ni,
	A as Be,
	p as li,
	at as ci,
	au as di,
	E as ra,
	av as ui,
	F as Ia,
	x as jr,
	w as fi,
	r as vi,
	K as pi,
	Z as or,
	g as mi,
	t as pe,
	ab as _i,
	aw as gt
} from '../chunks/C-hhfhAN.js';
import { g as gi, l as bi } from '../chunks/7IKENDK9.js';
import { P as Ua } from '../chunks/Ds4HF5TW.js';
import { F as ia } from '../chunks/DE21BT69.js';
import {
	cf as yi,
	cg as hi,
	ch as xi,
	o as xa,
	az as Qa,
	bj as $a,
	ci as sa,
	R as ya,
	cj as wi,
	br as Xa,
	ck as ki,
	bm as Fi,
	bn as Ti,
	cl as Ha,
	cm as Cr,
	cn as Ga,
	co as sr,
	cp as Ei,
	cq as Pi,
	cr as Ai,
	cs as Di,
	ct as nr,
	cu as lr,
	cv as ji,
	cw as Ci,
	cx as cr,
	cy as dr,
	cz as Ii,
	cA as ur,
	cB as fr,
	cC as vr,
	cD as Ui,
	cE as $i,
	c9 as Si,
	ca as Oi,
	cF as Ri,
	cG as Li,
	cH as zi,
	cI as Mi,
	cJ as pr,
	ba as Ni,
	cK as Bi,
	bb as Vi,
	cL as qi,
	bc as Ir,
	bd as Hi,
	be as Gi,
	cM as Zi,
	bl as Ur,
	cN as Wi,
	bp as $r,
	bg as Sr,
	cO as Ji,
	cP as Ki,
	cQ as Yi,
	cR as mr,
	cS as _r,
	cT as Qi,
	cU as Xi,
	cV as eo,
	cW as to,
	cX as ao,
	cY as gr,
	cZ as ro,
	c_ as io,
	c$ as oo,
	d0 as so,
	d1 as no,
	d2 as lo,
	d3 as co,
	d4 as uo,
	d5 as fo,
	d6 as vo,
	d7 as po,
	d8 as mo,
	d9 as _o,
	da as go,
	db as bo,
	dc as yo,
	dd as ho,
	de as xo,
	df as wo,
	dg as br,
	dh as ko,
	di as Fo,
	bk as To,
	dj as yr,
	dk as Eo,
	dl as Po
} from '../chunks/N8Jg0v49.js';
import { T as Ao } from '../chunks/B0T_vZHe.js';
import { T as hr } from '../chunks/DqR3GK4e.js';
import { T as Do } from '../chunks/_e9Aq20d.js';
import { p as Sa } from '../chunks/CxX94NXM.js';
import { modalState as Qe } from '../chunks/GeUt2_20.js';
import { F as Or, a as jo, e as Co } from '../chunks/n4ph2YWf.js';
import { b as Io } from '../chunks/YQp2a1pQ.js';
import { q as Uo } from '../chunks/Ccw7PXcW.js';
import { b as na } from '../chunks/Cl42wY7v.js';
import { P as $o, a as So } from '../chunks/PsFRGuNZ.js';
import { d as Oo } from '../chunks/BH6PMYIi.js';
import { f as Ro } from '../chunks/TC87idKr.js';
import { A as St } from '../chunks/C1IuIusZ.js';
import { a as Lo } from '../chunks/B9ygI19o.js';
import { p as zo, h as Mo, a as No, j as Bo, E as Vo } from '../chunks/Bg__saH3.js';
import { s as Ue } from '../chunks/DhHAlOU0.js';
import { c as Rr, m as pt, a as Lr, u as qo, n as Ho } from '../chunks/DtaauZrZ.js';
import { _ as Go } from '../chunks/PPVm8Dsz.js';
import '../chunks/BKIh0tuc.js';
import { w as Zo } from '../chunks/DvgRl2rN.js';
import { P as Wo } from '../chunks/C6jjkVLf.js';
import { h as Jo } from '../chunks/-PV6rnhC.js';
const ct = Rr();
var Ko = k('<button><!></button>');
function Yo(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = F(() => t.element),
		h = F(() => t.children),
		x = F(() => ut(o, ['element', 'children'])),
		w = F(() => pt(n().getClearTriggerProps(), e(x)));
	var m = se(),
		p = B(m);
	{
		var E = (u) => {
				var d = se(),
					j = B(d);
				(Ue(
					j,
					() => e(s),
					() => e(w)
				),
					c(u, d));
			},
			U = (u) => {
				var d = Ko();
				ft(d, () => ({ ...e(w) }));
				var j = r(d);
				(Ue(j, () => e(h) ?? ht), a(d), c(u, d));
			};
		O(p, (u) => {
			e(s) ? u(E) : u(U, !1);
		});
	}
	(c(i, m), ze());
}
var Qo = k('<div><!></div>');
function Xo(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = F(() => t.element),
		h = F(() => t.children),
		x = F(() => ut(o, ['element', 'children'])),
		w = F(() => pt(n().getDropzoneProps(o), e(x)));
	var m = se(),
		p = B(m);
	{
		var E = (u) => {
				var d = se(),
					j = B(d);
				(Ue(
					j,
					() => e(s),
					() => e(w)
				),
					c(u, d));
			},
			U = (u) => {
				var d = Qo();
				ft(d, () => ({ ...e(w) }));
				var j = r(d);
				(Ue(j, () => e(h) ?? ht), a(d), c(u, d));
			};
		O(p, (u) => {
			e(s) ? u(E) : u(U, !1);
		});
	}
	(c(i, m), ze());
}
var es = k('<input/>');
function ts(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = F(() => t.element),
		h = F(() => ut(o, ['element'])),
		x = F(() => pt(n().getHiddenInputProps(), e(h)));
	var w = se(),
		m = B(w);
	{
		var p = (U) => {
				var u = se(),
					d = B(u);
				(Ue(
					d,
					() => e(s),
					() => e(x)
				),
					c(U, u));
			},
			E = (U) => {
				var u = es();
				(ft(u, () => ({ ...e(x) }), void 0, void 0, void 0, void 0, !0), c(U, u));
			};
		O(m, (U) => {
			e(s) ? U(p) : U(E, !1);
		});
	}
	(c(i, w), ze());
}
const Ra = Rr(),
	as = (i) => {
		Gt();
		var t = bt('Ã—');
		c(i, t);
	};
var rs = k('<button><!></button>');
function is(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = Ra.consume(),
		h = F(() => t.element),
		x = F(() => Jr(t.children, as)),
		w = F(() => ut(o, ['element', 'children'])),
		m = F(() => pt(n().getItemDeleteTriggerProps(s()), e(w)));
	var p = se(),
		E = B(p);
	{
		var U = (d) => {
				var j = se(),
					q = B(j);
				(Ue(
					q,
					() => e(h),
					() => e(m)
				),
					c(d, j));
			},
			u = (d) => {
				var j = rs();
				ft(j, () => ({ ...e(m) }));
				var q = r(j);
				(Ue(q, () => e(x) ?? ht), a(j), c(d, j));
			};
		O(E, (d) => {
			e(h) ? d(U) : d(u, !1);
		});
	}
	(c(i, p), ze());
}
var os = k('<ul><!></ul>');
function ss(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = F(() => t.element),
		h = F(() => t.children),
		x = F(() => ut(o, ['element', 'children'])),
		w = F(() => pt(n().getItemGroupProps(), e(x)));
	var m = se(),
		p = B(m);
	{
		var E = (u) => {
				var d = se(),
					j = B(d);
				(Ue(
					j,
					() => e(s),
					() => e(w)
				),
					c(u, d));
			},
			U = (u) => {
				var d = os();
				ft(d, () => ({ ...e(w) }));
				var j = r(d);
				(Ue(j, () => e(h) ?? ht), a(d), c(u, d));
			};
		O(p, (u) => {
			e(s) ? u(E) : u(U, !1);
		});
	}
	(c(i, m), ze());
}
var ns = k('<div><!></div>');
function ls(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = Ra.consume(),
		h = F(() => t.element),
		x = F(() => t.children),
		w = F(() => ut(o, ['element', 'children'])),
		m = F(() => pt(n().getItemNameProps(s()), e(w)));
	var p = se(),
		E = B(p);
	{
		var U = (d) => {
				var j = se(),
					q = B(j);
				(Ue(
					q,
					() => e(h),
					() => e(m)
				),
					c(d, j));
			},
			u = (d) => {
				var j = ns();
				ft(j, () => ({ ...e(m) }));
				var q = r(j);
				(Ue(q, () => e(x) ?? ht), a(j), c(d, j));
			};
		O(E, (d) => {
			e(h) ? d(U) : d(u, !1);
		});
	}
	(c(i, p), ze());
}
var cs = k('<div><!></div>');
function ds(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = Ra.consume(),
		h = F(() => t.element),
		x = F(() => t.children),
		w = F(() => ut(o, ['element', 'children'])),
		m = F(() => pt(n().getItemSizeTextProps(s()), e(w)));
	var p = se(),
		E = B(p);
	{
		var U = (d) => {
				var j = se(),
					q = B(j);
				(Ue(
					q,
					() => e(h),
					() => e(m)
				),
					c(d, j));
			},
			u = (d) => {
				var j = cs();
				ft(j, () => ({ ...e(m) }));
				var q = r(j);
				(Ue(q, () => e(x) ?? ht), a(j), c(d, j));
			};
		O(E, (d) => {
			e(h) ? d(U) : d(u, !1);
		});
	}
	(c(i, p), ze());
}
var us = (i) => (typeof i.getAsEntry == 'function' ? i.getAsEntry() : typeof i.webkitGetAsEntry == 'function' ? i.webkitGetAsEntry() : null),
	zr = (i) => i.isDirectory,
	Za = (i) => i.isFile,
	Wa = (i, t) => (Object.defineProperty(i, 'relativePath', { value: t ? `${t}/${i.name}` : i.name }), i),
	fs = (i, t) =>
		Promise.all(
			Array.from(i)
				.filter((o) => o.kind === 'file')
				.map((o) => {
					const n = us(o);
					if (!n) return null;
					if (zr(n) && t) return Mr(n.createReader(), `${n.name}`);
					if (Za(n) && typeof o.getAsFile == 'function') {
						const s = o.getAsFile();
						return Promise.resolve(s ? Wa(s, '') : null);
					}
					if (Za(n))
						return new Promise((s) => {
							n.file((h) => {
								s(Wa(h, ''));
							});
						});
				})
				.filter((o) => o)
		),
	Mr = (i, t = '') =>
		new Promise((o) => {
			const n = [],
				s = () => {
					i.readEntries((h) => {
						if (h.length === 0) {
							o(Promise.all(n).then((w) => w.flat()));
							return;
						}
						const x = h
							.map((w) => {
								if (!w) return null;
								if (zr(w)) return Mr(w.createReader(), `${t}${w.name}`);
								if (Za(w))
									return new Promise((m) => {
										w.file((p) => {
											m(Wa(p, t));
										});
									});
							})
							.filter((w) => w);
						(n.push(Promise.all(x)), s());
					});
				};
			s();
		});
function vs(i) {
	return i === 'audio/*' || i === 'video/*' || i === 'image/*' || i === 'text/*' || /\w+\/[-+.\w]+/g.test(i);
}
function ps(i) {
	return /^.*\.[\w]+$/.test(i);
}
var xr = (i) => vs(i) || ps(i);
function ms(i) {
	if (i != null)
		return typeof i == 'string'
			? i
			: Array.isArray(i)
				? i.filter(xr).join(',')
				: Object.entries(i)
						.reduce((t, [o, n]) => [...t, o, ...n], [])
						.filter(xr)
						.join(',');
}
var ja = (i, t) => i.name === t.name && i.size === t.size && i.type === t.type,
	ga = (i) => i != null;
function _s(i, t, o) {
	if (ga(i.size))
		if (ga(t) && ga(o)) {
			if (i.size > o) return [!1, 'FILE_TOO_LARGE'];
			if (i.size < t) return [!1, 'FILE_TOO_SMALL'];
		} else {
			if (ga(t) && i.size < t) return [!1, 'FILE_TOO_SMALL'];
			if (ga(o) && i.size > o) return [!1, 'FILE_TOO_LARGE'];
		}
	return [!0, null];
}
var gs =
		'3g2_video/3gpp2[3gp,3gpp_video/3gpp[3mf_model/3mf[7z_application/x-7z-compressed[aac_audio/aac[ac_application/pkix-attr-cert[adp_audio/adpcm[adts_audio/aac[ai_application/postscript[aml_application/automationml-aml+xml[amlx_application/automationml-amlx+zip[amr_audio/amr[apk_application/vnd.android.package-archive[apng_image/apng[appcache,manifest_text/cache-manifest[appinstaller_application/appinstaller[appx_application/appx[appxbundle_application/appxbundle[asc_application/pgp-keys[atom_application/atom+xml[atomcat_application/atomcat+xml[atomdeleted_application/atomdeleted+xml[atomsvc_application/atomsvc+xml[au,snd_audio/basic[avi_video/x-msvideo[avci_image/avci[avcs_image/avcs[avif_image/avif[aw_application/applixware[bdoc_application/bdoc[bin,bpk,buffer,deb,deploy,dist,distz,dll,dmg,dms,dump,elc,exe,img,iso,lrf,mar,msi,msm,msp,pkg,so_application/octet-stream[bmp,dib_image/bmp[btf,btif_image/prs.btif[bz2_application/x-bzip2[c_text/x-c[ccxml_application/ccxml+xml[cdfx_application/cdfx+xml[cdmia_application/cdmi-capability[cdmic_application/cdmi-container[cdmid_application/cdmi-domain[cdmio_application/cdmi-object[cdmiq_application/cdmi-queue[cer_application/pkix-cert[cgm_image/cgm[cjs_application/node[class_application/java-vm[coffee,litcoffee_text/coffeescript[conf,def,in,ini,list,log,text,txt_text/plain[cpp,cxx,cc_text/x-c++src[cpl_application/cpl+xml[cpt_application/mac-compactpro[crl_application/pkix-crl[css_text/css[csv_text/csv[cu_application/cu-seeme[cwl_application/cwl[cww_application/prs.cww[davmount_application/davmount+xml[dbk_application/docbook+xml[doc_application/msword[docx_application/vnd.openxmlformats-officedocument.wordprocessingml.document[dsc_text/prs.lines.tag[dssc_application/dssc+der[dtd_application/xml-dtd[dwd_application/atsc-dwd+xml[ear,jar,war_application/java-archive[ecma_application/ecmascript[emf_image/emf[eml,mime_message/rfc822[emma_application/emma+xml[emotionml_application/emotionml+xml[eot_application/vnd.ms-fontobject[eps,ps_application/postscript[epub_application/epub+zip[exi_application/exi[exp_application/express[exr_image/aces[ez_application/andrew-inset[fdf_application/fdf[fdt_application/fdt+xml[fits_image/fits[flac_audio/flac[flv_video/x-flv[g3_image/g3fax[geojson_application/geo+json[gif_image/gif[glb_model/gltf-binary[gltf_model/gltf+json[gml_application/gml+xml[go_text/x-go[gpx_application/gpx+xml[gz_application/gzip[h_text/x-h[h261_video/h261[h263_video/h263[h264_video/h264[heic_image/heic[heics_image/heic-sequence[heif_image/heif[heifs_image/heif-sequence[htm,html,shtml_text/html[ico_image/x-icon[icns_image/x-icns[ics,ifb_text/calendar[iges,igs_model/iges[ink,inkml_application/inkml+xml[ipa_application/octet-stream[java_text/x-java-source[jp2,jpg2_image/jp2[jpeg,jpe,jpg_image/jpeg[jpf,jpx_image/jpx[jpm,jpgm_image/jpm[jpgv_video/jpeg[jph_image/jph[js,mjs_text/javascript[json_application/json[json5_application/json5[jsonld_application/ld+json[jsx_text/jsx[jxl_image/jxl[jxr_image/jxr[ktx_image/ktx[ktx2_image/ktx2[less_text/less[m1v,m2v,mpe,mpeg,mpg_video/mpeg[m4a_audio/mp4[m4v_video/x-m4v[md,markdown_text/markdown[mid,midi,kar,rmi_audio/midi[mkv_video/x-matroska[mp2,mp2a,mp3,mpga,m3a,m2a_audio/mpeg[mp4,mp4v,mpg4_video/mp4[mp4a_audio/mp4[mp4s,m4p_application/mp4[odp_application/vnd.oasis.opendocument.presentation[oda_application/oda[ods_application/vnd.oasis.opendocument.spreadsheet[odt_application/vnd.oasis.opendocument.text[oga,ogg,opus,spx_audio/ogg[ogv_video/ogg[ogx_application/ogg[otf_font/otf[p12,pfx_application/x-pkcs12[pdf_application/pdf[pem_application/x-pem-file[php_text/x-php[png_image/png[ppt_application/vnd.ms-powerpoint[pptx_application/vnd.openxmlformats-officedocument.presentationml.presentation[pskcxml_application/pskc+xml[psd_image/vnd.adobe.photoshop[py_text/x-python[qt,mov_video/quicktime[rar_application/vnd.rar[rdf_application/rdf+xml[rtf_text/rtf[sass_text/x-sass[scss_text/x-scss[sgm,sgml_text/sgml[sh_application/x-sh[svg,svgz_image/svg+xml[swf_application/x-shockwave-flash[tar_application/x-tar[tif,tiff_image/tiff[toml_application/toml[ts_video/mp2t[tsx_text/tsx[tsv_text/tab-separated-values[ttc_font/collection[ttf_font/ttf[vtt_text/vtt[wasm_application/wasm[wav_audio/wav[weba_audio/webm[webm_video/webm[webmanifest_application/manifest+json[webp_image/webp[wma_audio/x-ms-wma[wmv_video/x-ms-wmv[woff_font/woff[woff2_font/woff2[xls_application/vnd.ms-excel[xlsx_application/vnd.openxmlformats-officedocument.spreadsheetml.sheet[xml_application/xml[xz_application/x-xz[yaml,yml_text/yaml[zip_application/zip',
	bs = new Map(
		gs.split('[').flatMap((i) => {
			const [t, o] = i.split('_');
			return t.split(',').map((n) => [n, o]);
		})
	);
function ys(i) {
	const t = i.split('.').pop();
	return (t && bs.get(t)) || null;
}
function hs(i, t) {
	if (i && t) {
		const o = Array.isArray(t) ? t : typeof t == 'string' ? t.split(',') : [];
		if (o.length === 0) return !0;
		const n = i.name || '',
			s = (i.type || ys(n) || '').toLowerCase(),
			h = s.replace(/\/.*$/, '');
		return o.some((x) => {
			const w = x.trim().toLowerCase();
			return w.charAt(0) === '.' ? n.toLowerCase().endsWith(w) : w.endsWith('/*') ? h === w.replace(/\/.*$/, '') : s === w;
		});
	}
	return !0;
}
function xs(i, t) {
	const o = i.type === 'application/x-moz-file' || hs(i, t);
	return [o, o ? null : 'FILE_INVALID_TYPE'];
}
function ws(i) {
	const t = new Map();
	return function (n, s) {
		const h =
			n +
			(s
				? Object.entries(s)
						.sort((w, m) => (w[0] < m[0] ? -1 : 1))
						.join()
				: '');
		if (t.has(h)) return t.get(h);
		let x = new i(n, s);
		return (t.set(h, x), x);
	};
}
var ks = ws(Intl.NumberFormat);
function Fs(i, t, o = {}) {
	return ks(t, o).format(i);
}
var Ts = ['', 'kilo', 'mega', 'giga', 'tera'],
	Es = ['', 'kilo', 'mega', 'giga', 'tera', 'peta'],
	Ps = (i, t = 'en-US', o = {}) => {
		if (Number.isNaN(i)) return '';
		if (i === 0) return '0 B';
		const { unitSystem: n = 'decimal', precision: s = 3, unit: h = 'byte', unitDisplay: x = 'short' } = o,
			w = n === 'binary' ? 1024 : 1e3,
			m = h === 'bit' ? Ts : Es,
			p = i < 0;
		let U = Math.abs(i),
			u = 0;
		for (; U >= w && u < m.length - 1; ) ((U /= w), u++);
		const d = parseFloat(U.toPrecision(s)),
			j = p ? -d : d;
		return Fs(j, t, { style: 'unit', unit: m[u] + h, unitDisplay: x });
	},
	As = li('file-upload').parts(
		'root',
		'dropzone',
		'item',
		'itemDeleteTrigger',
		'itemGroup',
		'itemName',
		'itemPreview',
		'itemPreviewImage',
		'itemSizeText',
		'label',
		'trigger',
		'clearTrigger'
	),
	dt = As.build(),
	Nr = (i) => i.ids?.root ?? `file:${i.id}`,
	Br = (i) => i.ids?.dropzone ?? `file:${i.id}:dropzone`,
	Ja = (i) => i.ids?.hiddenInput ?? `file:${i.id}:input`,
	Ds = (i) => i.ids?.trigger ?? `file:${i.id}:trigger`,
	js = (i) => i.ids?.label ?? `file:${i.id}:label`,
	Cs = (i, t) => i.ids?.item?.(t) ?? `file:${i.id}:item:${t}`,
	Is = (i, t) => i.ids?.itemName?.(t) ?? `file:${i.id}:item-name:${t}`,
	Us = (i, t) => i.ids?.itemSizeText?.(t) ?? `file:${i.id}:item-size:${t}`,
	$s = (i, t) => i.ids?.itemPreview?.(t) ?? `file:${i.id}:item-preview:${t}`,
	Ss = (i, t) => i.ids?.itemDeleteTrigger?.(t) ?? `file:${i.id}:item-delete:${t}`,
	ba = (i) => ci(`${i.name}-${i.size}`),
	Os = (i) => i.getById(Nr(i)),
	wr = (i) => i.getById(Ja(i)),
	Rs = (i) => i.getById(Br(i));
function kr(i) {
	const t = Ia(i);
	return i.dataTransfer ? i.dataTransfer.types.some((o) => o === 'Files' || o === 'application/x-moz-file') : !!t && 'files' in t;
}
function Ls(i, t, o) {
	const { prop: n, computed: s } = i;
	return !s('multiple') && t > 1 ? !1 : !s('multiple') && t + o.length === 2 ? !0 : !(t + o.length > n('maxFiles'));
}
function Fr(i, t, o = [], n = []) {
	const { prop: s, computed: h } = i,
		x = [],
		w = [],
		m = { acceptedFiles: o, rejectedFiles: n };
	return (
		t.forEach((p) => {
			const [E, U] = xs(p, h('acceptAttr')),
				[u, d] = _s(p, s('minFileSize'), s('maxFileSize')),
				j = s('validate')?.(p, m),
				q = j ? j.length === 0 : !0;
			if (E && u && q) x.push(p);
			else {
				const K = [U, d];
				(q || K.push(...(j ?? [])), w.push({ file: p, errors: K.filter(Boolean) }));
			}
		}),
		Ls(i, x.length, o) ||
			(x.forEach((p) => {
				w.push({ file: p, errors: ['TOO_MANY_FILES'] });
			}),
			x.splice(0)),
		{ acceptedFiles: x, rejectedFiles: w }
	);
}
function zs(i, t) {
	const o = mi(i);
	try {
		if ('DataTransfer' in o) {
			const n = new o.DataTransfer();
			(t.forEach((s) => {
				n.items.add(s);
			}),
				(i.files = n.files));
		}
	} catch {}
}
var qt = 'accepted',
	Ms = "button, a[href], input:not([type='file']), select, textarea, [tabindex], [contenteditable]";
function Tr(i, t) {
	if (!i || i.getAttribute('type') === 'file') return !1;
	const o = i.closest(Ms);
	return o != t && ra(t, o);
}
function Ns(i, t) {
	const { state: o, send: n, prop: s, computed: h, scope: x, context: w } = i,
		m = !!s('disabled'),
		p = !!s('readOnly'),
		E = !!s('required'),
		U = s('allowDrop'),
		u = s('translations'),
		d = o.matches('dragging'),
		j = o.matches('focused') && !m,
		q = w.get('acceptedFiles'),
		K = s('maxFiles');
	return {
		dragging: d,
		focused: j,
		disabled: m,
		readOnly: p,
		transforming: w.get('transforming'),
		maxFilesReached: q.length >= K,
		remainingFiles: Math.max(0, K - q.length),
		openFilePicker() {
			m || p || n({ type: 'OPEN' });
		},
		deleteFile(S, $ = qt) {
			m || p || n({ type: 'FILE.DELETE', file: S, itemType: $ });
		},
		acceptedFiles: q,
		rejectedFiles: w.get('rejectedFiles'),
		setFiles(S) {
			m || p || n({ type: 'FILES.SET', files: S, count: S.length });
		},
		clearRejectedFiles() {
			m || p || n({ type: 'REJECTED_FILES.CLEAR' });
		},
		clearFiles() {
			m || p || n({ type: 'FILES.CLEAR' });
		},
		getFileSize(S) {
			return Ps(S.size, s('locale'));
		},
		createFileUrl(S, $) {
			const Z = x.getWin(),
				fe = Z.URL.createObjectURL(S);
			return ($(fe), () => Z.URL.revokeObjectURL(fe));
		},
		setClipboardFiles(S) {
			if (m || p) return !1;
			const Z = Array.from(S?.items ?? []).reduce((fe, ye) => {
				if (ye.kind !== 'file') return fe;
				const Pe = ye.getAsFile();
				return Pe ? [...fe, Pe] : fe;
			}, []);
			return Z.length ? (n({ type: 'FILE.SELECT', files: Z }), !0) : !1;
		},
		getRootProps() {
			return t.element({ ...dt.root.attrs, dir: s('dir'), id: Nr(x), 'data-disabled': Be(m), 'data-readonly': Be(p), 'data-dragging': Be(d) });
		},
		getDropzoneProps(S = {}) {
			return t.element({
				...dt.dropzone.attrs,
				dir: s('dir'),
				id: Br(x),
				tabIndex: m || p || S.disableClick ? void 0 : 0,
				role: S.disableClick ? 'application' : 'button',
				'aria-label': u.dropzone,
				'aria-disabled': m,
				'aria-readonly': p,
				'data-invalid': Be(s('invalid')),
				'data-disabled': Be(m),
				'data-readonly': Be(p),
				'data-dragging': Be(d),
				onKeyDown($) {
					if (m || p || $.defaultPrevented) return;
					const Z = Ia($);
					ra($.currentTarget, Z) &&
						(Tr(Z, $.currentTarget) || S.disableClick || ($.key !== 'Enter' && $.key !== ' ') || n({ type: 'DROPZONE.CLICK', src: 'keydown' }));
				},
				onClick($) {
					if (m || p || $.defaultPrevented || S.disableClick) return;
					const Z = Ia($);
					ra($.currentTarget, Z) &&
						(Tr(Z, $.currentTarget) || ($.currentTarget.localName === 'label' && $.preventDefault(), n({ type: 'DROPZONE.CLICK' })));
				},
				onDragOver($) {
					if (m || p || !U) return;
					($.preventDefault(), $.stopPropagation());
					try {
						$.dataTransfer.dropEffect = 'copy';
					} catch {}
					if (!kr($)) return;
					const fe = $.dataTransfer.items.length;
					n({ type: 'DROPZONE.DRAG_OVER', count: fe });
				},
				onDragLeave($) {
					m || p || (U && (ra($.currentTarget, $.relatedTarget) || n({ type: 'DROPZONE.DRAG_LEAVE' })));
				},
				onDrop($) {
					m ||
						p ||
						(U && ($.preventDefault(), $.stopPropagation()), !kr($)) ||
						fs($.dataTransfer.items, s('directory')).then((fe) => {
							n({ type: 'DROPZONE.DROP', files: ui(fe) });
						});
				},
				onFocus() {
					m || p || n({ type: 'DROPZONE.FOCUS' });
				},
				onBlur() {
					m || p || n({ type: 'DROPZONE.BLUR' });
				}
			});
		},
		getTriggerProps() {
			return t.button({
				...dt.trigger.attrs,
				dir: s('dir'),
				id: Ds(x),
				disabled: m || p,
				'data-disabled': Be(m),
				'data-readonly': Be(p),
				'data-invalid': Be(s('invalid')),
				type: 'button',
				onClick(S) {
					m || p || (ra(Rs(x), S.currentTarget) && S.stopPropagation(), n({ type: 'OPEN' }));
				}
			});
		},
		getHiddenInputProps() {
			return t.input({
				id: Ja(x),
				tabIndex: -1,
				disabled: m || p,
				type: 'file',
				required: s('required'),
				capture: s('capture'),
				name: s('name'),
				accept: h('acceptAttr'),
				webkitdirectory: s('directory') ? '' : void 0,
				multiple: h('multiple') || s('maxFiles') > 1,
				onClick(S) {
					(S.stopPropagation(), (S.currentTarget.value = ''));
				},
				onInput(S) {
					if (m || p) return;
					const { files: $ } = S.currentTarget;
					n({ type: 'FILE.SELECT', files: $ ? Array.from($) : [] });
				},
				style: di
			});
		},
		getItemGroupProps(S = {}) {
			const { type: $ = qt } = S;
			return t.element({ ...dt.itemGroup.attrs, dir: s('dir'), 'data-disabled': Be(m), 'data-type': $ });
		},
		getItemProps(S) {
			const { file: $, type: Z = qt } = S;
			return t.element({ ...dt.item.attrs, dir: s('dir'), id: Cs(x, ba($)), 'data-disabled': Be(m), 'data-type': Z });
		},
		getItemNameProps(S) {
			const { file: $, type: Z = qt } = S;
			return t.element({ ...dt.itemName.attrs, dir: s('dir'), id: Is(x, ba($)), 'data-disabled': Be(m), 'data-type': Z });
		},
		getItemSizeTextProps(S) {
			const { file: $, type: Z = qt } = S;
			return t.element({ ...dt.itemSizeText.attrs, dir: s('dir'), id: Us(x, ba($)), 'data-disabled': Be(m), 'data-type': Z });
		},
		getItemPreviewProps(S) {
			const { file: $, type: Z = qt } = S;
			return t.element({ ...dt.itemPreview.attrs, dir: s('dir'), id: $s(x, ba($)), 'data-disabled': Be(m), 'data-type': Z });
		},
		getItemPreviewImageProps(S) {
			const { file: $, url: Z, type: fe = qt } = S;
			if (!$.type.startsWith('image/')) throw new Error('Preview Image is only supported for image files');
			return t.img({ ...dt.itemPreviewImage.attrs, alt: u.itemPreview?.($), src: Z, 'data-disabled': Be(m), 'data-type': fe });
		},
		getItemDeleteTriggerProps(S) {
			const { file: $, type: Z = qt } = S;
			return t.button({
				...dt.itemDeleteTrigger.attrs,
				dir: s('dir'),
				id: Ss(x, ba($)),
				type: 'button',
				disabled: m || p,
				'data-disabled': Be(m),
				'data-readonly': Be(p),
				'data-type': Z,
				'aria-label': u.deleteFile?.($),
				onClick() {
					m || p || n({ type: 'FILE.DELETE', file: $, itemType: Z });
				}
			});
		},
		getLabelProps() {
			return t.label({ ...dt.label.attrs, dir: s('dir'), id: js(x), htmlFor: Ja(x), 'data-disabled': Be(m), 'data-required': Be(E) });
		},
		getClearTriggerProps() {
			return t.button({
				...dt.clearTrigger.attrs,
				dir: s('dir'),
				type: 'button',
				disabled: m || p,
				hidden: q.length === 0,
				'data-disabled': Be(m),
				'data-readonly': Be(p),
				onClick(S) {
					S.defaultPrevented || m || p || n({ type: 'FILES.CLEAR' });
				}
			});
		}
	};
}
var Bs = ni({
		props({ props: i }) {
			return {
				minFileSize: 0,
				maxFileSize: Number.POSITIVE_INFINITY,
				maxFiles: 1,
				allowDrop: !0,
				preventDocumentDrop: !0,
				defaultAcceptedFiles: [],
				...i,
				translations: {
					dropzone: 'dropzone',
					itemPreview: (t) => `preview of ${t.name}`,
					deleteFile: (t) => `delete file ${t.name}`,
					...i.translations
				}
			};
		},
		initialState() {
			return 'idle';
		},
		context({ prop: i, bindable: t, getContext: o }) {
			return {
				acceptedFiles: t(() => ({
					defaultValue: i('defaultAcceptedFiles'),
					value: i('acceptedFiles'),
					isEqual: (n, s) => n.length === s?.length && n.every((h, x) => ja(h, s[x])),
					hash(n) {
						return n.map((s) => `${s.name}-${s.size}`).join(',');
					},
					onChange(n) {
						const s = o();
						(i('onFileAccept')?.({ files: n }), i('onFileChange')?.({ acceptedFiles: n, rejectedFiles: s.get('rejectedFiles') }));
					}
				})),
				rejectedFiles: t(() => ({
					defaultValue: [],
					isEqual: (n, s) => n.length === s?.length && n.every((h, x) => ja(h.file, s[x].file)),
					onChange(n) {
						const s = o();
						(i('onFileReject')?.({ files: n }), i('onFileChange')?.({ acceptedFiles: s.get('acceptedFiles'), rejectedFiles: n }));
					}
				})),
				transforming: t(() => ({ defaultValue: !1 }))
			};
		},
		computed: { acceptAttr: ({ prop: i }) => ms(i('accept')), multiple: ({ prop: i }) => i('maxFiles') > 1 },
		watch({ track: i, context: t, action: o }) {
			i([() => t.hash('acceptedFiles')], () => {
				o(['syncInputElement']);
			});
		},
		on: {
			'FILES.SET': { actions: ['setFiles'] },
			'FILE.SELECT': { actions: ['setEventFiles'] },
			'FILE.DELETE': { actions: ['removeFile'] },
			'FILES.CLEAR': { actions: ['clearFiles'] },
			'REJECTED_FILES.CLEAR': { actions: ['clearRejectedFiles'] }
		},
		effects: ['preventDocumentDrop'],
		states: {
			idle: {
				on: {
					OPEN: { actions: ['openFilePicker'] },
					'DROPZONE.CLICK': { actions: ['openFilePicker'] },
					'DROPZONE.FOCUS': { target: 'focused' },
					'DROPZONE.DRAG_OVER': { target: 'dragging' }
				}
			},
			focused: {
				on: {
					'DROPZONE.BLUR': { target: 'idle' },
					OPEN: { actions: ['openFilePicker'] },
					'DROPZONE.CLICK': { actions: ['openFilePicker'] },
					'DROPZONE.DRAG_OVER': { target: 'dragging' }
				}
			},
			dragging: { on: { 'DROPZONE.DROP': { target: 'idle', actions: ['setEventFiles'] }, 'DROPZONE.DRAG_LEAVE': { target: 'idle' } } }
		},
		implementations: {
			effects: {
				preventDocumentDrop({ prop: i, scope: t }) {
					if (!i('preventDocumentDrop') || !i('allowDrop') || i('disabled')) return;
					const o = t.getDoc(),
						n = (h) => {
							h?.preventDefault();
						},
						s = (h) => {
							ra(Os(t), Ia(h)) || h.preventDefault();
						};
					return pi(or(o, 'dragover', n, !1), or(o, 'drop', s, !1));
				}
			},
			actions: {
				syncInputElement({ scope: i, context: t }) {
					queueMicrotask(() => {
						const o = wr(i);
						if (!o) return;
						zs(o, t.get('acceptedFiles'));
						const n = i.getWin();
						o.dispatchEvent(new n.Event('change', { bubbles: !0 }));
					});
				},
				openFilePicker({ scope: i }) {
					vi(() => {
						wr(i)?.click();
					});
				},
				setFiles(i) {
					const { computed: t, context: o, event: n } = i,
						{ acceptedFiles: s, rejectedFiles: h } = Fr(i, n.files);
					(o.set('acceptedFiles', t('multiple') ? s : s.length > 0 ? [s[0]] : []), o.set('rejectedFiles', h));
				},
				setEventFiles(i) {
					const { computed: t, context: o, event: n, prop: s } = i,
						h = o.get('acceptedFiles'),
						x = o.get('rejectedFiles'),
						{ acceptedFiles: w, rejectedFiles: m } = Fr(i, n.files, h, x),
						p = (U) => {
							if (t('multiple')) {
								(o.set('acceptedFiles', (u) => [...u, ...U]), o.set('rejectedFiles', m));
								return;
							}
							if (U.length) {
								(o.set('acceptedFiles', [U[0]]), o.set('rejectedFiles', m));
								return;
							}
							m.length && (o.set('acceptedFiles', o.get('acceptedFiles')), o.set('rejectedFiles', m));
						},
						E = s('transformFiles');
					E
						? (o.set('transforming', !0),
							E(w)
								.then(p)
								.catch((U) => {
									fi(`[zag-js/file-upload] error transforming files
${U}`);
								})
								.finally(() => {
									o.set('transforming', !1);
								}))
						: p(w);
				},
				removeFile({ context: i, event: t }) {
					if (t.itemType === 'rejected') {
						const o = i.get('rejectedFiles').filter((n) => !ja(n.file, t.file));
						i.set('rejectedFiles', o);
					} else {
						const o = i.get('acceptedFiles').filter((n) => !ja(n, t.file));
						i.set('acceptedFiles', o);
					}
				},
				clearRejectedFiles({ context: i }) {
					i.set('rejectedFiles', []);
				},
				clearFiles({ context: i }) {
					(i.set('acceptedFiles', []), i.set('rejectedFiles', []));
				}
			}
		}
	}),
	Vs = Lr()([
		'accept',
		'acceptedFiles',
		'allowDrop',
		'capture',
		'defaultAcceptedFiles',
		'dir',
		'directory',
		'disabled',
		'getRootNode',
		'id',
		'ids',
		'invalid',
		'locale',
		'maxFiles',
		'maxFileSize',
		'minFileSize',
		'name',
		'onFileAccept',
		'onFileChange',
		'onFileReject',
		'preventDocumentDrop',
		'readOnly',
		'required',
		'transformFiles',
		'translations',
		'validate'
	]),
	qs = jr(Vs),
	Hs = Lr()(['file', 'type']),
	Gs = jr(Hs),
	Zs = k('<li><!></li>');
function Ws(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = F(() => Gs(o)),
		h = F(() => Dr(e(s), 2)),
		x = F(() => e(h)[0]),
		w = F(() => e(h)[1]),
		m = F(() => e(w).element),
		p = F(() => e(w).children),
		E = F(() => ut(e(w), ['element', 'children'])),
		U = F(() => pt(n().getItemProps(e(x)), e(E)));
	Ra.provide(() => e(x));
	var u = se(),
		d = B(u);
	{
		var j = (K) => {
				var S = se(),
					$ = B(S);
				(Ue(
					$,
					() => e(m),
					() => e(U)
				),
					c(K, S));
			},
			q = (K) => {
				var S = Zs();
				ft(S, () => ({ ...e(U) }));
				var $ = r(S);
				(Ue($, () => e(p) ?? ht), a(S), c(K, S));
			};
		O(d, (K) => {
			e(m) ? K(j) : K(q, !1);
		});
	}
	(c(i, u), ze());
}
var Js = k('<label><!></label>');
function Ks(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = F(() => t.element),
		h = F(() => t.children),
		x = F(() => ut(o, ['element', 'children'])),
		w = F(() => pt(n().getLabelProps(), e(x)));
	var m = se(),
		p = B(m);
	{
		var E = (u) => {
				var d = se(),
					j = B(d);
				(Ue(
					j,
					() => e(s),
					() => e(w)
				),
					c(u, d));
			},
			U = (u) => {
				var d = Js();
				ft(d, () => ({ ...e(w) }));
				var j = r(d);
				(Ue(j, () => e(h) ?? ht), a(d), c(u, d));
			};
		O(p, (u) => {
			e(s) ? u(E) : u(U, !1);
		});
	}
	(c(i, m), ze());
}
function Ys(i, t) {
	Le(t, !0);
	const o = ct.consume(),
		n = F(() => t.children);
	var s = se(),
		h = B(s);
	(Ue(
		h,
		() => e(n),
		() => o
	),
		c(i, s),
		ze());
}
var Qs = k('<div><!></div>');
function Xs(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = F(() => t.element),
		s = F(() => t.children),
		h = F(() => t.value),
		x = F(() => ut(o, ['element', 'children', 'value'])),
		w = F(() => pt(e(h)().getRootProps(), e(x)));
	ct.provide(() => e(h)());
	var m = se(),
		p = B(m);
	{
		var E = (u) => {
				var d = se(),
					j = B(d);
				(Ue(
					j,
					() => e(n),
					() => e(w)
				),
					c(u, d));
			},
			U = (u) => {
				var d = Qs();
				ft(d, () => ({ ...e(w) }));
				var j = r(d);
				(Ue(j, () => e(s) ?? ht), a(d), c(u, d));
			};
		O(p, (u) => {
			e(n) ? u(E) : u(U, !1);
		});
	}
	(c(i, m), ze());
}
function en(i) {
	const t = qo(Bs, i),
		o = F(() => Ns(t, Ho));
	return () => e(o);
}
var tn = k('<div><!></div>');
function an(i, t) {
	const o = Kr();
	Le(t, !0);
	const n = vt(t, ['$$slots', '$$events', '$$legacy']),
		s = F(() => qs(n)),
		h = F(() => Dr(e(s), 2)),
		x = F(() => e(h)[0]),
		w = F(() => e(h)[1]),
		m = F(() => e(w).element),
		p = F(() => e(w).children),
		E = F(() => ut(e(w), ['element', 'children'])),
		U = en(() => ({ ...e(x), id: o })),
		u = F(() => pt(U().getRootProps(), e(E)));
	ct.provide(() => U());
	var d = se(),
		j = B(d);
	{
		var q = (S) => {
				var $ = se(),
					Z = B($);
				(Ue(
					Z,
					() => e(m),
					() => e(u)
				),
					c(S, $));
			},
			K = (S) => {
				var $ = tn();
				ft($, () => ({ ...e(u) }));
				var Z = r($);
				(Ue(Z, () => e(p) ?? ht), a($), c(S, $));
			};
		O(j, (S) => {
			e(m) ? S(q) : S(K, !1);
		});
	}
	(c(i, d), ze());
}
var rn = k('<button><!></button>');
function on(i, t) {
	Le(t, !0);
	const o = vt(t, ['$$slots', '$$events', '$$legacy']),
		n = ct.consume(),
		s = F(() => t.element),
		h = F(() => t.children),
		x = F(() => ut(o, ['element', 'children'])),
		w = F(() => pt(n().getTriggerProps(), e(x)));
	var m = se(),
		p = B(m);
	{
		var E = (u) => {
				var d = se(),
					j = B(d);
				(Ue(
					j,
					() => e(s),
					() => e(w)
				),
					c(u, d));
			},
			U = (u) => {
				var d = rn();
				ft(d, () => ({ ...e(w) }));
				var j = r(d);
				(Ue(j, () => e(h) ?? ht), a(d), c(u, d));
			};
		O(p, (u) => {
			e(s) ? u(E) : u(U, !1);
		});
	}
	(c(i, m), ze());
}
const Ca = Object.assign(an, {
	Provider: Xs,
	Context: Ys,
	Label: Ks,
	Dropzone: Xo,
	Trigger: on,
	ClearTrigger: Yo,
	HiddenInput: ts,
	ItemGroup: ss,
	Item: Ws,
	ItemName: ls,
	ItemSizeText: ds,
	ItemDeleteTrigger: is
});
var sn = k('<span> </span>');
function Er(i, t) {
	Le(t, !0);
	const o = Re(t, 'value', 3, !1);
	var n = sn(),
		s = r(n, !0);
	(a(n),
		R(
			(h) => {
				(G(n, 1, Ya(o() ? 'gradient-error badge rounded' : 'gradient-primary badge rounded')), D(s, h));
			},
			[() => (o() ? yi() : hi())]
		),
		c(i, n),
		ze());
}
var nn = k('<iconify-icon></iconify-icon> ', 3),
	ln = k('<span> </span>'),
	cn = k('<span><!></span>');
function dn(i, t) {
	Le(t, !0);
	const o = Re(t, 'roles', 19, () => []),
		n = (E) => {
			const U = o().find((u) => u._id === E);
			return U ? U.color || 'text-white' : o().find((d) => d._id === 'user')?.color || 'text-white';
		},
		s = (E) => {
			const U = o().find((u) => u._id === E);
			return U ? U.icon || 'material-symbols:person' : o().find((d) => d._id === 'user')?.icon || 'material-symbols:person';
		},
		h = (E) => {
			const U = o().find((u) => u._id === E);
			return U ? U.name || 'User' : o().find((d) => d._id === 'user')?.name || 'User';
		};
	var x = cn(),
		w = r(x);
	{
		var m = (E) => {
				var U = nn(),
					u = B(U);
				(R(() => P(u, 'icon', s(t.value))), P(u, 'width', '20'));
				var d = l(u);
				(R((j) => D(d, ` ${j ?? ''}`), [() => h(t.value)]), c(E, U));
			},
			p = (E) => {
				var U = ln(),
					u = r(U, !0);
				(a(U), R((d) => D(u, d), [() => h(t.value)]), c(E, U));
			};
		O(w, (E) => {
			s(t.value) ? E(m) : E(p, !1);
		});
	}
	(a(x), R((E) => G(x, 1, `badge ${E ?? ''}`), [() => n(t.value)]), c(i, x), ze());
}
var un = k('<div class="absolute left-0 top-11 text-xs text-error-500"> </div>'),
	fn = k('<span><iconify-icon></iconify-icon></span>', 2),
	vn = k('<button type="button"><!> <span class="capitalize"> </span></button>'),
	pn = k('<div class="text-sm text-gray-500">No roles available. Check console for debug info.</div>'),
	mn = k(
		'<div class="flex flex-col gap-2 sm:flex-row"><div class="border-b text-center sm:w-1/4 sm:border-0 sm:text-left"> <span class="text-error-500">*</span></div> <div class="flex-auto"><div class="flex flex-wrap justify-center gap-2 space-x-2 sm:justify-start"><!></div></div></div>'
	),
	_n = k('<button type="button" class="preset-filled-error-500 btn"><iconify-icon></iconify-icon><span class="hidden sm:block"> </span></button>', 2),
	gn = k(
		'<div class="modal-example-form space-y-4 text-black dark:text-white"><form class="modal-form space-y-4" id="token-form"><div class="group relative z-0 mb-6 w-full"><!> <!></div> <input type="hidden" name="token"/> <!> <div class="group relative z-0 mb-6 w-full"><label for="expires-select" class="mb-2 block text-sm font-medium text-black dark:text-white"> </label> <select id="expires-select" class="input bg-white text-black dark:bg-surface-700 dark:text-white" aria-label="Token Validity"><option>2 Hours</option><option>12 Hours</option><option>2 Days (default)</option><option>1 Week</option><option>2 Weeks</option><option>1 Month</option></select></div> <footer class="modal-footer flex items-center justify-between pt-4 border-t border-surface-500/20"><!> <button type="button" class="preset-outlined-secondary-500 btn"> </button> <button type="submit" form="token-form" class="preset-filled-tertiary-500 btn dark:preset-filled-primary-500"> </button></footer></form></div>'
	);
function Ka(i, t) {
	Le(t, !0);
	let o = Re(t, 'token', 3, ''),
		n = Re(t, 'user_id', 3, ''),
		s = Re(t, 'email', 3, ''),
		h = Re(t, 'role', 3, 'user'),
		x = Re(t, 'expires', 3, ''),
		w = Re(t, 'user', 19, () => Sa.data.user),
		m = Re(t, 'roles', 19, () => Sa.data.roles);
	function p(_) {
		switch (_) {
			case '1h':
				return '2 hrs';
			case '2h':
				return '2 hrs';
			case '12h':
				return '12 hrs';
			case '1d':
				return '2 days';
			case '2d':
				return '2 days';
			case '7d':
				return '1 week';
			case '30d':
				return '1 month';
			case '90d':
				return '1 month';
			default:
				return ['2 hrs', '12 hrs', '2 days', '1 week', '2 weeks', '1 month'].includes(_) ? _ : '2 days';
		}
	}
	const E = new Or({ user_id: '', email: '', token: '', role: 'user', expiresIn: '2 days' }, jo);
	$t(() => {
		((E.data.user_id = n()),
			(E.data.email = s()),
			(E.data.token = o()),
			(E.data.role = h() || 'user'),
			(E.data.expiresIn = !x() || x() === '' ? '2 days' : p(x())));
	});
	async function U(_) {
		if ((_.preventDefault(), !!E.validate())) {
			E.submitting = !0;
			try {
				const v = !!E.data.token,
					T = v ? `/api/token/${E.data.token}` : '/api/token/createToken',
					f = v ? 'PUT' : 'POST',
					b = v
						? { newTokenData: { email: E.data.email, role: E.data.role, expiresInHours: d(E.data.expiresIn) } }
						: { email: E.data.email, role: E.data.role, expiresIn: E.data.expiresIn },
					A = await fetch(T, { method: f, headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(b) }),
					z = await A.json();
				if (!A.ok) throw new Error(z.message || 'Operation failed');
				(z.smtp_not_configured
					? pe.create({
							title: 'Warning',
							description: `${v ? 'Token updated' : 'Token created'} - Email not sent: SMTP not configured. Token is listed in Admin Area.`,
							type: 'warning'
						})
					: z.dev_mode && !z.email_sent
						? pe.create({ title: 'Info', description: `${v ? 'Token updated' : 'Token created'} - Email sending skipped (dev mode)`, type: 'info' })
						: pe.create({ title: 'Success', description: 'User token created', type: 'success' }),
					await yt(),
					t.close && t.close({ success: !0 }));
			} catch (v) {
				const T = v instanceof Error ? v.message : 'An unknown error occurred';
				pe.create({ title: 'Error', description: T, type: 'error' });
			} finally {
				E.submitting = !1;
			}
		}
	}
	async function u() {
		if (E.data.token)
			try {
				const _ = await fetch(`/api/token/${E.data.token}`, { method: 'DELETE', headers: { 'Content-Type': 'application/json' } }),
					v = await _.json();
				if (!_.ok) throw new Error(v.message || 'Failed to delete token');
				(pe.create({ title: 'Success', description: wi(), type: 'success' }), await yt(), t.close && t.close({ success: !0 }));
			} catch (_) {
				const v = _ instanceof Error ? _.message : 'Failed to delete token';
				pe.create({ title: 'Error', description: v, type: 'error' });
			}
	}
	function d(_) {
		switch (_) {
			case '2 hrs':
				return 2;
			case '12 hrs':
				return 12;
			case '2 days':
				return 48;
			case '1 week':
				return 168;
			case '2 weeks':
				return 336;
			case '1 month':
				return 720;
			default:
				return 48;
		}
	}
	var j = gn(),
		q = r(j),
		K = r(q),
		S = r(K);
	{
		let _ = F(() => $a());
		ia(S, {
			type: 'text',
			name: 'email',
			get label() {
				return e(_);
			},
			onkeydown: () => (E.errors.email = []),
			required: !0,
			autocomplete: 'email',
			icon: 'mdi:email',
			textColor: 'text-tertiary-500 dark:text-white',
			get value() {
				return E.data.email;
			},
			set value(v) {
				E.data.email = v;
			}
		});
	}
	var $ = l(S, 2);
	{
		var Z = (_) => {
			var v = un(),
				T = r(v, !0);
			(a(v), R(() => D(T, E.errors.email[0])), c(_, v));
		};
		O($, (_) => {
			E.errors.email && _(Z);
		});
	}
	a(K);
	var fe = l(K, 2);
	Yt(fe);
	var ye = l(fe, 2);
	{
		var Pe = (_) => {
			var v = mn(),
				T = r(v),
				f = r(T);
			(Gt(), a(T));
			var b = l(T, 2),
				A = r(b),
				z = r(A);
			{
				var I = (H) => {
						var V = se(),
							Y = B(V);
						(Pt(Y, 17, m, ha, (ve, Q) => {
							var te = vn();
							te.__click = () => (E.data.role = e(Q)._id);
							var ae = r(te);
							{
								var re = (he) => {
									var Te = fn(),
										ie = r(Te);
									(P(ie, 'icon', 'fa:check'), a(Te), c(he, Te));
								};
								O(ae, (he) => {
									E.data.role === e(Q)._id && he(re);
								});
							}
							var W = l(ae, 2),
								ue = r(W, !0);
							(a(W),
								a(te),
								R(() => {
									(G(
										te,
										1,
										`chip ${E.data.role === e(Q)._id ? 'preset-filled-tertiary-500' : 'bg-surface-200 dark:bg-surface-700 text-black dark:text-white'}`
									),
										D(ue, e(Q).name));
								}),
								c(ve, te));
						}),
							c(H, V));
					},
					L = (H) => {
						var V = pn();
						c(H, V);
					};
				O(z, (H) => {
					m() && m().length > 0 ? H(I) : H(L, !1);
				});
			}
			(a(A), a(b), a(v), R((H) => D(f, `${H ?? ''}: `), [() => sa()]), c(_, v));
		};
		O(ye, (_) => {
			w().role === 'admin' && _(Pe);
		});
	}
	var ce = l(ye, 2),
		$e = r(ce),
		Ce = r($e, !0);
	a($e);
	var Ee = l($e, 2),
		Ae = r(Ee);
	Ae.value = Ae.__value = '2 hrs';
	var ke = l(Ae);
	ke.value = ke.__value = '12 hrs';
	var _e = l(ke);
	_e.value = _e.__value = '2 days';
	var ge = l(_e);
	ge.value = ge.__value = '1 week';
	var Se = l(ge);
	Se.value = Se.__value = '2 weeks';
	var je = l(Se);
	((je.value = je.__value = '1 month'), a(Ee), a(ce));
	var Me = l(ce, 2),
		Oe = r(Me);
	{
		var Ke = (_) => {
			var v = _n();
			v.__click = u;
			var T = r(v);
			(P(T, 'icon', 'icomoon-free:bin'), P(T, 'width', '24'));
			var f = l(T),
				b = r(f, !0);
			(a(f), a(v), R((A) => D(b, A), [() => ya()]), c(_, v));
		};
		O(Oe, (_) => {
			E.data.token && _(Ke);
		});
	}
	var y = l(Oe, 2);
	y.__click = () => Qe.close();
	var ee = r(y, !0);
	a(y);
	var Fe = l(y, 2),
		de = r(Fe, !0);
	(a(Fe),
		a(Me),
		a(q),
		a(j),
		R(
			(_, v, T) => {
				(D(Ce, _), D(ee, v), D(de, T));
			},
			[() => xi(), () => xa(), () => Qa()]
		),
		oa('submit', q, U),
		Oa(
			fe,
			() => E.data.token,
			(_) => (E.data.token = _)
		),
		Yr(
			Ee,
			() => E.data.expiresIn,
			(_) => (E.data.expiresIn = _)
		),
		c(i, j),
		ze());
}
Ot(['click']);
var bn = k('<div class="absolute left-0 top-11 text-xs text-error-500"> </div>'),
	yn = k('<div class="absolute left-0 top-11 text-xs text-error-500"> </div>'),
	hn = k(
		'<div class="mb-4 rounded-md bg-warning-50 p-3 text-sm text-warning-800 dark:bg-warning-900/20 dark:text-warning-200"><div class="flex"><iconify-icon></iconify-icon> <div><strong>Admin Password Reset:</strong> You are setting a new password for this user. Leave empty to keep current password unchanged.</div></div></div>',
		2
	),
	xn = k('<div class="absolute left-0 top-11 text-xs text-error-500"> </div>'),
	wn = k('<div class="absolute left-0 top-11 text-xs text-error-500"> </div>'),
	kn = k(
		'<!> <div class="group relative z-0 mb-6 w-full"><iconify-icon></iconify-icon> <!> <!></div> <div class="group relative z-0 mb-6 w-full"><iconify-icon></iconify-icon> <!> <!></div>',
		3
	),
	Fn = k('<span><iconify-icon></iconify-icon></span>', 2),
	Tn = k('<button type="button"><!> <span class="capitalize"> </span></button>'),
	En = k(
		'<div class="flex flex-col gap-2 sm:flex-row"><div class="border-b text-center sm:w-1/4 sm:border-0 sm:text-left"> </div> <div class="flex-auto"><div class="flex flex-wrap justify-center gap-2 space-x-2 sm:justify-start"><!></div></div></div>'
	),
	Pn = k(
		'<div class="flex flex-col gap-2 sm:flex-row"><div class="border-b text-center sm:w-1/4 sm:border-0 sm:text-left"> </div> <div class="flex-auto"><div class="rounded-md bg-gray-50 p-3 text-sm text-gray-600 dark:bg-gray-800 dark:text-gray-400"><div class="flex items-center"><iconify-icon></iconify-icon> <div><strong>Current Role:</strong> <br/> <em>You cannot change your own role for security reasons.</em></div></div></div></div></div>',
		2
	),
	An = k(
		'<button type="button" class="preset-filled-error-500 btn"><iconify-icon></iconify-icon> <span class="hidden sm:block"> </span></button>',
		2
	),
	Dn = k(
		'<div class="modal-example-form space-y-4"><header> </header> <article class="text-center text-sm"> </article> <form id="change_user_form"><div class="group relative z-0 mb-6 w-full"><iconify-icon></iconify-icon> <!> <!></div> <div class="group relative z-0 mb-6 w-full"><iconify-icon></iconify-icon> <!> <!></div> <!> <!></form> <footer><!> <div class="flex gap-4"><button type="button" class="preset-outlined-secondary-500 btn"> </button> <button type="submit" form="change_user_form" class="preset-filled-tertiary-500 btn dark:preset-filled-primary-500"> </button></div></footer></div>',
		2
	);
function Vr(i, t) {
	Le(t, !0);
	const { roles: o, user: n } = Sa.data,
		s = Sa.data.isFirstUser,
		h = {
			name: 'Admin User Edit Form',
			description: 'Allows admins to manage user accounts, including editing and assigning roles.',
			contextId: 'user:manage',
			action: 'manage',
			contextType: 'user'
		},
		x = { name: 'Delete User', description: 'Allows deleting a user account.', contextId: 'user:delete', action: 'delete', contextType: 'user' },
		w = Re(t, 'isGivenData', 3, !1),
		m = Re(t, 'username', 3, null),
		p = Re(t, 'email', 3, null),
		E = Re(t, 'role', 3, null),
		U = Re(t, 'user_id', 3, null),
		u = new Or({ user_id: '', username: '', email: '', password: '', confirmPassword: '', role: '' }, Co);
	$t(() => {
		((u.data.user_id = w() ? U() : n?._id),
			(u.data.username = w() ? (m() ?? '') : (n?.username ?? '')),
			(u.data.email = w() ? (p() ?? '') : (n?.email ?? '')),
			(u.data.role = w() ? (E() ?? '') : (n?.role ?? '')));
	});
	let d = me(!1);
	const j = F(() => u.data.user_id === n?._id || !w()),
		q = F(() => e(j) || n?.isAdmin),
		K = n?.isAdmin || n?.role === 'admin',
		S = F(() => K && !e(j) && !s);
	async function $(I) {
		if ((I.preventDefault(), !u.validate())) return;
		u.submitting = !0;
		const L = { username: w() ? m() : n?.username, email: w() ? p() : n?.email, role: w() ? E() : n?.role };
		(u.data.username,
			L.username,
			!e(j) &&
				u.data.role !== L.role &&
				(o?.find((V) => V._id === L.role)?.name || L.role, o?.find((V) => V._id === u.data.role)?.name || u.data.role),
			u.data.password && u.data.password.trim());
		const H = { username: u.data.username, email: u.data.email };
		(e(j) || (H.role = u.data.role), u.data.password && u.data.password.trim() !== '' && (H.password = u.data.password));
		try {
			const V = await fetch('/api/user/updateUserAttributes', {
					method: 'PUT',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({ user_id: u.data.user_id, newUserData: H })
				}),
				Y = await V.json();
			if (!V.ok) throw new Error(Y.message || 'Failed to update user.');
			(pe.success({ description: '<iconify-icon icon="mdi:check-outline" color="white" width="26" class="mr-1"></iconify-icon> User Data Updated' }),
				await yt(),
				Qe.close());
		} catch (V) {
			const Y = V instanceof Error ? V.message : 'An unknown error occurred.';
			pe.error({ description: `<iconify-icon icon="mdi:alert-circle" width="24"/> ${Y}` });
		} finally {
			u.submitting = !1;
		}
	}
	async function Z() {
		if (u.data.user_id)
			try {
				const I = await fetch('/api/user/batch', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json' },
						body: JSON.stringify({ userIds: [u.data.user_id], action: 'delete' })
					}),
					L = await I.json();
				if (!I.ok) throw new Error(L.message || 'Failed to delete user.');
				const H = L.message || 'User deleted successfully.';
				(pe.success({ description: `<iconify-icon icon="mdi:check" width="24"/> ${H}` }), await yt(), Qe.close());
			} catch (I) {
				const L = I instanceof Error ? I.message : 'An unknown error occurred.';
				pe.error({ description: `<iconify-icon icon="mdi:alert-circle" width="24"/> ${L}` });
			}
	}
	var fe = Dn(),
		ye = r(fe);
	G(ye, 1, 'text-center dark:text-primary-500 text-2xl font-bold');
	var Pe = r(ye, !0);
	a(ye);
	var ce = l(ye, 2),
		$e = r(ce, !0);
	a(ce);
	var Ce = l(ce, 2);
	G(Ce, 1, 'modal-form border border-surface-500 p-4 space-y-4 rounded-xl');
	var Ee = r(Ce),
		Ae = r(Ee);
	(P(Ae, 'icon', 'mdi:user-circle'), P(Ae, 'width', '18'), G(Ae, 1, 'absolute left-0 top-3.5 text-gray-400'));
	var ke = l(Ae, 2);
	{
		let I = F(() => Xa()),
			L = F(() => w() && U() !== n?._id);
		ia(ke, {
			type: 'text',
			name: 'username',
			get label() {
				return e(I);
			},
			onkeydown: () => (u.errors.username = []),
			required: !0,
			get disabled() {
				return e(L);
			},
			autocomplete: 'username',
			textColor: 'text-tertiary-500 dark:text-white',
			get value() {
				return u.data.username;
			},
			set value(H) {
				u.data.username = H;
			}
		});
	}
	var _e = l(ke, 2);
	{
		var ge = (I) => {
			var L = bn(),
				H = r(L, !0);
			(a(L), R(() => D(H, u.errors.username[0])), c(I, L));
		};
		O(_e, (I) => {
			u.errors.username && I(ge);
		});
	}
	a(Ee);
	var Se = l(Ee, 2),
		je = r(Se);
	(P(je, 'icon', 'mdi:email'), P(je, 'width', '18'), G(je, 1, 'absolute left-0 top-3.5 text-gray-400'));
	var Me = l(je, 2);
	ia(Me, {
		type: 'email',
		name: 'email',
		label: 'Email',
		onkeydown: () => (u.errors.email = []),
		required: !0,
		disabled: !0,
		autocomplete: 'email',
		textColor: 'text-tertiary-500 dark:text-white',
		get value() {
			return u.data.email;
		},
		set value(I) {
			u.data.email = I;
		}
	});
	var Oe = l(Me, 2);
	{
		var Ke = (I) => {
			var L = yn(),
				H = r(L, !0);
			(a(L), R(() => D(H, u.errors.email[0])), c(I, L));
		};
		O(Oe, (I) => {
			u.errors.email && I(Ke);
		});
	}
	a(Se);
	var y = l(Se, 2);
	{
		var ee = (I) => {
			var L = kn(),
				H = B(L);
			{
				var V = (ie) => {
					var oe = hn(),
						Ie = r(oe),
						g = r(Ie);
					(P(g, 'icon', 'mdi:information'), P(g, 'width', '16'), G(g, 1, 'mr-2 mt-0.5 shrink-0'), Gt(2), a(Ie), a(oe), c(ie, oe));
				};
				O(H, (ie) => {
					!e(j) && n?.isAdmin && ie(V);
				});
			}
			var Y = l(H, 2),
				ve = r(Y);
			(P(ve, 'icon', 'mdi:password'), P(ve, 'width', '18'), G(ve, 1, 'absolute left-0 top-3.5 text-gray-400'));
			var Q = l(ve, 2);
			{
				let ie = F(() => (e(j) ? ki() : 'Set New Password'));
				ia(Q, {
					type: 'password',
					name: 'password',
					id: 'password',
					get label() {
						return e(ie);
					},
					onkeydown: () => (u.errors.password = []),
					autocomplete: 'new-password',
					textColor: 'text-tertiary-500 dark:text-white',
					passwordIconColor: 'text-tertiary-500 dark:text-white',
					get value() {
						return u.data.password;
					},
					set value(oe) {
						u.data.password = oe;
					},
					get showPassword() {
						return e(d);
					},
					set showPassword(oe) {
						C(d, oe, !0);
					}
				});
			}
			var te = l(Q, 2);
			{
				var ae = (ie) => {
					var oe = xn(),
						Ie = r(oe, !0);
					(a(oe), R(() => D(Ie, u.errors.password[0])), c(ie, oe));
				};
				O(te, (ie) => {
					u.errors.password && ie(ae);
				});
			}
			a(Y);
			var re = l(Y, 2),
				W = r(re);
			(P(W, 'icon', 'mdi:password'), P(W, 'width', '18'), G(W, 1, 'absolute left-0 top-3.5 text-gray-400'));
			var ue = l(W, 2);
			{
				let ie = F(() => Fi?.() || Ti?.());
				ia(ue, {
					type: 'password',
					name: 'confirm_password',
					id: 'confirm_password',
					get label() {
						return e(ie);
					},
					onkeydown: () => (u.errors.confirmPassword = []),
					autocomplete: 'new-password',
					textColor: 'text-tertiary-500 dark:text-white',
					passwordIconColor: 'text-tertiary-500 dark:text-white',
					get value() {
						return u.data.confirmPassword;
					},
					set value(oe) {
						u.data.confirmPassword = oe;
					},
					get showPassword() {
						return e(d);
					},
					set showPassword(oe) {
						C(d, oe, !0);
					}
				});
			}
			var he = l(ue, 2);
			{
				var Te = (ie) => {
					var oe = wn(),
						Ie = r(oe, !0);
					(a(oe), R(() => D(Ie, u.errors.confirmPassword[0])), c(ie, oe));
				};
				O(he, (ie) => {
					u.errors.confirmPassword && ie(Te);
				});
			}
			(a(re), c(I, L));
		};
		O(y, (I) => {
			e(q) && I(ee);
		});
	}
	var Fe = l(y, 2);
	(Ua(Fe, {
		get config() {
			return h;
		},
		silent: !0,
		children: (I, L) => {
			var H = se(),
				V = B(H);
			{
				var Y = (Q) => {
						var te = En(),
							ae = r(te),
							re = r(ae, !0);
						a(ae);
						var W = l(ae, 2),
							ue = r(W),
							he = r(ue);
						{
							var Te = (ie) => {
								var oe = se(),
									Ie = B(oe);
								(Pt(
									Ie,
									17,
									() => o,
									ha,
									(g, M) => {
										var J = Tn();
										J.__click = () => (u.data.role = e(M)._id);
										var X = r(J);
										{
											var le = (Ve) => {
												var mt = Fn(),
													Rt = r(mt);
												(P(Rt, 'icon', 'fa:check'), a(mt), c(Ve, mt));
											};
											O(X, (Ve) => {
												u.data.role === e(M)._id && Ve(le);
											});
										}
										var be = l(X, 2),
											ne = r(be, !0);
										(a(be),
											a(J),
											R(() => {
												(G(J, 1, `chip ${u.data.role === e(M)._id ? 'preset-filled-tertiary-500' : 'preset-ghost-secondary-500'}`), D(ne, e(M).name));
											}),
											c(g, J));
									}
								),
									c(ie, oe));
							};
							O(he, (ie) => {
								o && o.length > 0 && ie(Te);
							});
						}
						(a(ue), a(W), a(te), R((ie) => D(re, ie), [() => sa()]), c(Q, te));
					},
					ve = (Q) => {
						var te = Pn(),
							ae = r(te),
							re = r(ae, !0);
						a(ae);
						var W = l(ae, 2),
							ue = r(W),
							he = r(ue),
							Te = r(he);
						(P(Te, 'icon', 'mdi:information'), P(Te, 'width', '16'), G(Te, 1, 'mr-2 shrink-0'));
						var ie = l(Te, 2),
							oe = l(r(ie));
						(Gt(3),
							a(ie),
							a(he),
							a(ue),
							a(W),
							a(te),
							R(
								(Ie, g) => {
									(D(re, Ie), D(oe, ` ${g ?? ''} `));
								},
								[() => sa(), () => o?.find((Ie) => Ie._id === u.data.role)?.name || u.data.role]
							),
							c(Q, te));
					};
				O(V, (Q) => {
					e(j) ? Q(ve, !1) : Q(Y);
				});
			}
			c(I, H);
		},
		$$slots: { default: !0 }
	}),
		a(Ce));
	var de = l(Ce, 2),
		_ = r(de);
	{
		var v = (I) => {
			Ua(I, {
				get config() {
					return x;
				},
				silent: !0,
				children: (L, H) => {
					var V = An();
					V.__click = Z;
					var Y = r(V);
					(P(Y, 'icon', 'icomoon-free:bin'), P(Y, 'width', '24'));
					var ve = l(Y, 2),
						Q = r(ve, !0);
					(a(ve), a(V), R((te) => D(Q, te), [() => ya()]), c(L, V));
				},
				$$slots: { default: !0 }
			});
		};
		O(_, (I) => {
			e(S) && I(v);
		});
	}
	var T = l(_, 2),
		f = r(T);
	f.__click = () => Qe.close();
	var b = r(f, !0);
	a(f);
	var A = l(f, 2),
		z = r(A, !0);
	(a(A),
		a(T),
		a(de),
		a(fe),
		R(
			(I, L) => {
				(D(Pe, t.title ?? '(title missing)'),
					D($e, t.body ?? '(body missing)'),
					G(de, 1, `modal-footer flex ${e(S) ? 'justify-between' : 'justify-end'} pt-4 border-t border-surface-500/20`),
					D(b, I),
					D(z, L));
			},
			[() => xa(), () => Qa()]
		),
		oa('submit', Ce, $),
		c(i, fe),
		ze());
}
Ot(['click']);
var jn = k('<iconify-icon></iconify-icon>', 2),
	Cn = k('<iconify-icon></iconify-icon>', 2),
	In = k(
		'<li role="none"><button type="button" role="menuitem" class="group/item relative flex w-full items-center gap-3 px-4 py-3 text-left text-white transition-all duration-200 hover:bg-white/5"><div></div> <div class="relative z-10 flex h-8 w-8 items-center justify-center rounded-full bg-surface-700/50 transition-transform group-hover/item:scale-110"><iconify-icon></iconify-icon></div> <div class="relative z-10 flex-1"><div class="font-semibold capitalize"> </div></div> <!></button></li>',
		2
	),
	Un = k(
		'<div class="absolute right-0 top-full z-50 mt-2 w-56 overflow-hidden rounded-xl bg-surface-800 shadow-2xl ring-1 ring-black/20 backdrop-blur-md origin-top-right" role="menu" aria-label="Available actions"><ul class="flex flex-col py-1"></ul></div>'
	),
	$n = k(
		'<div class="relative flex items-center"><div role="group"><button type="button"><iconify-icon></iconify-icon> <span class="uppercase tracking-wider"> </span></button> <button type="button" aria-haspopup="menu" aria-label="Toggle actions menu"><iconify-icon></iconify-icon></button> <!></div></div>',
		2
	);
function Sn(i, t) {
	Le(t, !0);
	const o = (y) => !!y && typeof y == 'object' && '_id' in y,
		n = (y) => !!y && typeof y == 'object' && 'token' in y;
	let s = Re(t, 'type', 3, 'user'),
		h = Re(t, 'totalUsers', 3, 0),
		x = Re(t, 'currentUser', 3, null),
		w = Re(t, 'onUpdate', 3, () => {}),
		m = me('edit'),
		p = me(!1),
		E = me(null),
		U = me(null);
	$t(() => {
		_i.set(e(m));
	});
	function u(y) {
		e(p) && e(U) && !e(U).contains(y.target) && C(p, !1);
	}
	(Ar(() => {
		document.addEventListener('click', u);
	}),
		Wr(() => {
			document.removeEventListener('click', u);
		}));
	const d = F(() => (Array.isArray(t.selectedRows) ? t.selectedRows.filter(Boolean) : [])),
		j = F(() => e(d).length === 0),
		q = F(() => e(d).length > 1),
		K = F(() => () => {
			if (e(d).length === 0) return null;
			if (s() === 'user') {
				const y = e(d).filter(o);
				if (y.length === 0) return null;
				const ee = y.filter((de) => de.blocked).length,
					Fe = y.filter((de) => !de.blocked).length;
				return ee === y.length ? 'all-blocked' : Fe === y.length ? 'all-unblocked' : 'mixed';
			} else {
				const y = e(d).filter(n);
				if (y.length === 0) return null;
				const ee = y.filter((de) => de.blocked).length,
					Fe = y.filter((de) => !de.blocked).length;
				return ee === y.length ? 'all-blocked' : Fe === y.length ? 'all-unblocked' : 'mixed';
			}
		}),
		S = F(() => {
			const y = ['edit', 'delete'],
				ee = e(K);
			return ee() === 'all-blocked'
				? [...y, 'unblock']
				: ee() === 'all-unblocked'
					? [...y, 'block']
					: ee() === 'mixed'
						? [...y, 'block', 'unblock']
						: y;
		}),
		$ = F(() => (Array.isArray(e(S)) ? e(S) : []).filter((ee) => ee !== e(m)));
	$t(() => {
		if (e(d).length > 0 && !e(S).includes(e(m))) {
			const y = e(K);
			y() === 'all-blocked' && e(m) === 'block'
				? C(m, 'unblock')
				: y() === 'all-unblocked' && e(m) === 'unblock'
					? C(m, 'block')
					: e(S).includes(e(m)) || C(m, 'edit');
		}
	});
	const Z = F(
		() =>
			s() === 'user' &&
			e(m) === 'delete' &&
			(h() <= 1 || (x() && e(d).length === 1 && o(e(d)[0]) && e(d)[0]._id === x()._id && h() === 1) || e(d).length >= h())
	);
	function fe(y) {
		if (!y) return '7d';
		const ee = new Date(),
			de = new Date(y).getTime() - ee.getTime(),
			_ = Math.ceil(de / (1e3 * 60 * 60)),
			v = Math.ceil(_ / 24);
		return _ <= 1 ? '1h' : v <= 1 ? '1d' : v <= 7 ? '7d' : v <= 30 ? '30d' : (v <= 90, '90d');
	}
	const ye = F(() => ({
		edit: {
			buttonClass: 'gradient-primary',
			hoverClass: 'gradient-primary-hover',
			iconValue: 'bi:pencil-fill',
			label: 'Edit',
			modalTitle: () => (s() === 'user' ? Cr() : Ga()),
			modalBody: () => (s() === 'user' ? 'Modify your data and then press Save.' : Ha()),
			endpoint: () => {
				if (s() === 'user') return '/api/user/updateUserAttributes';
				{
					const y = e(d)[0];
					if (n(y)) return `/api/token/${y.token}`;
					throw new Error('No token selected for editing');
				}
			},
			method: () => 'PUT',
			toastMessage: () => `${s() === 'user' ? 'User' : 'Token'} Updated`,
			toastBackground: 'gradient-primary'
		},
		delete: {
			buttonClass: 'gradient-error',
			hoverClass: 'gradient-error-hover',
			iconValue: 'bi:trash3-fill',
			label: 'Delete',
			modalTitle: () =>
				s() === 'user'
					? 'Please Confirm User <span class="text-error-500 font-bold">Deletion</span>'
					: 'Please Confirm Token <span class="text-error-500 font-bold">Deletion</span>',
			modalBody: () => {
				if (s() === 'user')
					if (e(d).length === 1) {
						const y = e(d)[0];
						return o(y)
							? `Are you sure you want to <span class="text-error-500 font-semibold">delete</span> user <span class="text-tertiary-500 font-medium">${y.email}</span>? This action cannot be undone and will permanently remove the user from the system.`
							: '';
					} else
						return `Are you sure you want to <span class="text-error-500 font-semibold">delete</span> <span class="text-tertiary-500 font-medium">${e(d).length} users</span>? This action cannot be undone and will permanently remove all selected users from the system.`;
				else if (e(d).length === 1) {
					const y = e(d)[0];
					return n(y)
						? `Are you sure you want to <span class="text-error-500 font-semibold">delete</span> token for <span class="text-tertiary-500 font-medium">${y.email}</span>? This action cannot be undone and will permanently remove the token from the system.`
						: '';
				} else
					return `Are you sure you want to <span class="text-error-500 font-semibold">delete</span> <span class="text-tertiary-500 font-medium">${e(d).length} tokens</span>? This action cannot be undone and will permanently remove all selected tokens from the system.`;
			},
			endpoint: () => (s() === 'user' ? '/api/user/batch' : '/api/token/batch'),
			method: () => 'POST',
			toastMessage: () => `${s() === 'user' ? 'Users' : 'Tokens'} Deleted`,
			toastBackground: 'preset-filled-success-500'
		},
		block: {
			buttonClass: 'gradient-pink',
			hoverClass: 'gradient-yellow-hover',
			iconValue: 'material-symbols:lock',
			label: 'Block',
			modalTitle: () =>
				s() === 'user'
					? 'Please Confirm User <span class="text-error-500 font-bold">Block</span>'
					: 'Please Confirm Token <span class="text-error-500 font-bold">Block</span>',
			modalBody: () => {
				if (s() === 'user')
					if (e(d).length === 1) {
						const y = e(d)[0];
						return o(y)
							? `Are you sure you want to <span class="text-error-500 font-semibold">block</span> user <span class="text-tertiary-500 font-medium">${y.email}</span>? This will prevent them from accessing the system.`
							: '';
					} else
						return `Are you sure you want to <span class="text-error-500 font-semibold">block</span> <span class="text-tertiary-500 font-medium">${e(d).length} users</span>? This will prevent them from accessing the system.`;
				else if (e(d).length === 1) {
					const y = e(d)[0];
					return n(y)
						? `Are you sure you want to <span class="text-error-500 font-semibold">block</span> token for <span class="text-tertiary-500 font-medium">${y.email}</span>? This will prevent the token from being used.`
						: '';
				} else
					return `Are you sure you want to <span class="text-error-500 font-semibold">block</span> <span class="text-tertiary-500 font-medium">${e(d).length} tokens</span>? This will prevent them from being used.`;
			},
			endpoint: () => (s() === 'user' ? '/api/user/batch' : '/api/token/batch'),
			method: () => 'POST',
			toastMessage: () => `${s() === 'user' ? 'Users' : 'Tokens'} Blocked`,
			toastBackground: 'preset-filled-success-500'
		},
		unblock: {
			buttonClass: 'gradient-yellow',
			hoverClass: 'gradient-primary-hover',
			iconValue: 'material-symbols:lock-open',
			label: 'Unblock',
			modalTitle: () =>
				s() === 'user'
					? 'Please Confirm User <span class="text-success-500 font-bold">Unblock</span>'
					: 'Please Confirm Token <span class="text-success-500 font-bold">Unblock</span>',
			modalBody: () => {
				if (s() === 'user')
					if (e(d).length === 1) {
						const y = e(d)[0];
						return o(y)
							? `Are you sure you want to <span class="text-success-500 font-semibold">unblock</span> user <span class="text-tertiary-500 font-medium">${y.email}</span>? This will allow them to access the system again.`
							: '';
					} else
						return `Are you sure you want to <span class="text-success-500 font-semibold">unblock</span> <span class="text-tertiary-500 font-medium">${e(d).length} users</span>? This will allow them to access the system again.`;
				else if (e(d).length === 1) {
					const y = e(d)[0];
					return n(y)
						? `Are you sure you want to <span class="text-success-500 font-semibold">unblock</span> token for <span class="text-tertiary-500 font-medium">${y.email}</span>? This will allow the token to be used again.`
						: '';
				} else
					return `Are you sure you want to <span class="text-success-500 font-semibold">unblock</span> <span class="text-tertiary-500 font-medium">${e(d).length} tokens</span>? This will allow them to be used again.`;
			},
			endpoint: () => (s() === 'user' ? '/api/user/batch' : '/api/token/batch'),
			method: () => 'POST',
			toastMessage: () => `${s() === 'user' ? 'Users' : 'Tokens'} Unblocked`,
			toastBackground: 'preset-filled-success-500'
		}
	}));
	async function Pe(y, ee) {
		try {
			let Fe;
			s() === 'user'
				? (Fe = JSON.stringify({
						userIds: e(d)
							.filter(o)
							.map((f) => f._id),
						action: y
					}))
				: (Fe = JSON.stringify({
						tokenIds: e(d)
							.filter(n)
							.map((f) => f.token),
						action: y
					}));
			const de = ee.endpoint(),
				_ = await fetch(de, { method: ee.method(), headers: { 'Content-Type': 'application/json' }, body: Fe });
			if (!_.ok) {
				let f = `Failed to ${y} ${s()}`;
				try {
					f = (await _.json()).message || f;
				} catch {
					f = _.statusText || f;
				}
				throw new Error(f);
			}
			let T = (await _.json()).message || ee.toastMessage();
			if ((pe.success({ description: T }), y === 'block' || y === 'unblock' || y === 'delete')) {
				const f =
					s() === 'user'
						? e(d)
								.filter(o)
								.map((b) => b._id)
						: e(d)
								.filter(n)
								.map((b) => b.token);
				w()({ ids: f, action: y, type: s() });
			}
			await yt();
		} catch (Fe) {
			it.error(`Error during action '${y}' for type '${s()}':`, Fe);
			const de = Fe instanceof Error ? Fe.message : 'An unknown error occurred.';
			pe.error({ description: de });
		}
	}
	async function ce(y) {
		if (e(j)) {
			pe.error({ description: `Please select ${s()}(s) to ${y}` });
			return;
		}
		if (y === 'delete' && e(Z)) {
			pe.error({ description: 'Cannot delete the last user in the system' });
			return;
		}
		if (y === 'edit' && e(q)) {
			pe.error({ description: `Please select only one ${s()} to edit` });
			return;
		}
		if (!e(S).includes(y)) {
			const de = e(K);
			if (de() === 'all-blocked' && y === 'block') {
				pe.warning({ description: 'All selected items are already blocked' });
				return;
			} else if (de() === 'all-unblocked' && y === 'unblock') {
				pe.warning({ description: 'All selected items are already unblocked' });
				return;
			}
		}
		if (y === 'edit' && s() === 'token' && !(n(e(d)[0]) ? e(d)[0] : void 0)?.token) {
			pe.error({ description: 'Invalid token data selected' });
			return;
		}
		const ee = e(ye)[y];
		y === 'edit'
			? s() === 'user'
				? Qe.trigger(Vr, {
						isGivenData: !0,
						username: o(e(d)[0]) ? (e(d)[0].username ?? null) : null,
						email: e(d)[0].email,
						role: e(d)[0].role,
						user_id: e(d)[0]._id,
						title: ee.modalTitle(),
						body: ee.modalBody()
					})
				: Qe.trigger(
						Ka,
						{
							token: e(d)[0].token,
							email: e(d)[0].email,
							role: e(d)[0].role,
							user_id: e(d)[0].user_id,
							expires: fe(e(d)[0].expires),
							title: ee.modalTitle(),
							body: ee.modalBody()
						},
						(de) => {
							de && de.success && w()({ action: 'refresh', type: 'token', ids: [] });
						}
					)
			: na({
					title: ee.modalTitle(),
					body: ee.modalBody(),
					onConfirm: async () => {
						(await Pe(y, ee), Qe.close());
					}
				});
	}
	function $e(y) {
		(y.stopPropagation(), !e(j) && C(p, !e(p)));
	}
	function Ce(y, ee) {
		(y.preventDefault(), y.stopPropagation(), C(m, ee, !0), C(p, !1), ce(ee));
	}
	var Ee = $n(),
		Ae = r(Ee),
		ke = r(Ae);
	ke.__click = () => ce(e(m));
	var _e = r(ke);
	(R(() => P(_e, 'icon', e(ye)[e(m)].iconValue)), P(_e, 'width', '20'));
	var ge = l(_e, 2),
		Se = r(ge, !0);
	(a(ge), a(ke));
	var je = l(ke, 2);
	je.__click = $e;
	var Me = r(je);
	(P(Me, 'icon', 'ic:round-keyboard-arrow-down'), P(Me, 'width', '24'), a(je));
	var Oe = l(je, 2);
	{
		var Ke = (y) => {
			var ee = Un(),
				Fe = r(ee);
			(Pt(
				Fe,
				21,
				() => e($),
				ha,
				(de, _) => {
					const v = F(() => e(ye)[e(_)]);
					var T = In(),
						f = r(T);
					f.__click = (Q) => Ce(Q, e(_));
					var b = r(f),
						A = l(b, 2),
						z = r(A);
					(R(() => P(z, 'icon', e(v).iconValue)), P(z, 'width', '16'), a(A));
					var I = l(A, 2),
						L = r(I),
						H = r(L, !0);
					(a(L), a(I));
					var V = l(I, 2);
					{
						var Y = (Q) => {
								var te = jn();
								(P(te, 'icon', 'mdi:chevron-right'), P(te, 'width', '18'), G(te, 1, 'relative z-10 text-white'), c(Q, te));
							},
							ve = (Q) => {
								var te = se(),
									ae = B(te);
								{
									var re = (W) => {
										var ue = Cn();
										(P(ue, 'icon', 'mdi:check'), P(ue, 'width', '18'), G(ue, 1, 'relative z-10 text-primary-500'), c(W, ue));
									};
									O(
										ae,
										(W) => {
											e(m) === e(_) && W(re);
										},
										!0
									);
								}
								c(Q, te);
							};
						O(V, (Q) => {
							e(E) === e(_) ? Q(Y) : Q(ve, !1);
						});
					}
					(a(f),
						a(T),
						R(() => {
							(G(b, 1, `absolute inset-0 ${e(v).buttonClass ?? ''} opacity-0 transition-opacity duration-200 group-hover/item:opacity-100`),
								D(H, e(_)));
						}),
						oa('mouseenter', T, () => C(E, e(_), !0)),
						oa('mouseleave', T, () => C(E, null)),
						c(de, T));
				}
			),
				a(Fe),
				a(ee),
				ai(
					3,
					ee,
					() => ri,
					() => ({ duration: 150, easing: Uo, start: 0.95, opacity: 0 })
				),
				c(y, ee));
		};
		O(Oe, (y) => {
			e(p) && y(Ke);
		});
	}
	(a(Ae),
		a(Ee),
		Io(
			Ee,
			(y) => C(U, y),
			() => e(U)
		),
		R(() => {
			(G(
				Ae,
				1,
				`group/main relative flex items-center shadow-xl overflow-visible transition-all duration-200 ${e(j) ? '' : 'active:scale-95 cursor-pointer'} rounded-l-full rounded-r-md border border-white/20 ${e(p) ? 'ring-2 ring-primary-500/50' : ''}`
			),
				(ke.disabled = e(j) || (e(m) === 'delete' && e(Z))),
				G(
					ke,
					1,
					`h-[40px] min-w-[120px] font-bold transition-all duration-200
				${e(j) ? 'pointer-events-none opacity-50 grayscale' : 'active:scale-95'} 
				${e(ye)[e(m)].buttonClass ?? ''} text-white
				rounded-l-full rounded-r-none px-6 flex items-center justify-center gap-2 border-r border-white/20`
				),
				Xe(ke, 'aria-label', `${e(m) ?? ''} selected items`),
				D(Se, e(m)),
				(je.disabled = e(j)),
				G(
					je,
					1,
					`h-[40px] w-[40px] transition-all duration-200 text-white flex items-center justify-center shadow-inner rounded-r-md
				${e(j) ? 'bg-surface-800 opacity-50 pointer-events-none' : 'bg-surface-800 hover:bg-surface-700 active:scale-95 cursor-pointer'}`
				),
				Xe(je, 'aria-expanded', e(p)),
				G(Me, 1, `transition-transform duration-200 ${e(p) ? 'rotate-180' : ''}`));
		}),
		c(i, Ee),
		ze());
}
Ot(['click']);
var On = k('<button class="gradient-secondary btn w-full text-white sm:max-w-xs"><iconify-icon></iconify-icon> <span> </span></button>', 2),
	Rn = k('<button class="gradient-secondary btn w-full text-white sm:max-w-xs"><iconify-icon></iconify-icon> <span> </span></button> <!>', 3),
	Ln = k('<span><iconify-icon></iconify-icon></span>', 2),
	zn = k('<button><!> <span class="ml-2 capitalize"> </span></button>'),
	Mn = k(
		'<div class="rounded-b-0 flex flex-col justify-center rounded-t-md border-b bg-surface-300 text-center dark:bg-surface-700"><div class="text-white dark:text-primary-500"> </div> <div class="my-2 flex w-full items-center justify-center gap-1"><label class="mr-2"><input type="checkbox"/> </label> <section class="flex flex-wrap justify-center gap-1 rounded-md p-2"></section></div></div>'
	),
	Nn = k('<button aria-label="Clear All Filters" class="preset-outline btn-icon"><iconify-icon></iconify-icon></button>', 2),
	Bn = k('<th><div class="flex items-center justify-between"><!></div></th>'),
	Vn = k('<tr class="divide-x divide-surface-200/50 dark:divide-surface-700/50"><th><!></th><!></tr>'),
	qn = k(
		'<th class="cursor-pointer text-tertiary-500 dark:text-primary-500 hover:bg-surface-100/50 dark:hover:bg-surface-800/50 transition-colors"><div class="flex items-center justify-center gap-1"> <iconify-icon></iconify-icon></div></th>',
		2
	),
	Hn = k(
		'<button class="btn-sm cursor-pointer rounded-md p-1 transition-all duration-200 hover:scale-105 hover:bg-surface-200 hover:shadow-md dark:hover:bg-surface-600"><!></button>'
	),
	Gn = k(
		'<button class="btn-sm cursor-pointer rounded-md p-1 transition-all duration-200 hover:scale-105 hover:bg-surface-200 hover:shadow-md dark:hover:bg-surface-600"><!></button>'
	),
	Zn = k('<!> <!>', 1),
	Wn = k(
		'<div class="flex items-center justify-center gap-2"><span class="font-mono text-sm"> </span> <button class="preset-ghost btn-icon btn-icon-sm hover:preset-filled-tertiary-500 hover:dark:preset-filled-primary-500" aria-label="Copy User ID" title="Copy User ID to clipboard"><iconify-icon></iconify-icon></button></div>',
		2
	),
	Jn = k(
		'<div class="flex items-center justify-center gap-2"><span class="max-w-[200px] truncate font-mono text-sm"> </span> <button class="preset-ghost btn-icon btn-icon-sm hover:preset-filled-tertiary-500 hover:dark:preset-filled-primary-500" aria-label="Copy Token" title="Copy Token to clipboard"><iconify-icon></iconify-icon></button></div>',
		2
	),
	Kn = k('<iconify-icon></iconify-icon>', 2),
	Yn = k('<span> <!></span>'),
	Qn = k('<td class="text-center"><!></td>'),
	Xn = k('<tr><!><!></tr>'),
	el = k(
		'<!> <div class="table-container max-h-[calc(100vh-120px)] overflow-auto"><table><thead class="divide-x divide-surface-200/50 dark:divide-surface-50 text-surface-500 dark:text-surface-300 bg-secondary-100 dark:bg-surface-800/50"><!><tr class="divide-x divide-surface-300 dark:divide-surface-50 border-b border-surface-300 dark:border-surface-50 font-semibold tracking-wide uppercase text-xs"><!><!></tr></thead><tbody class="divide-y divide-surface-200/30 dark:divide-surface-700/30"></tbody></table></div> <div class="mt-2 flex flex-col items-center justify-center px-2 md:flex-row md:justify-between md:p-4"><!></div>',
		1
	),
	tl = k('<div class="preset-ghost-error-500 btn text-center font-bold"><!></div>'),
	al = k(
		'<div class="my-4 flex flex-wrap items-center justify-between gap-1"><h2 class="order-1 text-xl font-bold text-tertiary-500 dark:text-primary-500"><!></h2> <div class="order-3 sm:order-2"><!></div> <div class="order-2 flex items-center justify-center sm:order-3"><!></div></div> <!>',
		1
	),
	rl = k(
		'<div class="flex flex-col"><p class="h2 mb-2 text-center text-3xl font-bold dark:text-white"> </p> <div class="flex flex-col flex-wrap items-center justify-evenly gap-2 sm:flex-row xl:justify-between"><button class="gradient-primary btn w-full text-white sm:max-w-xs"><iconify-icon></iconify-icon> <span class="whitespace-normal wrap-break-word"> </span></button> <!> <button class="gradient-tertiary btn w-full text-white sm:max-w-xs"><iconify-icon></iconify-icon> <span> </span></button></div> <!></div>',
		2
	);
function il(i, t) {
	Le(t, !0);
	function o(g) {
		return 'token' in g && typeof g.token == 'string';
	}
	function n(g) {
		return '_id' in g && typeof g._id == 'string';
	}
	const s = Re(t, 'currentUser', 3, null),
		h = Re(t, 'isMultiTenant', 3, !1),
		x = Re(t, 'roles', 19, () => []),
		w = si(300),
		m = 300;
	let p = me(Ht([])),
		E = me(0);
	async function U() {
		await gi.withLoading(
			bi.dataFetch,
			async () => {
				const g = e(q) ? '/api/admin/users' : '/api/admin/tokens',
					M = new URLSearchParams();
				(M.set('page', String(e(Ee))),
					M.set('limit', String(e(Ae))),
					M.set('sort', e(_e).sortedBy || 'createdAt'),
					e(_e).isSorted !== 0 && M.set('order', e(_e).isSorted === 1 ? 'asc' : 'desc'),
					e($) && M.set('search', e($)));
				try {
					const J = await fetch(`${g}?${M.toString()}`);
					if (!J.ok) {
						const le = await J.json();
						throw new Error(le.message || 'Failed to fetch data');
					}
					const X = await J.json();
					X.success && (C(p, X.data, !0), C(E, X.pagination.totalItems, !0));
				} catch (J) {
					const X = J instanceof Error ? J.message : 'Unknown error';
					(it.error('AdminArea fetch error:', X), pe.error({ description: `Error fetching data: ${X}` }), C(p, [], !0), C(E, 0));
				}
			},
			'Fetching admin data'
		);
	}
	function u(g) {
		const { ids: M, action: J, type: X } = g;
		if (J === 'refresh') {
			U();
			return;
		}
		if (e(p)) {
			let le = !1;
			if (J === 'delete') {
				const be = e(p).filter((ne) => (X === 'user' && n(ne) ? !M.includes(ne._id) : X === 'token' && o(ne) ? !M.includes(ne.token) : !0));
				be.length !== e(p).length && (C(p, be, !0), (le = !0));
			} else {
				const be = e(p).map((ne) => {
					let Ve = !1;
					if ((X === 'user' && n(ne) && M.includes(ne._id) && (Ve = !0), X === 'token' && o(ne) && M.includes(ne.token) && (Ve = !0), Ve)) {
						if (((le = !0), J === 'block')) return { ...ne, blocked: !0 };
						if (J === 'unblock') return { ...ne, blocked: !1 };
					}
					return ne;
				});
				le && C(p, be, !0);
			}
			le && (C(ce, {}, !0), C(Pe, !1));
		}
	}
	const d = [
			{ label: sr(), key: 'blocked' },
			{ label: Ei(), key: 'avatar' },
			{ label: $a(), key: 'email' },
			{ label: Xa(), key: 'username' },
			{ label: sa(), key: 'role' },
			{ label: 'Tenant ID', key: 'tenantId' },
			{ label: Pi(), key: '_id' },
			{ label: Ai(), key: 'activeSessions' },
			{ label: Di(), key: 'lastAccess' },
			{ label: nr(), key: 'createdAt' },
			{ label: lr(), key: 'updatedAt' }
		],
		j = [
			{ label: sr(), key: 'blocked' },
			{ label: $a(), key: 'email' },
			{ label: sa(), key: 'role' },
			{ label: 'Tenant ID', key: 'tenantId' },
			{ label: ji(), key: 'token' },
			{ label: Ci(), key: 'expires' },
			{ label: nr(), key: 'createdAt' },
			{ label: lr(), key: 'updatedAt' }
		];
	let q = me(!0),
		K = me(!1),
		S = me(!1),
		$ = me(''),
		Z = me(!1),
		fe = me(!1),
		ye = me(!1),
		Pe = me(!1),
		ce = me(Ht({})),
		$e = me(
			Ht(
				(() => {
					const g = localStorage.getItem('userPaginationSettings');
					return g ? (JSON.parse(g).density ?? 'normal') : 'normal';
				})()
			)
		),
		Ce = me(!0),
		Ee = me(1),
		Ae = me(10),
		ke = me(Ht({})),
		_e = me(Ht({ sortedBy: '', isSorted: 0 })),
		ge = me(Ht([]));
	($t(() => {
		const g = e(q) ? d : j,
			M = h() ? g : g.filter((J) => J.key !== 'tenantId');
		C(
			ge,
			M.map((J) => ({
				label: J.label,
				key: J.key,
				visible: !0,
				id: `header-${Math.random().toString(36).substring(2, 15)}-${Date.now().toString(36)}`
			})),
			!0
		);
	}),
		$t(() => {
			(e(q),
				e(K),
				e(Ee),
				e(Ae),
				e(_e),
				e($),
				s(),
				rr(() => {
					U();
				}));
		}));
	function Se(g) {
		const M = g;
		M &&
			Qe.trigger(Ka, { token: M.token, email: M.email, role: M.role, expires: je(M.expires), title: Ga(), body: Ha(), roles: x() }, (J) => {
				J && J.success ? U() : J?.success === !1 && pe.error({ description: J.error || 'Failed to update token' });
			});
	}
	function je(g) {
		if (!g) return '2 days';
		const M = new Date(),
			X = new Date(g).getTime() - M.getTime(),
			le = Math.ceil(X / (1e3 * 60 * 60)),
			be = Math.ceil(le / 24);
		return le <= 2 ? '2 hrs' : le <= 12 ? '12 hrs' : be <= 2 ? '2 days' : be <= 7 ? '1 week' : be <= 14 ? '2 weeks' : (be <= 30, '1 month');
	}
	function Me(g) {
		if (!g) return '/Default_User.svg';
		try {
			if (g.startsWith('data:') || /^https?:\/\//i.test(g)) return g;
			if (/^\/?[^\s?]+\.svg$/i.test(g)) return g.startsWith('/') ? g : `/${g}`;
			let M = g.replace(/^\/+/, '');
			return (
				(M = M.replace(/^mediaFolder\//, '').replace(/^files\//, '')),
				(M = M.replace(/^\/+/, '')),
				M === 'files' || M === '' ? '/Default_User.svg' : `/files/${M}?t=${Date.now()}`
			);
		} catch {
			return '/Default_User.svg';
		}
	}
	function Oe(g) {
		if (!g) return 'Never';
		const M = new Date(),
			X = new Date(g).getTime() - M.getTime();
		if (X <= 0) return 'Expired';
		const le = Math.floor(X / (1e3 * 60)),
			be = Math.floor(X / (1e3 * 60 * 60)),
			ne = Math.floor(X / (1e3 * 60 * 60 * 24));
		if (ne > 0) {
			const Ve = Math.floor((X % 864e5) / 36e5);
			return Ve > 0 ? `${ne}d ${Ve}h` : `${ne}d`;
		} else if (be > 0) {
			const Ve = Math.floor((X % 36e5) / 6e4);
			return Ve > 0 ? `${be}h ${Ve}m` : `${be}h`;
		} else return `${le}m`;
	}
	function Ke(g) {
		if (g == null || g === '') return '-';
		try {
			const M = g instanceof Date ? g : new Date(String(g));
			return isNaN(M.getTime()) ? '-' : M.toLocaleString();
		} catch {
			return '-';
		}
	}
	async function y(g) {
		if (!g._id) return;
		if (s() && g._id === s()._id) {
			pe.warning({ description: 'You cannot block your own account' });
			return;
		}
		const M = g.blocked ? 'unblock' : 'block',
			J = g.blocked ? 'unblocked' : 'blocked',
			X = g.blocked ? 'text-success-500' : 'text-error-500',
			le = g.blocked ? 'Unblock' : 'Block',
			be = `Please Confirm User <span class="${X} font-bold">${le}</span>`,
			ne = g.blocked
				? `Are you sure you want to <span class="text-success-500 font-semibold">unblock</span> user <span class="text-tertiary-500 font-medium">${g.email}</span>? This will allow them to access the system again.`
				: `Are you sure you want to <span class="text-error-500 font-semibold">block</span> user <span class="text-tertiary-500 font-medium">${g.email}</span>? This will prevent them from accessing the system.`;
		na({
			title: be,
			body: ne,
			onConfirm: async () => {
				await ee(g, M, J);
			}
		});
	}
	async function ee(g, M, J) {
		try {
			const le = await (
				await fetch('/api/user/batch', {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({ userIds: [g._id], action: M })
				})
			).json();
			if (le.success) {
				const be = e(p).map((ne) => ('_id' in ne && ne._id === g._id ? { ...ne, blocked: !ne.blocked } : ne));
				(C(p, be, !0), pe.success({ description: `User ${J} successfully` }));
			} else throw new Error(le.message || `Failed to ${M} user`);
		} catch (X) {
			const le = X instanceof Error ? X.message : 'Unknown error';
			pe.error({ description: `Failed to ${M} user: ${le}` });
		}
	}
	async function Fe(g) {
		if (!g.token) return;
		const M = g.blocked ? 'unblock' : 'block',
			J = g.blocked ? 'unblocked' : 'blocked',
			X = g.blocked ? 'text-success-500' : 'text-error-500',
			le = g.blocked ? 'Unblock' : 'Block',
			be = `Please Confirm Token <span class="${X} font-bold">${le}</span>`,
			ne = g.blocked
				? `Are you sure you want to <span class="text-success-500 font-semibold">unblock</span> token for <span class="text-tertiary-500 font-medium">${g.email}</span>? This will allow the token to be used again.`
				: `Are you sure you want to <span class="text-error-500 font-semibold">block</span> token for <span class="text-tertiary-500 font-medium">${g.email}</span>? This will prevent the token from being used.`;
		na({
			title: be,
			body: ne,
			onConfirm: async () => {
				await de(g, M, J);
			}
		});
	}
	async function de(g, M, J) {
		try {
			const le = await (
				await fetch('/api/token/batch', {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({ tokenIds: [g.token], action: M })
				})
			).json();
			if (le.success) {
				const be = e(p).map((ne) => ('token' in ne && ne.token === g.token ? { ...ne, blocked: !ne.blocked } : ne));
				(C(p, be, !0), pe.success({ description: `Token ${J} successfully` }));
			} else throw new Error(le.message || `Failed to ${M} token`);
		} catch (X) {
			const le = X instanceof Error ? X.message : 'Unknown error';
			pe.error({ description: `Failed to ${M} token: ${le}` });
		}
	}
	function _(g) {
		C(ge, g.detail.items, !0);
	}
	function v(g) {
		(C(ge, g.detail.items, !0), localStorage.setItem('userPaginationSettings', JSON.stringify({ density: e($e), displayTableHeaders: e(ge) })));
	}
	function T() {
		Qe.trigger(Ka, { title: Ga(), body: Ha(), roles: x(), user: s() }, (g) => {
			g && g.success && U();
		});
	}
	function f() {
		(C(q, !e(q)), e(K) && C(K, !1));
	}
	function b() {
		(C(K, !e(K)), C(q, !1));
	}
	const A = F(() => Math.ceil(e(E) / e(Ae)) || 1);
	let z = F(() =>
		Object.entries(e(ce))
			.filter(([, g]) => g)
			.map(([g]) => e(p)[parseInt(g)])
			.filter((g) => g != null)
	);
	($t(() => {
		(e(p),
			rr(() => {
				(C(ce, {}, !0), C(Pe, !1), C(Ee, 1));
			}));
	}),
		$t(() => {
			e(Ee) > e(A) && C(Ee, e(A), !0);
		}));
	function I() {
		const g = e(ge).every((M) => M.visible);
		(C(
			ge,
			e(ge).map((M) => ({ ...M, visible: !g })),
			!0
		),
			C(Ce, !g));
	}
	function L(g, M) {
		if (g) {
			const J = { ...e(ke), [M]: g };
			w(() => {
				C(ke, J, !0);
			});
		} else {
			const J = { ...e(ke) };
			(delete J[M], C(ke, J, !0));
		}
	}
	var H = rl(),
		V = r(H),
		Y = r(V, !0);
	a(V);
	var ve = l(V, 2),
		Q = r(ve);
	Q.__click = T;
	var te = r(Q);
	(P(te, 'icon', 'material-symbols:mail'), P(te, 'color', 'white'), P(te, 'width', '18'), G(te, 1, 'mr-1'));
	var ae = l(te, 2),
		re = r(ae, !0);
	(a(ae), a(Q));
	var W = l(Q, 2);
	{
		let g = F(() => ({
			contextId: 'user:manage',
			name: 'Manage User Tokens',
			description: 'Allows management of user tokens in the admin area.',
			action: So.MANAGE,
			contextType: $o.USER
		}));
		Ua(W, {
			get config() {
				return e(g);
			},
			children: (M, J) => {
				var X = Rn(),
					le = B(X);
				le.__click = b;
				var be = r(le);
				(P(be, 'icon', 'material-symbols:key-outline'), P(be, 'color', 'white'), P(be, 'width', '18'), G(be, 1, 'mr-1'));
				var ne = l(be, 2),
					Ve = r(ne, !0);
				(a(ne), a(le));
				var mt = l(le, 2);
				{
					var Rt = (xt) => {
						const At = F(() => new Date()),
							la = F(() => e(p).filter((He) => o(He) && He.expires != null && new Date(String(He.expires)) < e(At)));
						var Lt = se(),
							De = B(Lt);
						{
							var We = (He) => {
								var et = On();
								et.__click = () => C(S, !e(S));
								var Ye = r(et);
								(P(Ye, 'icon', 'material-symbols:schedule'), P(Ye, 'color', 'white'), P(Ye, 'width', '18'), G(Ye, 1, 'mr-1'));
								var Ge = l(Ye, 2),
									tt = r(Ge, !0);
								(a(Ge),
									a(et),
									R(() => {
										(Xe(et, 'aria-label', e(S) ? 'Hide Expired Tokens' : 'Show Expired Tokens'), D(tt, e(S) ? 'Hide Expired' : 'Show Expired'));
									}),
									c(He, et));
							};
							O(De, (He) => {
								e(la).length > 0 && He(We);
							});
						}
						c(xt, Lt);
					};
					O(mt, (xt) => {
						e(K) && !e(q) && e(p) && xt(Rt);
					});
				}
				(R(
					(xt, At) => {
						(Xe(le, 'aria-label', xt), D(Ve, At));
					},
					[() => (e(K) ? cr() : dr()), () => (e(K) ? cr() : dr())]
				),
					c(M, X));
			},
			$$slots: { default: !0 }
		});
	}
	var ue = l(W, 2);
	ue.__click = f;
	var he = r(ue);
	(P(he, 'icon', 'mdi:account-circle'), P(he, 'color', 'white'), P(he, 'width', '18'), G(he, 1, 'mr-1'));
	var Te = l(he, 2),
		ie = r(Te, !0);
	(a(Te), a(ue), a(ve));
	var oe = l(ve, 2);
	{
		var Ie = (g) => {
			var M = al(),
				J = B(M),
				X = r(J),
				le = r(X);
			{
				var be = (De) => {
						var We = bt();
						(R((He) => D(We, He), [() => Ui()]), c(De, We));
					},
					ne = (De) => {
						var We = se(),
							He = B(We);
						{
							var et = (Ye) => {
								var Ge = bt();
								(R((tt) => D(Ge, tt), [() => $i()]), c(Ye, Ge));
							};
							O(
								He,
								(Ye) => {
									e(K) && Ye(et);
								},
								!0
							);
						}
						c(De, We);
					};
				O(le, (De) => {
					e(q) ? De(be) : De(ne, !1);
				});
			}
			a(X);
			var Ve = l(X, 2),
				mt = r(Ve);
			(Ao(mt, {
				get globalSearchValue() {
					return e($);
				},
				set globalSearchValue(De) {
					C($, De, !0);
				},
				get searchShow() {
					return e(Z);
				},
				set searchShow(De) {
					C(Z, De, !0);
				},
				get filterShow() {
					return e(fe);
				},
				set filterShow(De) {
					C(fe, De, !0);
				},
				get columnShow() {
					return e(ye);
				},
				set columnShow(De) {
					C(ye, De, !0);
				},
				get density() {
					return e($e);
				},
				set density(De) {
					C($e, De, !0);
				}
			}),
				a(Ve));
			var Rt = l(Ve, 2),
				xt = r(Rt);
			{
				let De = F(() => (e(q) ? 'user' : 'token'));
				Sn(xt, {
					get selectedRows() {
						return e(z);
					},
					get type() {
						return e(De);
					},
					get totalUsers() {
						return e(E);
					},
					get currentUser() {
						return s();
					},
					onUpdate: u
				});
			}
			(a(Rt), a(J));
			var At = l(J, 2);
			{
				var la = (De) => {
						var We = el(),
							He = B(We);
						{
							var et = (xe) => {
								var N = Mn(),
									at = r(N),
									Dt = r(at, !0);
								a(at);
								var jt = l(at, 2),
									rt = r(jt),
									qe = r(rt);
								(Yt(qe), (qe.__click = I));
								var _t = l(qe);
								a(rt);
								var Ne = l(rt, 2);
								(Pt(
									Ne,
									29,
									() => e(ge),
									(we) => we.id,
									(we, ot) => {
										var wt = zn();
										wt.__click = () => {
											(C(
												ge,
												e(ge).map((st) => (st.id === e(ot).id ? { ...st, visible: !st.visible } : st)),
												!0
											),
												C(
													Ce,
													e(ge).every((st) => st.visible),
													!0
												));
										};
										var Qt = r(wt);
										{
											var za = (st) => {
												var Jt = Ln(),
													da = r(Jt);
												(P(da, 'icon', 'fa:check'), a(Jt), c(st, Jt));
											};
											O(Qt, (st) => {
												e(ot).visible && st(za);
											});
										}
										var Ct = l(Qt, 2),
											Wt = r(Ct, !0);
										(a(Ct),
											a(wt),
											R(() => {
												(G(
													wt,
													1,
													`chip ${e(ot).visible ? 'preset-filled-secondary-500' : 'preset-ghost-secondary-500'} w-100 mr-2 flex items-center justify-center`
												),
													D(Wt, e(ot).label));
											}),
											ii(
												wt,
												() => Ro,
												() => ({ duration: m })
											),
											c(we, wt));
									}
								),
									a(Ne),
									oi(
										Ne,
										(we, ot) => Oo?.(we, ot),
										() => ({ items: e(ge), flipDurationMs: m })
									),
									a(jt),
									a(N),
									R(
										(we, ot) => {
											(D(Dt, we), D(_t, ` ${ot ?? ''}`));
										},
										[() => Si(), () => Oi()]
									),
									Qr(
										qe,
										() => e(Ce),
										(we) => C(Ce, we)
									),
									oa('consider', Ne, _),
									oa('finalize', Ne, v),
									c(xe, N));
							};
							O(He, (xe) => {
								e(ye) && xe(et);
							});
						}
						var Ye = l(He, 2),
							Ge = r(Ye),
							tt = r(Ge),
							Ze = r(tt);
						{
							var nt = (xe) => {
								var N = Vn(),
									at = r(N),
									Dt = r(at);
								{
									var jt = (qe) => {
										var _t = Nn();
										_t.__click = () => C(ke, {}, !0);
										var Ne = r(_t);
										(P(Ne, 'icon', 'material-symbols:close'), P(Ne, 'width', '24'), a(_t), c(qe, _t));
									};
									O(Dt, (qe) => {
										Object.keys(e(ke)).length > 0 && qe(jt);
									});
								}
								a(at);
								var rt = l(at);
								(Pt(
									rt,
									17,
									() => e(ge).filter((qe) => qe.visible),
									(qe) => qe.id,
									(qe, _t) => {
										var Ne = Bn(),
											we = r(Ne),
											ot = r(we);
										{
											let wt = F(() => Ri());
											ia(ot, {
												type: 'text',
												icon: 'material-symbols:search-rounded',
												get label() {
													return e(wt);
												},
												get name() {
													return e(_t).key;
												},
												onInput: (Qt) => L(Qt, e(_t).key)
											});
										}
										(a(we), a(Ne), c(qe, Ne));
									}
								),
									a(N),
									c(xe, N));
							};
							O(Ze, (xe) => {
								e(fe) && xe(nt);
							});
						}
						var zt = l(Ze),
							Zt = r(zt);
						hr(Zt, {
							cellClass: 'w-10 text-center',
							get checked() {
								return e(Pe);
							},
							onCheck: (xe) => {
								C(Pe, xe, !0);
								for (let N = 0; N < e(p).length; N++) e(ce)[N] = xe;
							}
						});
						var ca = l(Zt);
						(Pt(
							ca,
							17,
							() => e(ge).filter((xe) => xe.visible),
							(xe) => xe.id,
							(xe, N) => {
								var at = qn();
								at.__click = () => {
									C(
										_e,
										{ sortedBy: e(N).key, isSorted: e(_e).sortedBy === e(N).key ? (e(_e).isSorted === 1 ? -1 : e(_e).isSorted === -1 ? 0 : 1) : 1 },
										!0
									);
								};
								var Dt = r(at),
									jt = r(Dt),
									rt = l(jt);
								(P(rt, 'icon', 'material-symbols:arrow-upward-rounded'), P(rt, 'width', '18'));
								let qe;
								(a(Dt),
									a(at),
									R(() => {
										(D(jt, `${e(N).label ?? ''} `),
											(qe = G(rt, 1, 'origin-center duration-300 ease-in-out', null, qe, {
												up: e(_e).isSorted === 1 && e(_e).sortedBy === e(N).key,
												invisible: e(_e).isSorted === 0 || e(_e).sortedBy !== e(N).key
											})));
									}),
									c(xe, at));
							}
						),
							a(zt),
							a(tt));
						var wa = l(tt);
						(Pt(
							wa,
							23,
							() => e(p),
							(xe, N) => (n(xe) ? xe._id : o(xe) ? xe.token : N),
							(xe, N, at) => {
								const Dt = F(() => (o(e(N)) ? e(N).expires : null)),
									jt = F(() => e(K) && e(Dt) && new Date(e(Dt)) < new Date());
								var rt = Xn();
								rt.__click = (Ne) => {
									e(K) && !Ne.target?.closest('td:first-child') && o(e(N)) && Se(e(N));
								};
								var qe = r(rt);
								{
									let Ne = F(() => e(ce)[e(at)] ?? !1);
									hr(qe, {
										get checked() {
											return e(Ne);
										},
										onCheck: (we) => {
											e(ce)[e(at)] = we;
										}
									});
								}
								var _t = l(qe);
								(Pt(
									_t,
									17,
									() => e(ge).filter((Ne) => Ne.visible),
									(Ne) => Ne.id,
									(Ne, we) => {
										var ot = Qn(),
											wt = r(ot);
										{
											var Qt = (Ct) => {
													var Wt = se(),
														st = B(Wt);
													{
														var Jt = (lt) => {
																var Je = Hn();
																Je.__click = () => n(e(N)) && y(e(N));
																var Xt = r(Je);
																{
																	let kt = F(() => !!e(N)[e(we).key]);
																	Er(Xt, {
																		get value() {
																			return e(kt);
																		}
																	});
																}
																(a(Je),
																	R(() => {
																		(Xe(Je, 'aria-label', e(N).blocked ? 'Click to unblock user' : 'Click to block user'),
																			Xe(Je, 'title', e(N).blocked ? 'Click to unblock user' : 'Click to block user'));
																	}),
																	c(lt, Je));
															},
															da = (lt) => {
																var Je = Gn();
																Je.__click = (kt) => {
																	(kt.stopPropagation(), o(e(N)) && Fe(e(N)));
																};
																var Xt = r(Je);
																{
																	let kt = F(() => !!e(N)[e(we).key]);
																	Er(Xt, {
																		get value() {
																			return e(kt);
																		}
																	});
																}
																(a(Je),
																	R(() => {
																		(Xe(Je, 'aria-label', e(N).blocked ? 'Click to unblock token' : 'Click to block token'),
																			Xe(Je, 'title', e(N).blocked ? 'Click to unblock token' : 'Click to block token'));
																	}),
																	c(lt, Je));
															};
														O(st, (lt) => {
															e(q) ? lt(Jt) : lt(da, !1);
														});
													}
													c(Ct, Wt);
												},
												za = (Ct) => {
													var Wt = se(),
														st = B(Wt);
													{
														var Jt = (lt) => {
																St(lt, {
																	class: 'size-10 overflow-hidden rounded-full border border-surface-200/50 dark:text-surface-50/50',
																	children: (Je, Xt) => {
																		var kt = Zn(),
																			Fa = B(kt);
																		{
																			let Nt = F(() =>
																				s() && n(e(N)) && e(N)._id === s()._id
																					? Me(gt.value)
																					: n(e(N)) && e(we).key === 'avatar'
																						? Me(e(N).avatar)
																						: '/Default_User.svg'
																			);
																			Ut(
																				Fa,
																				() => St.Image,
																				(ua, fa) => {
																					fa(ua, {
																						get src() {
																							return e(Nt);
																						},
																						class: 'h-full w-full object-cover'
																					});
																				}
																			);
																		}
																		var Mt = l(Fa, 2);
																		(Ut(
																			Mt,
																			() => St.Fallback,
																			(Nt, ua) => {
																				ua(Nt, {
																					children: (fa, er) => {
																						Gt();
																						var Bt = bt('User');
																						c(fa, Bt);
																					},
																					$$slots: { default: !0 }
																				});
																			}
																		),
																			c(Je, kt));
																	},
																	$$slots: { default: !0 }
																});
															},
															da = (lt) => {
																var Je = se(),
																	Xt = B(Je);
																{
																	var kt = (Mt) => {
																			{
																				let Nt = F(() =>
																					n(e(N)) && e(we).key === 'role' ? e(N).role : o(e(N)) && e(we).key === 'role' ? (e(N).role ?? '') : ''
																				);
																				dn(Mt, {
																					get value() {
																						return e(Nt);
																					},
																					get roles() {
																						return x();
																					}
																				});
																			}
																		},
																		Fa = (Mt) => {
																			var Nt = se(),
																				ua = B(Nt);
																			{
																				var fa = (Bt) => {
																						var ea = Wn(),
																							va = r(ea),
																							Ma = r(va, !0);
																						a(va);
																						var pa = l(va, 2);
																						pa.__click = (Tt) => {
																							Tt.stopPropagation();
																							const Kt = String(n(e(N)) ? e(N)._id : o(e(N)) ? e(N)._id : '');
																							navigator.clipboard
																								.writeText(Kt)
																								.then(() => {
																									pe.success({ description: 'User ID copied to clipboard' });
																								})
																								.catch(() => {
																									pe.error({ description: 'Failed to copy' });
																								});
																						};
																						var Ft = r(pa);
																						(P(Ft, 'icon', 'oui:copy-clipboard'),
																							G(Ft, 1, ''),
																							P(Ft, 'width', '16'),
																							a(pa),
																							a(ea),
																							R((Tt) => D(Ma, Tt), [() => (n(e(N)) ? e(N)._id : o(e(N)) ? e(N)._id : '-')]),
																							c(Bt, ea));
																					},
																					er = (Bt) => {
																						var ea = se(),
																							va = B(ea);
																						{
																							var Ma = (Ft) => {
																									var Tt = Jn(),
																										Kt = r(Tt),
																										Na = r(Kt, !0);
																									a(Kt);
																									var ma = l(Kt, 2);
																									ma.__click = (It) => {
																										It.stopPropagation();
																										const _a = o(e(N)) && e(we).key === 'token' ? e(N).token : '';
																										navigator.clipboard
																											.writeText(_a)
																											.then(() => {
																												pe.success({ description: 'Token copied to clipboard' });
																											})
																											.catch(() => {
																												pe.error({ description: 'Failed to copy' });
																											});
																									};
																									var Et = r(ma);
																									(P(Et, 'icon', 'oui:copy-clipboard'),
																										G(Et, 1, ''),
																										P(Et, 'width', '16'),
																										a(ma),
																										a(Tt),
																										R((It) => D(Na, It), [() => (o(e(N)) && e(we).key === 'token' ? e(N).token : '-')]),
																										c(Ft, Tt));
																								},
																								pa = (Ft) => {
																									var Tt = se(),
																										Kt = B(Tt);
																									{
																										var Na = (Et) => {
																												const It = F(() => e(we).key),
																													_a = F(() => (n(e(N)) ? e(N)[e(It)] : o(e(N)) ? e(N)[e(It)] : void 0));
																												var Ta = bt();
																												(R((Ba) => D(Ta, Ba), [() => Ke(e(_a))]), c(Et, Ta));
																											},
																											ma = (Et) => {
																												var It = se(),
																													_a = B(It);
																												{
																													var Ta = (ta) => {
																															var Ea = se(),
																																Pa = B(Ea);
																															{
																																var Va = (aa) => {
																																		const Vt = F(() => e(N).expires),
																																			tr = F(
																																				() =>
																																					e(Vt) !== null &&
																																					e(Vt) !== void 0 &&
																																					(e(Vt) instanceof Date ? e(Vt) : new Date(String(e(Vt)))) < new Date()
																																			),
																																			Hr = F(() => Oe(e(Vt)));
																																		var Aa = Yn(),
																																			ar = r(Aa),
																																			Gr = l(ar);
																																		{
																																			var Zr = (qa) => {
																																				var Da = Kn();
																																				(P(Da, 'icon', 'material-symbols:warning'),
																																					G(Da, 1, 'ml-1 text-error-500'),
																																					P(Da, 'width', '16'),
																																					c(qa, Da));
																																			};
																																			O(Gr, (qa) => {
																																				e(tr) && qa(Zr);
																																			});
																																		}
																																		(a(Aa),
																																			R(() => {
																																				(G(Aa, 1, Ya(e(tr) ? 'font-semibold text-error-500' : '')),
																																					D(ar, `${e(Hr) ?? ''} `));
																																			}),
																																			c(aa, Aa));
																																	},
																																	qr = (aa) => {
																																		var Vt = bt('-');
																																		c(aa, Vt);
																																	};
																																O(Pa, (aa) => {
																																	o(e(N)) && e(we).key === 'expires' && e(N).expires ? aa(Va) : aa(qr, !1);
																																});
																															}
																															c(ta, Ea);
																														},
																														Ba = (ta) => {
																															const Ea = F(() =>
																																n(e(N))
																																	? String(e(N)[e(we).key] ?? '-')
																																	: o(e(N))
																																		? String(e(N)[e(we).key] ?? '-')
																																		: '-'
																															);
																															var Pa = se(),
																																Va = B(Pa);
																															(ti(Va, () => e(Ea)), c(ta, Pa));
																														};
																													O(
																														_a,
																														(ta) => {
																															e(we).key === 'expires' ? ta(Ta) : ta(Ba, !1);
																														},
																														!0
																													);
																												}
																												c(Et, It);
																											};
																										O(
																											Kt,
																											(Et) => {
																												['createdAt', 'updatedAt', 'lastAccess', 'expires'].includes(e(we).key) ? Et(Na) : Et(ma, !1);
																											},
																											!0
																										);
																									}
																									c(Ft, Tt);
																								};
																							O(
																								va,
																								(Ft) => {
																									e(we).key === 'token' ? Ft(Ma) : Ft(pa, !1);
																								},
																								!0
																							);
																						}
																						c(Bt, ea);
																					};
																				O(
																					ua,
																					(Bt) => {
																						e(we).key === '_id' ? Bt(fa) : Bt(er, !1);
																					},
																					!0
																				);
																			}
																			c(Mt, Nt);
																		};
																	O(
																		Xt,
																		(Mt) => {
																			e(we).key === 'role' ? Mt(kt) : Mt(Fa, !1);
																		},
																		!0
																	);
																}
																c(lt, Je);
															};
														O(
															st,
															(lt) => {
																e(q) && e(we).key === 'avatar' ? lt(Jt) : lt(da, !1);
															},
															!0
														);
													}
													c(Ct, Wt);
												};
											O(wt, (Ct) => {
												e(we).key === 'blocked' ? Ct(Qt) : Ct(za, !1);
											});
										}
										(a(ot), c(Ne, ot));
									}
								),
									a(rt),
									R(() =>
										G(
											rt,
											1,
											`divide-x divide-surface-200/50 dark:divide-surface-50 ${e(jt) ? 'bg-error-50 opacity-60 dark:bg-error-900/20' : ''} ${e(K) ? 'cursor-pointer hover:bg-surface-100 dark:hover:bg-surface-800' : ''}`
										)
									),
									c(xe, rt));
							}
						),
							a(wa),
							a(Ge),
							a(Ye));
						var ka = l(Ye, 2),
							La = r(ka);
						(Do(La, {
							get pagesCount() {
								return e(A);
							},
							get totalItems() {
								return e(E);
							},
							rowsPerPageOptions: [2, 10, 25, 50, 100, 500],
							onUpdatePage: (xe) => {
								C(Ee, xe, !0);
							},
							onUpdateRowsPerPage: (xe) => {
								(C(Ae, xe, !0), C(Ee, 1));
							},
							get currentPage() {
								return e(Ee);
							},
							set currentPage(xe) {
								C(Ee, xe, !0);
							},
							get rowsPerPage() {
								return e(Ae);
							},
							set rowsPerPage(xe) {
								C(Ae, xe, !0);
							}
						}),
							a(ka),
							R(() => G(Ge, 1, `table table-interactive ${e($e) === 'compact' ? 'table-compact' : e($e) === 'normal' ? '' : 'table-comfortable'}`)),
							c(De, We));
					},
					Lt = (De) => {
						var We = tl(),
							He = r(We);
						{
							var et = (Ge) => {
									var tt = bt();
									(R((Ze) => D(tt, Ze), [() => Li()]), c(Ge, tt));
								},
								Ye = (Ge) => {
									var tt = se(),
										Ze = B(tt);
									{
										var nt = (zt) => {
											var Zt = bt();
											(R((ca) => D(Zt, ca), [() => zi()]), c(zt, Zt));
										};
										O(
											Ze,
											(zt) => {
												e(K) && zt(nt);
											},
											!0
										);
									}
									c(Ge, tt);
								};
							O(He, (Ge) => {
								e(q) ? Ge(et) : Ge(Ye, !1);
							});
						}
						(a(We), c(De, We));
					};
				O(At, (De) => {
					e(p) && e(p).length > 0 ? De(la) : De(Lt, !1);
				});
			}
			c(g, M);
		};
		O(oe, (g) => {
			(e(q) || e(K)) && g(Ie);
		});
	}
	(a(H),
		R(
			(g, M, J, X, le) => {
				(D(Y, g), Xe(Q, 'aria-label', M), D(re, J), Xe(ue, 'aria-label', X), D(ie, le));
			},
			[() => Ii(), () => ur(), () => ur(), () => (e(q) ? fr() : vr()), () => (e(q) ? fr() : vr())]
		),
		c(i, H),
		ze());
}
Ot(['click']);
var ol = k('<!> <!>', 1),
	sl = k(
		'<div class="absolute inset-0 hidden items-center justify-center rounded-full bg-black/30 text-white focus-within:flex hover:flex"><span class="text-xs font-medium">Click to upload</span></div>'
	),
	nl = k(
		'<div class="absolute inset-0 flex items-center justify-center rounded-full bg-black/60"><div class="text-sm font-medium text-white">...</div></div>'
	),
	ll = k('<!> <!> <!>', 1),
	cl = k('<div class="flex flex-col items-center justify-center p-4"><iconify-icon></iconify-icon> <p class="text-sm"> </p></div>', 2),
	dl = k('<!> <!> <!>', 1),
	ul = k('<small class="block text-center text-tertiary-500 opacity-75 dark:text-primary-500"> </small>'),
	fl = k('<span class="text-sm font-bold text-white"> </span>'),
	vl = k(
		'<div class="absolute inset-0 flex items-center justify-center bg-black/50 rounded-xl"><div class="flex flex-col items-center gap-2"><div class="h-16 w-16 animate-spin rounded-full border-4 border-primary-500 border-t-transparent"></div> <!></div></div>'
	),
	pl = k(
		'<button type="button" class="preset-filled-error-500 btn"><iconify-icon></iconify-icon> <span class="hidden sm:block"> </span></button>',
		2
	),
	ml = k('<div></div>'),
	_l = k('<div class="mr-2 h-4 w-4 animate-spin rounded-full border-b-2 border-white"></div> Uploading...', 1),
	gl = k(
		'<div class="modal-avatar space-y-4"><form><div><!></div> <!> <!></form> <footer class="modal-footer justify-between pt-4 border-t border-surface-500/20"><!> <div class="flex justify-between gap-2"><button class="preset-outlined-secondary-500 btn"> </button> <button class="preset-filled-tertiary-500 btn dark:preset-filled-primary-500"><!></button></div></footer></div>'
	);
function bl(i, t) {
	Le(t, !0);
	let o = me(Ht([])),
		n = me(!1),
		s = me(0),
		h = me(null),
		x = me(!1);
	const w = F(() => {
			if (e(h)) return e(h);
			if (e(x)) return '/Default_User.svg';
			let _ = gt.value || '/Default_User.svg';
			return _ === '/Default_User.svg' || _.startsWith('data:')
				? _
				: ((_ = _.replace(/^\/+/, '')),
					(_ = _.replace(/^mediaFolder\//, '').replace(/^files\//, '')),
					(_ = _.replace(/^\/+/, '')),
					`/files/${_}?t=${Date.now()}`);
		}),
		m = ['image/jpeg', 'image/png', 'image/webp', 'image/avif', 'image/svg+xml', 'image/gif'],
		p = 5242880,
		E = 1024 * 1024,
		U = m.join(','),
		u = Vo(Blob),
		d = No(
			u,
			Bo((_) => {
				if (_.size > p) throw new Error(pr());
				if (!m.includes(_.type)) throw new Error('Invalid file type');
				return !0;
			})
		),
		j = Mo({ file: d });
	function q(_) {
		const v = _.acceptedFiles;
		if (!v || v.length === 0) return;
		C(o, v, !0);
		const T = e(o)[e(o).length - 1];
		(C(x, !1), K(T));
	}
	async function K(_) {
		try {
			if (_.size > 1024 * 1024) {
				const v = document.createElement('canvas'),
					T = v.getContext('2d'),
					f = new Image();
				((f.onload = () => {
					const A = Math.min(200 / f.width, 200 / f.height);
					((v.width = f.width * A), (v.height = f.height * A), T?.drawImage(f, 0, 0, v.width, v.height), C(h, v.toDataURL('image/jpeg', 0.8), !0));
				}),
					(f.src = URL.createObjectURL(_)));
			} else {
				const v = new FileReader();
				((v.onload = (T) => {
					T.target instanceof FileReader && C(h, T.target.result, !0);
				}),
					v.readAsDataURL(_));
			}
		} catch (v) {
			(it.error('Error creating preview:', v), C(h, null));
		}
	}
	async function S() {
		if (!e(o) || e(o).length === 0 || e(n)) return;
		const _ = e(o)[0];
		try {
			(zo(j, { file: _ }),
				gt.value && gt.value !== '/Default_User.svg'
					? na({
							title: 'Replace Avatar',
							body: 'Are you sure you want to replace your current avatar?',
							onConfirm: async () => {
								await Z(_);
							}
						})
					: await Z(_));
		} catch (v) {
			if (v.issues) {
				const T = v;
				(it.error(T.issues[0]?.message), pe.error({ description: T.issues[0]?.message || 'Invalid file' }));
				return;
			}
			(it.error(v.message), pe.error({ description: v.message || 'Upload failed' }));
			return;
		}
	}
	async function $(_) {
		return _.type === 'image/svg+xml' || _.size < E
			? _
			: new Promise((v) => {
					const T = document.createElement('canvas'),
						f = T.getContext('2d'),
						b = new Image();
					((b.onload = () => {
						const z = Math.min(1024 / b.width, 1024 / b.height);
						((T.width = b.width * z),
							(T.height = b.height * z),
							f?.drawImage(b, 0, 0, T.width, T.height),
							T.toBlob(
								(I) => {
									if (I) {
										const L = new File([I], _.name, { type: 'image/jpeg', lastModified: Date.now() });
										v(L);
									} else v(_);
								},
								'image/jpeg',
								0.85
							));
					}),
						(b.onerror = () => v(_)),
						(b.src = URL.createObjectURL(_)));
				});
	}
	async function Z(_) {
		(C(n, !0), C(s, 0));
		try {
			const v = await $(_),
				T = new FormData();
			T.append('avatar', v);
			const b = (
				await Lo.post('/api/user/saveAvatar', T, {
					headers: { 'Content-Type': 'multipart/form-data' },
					onUploadProgress: (A) => {
						A.total && C(s, Math.round((A.loaded * 100) / A.total), !0);
					}
				})
			).data;
			(b.avatarUrl && ((gt.value = b.avatarUrl), it.info('Avatar store updated', { avatarUrl: b.avatarUrl })),
				await yt(),
				pe.success({ description: 'Avatar updated successfully!' }),
				Qe.close());
		} catch (v) {
			(console.error('Avatar upload failed:', v), C(x, !0), pe.error({ description: 'Failed to update avatar' }), C(h, null));
		} finally {
			(C(n, !1),
				setTimeout(() => {
					e(n) || C(s, 0);
				}, 1e3));
		}
	}
	async function fe() {
		(it.info('deleteAvatar function called'),
			na({
				title: 'Delete Avatar',
				body: 'Are you sure you want to delete your avatar? This action cannot be undone.',
				onConfirm: async () => {
					try {
						const _ = gt.value;
						it.info('Attempting to delete avatar:', _);
						const v = await fetch('/api/user/deleteAvatar', {
								method: 'DELETE',
								headers: { 'Content-Type': 'application/json' },
								body: JSON.stringify({ avatarUrl: _ })
							}),
							T = await v.json();
						if ((it.info('Delete response:', T), v.ok && T.success))
							((gt.value = '/Default_User.svg'),
								C(h, null),
								pe.success({
									description: '<iconify-icon icon="radix-icons:avatar" color="white" width="24" class="mr-1"></iconify-icon> Avatar Deleted'
								}),
								Qe.close(),
								await yt());
						else throw new Error(T.message || 'Delete failed');
					} catch (_) {
						it.error('Error deleting avatar:', _);
						const v = _ instanceof Error ? _.message : 'Failed to delete avatar';
						pe.error({ description: `<iconify-icon icon="radix-icons:cross-2" color="white" width="24" class="mr-1"></iconify-icon> ${v}` });
					}
				}
			}));
	}
	var ye = gl(),
		Pe = r(ye);
	G(Pe, 1, 'modal-form border border-surface-500 p-4 space-y-4 rounded-xl');
	var ce = r(Pe),
		$e = r(ce);
	(Ca($e, {
		get acceptedFiles() {
			return e(o);
		},
		get accept() {
			return U;
		},
		maxFiles: 1,
		onFileChange: q,
		class: 'w-full flex flex-col items-center gap-4',
		children: (_, v) => {
			var T = dl(),
				f = B(T);
			Ut(
				f,
				() => Ca.HiddenInput,
				(z, I) => {
					I(z, {});
				}
			);
			var b = l(f, 2);
			Ut(
				b,
				() => Ca.Trigger,
				(z, I) => {
					I(z, {
						class: 'outline-none relative mx-auto mb-3 cursor-pointer rounded-full focus:ring-2 focus:ring-primary-500',
						children: (L, H) => {
							var V = ll(),
								Y = B(V);
							St(Y, {
								class:
									'size-32 flex items-center justify-center rounded-full overflow-hidden border-4 border-surface-200 dark:border-surface-700 shadow-xl bg-surface-100 dark:bg-surface-800 aspect-square',
								children: (re, W) => {
									var ue = ol(),
										he = B(ue);
									Ut(
										he,
										() => St.Image,
										(ie, oe) => {
											oe(ie, {
												get src() {
													return e(w);
												},
												alt: 'User avatar',
												class: 'size-full object-cover'
											});
										}
									);
									var Te = l(he, 2);
									(Ut(
										Te,
										() => St.Fallback,
										(ie, oe) => {
											oe(ie, {
												class: 'flex size-full items-center justify-center bg-surface-500 text-3xl font-bold uppercase text-white',
												children: (Ie, g) => {
													Gt();
													var M = bt('AB');
													c(Ie, M);
												},
												$$slots: { default: !0 }
											});
										}
									),
										c(re, ue));
								},
								$$slots: { default: !0 }
							});
							var ve = l(Y, 2);
							{
								var Q = (re) => {
									var W = sl();
									c(re, W);
								};
								O(ve, (re) => {
									e(n) || re(Q);
								});
							}
							var te = l(ve, 2);
							{
								var ae = (re) => {
									var W = nl();
									c(re, W);
								};
								O(te, (re) => {
									e(n) && re(ae);
								});
							}
							c(L, V);
						},
						$$slots: { default: !0 }
					});
				}
			);
			var A = l(b, 2);
			(Ut(
				A,
				() => Ca.Dropzone,
				(z, I) => {
					I(z, {
						class: 'w-full',
						children: (L, H) => {
							var V = cl(),
								Y = r(V);
							(P(Y, 'icon', 'mdi:cloud-upload'), P(Y, 'width', '48'), G(Y, 1, 'mb-2 text-primary-500'));
							var ve = l(Y, 2),
								Q = r(ve, !0);
							(a(ve), a(V), R((te) => D(Q, te), [() => Mi()]), c(L, V));
						},
						$$slots: { default: !0 }
					});
				}
			),
				c(_, T));
		},
		$$slots: { default: !0 }
	}),
		a(ce));
	var Ce = l(ce, 2);
	{
		var Ee = (_) => {
			var v = ul(),
				T = r(v, !0);
			(a(v), R((f) => D(T, f), [() => pr()]), c(_, v));
		};
		O(Ce, (_) => {
			!e(o).length && !e(n) && _(Ee);
		});
	}
	var Ae = l(Ce, 2);
	{
		var ke = (_) => {
			var v = vl(),
				T = r(v),
				f = l(r(T), 2);
			{
				var b = (A) => {
					var z = fl(),
						I = r(z);
					(a(z), R(() => D(I, `${e(s) ?? ''}%`)), c(A, z));
				};
				O(f, (A) => {
					e(s) > 0 && A(b);
				});
			}
			(a(T), a(v), c(_, v));
		};
		O(Ae, (_) => {
			e(n) && _(ke);
		});
	}
	a(Pe);
	var _e = l(Pe, 2),
		ge = r(_e);
	{
		var Se = (_) => {
				var v = pl();
				v.__click = fe;
				var T = r(v);
				(P(T, 'icon', 'icomoon-free:bin'), P(T, 'width', '24'));
				var f = l(T, 2),
					b = r(f, !0);
				(a(f), a(v), R((A) => D(b, A), [() => ya()]), c(_, v));
			},
			je = (_) => {
				var v = ml();
				c(_, v);
			};
		O(ge, (_) => {
			gt.value && gt.value !== '/Default_User.svg' ? _(Se) : _(je, !1);
		});
	}
	var Me = l(ge, 2),
		Oe = r(Me);
	Oe.__click = () => Qe.close();
	var Ke = r(Oe, !0);
	a(Oe);
	var y = l(Oe, 2);
	y.__click = S;
	var ee = r(y);
	{
		var Fe = (_) => {
				var v = _l();
				(Gt(), c(_, v));
			},
			de = (_) => {
				var v = bt();
				(R((T) => D(v, T), [() => Qa()]), c(_, v));
			};
		O(ee, (_) => {
			e(n) ? _(Fe) : _(de, !1);
		});
	}
	(a(y),
		a(Me),
		a(_e),
		a(ye),
		R(
			(_) => {
				(G(ce, 1, `grid grid-cols-1 grid-rows-${gt.value ? '1' : '2'} items-center justify-center`),
					(Oe.disabled = e(n)),
					D(Ke, _),
					(y.disabled = !e(o).length || e(n)));
			},
			[() => xa()]
		),
		c(i, ye),
		ze());
}
Ot(['click']);
var yl = k('<div class="mt-1 text-center text-xs text-surface-500"> </div>'),
	hl = k('<p class="mt-2 text-center text-sm text-error-500"> </p>'),
	xl = k('<iconify-icon></iconify-icon> ', 3),
	wl = k('<iconify-icon></iconify-icon> ', 3),
	kl = k('<p> </p>'),
	Fl = k('<p> </p>'),
	Tl = k(
		'<div class="max-w-md p-6"><div class="mb-6 text-center"><div class="mb-4"><iconify-icon></iconify-icon></div> <h4 class="h4 mb-2"> </h4> <p class="text-surface-600 dark:text-surface-300"> </p></div> <div class="mb-6"><div class="relative"><input type="text" autocomplete="off"/> <!></div> <!></div> <div class="mb-6 text-center"><button class="text-sm text-primary-500 underline hover:text-primary-600"> </button></div> <div class="flex gap-3"><button class="preset-tonal-surface btn flex-1"> </button> <button class="preset-filled-primary-500 btn flex-1"><!></button></div> <div class="mt-4 text-center"><div class="space-y-1 text-xs text-surface-500"><!></div></div></div>',
		2
	);
function El(i, t) {
	Le(t, !0);
	const o = Re(t, 'title', 3, ''),
		n = Re(t, 'description', 3, '');
	let s = me(''),
		h = me(!1),
		x = me(!1),
		w = me('');
	function m(f) {
		let A = f.target.value;
		(e(x)
			? (A = A.replace(/[^a-zA-Z0-9]/g, '')
					.toLowerCase()
					.slice(0, 10))
			: (A = A.replace(/\D/g, '').slice(0, 6)),
			C(s, A, !0),
			C(w, ''));
	}
	async function p() {
		const f = e(s).trim();
		if (!f) {
			C(w, Zi(), !0);
			return;
		}
		if (!e(x) && f.length !== 6) {
			C(w, Ur(), !0);
			return;
		}
		if (e(x) && f.length < 8) {
			C(w, Wi(), !0);
			return;
		}
		(C(h, !0), C(w, ''));
		try {
			(t.parent.onClose && t.parent.onClose(f), Qe.close());
		} catch (b) {
			C(w, b instanceof Error ? b.message : 'Verification failed', !0);
		} finally {
			C(h, !1);
		}
	}
	function E() {
		(t.parent.onClose && t.parent.onClose(null), Qe.close());
	}
	function U() {
		(C(x, !e(x)), C(s, ''), C(w, ''));
	}
	function u(f) {
		f.key === 'Enter' && !e(h) && p();
	}
	var d = Tl(),
		j = r(d),
		q = r(j),
		K = r(q);
	(P(K, 'icon', 'mdi:shield-key'), P(K, 'width', '48'), G(K, 1, 'mx-auto text-primary-500'), a(q));
	var S = l(q, 2),
		$ = r(S, !0);
	a(S);
	var Z = l(S, 2),
		fe = r(Z, !0);
	(a(Z), a(j));
	var ye = l(j, 2),
		Pe = r(ye),
		ce = r(Pe);
	(Yt(ce), (ce.__input = m), (ce.__keydown = u));
	var $e = l(ce, 2);
	{
		var Ce = (f) => {
			var b = yl(),
				A = r(b);
			(a(b), R(() => D(A, `${e(s).length ?? ''}/10`)), c(f, b));
		};
		O($e, (f) => {
			e(x) && f(Ce);
		});
	}
	a(Pe);
	var Ee = l(Pe, 2);
	{
		var Ae = (f) => {
			var b = hl(),
				A = r(b, !0);
			(a(b), R(() => D(A, e(w))), c(f, b));
		};
		O(Ee, (f) => {
			e(w) && f(Ae);
		});
	}
	a(ye);
	var ke = l(ye, 2),
		_e = r(ke);
	_e.__click = U;
	var ge = r(_e, !0);
	(a(_e), a(ke));
	var Se = l(ke, 2),
		je = r(Se);
	je.__click = E;
	var Me = r(je, !0);
	a(je);
	var Oe = l(je, 2);
	Oe.__click = p;
	var Ke = r(Oe);
	{
		var y = (f) => {
				var b = xl(),
					A = B(b);
				(P(A, 'icon', 'svg-spinners:3-dots-fade'), P(A, 'width', '20'), G(A, 1, 'mr-2'));
				var z = l(A);
				(R((I) => D(z, ` ${I ?? ''}`), [() => $r()]), c(f, b));
			},
			ee = (f) => {
				var b = wl(),
					A = B(b);
				(P(A, 'icon', 'mdi:check'), P(A, 'width', '20'), G(A, 1, 'mr-2'));
				var z = l(A);
				(R((I) => D(z, ` ${I ?? ''}`), [() => Sr()]), c(f, b));
			};
		O(Ke, (f) => {
			e(h) ? f(y) : f(ee, !1);
		});
	}
	(a(Oe), a(Se));
	var Fe = l(Se, 2),
		de = r(Fe),
		_ = r(de);
	{
		var v = (f) => {
				var b = kl(),
					A = r(b, !0);
				(a(b), R((z) => D(A, z), [() => Ji()]), c(f, b));
			},
			T = (f) => {
				var b = Fl(),
					A = r(b, !0);
				(a(b), R((z) => D(A, z), [() => Ki()]), c(f, b));
			};
		O(_, (f) => {
			e(x) ? f(T, !1) : f(v);
		});
	}
	(a(de),
		a(Fe),
		a(d),
		R(
			(f, b, A, z, I, L) => {
				(D($, f),
					D(fe, b),
					Xe(ce, 'placeholder', A),
					G(
						ce,
						1,
						'input text-center font-mono tracking-wider ' + (e(x) ? 'text-lg' : 'text-2xl') + (e(w) ? ' border-error-500 focus:border-error-500' : '')
					),
					Xe(ce, 'maxlength', e(x) ? 10 : 6),
					D(ge, z),
					D(Me, I),
					(Oe.disabled = L));
			},
			[
				() => o() || Ni(),
				() => n() || (e(x) ? Bi() : Vi()),
				() => (e(x) ? qi() : Ir()),
				() => (e(x) ? Hi() : Gi()),
				() => xa(),
				() => !e(s).trim() || e(h) || (!e(x) && e(s).length !== 6) || (e(x) && e(s).length < 8)
			]
		),
		Oa(
			ce,
			() => e(s),
			(f) => C(s, f)
		),
		c(i, d),
		ze());
}
Ot(['input', 'keydown', 'click']);
var Pl = k(
		'<div class="flex flex-col items-center justify-center gap-4 py-8"><iconify-icon></iconify-icon> <p class="text-sm text-surface-600 dark:text-surface-300"> </p></div>',
		2
	),
	Al = k('<img alt="2FA QR Code" class="h-32 w-32"/>'),
	Dl = k('<div class="flex h-32 w-32 items-center justify-center bg-surface-200"><p class="text-xs text-surface-600">QR Code</p></div>'),
	jl = k(
		'<div class="space-y-4"><div class="space-y-3"><h4 class="h4 flex items-center gap-2"><span class="preset-tonal -primary-500 badge">1</span> </h4> <p class="text-sm text-surface-600 dark:text-surface-300"> </p> <div class="flex justify-center rounded-lg bg-white p-2 dark:bg-white"><!></div></div> <div class="space-y-3"><h4 class="h4 flex items-center gap-2"><span class="preset-tonal -secondary-500 badge">2</span> </h4> <p class="text-sm text-surface-600 dark:text-surface-300"> </p> <div class="rounded-lg bg-surface-100 p-3 dark:bg-surface-700"><code class="break-all text-sm"> </code></div></div> <div class="space-y-3"><h4 class="h4 flex items-center gap-2"><span class="preset-tonal -tertiary-500 badge">3</span> </h4> <p class="text-sm text-surface-600 dark:text-surface-300"> </p> <label class="label"><span> </span> <input type="text" class="input" placeholder="000000" maxlength="6"/></label></div> <div class="alert preset-ghost-warning-500"><iconify-icon></iconify-icon> <div class="alert-message"><h5 class="h5 mb-1"> </h5> <p class="text-sm"> </p></div></div></div>',
		2
	),
	Cl = k('<div class="rounded bg-surface-200 p-2 text-center dark:bg-surface-700"> </div>'),
	Il = k(
		'<div class="alert preset-ghost-warning-500"><iconify-icon></iconify-icon> <div class="alert-message"><h5 class="h5 mb-2"> </h5> <p class="mb-3 text-sm"> </p> <div class="mb-3 grid grid-cols-2 gap-2 font-mono text-sm"></div> <p class="text-sm text-warning-600 dark:text-warning-400"><iconify-icon></iconify-icon> </p></div></div>',
		2
	),
	Ul = k(
		'<div class="alert preset-ghost-success-500"><iconify-icon></iconify-icon> <div class="alert-message"><p class="text-sm"> </p></div></div> <!>',
		3
	),
	$l = k('<iconify-icon></iconify-icon> ', 3),
	Sl = k('<iconify-icon></iconify-icon> ', 3),
	Ol = k('<button class="preset-filled-primary-500 btn"><!></button>'),
	Rl = k('<iconify-icon></iconify-icon> ', 3),
	Ll = k('<iconify-icon></iconify-icon> ', 3),
	zl = k('<iconify-icon></iconify-icon> ', 3),
	Ml = k('<iconify-icon></iconify-icon> ', 3),
	Nl = k('<button class="preset-tonal -secondary-500 btn"><!></button> <button class="preset-filled-error-500 btn"><!></button>', 1),
	Bl = k(
		'<div class="modal-2fa space-y-3"><header> </header> <article class="shrink-0 text-center text-sm"> </article> <form><div class="mb-4 flex items-center justify-between rounded-lg bg-surface-100 p-3 dark:bg-surface-700"><div class="flex items-center gap-3"><div class="rounded-lg bg-primary-500/10 p-2 dark:bg-primary-500/20"><iconify-icon></iconify-icon></div> <div><p class="text-sm font-semibold"> </p> <p class="text-xs text-surface-600 dark:text-surface-300"> </p></div></div> <span><iconify-icon></iconify-icon> </span></div> <!></form> <footer class="modal-footer mt-4 flex shrink-0 justify-end gap-2 pt-4 border-t border-surface-500/20"><button class="preset-outlined-secondary-500 btn"> </button> <!></footer></div>',
		2
	);
function Vl(i, t) {
	Le(t, !0);
	let o = me(!1),
		n = me(Ht([])),
		s = me(null),
		h = me('');
	const x = F(() => t.user?.is2FAEnabled || !1);
	$t(() => {
		!e(x) && !e(s) && p();
	});
	function w(v) {
		pe.create({ title: 'Success', description: v, type: 'success' });
	}
	function m(v) {
		pe.create({ title: 'Error', description: v, type: 'error' });
	}
	async function p() {
		if (!e(o)) {
			C(o, !0);
			try {
				const v = await fetch('/api/auth/2fa/setup', { method: 'POST', headers: { 'Content-Type': 'application/json' } }),
					T = await v.json();
				if (!v.ok) throw new Error(T.message || 'Failed to setup 2FA');
				const f = T.data || T,
					b = f.qrCodeURL || f.qrCodeUrl || f.qrCode || f.qr_code_url || '',
					A = b ? `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(b)}` : '';
				C(s, { qrCodeUrl: A, secret: f.secret || f.secretKey || f.secret_key || '', backupCodes: f.backupCodes || f.backup_codes || [] }, !0);
			} catch (v) {
				(it.error('2FA setup error:', v), m(v instanceof Error ? v.message : Yi()));
			} finally {
				C(o, !1);
			}
		}
	}
	async function E() {
		if (!(e(o) || !e(h) || e(h).length !== 6)) {
			C(o, !0);
			try {
				const v = await fetch('/api/auth/2fa/verify', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json' },
						body: JSON.stringify({ code: e(h) })
					}),
					T = await v.json();
				if (!v.ok) throw new Error(T.message || 'Failed to verify 2FA code');
				(w(to()), await yt(), t.close?.({ success: !0 }));
			} catch (v) {
				(it.error('2FA verification error:', v), m(v instanceof Error ? v.message : Ur()));
			} finally {
				C(o, !1);
			}
		}
	}
	async function U() {
		if (e(o)) return;
		const { modalState: v } = await Go(
			async () => {
				const { modalState: T } = await import('../chunks/GeUt2_20.js');
				return { modalState: T };
			},
			__vite__mapDeps([0, 1, 2]),
			import.meta.url
		);
		v.trigger(El, { title: no(), description: so() }, async (T) => {
			if (T) {
				C(o, !0);
				try {
					const f = await fetch('/api/auth/2fa/disable', {
							method: 'POST',
							headers: { 'Content-Type': 'application/json' },
							body: JSON.stringify({ code: T })
						}),
						b = await f.json();
					if (!f.ok) throw new Error(b.message || 'Failed to disable 2FA');
					(w(lo()), await yt());
				} catch (f) {
					(it.error('2FA disable error:', f), m(f instanceof Error ? f.message : 'Failed to disable 2FA'));
				} finally {
					C(o, !1);
				}
			}
		});
	}
	async function u() {
		if (!e(o)) {
			C(o, !0);
			try {
				const v = await fetch('/api/auth/2fa/backup-codes', { method: 'POST', headers: { 'Content-Type': 'application/json' } }),
					T = await v.json();
				if (!v.ok) throw new Error(T.message || 'Failed to generate backup codes');
				(C(n, T.backupCodes, !0), w(oo()));
			} catch (v) {
				(it.error('Backup codes error:', v), m(v instanceof Error ? v.message : 'Failed to generate backup codes'));
			} finally {
				C(o, !1);
			}
		}
	}
	const d = 'text-2xl font-bold';
	var j = Bl(),
		q = r(j);
	G(q, 1, `text-center text-primary-500 ${d} shrink-0`);
	var K = r(q, !0);
	a(q);
	var S = l(q, 2),
		$ = r(S, !0);
	a(S);
	var Z = l(S, 2);
	G(Z, 1, 'modal-form border border-surface-500 p-3 space-y-3 rounded-xl overflow-y-auto flex-1 max-h-[60vh]');
	var fe = r(Z),
		ye = r(fe),
		Pe = r(ye),
		ce = r(Pe);
	(P(ce, 'icon', 'mdi:shield-check'), P(ce, 'width', '24'), G(ce, 1, 'text-primary-500'), a(Pe));
	var $e = l(Pe, 2),
		Ce = r($e),
		Ee = r(Ce, !0);
	a(Ce);
	var Ae = l(Ce, 2),
		ke = r(Ae, !0);
	(a(Ae), a($e), a(ye));
	var _e = l(ye, 2),
		ge = r(_e);
	(R(() => P(ge, 'icon', `mdi:${e(x) ? 'check-circle' : 'circle-outline'}`)), P(ge, 'width', '14'), G(ge, 1, 'mr-1'));
	var Se = l(ge);
	(a(_e), a(fe));
	var je = l(fe, 2);
	{
		var Me = (v) => {
				var T = se(),
					f = B(T);
				{
					var b = (z) => {
							var I = Pl(),
								L = r(I);
							(P(L, 'icon', 'svg-spinners:ring-resize'), P(L, 'width', '48'), G(L, 1, 'text-primary-500'));
							var H = l(L, 2),
								V = r(H, !0);
							(a(H), a(I), R((Y) => D(V, Y), [() => ao()]), c(z, I));
						},
						A = (z) => {
							var I = se(),
								L = B(I);
							{
								var H = (V) => {
									var Y = jl(),
										ve = r(Y),
										Q = r(ve),
										te = l(r(Q));
									a(Q);
									var ae = l(Q, 2),
										re = r(ae, !0);
									a(ae);
									var W = l(ae, 2),
										ue = r(W);
									{
										var he = (Ze) => {
												var nt = Al();
												(R(() => Xe(nt, 'src', e(s).qrCodeUrl)), c(Ze, nt));
											},
											Te = (Ze) => {
												var nt = Dl();
												c(Ze, nt);
											};
										O(ue, (Ze) => {
											e(s).qrCodeUrl ? Ze(he) : Ze(Te, !1);
										});
									}
									(a(W), a(ve));
									var ie = l(ve, 2),
										oe = r(ie),
										Ie = l(r(oe));
									a(oe);
									var g = l(oe, 2),
										M = r(g, !0);
									a(g);
									var J = l(g, 2),
										X = r(J),
										le = r(X, !0);
									(a(X), a(J), a(ie));
									var be = l(ie, 2),
										ne = r(be),
										Ve = l(r(ne));
									a(ne);
									var mt = l(ne, 2),
										Rt = r(mt, !0);
									a(mt);
									var xt = l(mt, 2),
										At = r(xt),
										la = r(At, !0);
									a(At);
									var Lt = l(At, 2);
									(Yt(Lt),
										(Lt.__input = (Ze) => {
											const nt = Ze.target;
											nt.value = nt.value.replace(/\D/g, '');
										}),
										a(xt),
										a(be));
									var De = l(be, 2),
										We = r(De);
									(P(We, 'icon', 'mdi:information'), P(We, 'width', '20'));
									var He = l(We, 2),
										et = r(He),
										Ye = r(et, !0);
									a(et);
									var Ge = l(et, 2),
										tt = r(Ge, !0);
									(a(Ge),
										a(He),
										a(De),
										a(Y),
										R(
											(Ze, nt, zt, Zt, ca, wa, ka, La, xe) => {
												(D(te, ` ${Ze ?? ''}`),
													D(re, nt),
													D(Ie, ` ${zt ?? ''}`),
													D(M, Zt),
													D(le, e(s).secret),
													D(Ve, ` ${ca ?? ''}`),
													D(Rt, wa),
													D(la, ka),
													D(Ye, La),
													D(tt, xe));
											},
											[() => co(), () => uo(), () => fo(), () => vo(), () => po(), () => mo(), () => Ir(), () => gr(), () => _o()]
										),
										Oa(
											Lt,
											() => e(h),
											(Ze) => C(h, Ze)
										),
										c(V, Y));
								};
								O(
									L,
									(V) => {
										e(s) && V(H);
									},
									!0
								);
							}
							c(z, I);
						};
					O(f, (z) => {
						e(o) && !e(s) ? z(b) : z(A, !1);
					});
				}
				c(v, T);
			},
			Oe = (v) => {
				var T = Ul(),
					f = B(T),
					b = r(f);
				(P(b, 'icon', 'mdi:shield-check'), P(b, 'width', '20'));
				var A = l(b, 2),
					z = r(A),
					I = r(z, !0);
				(a(z), a(A), a(f));
				var L = l(f, 2);
				{
					var H = (V) => {
						var Y = Il(),
							ve = r(Y);
						(P(ve, 'icon', 'mdi:key-variant'), P(ve, 'width', '20'));
						var Q = l(ve, 2),
							te = r(Q),
							ae = r(te, !0);
						a(te);
						var re = l(te, 2),
							W = r(re, !0);
						a(re);
						var ue = l(re, 2);
						(Pt(
							ue,
							21,
							() => e(n),
							ha,
							(oe, Ie) => {
								var g = Cl(),
									M = r(g, !0);
								(a(g), R(() => D(M, e(Ie))), c(oe, g));
							}
						),
							a(ue));
						var he = l(ue, 2),
							Te = r(he);
						(P(Te, 'icon', 'mdi:alert'), P(Te, 'width', '16'), G(Te, 1, 'mr-1'));
						var ie = l(Te);
						(a(he),
							a(Q),
							a(Y),
							R(
								(oe, Ie, g) => {
									(D(ae, oe), D(W, Ie), D(ie, ` ${g ?? ''}`));
								},
								[() => gr(), () => ro(), () => io()]
							),
							c(V, Y));
					};
					O(L, (V) => {
						e(n).length > 0 && V(H);
					});
				}
				(R((V) => D(I, V), [() => eo()]), c(v, T));
			};
		O(je, (v) => {
			e(x) ? v(Oe, !1) : v(Me);
		});
	}
	a(Z);
	var Ke = l(Z, 2),
		y = r(Ke);
	y.__click = () => t.close?.();
	var ee = r(y, !0);
	a(y);
	var Fe = l(y, 2);
	{
		var de = (v) => {
				var T = Ol();
				T.__click = E;
				var f = r(T);
				{
					var b = (z) => {
							var I = $l(),
								L = B(I);
							(P(L, 'icon', 'svg-spinners:3-dots-fade'), P(L, 'width', '20'), G(L, 1, 'mr-2'));
							var H = l(L);
							(R((V) => D(H, ` ${V ?? ''}`), [() => $r()]), c(z, I));
						},
						A = (z) => {
							var I = Sl(),
								L = B(I);
							(P(L, 'icon', 'mdi:check-circle'), P(L, 'width', '20'), G(L, 1, 'mr-2'));
							var H = l(L);
							(R((V) => D(H, ` ${V ?? ''}`), [() => Sr()]), c(z, I));
						};
					O(f, (z) => {
						e(o) ? z(b) : z(A, !1);
					});
				}
				(a(T), R(() => (T.disabled = e(o) || !e(h) || e(h).length !== 6)), c(v, T));
			},
			_ = (v) => {
				var T = se(),
					f = B(T);
				{
					var b = (A) => {
						var z = Nl(),
							I = B(z);
						I.__click = u;
						var L = r(I);
						{
							var H = (ae) => {
									var re = Rl(),
										W = B(re);
									(P(W, 'icon', 'svg-spinners:3-dots-fade'), P(W, 'width', '20'), G(W, 1, 'mr-2'));
									var ue = l(W);
									(R((he) => D(ue, ` ${he ?? ''}`), [() => go()]), c(ae, re));
								},
								V = (ae) => {
									var re = Ll(),
										W = B(re);
									(P(W, 'icon', 'mdi:key-variant'), P(W, 'width', '20'), G(W, 1, 'mr-2'));
									var ue = l(W);
									(R((he) => D(ue, ` ${he ?? ''}`), [() => bo()]), c(ae, re));
								};
							O(L, (ae) => {
								e(o) ? ae(H) : ae(V, !1);
							});
						}
						a(I);
						var Y = l(I, 2);
						Y.__click = U;
						var ve = r(Y);
						{
							var Q = (ae) => {
									var re = zl(),
										W = B(re);
									(P(W, 'icon', 'svg-spinners:3-dots-fade'), P(W, 'width', '20'), G(W, 1, 'mr-2'));
									var ue = l(W);
									(R((he) => D(ue, ` ${he ?? ''}`), [() => yo()]), c(ae, re));
								},
								te = (ae) => {
									var re = Ml(),
										W = B(re);
									(P(W, 'icon', 'mdi:shield-remove'), P(W, 'width', '20'), G(W, 1, 'mr-2'));
									var ue = l(W);
									(R((he) => D(ue, ` ${he ?? ''}`), [() => ho()]), c(ae, re));
								};
							O(ve, (ae) => {
								e(o) ? ae(Q) : ae(te, !1);
							});
						}
						(a(Y),
							R(() => {
								((I.disabled = e(o)), (Y.disabled = e(o)));
							}),
							c(A, z));
					};
					O(
						f,
						(A) => {
							e(x) && A(b);
						},
						!0
					);
				}
				c(v, T);
			};
		O(Fe, (v) => {
			!e(x) && e(s) ? v(de) : v(_, !1);
		});
	}
	(a(Ke),
		a(j),
		R(
			(v, T, f, b, A, z) => {
				(D(K, v),
					D($, T),
					D(Ee, f),
					D(ke, b),
					G(_e, 1, `badge ${e(x) ? 'preset-filled-success-500' : 'preset-filled-surface-500'}`),
					D(Se, ` ${A ?? ''}`),
					(y.disabled = e(o)),
					D(ee, z));
			},
			[() => t.title ?? mr(), () => t.body ?? _r(), () => mr(), () => _r(), () => (e(x) ? Qi() : Xi()), () => xa()]
		),
		c(i, j),
		ze());
}
Ot(['input', 'click']);
Ot(['click', 'input']);
const Pr = Zo([]);
it.info('Global search index initialized');
var ql = k('<!> <!>', 1),
	Hl = k(
		'<button class="btn preset-outlined btn-sm w-full max-w-xs"><div class="flex w-full items-center justify-between"><span>Two-Factor Auth</span> <div class="flex items-center gap-1"><iconify-icon></iconify-icon> <span class="text-xs"> </span></div></div></button>',
		2
	),
	Gl = k('<div class="gradient-primary badge w-full max-w-xs text-white">Tenant ID:<span class="ml-2"> </span></div>'),
	Zl = k('<div class="gradient-primary badge mt-1 w-full max-w-xs text-white"> </div>'),
	Wl = k('<button class="gradient-error btn w-full max-w-sm text-white"><iconify-icon></iconify-icon> </button>', 2),
	Jl = k(
		'<form><label> <input name="username" type="text" autocomplete="username" disabled class="input"/></label> <label> <input name="email" type="email" autocomplete="email" disabled class="input"/></label> <label> <input name="password" type="password" autocomplete="current-password" disabled class="input"/></label> <div class="mt-4 flex flex-col justify-between gap-2 sm:flex-row sm:gap-1"><button><iconify-icon></iconify-icon> </button> <!></div></form>',
		2
	),
	Kl = k('<div class="wrapper2"><!></div>'),
	Yl = k(
		'<!> <div class="max-h-[calc(100vh-65px)] overflow-auto"><div class="wrapper mb-2"><div class="grid grid-cols-1 grid-rows-2 gap-1 overflow-hidden md:grid-cols-2 md:grid-rows-1"><div class="relative flex flex-col items-center justify-center gap-1"><div class="relative group"><!> <button class="absolute bottom-0 right-0 p-2 rounded-full gradient-tertiary dark:gradient-primary btn-icon"><iconify-icon></iconify-icon></button></div> <div class="gradient-secondary badge mt-1 w-full max-w-xs text-white"> <span class="ml-2"> </span></div> <div class="gradient-tertiary badge w-full max-w-xs text-white"> <span class="ml-2"> </span></div> <!> <!> <!></div> <!></div></div> <!></div>',
		3
	);
function Mc(i, t) {
	Le(t, !0);
	const o = () => ei(Pr, '$triggerActionStore', n),
		[n, s] = Xr(),
		h = F(() => t.data.user),
		x = F(() => t.data.isFirstUser),
		w = F(() => t.data.isMultiTenant),
		m = F(() => t.data.is2FAEnabledGlobal),
		p = F(() => ({
			_id: e(h)?._id ?? '',
			email: e(h)?.email ?? '',
			username: e(h)?.username ?? '',
			role: e(h)?.role ?? '',
			avatar: e(h)?.avatar ?? '/Default_User.svg',
			tenantId: e(h)?.tenantId ?? '',
			is2FAEnabled: e(h)?.is2FAEnabled ?? !1,
			permissions: []
		}));
	let E = me('hash-password');
	function U() {
		Qe.trigger(Vl, { user: e(p) }, async (f) => {
			f && (await yt());
		});
	}
	function u() {
		const f = o();
		if (f.length === 1) f[0]();
		else for (const b of f) b();
		Pr.set([]);
	}
	Ar(() => {
		(o().length > 0 && u(), Jo(null));
	});
	function d() {
		Qe.trigger(Vr, { title: Cr(), body: br() || 'Update your user details below.' });
	}
	function j() {
		Qe.trigger(bl, { title: ko(), body: br() }, async (f) => {
			f &&
				pe.success({ description: '<iconify-icon icon="radix-icons:avatar" color="white" width="26" class="mr-1"></iconify-icon> Avatar Updated' });
		});
	}
	function q() {
		na({
			title: Po(),
			body: Eo(),
			onConfirm: async () => {
				(await fetch('/api/user/deleteUsers', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify([e(p)]) }))
					.status === 200 && (await yt());
			}
		});
	}
	function K(f) {
		if (!f) return '/Default_User.svg';
		if (f.startsWith('data:')) return f;
		let b = f.replace(/^\/+/, '');
		return ((b = b.replace(/^mediaFolder\//, '').replace(/^files\//, '')), (b = b.replace(/^\/+/, '')), `/files/${b}?t=${Date.now()}`);
	}
	var S = Yl(),
		$ = B(S);
	{
		let f = F(() => Fo());
		Wo($, {
			get name() {
				return e(f);
			},
			icon: 'mdi:account-circle',
			showBackButton: !0,
			backUrl: '/config'
		});
	}
	var Z = l($, 2),
		fe = r(Z),
		ye = r(fe),
		Pe = r(ye),
		ce = r(Pe),
		$e = r(ce);
	St($e, {
		class: 'w-32 h-32 rounded-full border border-white shadow-lg dark:border-surface-800',
		children: (f, b) => {
			var A = ql(),
				z = B(A);
			{
				let L = F(() => K(gt.value));
				Ut(
					z,
					() => St.Image,
					(H, V) => {
						V(H, {
							get src() {
								return e(L);
							},
							class: 'object-cover'
						});
					}
				);
			}
			var I = l(z, 2);
			(Ut(
				I,
				() => St.Fallback,
				(L, H) => {
					H(L, {
						children: (V, Y) => {
							Gt();
							var ve = bt('AV');
							c(V, ve);
						},
						$$slots: { default: !0 }
					});
				}
			),
				c(f, A));
		},
		$$slots: { default: !0 }
	});
	var Ce = l($e, 2);
	Ce.__click = j;
	var Ee = r(Ce);
	(P(Ee, 'icon', 'mdi:pencil'), P(Ee, 'width', '18'), a(Ce), a(ce));
	var Ae = l(ce, 2),
		ke = r(Ae, !0),
		_e = l(ke),
		ge = r(_e, !0);
	(a(_e), a(Ae));
	var Se = l(Ae, 2),
		je = r(Se, !0),
		Me = l(je),
		Oe = r(Me, !0);
	(a(Me), a(Se));
	var Ke = l(Se, 2);
	{
		var y = (f) => {
			var b = Hl();
			b.__click = U;
			var A = r(b),
				z = l(r(A), 2),
				I = r(z);
			(R(() => P(I, 'icon', `mdi:${e(p)?.is2FAEnabled ? 'shield-check' : 'shield-off'}`)), P(I, 'width', '20'));
			var L = l(I, 2),
				H = r(L, !0);
			(a(L),
				a(z),
				a(A),
				a(b),
				R(() => {
					(G(I, 1, Ya(e(p)?.is2FAEnabled ? 'text-primary-500' : 'text-error-500')), D(H, e(p)?.is2FAEnabled ? 'Enabled' : 'Disabled'));
				}),
				c(f, b));
		};
		O(Ke, (f) => {
			e(m) && f(y);
		});
	}
	var ee = l(Ke, 2);
	{
		var Fe = (f) => {
			var b = Gl(),
				A = l(r(b)),
				z = r(A, !0);
			(a(A), a(b), R(() => D(z, e(p)?.tenantId || 'N/A')), c(f, b));
		};
		O(ee, (f) => {
			e(w) && f(Fe);
		});
	}
	var de = l(ee, 2);
	(Pt(
		de,
		17,
		() => e(p).permissions,
		ha,
		(f, b) => {
			var A = Zl(),
				z = r(A, !0);
			(a(A), R(() => D(z, e(b))), c(f, A));
		}
	),
		a(Pe));
	var _ = l(Pe, 2);
	{
		var v = (f) => {
			var b = Jl(),
				A = r(b),
				z = r(A),
				I = l(z);
			(Yt(I), a(A));
			var L = l(A, 2),
				H = r(L),
				V = l(H);
			(Yt(V), a(L));
			var Y = l(L, 2),
				ve = r(Y),
				Q = l(ve);
			(Yt(Q), a(Y));
			var te = l(Y, 2),
				ae = r(te);
			ae.__click = d;
			var re = r(ae);
			(P(re, 'icon', 'bi:pencil-fill'), P(re, 'color', 'white'), P(re, 'width', '18'), G(re, 1, 'mr-1'));
			var W = l(re, 1, !0);
			a(ae);
			var ue = l(ae, 2);
			{
				var he = (Te) => {
					var ie = Wl();
					ie.__click = q;
					var oe = r(ie);
					(P(oe, 'icon', 'bi:trash3-fill'), P(oe, 'color', 'white'), P(oe, 'width', '18'), G(oe, 1, 'mr-1'));
					var Ie = l(oe);
					(a(ie),
						R(
							(g, M) => {
								(Xe(ie, 'aria-label', g), D(Ie, ` ${M ?? ''}`));
							},
							[() => ya(), () => ya()]
						),
						c(Te, ie));
				};
				O(ue, (Te) => {
					e(x) && Te(he);
				});
			}
			(a(te),
				a(b),
				R(
					(Te, ie, oe, Ie, g) => {
						(D(z, `${Te ?? ''}: `),
							ir(I, e(p).username),
							D(H, `${ie ?? ''}: `),
							ir(V, e(p).email),
							D(ve, `${oe ?? ''}: `),
							Xe(ae, 'aria-label', Ie),
							G(ae, 1, `gradient-tertiary btn w-full max-w-sm text-white ${e(x) ? '' : 'mx-auto md:mx-0'}`),
							D(W, g));
					},
					[() => Xa(), () => $a(), () => To(), () => yr(), () => yr()]
				),
				Oa(
					Q,
					() => e(E),
					(Te) => C(E, Te)
				),
				c(f, b));
		};
		O(_, (f) => {
			e(p) && f(v);
		});
	}
	(a(ye), a(fe));
	var T = l(fe, 2);
	(Ua(T, {
		config: {
			name: 'Admin Area Access',
			contextId: 'config/adminArea',
			action: 'manage',
			contextType: 'system',
			description: 'Allows access to admin area for user management'
		},
		silent: !0,
		children: (f, b) => {
			var A = Kl(),
				z = r(A);
			{
				let I = F(() => ({ ...e(p) }));
				il(z, {
					get currentUser() {
						return e(I);
					},
					get isMultiTenant() {
						return e(w);
					},
					get roles() {
						return t.data.roles;
					}
				});
			}
			(a(A), c(f, A));
		},
		$$slots: { default: !0 }
	}),
		a(Z),
		R(
			(f, b, A) => {
				(Xe(Ce, 'title', f), D(ke, b), D(ge, e(p)?._id || 'N/A'), D(je, A), D(Oe, e(p)?.role || 'N/A'));
			},
			[() => xo(), () => wo(), () => sa()]
		),
		c(i, S),
		ze(),
		s());
}
Ot(['click']);
export { Mc as component };
//# sourceMappingURL=23.D3_gC4DP.js.map
