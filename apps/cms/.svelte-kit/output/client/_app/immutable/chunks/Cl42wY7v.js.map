{"version":3,"file":"Cl42wY7v.js","sources":["../../../../../../../../shared/components/src/system/ConfirmDialog.svelte","../../../../../../../../shared/components/src/collectionDisplay/ScheduleModal.svelte","../../../../../../../../shared/utils/src/modalUtils.ts"],"sourcesContent":["<!--\n@file src/components/system/ConfirmDialog.svelte\n@component\n**ConfirmDialog**\n-->\n\n<script lang=\"ts\">\n\tinterface Props {\n\t\thtmlTitle?: string;\n\t\tbody?: string;\n\t\tbuttonTextConfirm?: string;\n\t\tbuttonTextCancel?: string;\n\t\tclose?: (result: boolean) => void;\n\t}\n\n\tconst { htmlTitle, body = 'Are you sure?', buttonTextConfirm = 'Confirm', buttonTextCancel = 'Cancel', close }: Props = $props();\n\n\tfunction onConfirm() {\n\t\tclose?.(true);\n\t}\n\n\tfunction onCancel() {\n\t\tclose?.(false);\n\t}\n</script>\n\n<div class=\"space-y-4\">\n\t{#if htmlTitle}\n\t\t<h3 class=\"h3 font-bold text-center\">{@html htmlTitle}</h3>\n\t{/if}\n\t{#if body}\n\t\t<p class=\"text-surface-600 dark:text-surface-300 text-center\">{@html body}</p>\n\t{/if}\n\n\t<div class=\"flex justify-between gap-4 pt-4\">\n\t\t{#if buttonTextCancel}\n\t\t\t<button class=\"btn hover:bg-surface-500/10 border border-surface-200 dark:text-surface-50\" onclick={onCancel}>\n\t\t\t\t{buttonTextCancel}\n\t\t\t</button>\n\t\t{/if}\n\t\t<button class=\"btn preset-filled-primary-500\" onclick={onConfirm}>\n\t\t\t{buttonTextConfirm}\n\t\t</button>\n\t</div>\n</div>\n","<!-- \n@file src/components/collectionDisplay/ScheduleModal.svelte\n@component\n**ScheduleModal component for scheduling future actions (publish/unpublish/delete) on entries.**\n\n### Features:\n- **DateTime Selection**: Integrated date and time inputs for precise scheduling.\n- **Action Selection**: Choose between publishing, unpublishing, or deleting at the scheduled time.\n- **Validation**: Enforces future-dated scheduling and required fields.\n- **Dialog System**: Integrated with the custom `modalState` and `modalUtils`.\n\n### Props\n- `initialAction` (String): The default action to pre-select ('publish', 'unpublish', 'delete').\n\n### Interaction\n- Returns `{ confirmed: true, date: Date, action: String }` on success.\n- Returns `undefined` on cancel.\n-->\n\n<script lang=\"ts\">\n\t// Force recompile\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\t// Skeleton\n\timport { modalState } from '@shared/utils/modalState.svelte';\n\n\t// No Props needed\n\n\t// --- Component State ---\n\t// --- Component State ---\n\t// Removed modalStore\n\n\ttype ActionType = 'publish' | 'unpublish' | 'delete';\n\n\tlet scheduleDateOnly = $state('');\n\tlet scheduleTimeOnly = $state('');\n\t// Access meta prop through modalState.active\n\tlet action: ActionType = $state((modalState.active?.props?.meta?.initialAction as ActionType) || 'publish');\n\tlet errorMessage = $state('');\n\n\tconst scheduleDate = $derived(`${scheduleDateOnly}T${scheduleTimeOnly}`);\n\tconst isFormValid = $derived(scheduleDateOnly !== '' && scheduleTimeOnly !== '');\n\n\tconst actionOptions: Array<{ value: ActionType; label: string }> = [\n\t\t{ value: 'publish', label: m.entrylist_multibutton_publish() },\n\t\t{ value: 'unpublish', label: m.entrylist_multibutton_unpublish() },\n\t\t{ value: 'delete', label: m.button_delete() }\n\t];\n\n\t/**\n\t * Validates the form fields and sets an error message if invalid.\n\t */\n\tfunction validateForm(): boolean {\n\t\tif (!isFormValid) {\n\t\t\terrorMessage = 'Date and time are required';\n\t\t\treturn false;\n\t\t}\n\t\tif (new Date(scheduleDate) < new Date()) {\n\t\t\terrorMessage = 'Please select a future date and time';\n\t\t\treturn false;\n\t\t}\n\t\terrorMessage = '';\n\t\treturn true;\n\t}\n\n\t/**\n\t * Handles the form submission.\n\t * If the form is valid, it passes the data back to the component that opened the modal.\n\t */\n\tfunction handleSubmission(): void {\n\t\tif (!validateForm()) return;\n\n\t\t// Pass data back via modalState.close(), which calls the response callback\n\t\tmodalState.close({\n\t\t\tconfirmed: true,\n\t\t\tdate: new Date(scheduleDate),\n\t\t\taction: action\n\t\t});\n\t}\n\n\t// --- Base Classes ---\n\tconst cBase = 'card p-4 w-modal shadow-xl space-y-4 bg-white dark:bg-surface-800';\n\tconst cHeader = 'text-2xl font-bold';\n\tconst cForm = 'border border-surface-500 p-4 space-y-4 rounded-container-token';\n</script>\n\n{#if modalState.active}\n\t<div class=\"modal-schedule {cBase}\" role=\"dialog\" aria-labelledby=\"schedule-modal-title\">\n\t\t<header id=\"schedule-modal-title\" class={`text-center text-primary-500 ${cHeader}`}>Schedule Entry</header>\n\t\t<article class=\"text-center text-sm\">Set a date and time to publish this entry.</article>\n\n\t\t<form\n\t\t\tclass=\"modal-form {cForm}\"\n\t\t\tonsubmit={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\thandleSubmission();\n\t\t\t}}\n\t\t>\n\t\t\t<!-- Date and Time Inputs -->\n\t\t\t<div class=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n\t\t\t\t<label class=\"label\">\n\t\t\t\t\t<span>Date</span>\n\t\t\t\t\t<input class=\"input\" type=\"date\" bind:value={scheduleDateOnly} required aria-label=\"Date\" />\n\t\t\t\t</label>\n\t\t\t\t<label class=\"label\">\n\t\t\t\t\t<span>Time</span>\n\t\t\t\t\t<input class=\"input\" type=\"time\" bind:value={scheduleTimeOnly} required aria-label=\"Time\" />\n\t\t\t\t</label>\n\t\t\t</div>\n\n\t\t\t<!-- Action Select -->\n\t\t\t<label class=\"label\">\n\t\t\t\t<span>Action</span>\n\t\t\t\t<select class=\"select\" bind:value={action} aria-label=\"Action\">\n\t\t\t\t\t{#each actionOptions as opt}\n\t\t\t\t\t\t<option value={opt.value}>{opt.label}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t</select>\n\t\t\t</label>\n\n\t\t\t<!-- Error Message -->\n\t\t\t{#if errorMessage}\n\t\t\t\t<div class=\"text-sm text-error-500\" role=\"alert\">{errorMessage}</div>\n\t\t\t{/if}\n\t\t</form>\n\n\t\t<footer class=\"modal-footer flex items-center justify-end space-x-4\">\n\t\t\t<button class=\"btn preset-outlined-secondary-500\" onclick={() => modalState.close()}>{m.button_cancel()}</button>\n\t\t\t<button class=\"btn preset-filled-primary-500\" onclick={() => handleSubmission()} disabled={!isFormValid}\n\t\t\t\t>{m.entrylist_multibutton_schedule()}</button\n\t\t\t>\n\t\t</footer>\n\t</div>\n{/if}\n","/**\n * @file src/utils/modalUtils.ts\n * @description Centralized utility functions for creating consistent modal configurations\n */\n\nimport { modalState } from '@shared/utils/modalState.svelte';\nimport * as m from '@shared/paraglide/messages';\n\n// Dialog Components\nimport ConfirmDialog from '@cms/components/system/ConfirmDialog.svelte';\nimport ScheduleModal from '@cms/components/collectionDisplay/ScheduleModal.svelte';\n\nexport interface ConfirmModalOptions {\n\ttitle: string;\n\tbody: string;\n\tconfirmText?: string;\n\t/** Alias for confirmText */\n\tbuttonTextConfirm?: string;\n\tcancelText?: string;\n\tonConfirm?: () => void | Promise<void>;\n\tonCancel?: () => void;\n}\n\n// Triggers a modal using the custom modalState\nexport function showModal(settings: any): void {\n\tconst comp = settings.component?.ref || settings.component;\n\tmodalState.trigger(comp, settings.props || settings.meta || {}, settings.response);\n}\n\n// Standardized confirmation modal\nexport function showConfirm(options: ConfirmModalOptions): void {\n\tmodalState.trigger(\n\t\tConfirmDialog,\n\t\t{\n\t\t\thtmlTitle: options.title,\n\t\t\tbody: options.body,\n\t\t\tbuttonTextConfirm: options.buttonTextConfirm || options.confirmText || m.button_confirm?.() || 'Confirm',\n\t\t\tbuttonTextCancel: options.cancelText || m.button_cancel?.() || 'Cancel'\n\t\t},\n\t\t(confirmed: boolean) => {\n\t\t\tif (confirmed) {\n\t\t\t\toptions.onConfirm?.();\n\t\t\t} else {\n\t\t\t\toptions.onCancel?.();\n\t\t\t}\n\t\t}\n\t);\n}\n\n// Delete confirmation modal\nexport function showDeleteConfirm(options: {\n\tisArchive?: boolean;\n\tcount?: number;\n\tonConfirm: () => void | Promise<void>;\n\tonCancel?: () => void;\n}): void {\n\tconst { isArchive = false, count = 1, onConfirm, onCancel } = options;\n\tconst action = isArchive ? 'Archive' : 'Delete';\n\n\tshowConfirm({\n\t\ttitle: `Confirm ${action}`,\n\t\tbody: `Are you sure you want to ${action.toLowerCase()} ${count} item(s)?`,\n\t\tconfirmText: action,\n\t\tonConfirm,\n\t\tonCancel\n\t});\n}\n\n// Status change confirmation\nexport function showStatusChangeConfirm(options: {\n\tstatus: string;\n\tcount?: number;\n\tonConfirm: () => void | Promise<void>;\n\tonCancel?: () => void;\n}): void {\n\tconst { status, count = 1, onConfirm, onCancel } = options;\n\tshowConfirm({\n\t\ttitle: 'Confirm Status Change',\n\t\tbody: `Are you sure you want to change ${count} item(s) to ${status}?`,\n\t\tconfirmText: 'Change Status',\n\t\tonConfirm,\n\t\tonCancel\n\t});\n}\n\n// Schedule modal\nexport function showScheduleModal(options: { initialAction?: string; onSchedule: (date: Date, action: string) => void | Promise<void> }): void {\n\tmodalState.trigger(ScheduleModal, { initialAction: options.initialAction }, (result: any) => {\n\t\tif (result?.confirmed && result.date) {\n\t\t\toptions.onSchedule(result.date, result.action || options.initialAction || 'publish');\n\t\t}\n\t});\n}\n\n// Clone confirmation\nexport function showCloneModal(options: { count?: number; onConfirm: () => void | Promise<void>; onCancel?: () => void }): void {\n\tconst { count = 1, onConfirm, onCancel } = options;\n\tshowConfirm({\n\t\ttitle: 'Clone Items',\n\t\tbody: `Are you sure you want to clone ${count} item(s)?`,\n\t\tconfirmText: 'Clone',\n\t\tonConfirm,\n\t\tonCancel\n\t});\n}\n"],"names":["body","buttonTextConfirm","buttonTextCancel","onConfirm","onCancel","div","root","h3","root_1","p","root_2","$$render","consequent_1","div_1","$.sibling","node_2","button","root_3","consequent_2","button_1","node_4","scheduleDateOnly","$.state","scheduleTimeOnly","action","$.proxy","modalState","errorMessage","scheduleDate","$.derived","$.get","isFormValid","actionOptions","m.entrylist_multibutton_publish","m.entrylist_multibutton_unpublish","m.button_delete","validateForm","$.set","handleSubmission","cHeader","header","$.set_class","form","$.child","label","input","label_1","input_1","label_2","select","$.index","$$anchor","opt","option","$.set_text","text","option_value","div_2","consequent","$.reset","footer","m.button_cancel","m.entrylist_multibutton_schedule","$.event","e","$$value","showModal","settings","comp","showConfirm","options","ConfirmDialog","m.button_confirm","confirmed","showDeleteConfirm","isArchive","count","showStatusChangeConfirm","status","showScheduleModal","ScheduleModal","result","showCloneModal"],"mappings":"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"}