{"version":3,"file":"-PV6rnhC.js","sources":["../../../../../../../../shared/stores/src/collectionStore.svelte.ts","../../../../../../../../shared/stores/src/UIStore.svelte.ts"],"sourcesContent":["import type { Schema, ContentNode } from '@cms-types/content';\nimport { logger } from '@shared/utils/logger';\n\n// Types\nexport type ModeType = 'view' | 'edit' | 'create' | 'delete' | 'modify' | 'media';\n\nexport interface Widget {\n\tpermissions: Record<string, Record<string, boolean>>;\n\t[key: string]: Record<string, Record<string, boolean>> | unknown;\n}\n\nexport const statusMap = {\n\tpublish: 'publish',\n\tunpublish: 'unpublish',\n\tdraft: 'draft',\n\tarchived: 'archived'\n} as const;\n\n/**\n * Enterprise-level Collection Management State\n * Consolidates all collection-related reactivity into a single class.\n */\nclass CollectionState {\n\t// Record of all collections indexed by UUID\n\tall = $state<Record<string, Schema>>({});\n\n\t// Active collection being viewed or edited\n\tactive = $state<Schema | null>(null);\n\n\t// Data value of the currently active entry (e.g. form data)\n\tactiveValue = $state<Record<string, unknown>>({});\n\n\t// Operational mode (view, edit, etc.)\n\tmode = $state<ModeType>('view');\n\n\tloading = $state(false);\n\terror = $state<string | null>(null);\n\n\t// Miscellaneous state\n\tcurrentId = $state<string | null>(null);\n\tunassigned = $state<Schema>({} as Schema);\n\tmodifyEntry = $state<(status?: keyof typeof statusMap) => Promise<void>>(() => Promise.resolve());\n\ttargetWidget = $state<Widget>({ permissions: {} });\n\tcontentStructure = $state<ContentNode[]>([]);\n\tselectedEntries = $state<string[]>([]);\n\n\t// --- Derived Properties ---\n\n\tget total() {\n\t\treturn Object.keys(this.all).length;\n\t}\n\n\tget hasSelected() {\n\t\treturn this.selectedEntries.length > 0;\n\t}\n\n\tget activeName() {\n\t\treturn this.active?.name;\n\t}\n\n\t// --- Actions ---\n\n\tsetCollection(newCollection: Schema | null) {\n\t\tthis.active = newCollection;\n\t}\n\n\tsetMode(newMode: ModeType) {\n\t\tlogger.debug(`CollectionState: mode changed from ${this.mode} to ${newMode}`);\n\t\tthis.mode = newMode;\n\t}\n\n\tsetCollectionValue(newValue: Record<string, unknown>) {\n\t\tthis.activeValue = newValue;\n\t\t// Business logic: ensure status is set if not present\n\t\tif (this.activeValue && !('status' in this.activeValue)) {\n\t\t\tthis.activeValue.status = this.active?.status ?? 'unpublish';\n\t\t}\n\t}\n\n\tsetModifyEntry(newFn: (status?: keyof typeof statusMap) => Promise<void>) {\n\t\tthis.modifyEntry = newFn;\n\t}\n\n\tsetContentStructure(newContentStructure: ContentNode[]) {\n\t\tthis.contentStructure = newContentStructure;\n\t}\n\n\tsetTargetWidget(newWidget: Widget) {\n\t\tthis.targetWidget = newWidget;\n\t}\n\n\t// Entry selection management\n\taddEntry(entryId: string) {\n\t\tif (!this.selectedEntries.includes(entryId)) {\n\t\t\tthis.selectedEntries.push(entryId);\n\t\t}\n\t}\n\n\tremoveEntry(entryId: string) {\n\t\tconst index = this.selectedEntries.indexOf(entryId);\n\t\tif (index > -1) {\n\t\t\tthis.selectedEntries.splice(index, 1);\n\t\t}\n\t}\n\n\tclearSelected() {\n\t\tthis.selectedEntries.length = 0;\n\t}\n\n\t// Legacy compatibility getters/setters for smooth migration\n\tget current() {\n\t\treturn this.active;\n\t}\n\tset current(v) {\n\t\tthis.active = v;\n\t}\n}\n\n// Singleton instances\nexport const collections = new CollectionState();\n\n/**\n * BACKWARD COMPATIBILITY LAYER\n * These exports are maintained to prevent immediate breakage.\n * TODO: Migrate all consumers to use the 'collections' singleton.\n */\n\n// Legacy 'collections' was a record. We bridge it to collections.all\n// This is tricky because it was a direct export of a $state object.\n// We'll provide a Proxy or just keep the old collections record for now if needed,\n// but let's try to migrate.\n\n// Actually, let's keep the discrete exports for now but wire them to the singleton.\n\nexport const collection = {\n\tget value() {\n\t\treturn collections.active;\n\t},\n\tset value(v) {\n\t\tcollections.active = v;\n\t}\n};\n\nexport const collectionValue = {\n\tget value() {\n\t\treturn collections.activeValue;\n\t},\n\tset value(v) {\n\t\tcollections.setCollectionValue(v);\n\t}\n};\n\nexport const mode = {\n\tget value() {\n\t\treturn collections.mode;\n\t},\n\tset value(v) {\n\t\tcollections.setMode(v);\n\t}\n};\n\nexport const contentStructure = {\n\tget value() {\n\t\treturn collections.contentStructure;\n\t},\n\tset value(v) {\n\t\tcollections.contentStructure = v;\n\t}\n};\n\nexport const modifyEntry = {\n\tget value() {\n\t\treturn collections.modifyEntry;\n\t},\n\tset value(v) {\n\t\tcollections.modifyEntry = v;\n\t}\n};\n\nexport const targetWidget = {\n\tget value() {\n\t\treturn collections.targetWidget;\n\t},\n\tset value(v) {\n\t\tcollections.targetWidget = v;\n\t}\n};\n\n// Action functions\nexport const setCollection = (v: Schema | null) => collections.setCollection(v);\nexport const setMode = (v: ModeType) => collections.setMode(v);\nexport const setCollectionValue = (v: Record<string, unknown>) => collections.setCollectionValue(v);\nexport const setModifyEntry = (v: (status?: keyof typeof statusMap) => Promise<void>) => collections.setModifyEntry(v);\nexport const setContentStructure = (v: ContentNode[]) => collections.setContentStructure(v);\nexport const setTargetWidget = (v: Widget) => collections.setTargetWidget(v);\n\n// Legacy derived/utility functions\nexport const getTotalCollections = () => collections.total;\nexport const getHasSelectedEntries = () => collections.hasSelected;\nexport const getCurrentCollectionName = () => collections.activeName;\n\nexport const entryActions = {\n\taddEntry: (id: string) => collections.addEntry(id),\n\tremoveEntry: (id: string) => collections.removeEntry(id),\n\tclear: () => collections.clearSelected()\n};\n\n// Direct state exports for legacy components that don't use the objects\n// Note: These might lose reactivity if rebound elsewhere, but should work for direct imports.\nexport const currentCollectionId = collections.currentId;\nexport const collectionsLoading = collections.loading;\nexport const collectionsError = collections.error;\nexport const unAssigned = collections.unassigned;\nexport const selectedEntries = collections.selectedEntries;\n","/**\n * @file src/stores/UIStore.svelte.ts\n * @description UI visibility management using Svelte 5 runes\n *\n * Features:\n * - Class-based singleton with $state properties\n * - Single $effect.root for controlled updates\n * - Manual override timer for sidebar toggles\n *\n * Usage:\n * - ui.state - Current UIState object\n * - ui.toggle(element, visibility) - Toggle UI element\n * - ui.forceUpdate() - Force layout recalculation\n * - ui.setRouteContext(ctx) - Set special route context\n */\n\nimport { mode } from './collectionStore.svelte';\nimport { screen, ScreenSize } from './screenSizeStore.svelte';\nimport { untrack } from 'svelte';\n\n// Types for UI visibility states\nexport type UIVisibility = 'hidden' | 'collapsed' | 'full';\n\n// Interface for UI state\nexport interface UIState {\n\tleftSidebar: UIVisibility;\n\trightSidebar: UIVisibility;\n\tpageheader: UIVisibility;\n\tpagefooter: UIVisibility;\n\theader: UIVisibility;\n\tfooter: UIVisibility;\n}\n\n/**\n * UIStore - Manages UI element visibility based on screen size and mode\n */\nclass UIStore {\n\t// Core reactive state\n\tstate = $state<UIState>({\n\t\tleftSidebar: 'full',\n\t\trightSidebar: 'hidden',\n\t\tpageheader: 'full',\n\t\tpagefooter: 'hidden',\n\t\theader: 'hidden',\n\t\tfooter: 'hidden'\n\t});\n\n\t// Route context for special layouts\n\trouteContext = $state({\n\t\tisImageEditor: false,\n\t\tisCollectionBuilder: false\n\t});\n\n\t// UI toggles\n\tmanualOverrideActive = $state(false);\n\theaderShowMore = $state(false);\n\tisSearchVisible = $state(false);\n\tuserPreferred = $state<UIVisibility>('collapsed');\n\n\t// Internal state\n\tprivate manualTimer: ReturnType<typeof setTimeout> | null = null;\n\tprivate effectCleanup?: () => void;\n\n\t// Computed visibility getters\n\tget isLeftSidebarVisible(): boolean {\n\t\treturn this.state.leftSidebar !== 'hidden';\n\t}\n\n\tget isRightSidebarVisible(): boolean {\n\t\treturn this.state.rightSidebar !== 'hidden';\n\t}\n\n\tget isPageHeaderVisible(): boolean {\n\t\treturn this.state.pageheader !== 'hidden';\n\t}\n\n\tget isPageFooterVisible(): boolean {\n\t\treturn this.state.pagefooter !== 'hidden';\n\t}\n\n\tget isHeaderVisible(): boolean {\n\t\treturn this.state.header !== 'hidden';\n\t}\n\n\tget isFooterVisible(): boolean {\n\t\treturn this.state.footer !== 'hidden';\n\t}\n\n\tconstructor() {\n\t\tif (typeof window === 'undefined') return;\n\n\t\t// Single effect root watches size + mode changes\n\t\tthis.effectCleanup = $effect.root(() => {\n\t\t\t$effect(() => {\n\t\t\t\tconst size = screen.size;\n\t\t\t\tconst currentMode = mode.value;\n\t\t\t\t// Track route context changes to trigger updates\n\t\t\t\tconst _ctx = this.routeContext.isImageEditor || this.routeContext.isCollectionBuilder;\n\t\t\t\tvoid _ctx;\n\n\t\t\t\tuntrack(() => {\n\t\t\t\t\tif (!this.manualOverrideActive) {\n\t\t\t\t\t\tthis.updateFromContext(size, currentMode);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Updates UI state based on screen size and current mode\n\t */\n\tprivate updateFromContext(size: ScreenSize, currentMode: string): void {\n\t\tconst isViewMode = currentMode === 'view' || currentMode === 'media';\n\n\t\t// Special routes\n\t\tif (this.routeContext.isImageEditor) {\n\t\t\tthis.state = {\n\t\t\t\tleftSidebar: 'collapsed',\n\t\t\t\trightSidebar: 'hidden',\n\t\t\t\tpageheader: 'full',\n\t\t\t\tpagefooter: 'full',\n\t\t\t\theader: 'hidden',\n\t\t\t\tfooter: 'hidden'\n\t\t\t};\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.routeContext.isCollectionBuilder) {\n\t\t\t// Collection builder should respect screen size for sidebar\n\t\t\tlet sidebarState: UIVisibility = 'full';\n\t\t\tif (size === ScreenSize.XS || size === ScreenSize.SM) {\n\t\t\t\tsidebarState = 'hidden';\n\t\t\t} else if (size === ScreenSize.MD) {\n\t\t\t\tsidebarState = 'collapsed';\n\t\t\t}\n\n\t\t\tthis.state = {\n\t\t\t\tleftSidebar: sidebarState,\n\t\t\t\trightSidebar: 'hidden',\n\t\t\t\tpageheader: 'hidden', // No HeaderEdit in collection builder\n\t\t\t\tpagefooter: 'hidden',\n\t\t\t\theader: 'hidden',\n\t\t\t\tfooter: 'hidden'\n\t\t\t};\n\t\t\treturn;\n\t\t}\n\n\t\tconst showPageHeader = ['edit', 'create', 'modify', 'media'].includes(currentMode);\n\n\t\t// Mobile\n\t\tif (size === ScreenSize.XS || size === ScreenSize.SM) {\n\t\t\tthis.state = {\n\t\t\t\tleftSidebar: 'hidden',\n\t\t\t\trightSidebar: 'hidden',\n\t\t\t\tpageheader: showPageHeader ? 'full' : 'hidden',\n\t\t\t\tpagefooter: 'hidden',\n\t\t\t\theader: 'hidden',\n\t\t\t\tfooter: 'hidden'\n\t\t\t};\n\t\t\treturn;\n\t\t}\n\n\t\t// Tablet\n\t\tif (size === ScreenSize.MD) {\n\t\t\tthis.state = {\n\t\t\t\tleftSidebar: isViewMode ? 'collapsed' : 'hidden',\n\t\t\t\trightSidebar: 'hidden',\n\t\t\t\tpageheader: showPageHeader ? 'full' : 'hidden',\n\t\t\t\tpagefooter: 'hidden',\n\t\t\t\theader: 'hidden',\n\t\t\t\tfooter: 'hidden'\n\t\t\t};\n\t\t\treturn;\n\t\t}\n\n\t\t// Desktop\n\t\tthis.state = {\n\t\t\tleftSidebar: isViewMode ? 'full' : 'collapsed',\n\t\t\trightSidebar: isViewMode ? 'hidden' : 'full',\n\t\t\tpageheader: showPageHeader ? 'full' : 'hidden',\n\t\t\tpagefooter: 'hidden',\n\t\t\theader: 'hidden',\n\t\t\tfooter: 'hidden'\n\t\t};\n\t}\n\n\t/**\n\t * Toggle a UI element's visibility\n\t */\n\ttoggle(element: keyof UIState, visibility: UIVisibility): void {\n\t\tthis.state[element] = visibility;\n\n\t\t// Prevent auto-updates for 600ms after manual toggle\n\t\tif (element === 'leftSidebar' || element === 'rightSidebar') {\n\t\t\tthis.manualOverrideActive = true;\n\n\t\t\tif (this.manualTimer) clearTimeout(this.manualTimer);\n\t\t\tthis.manualTimer = setTimeout(() => {\n\t\t\t\tthis.manualOverrideActive = false;\n\t\t\t\tthis.manualTimer = null;\n\t\t\t}, 600);\n\t\t}\n\t}\n\n\t/**\n\t * Set route context for special layouts\n\t */\n\tsetRouteContext(ctx: { isImageEditor?: boolean; isCollectionBuilder?: boolean }): void {\n\t\tfor (const key in ctx) {\n\t\t\tconst k = key as keyof typeof ctx;\n\t\t\tif (this.routeContext[k] !== ctx[k]) {\n\t\t\t\tthis.routeContext[k] = ctx[k] ?? false; // Fallback to false if undefined\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Force a layout update\n\t */\n\tforceUpdate(): void {\n\t\tthis.updateFromContext(screen.size, mode.value);\n\t}\n\n\t/**\n\t * Cleanup resources\n\t */\n\tdestroy(): void {\n\t\tif (this.manualTimer) {\n\t\t\tclearTimeout(this.manualTimer);\n\t\t\tthis.manualTimer = null;\n\t\t}\n\t\tthis.effectCleanup?.();\n\t}\n}\n\n// Singleton instance - the main export\nexport const ui = new UIStore();\n\n// Backward compatibility exports for theme branch components\nexport function toggleUIElement(element: keyof UIState, visibility: UIVisibility): void {\n\tui.toggle(element, visibility);\n}\n\n// Compatibility export for uiStateManager - wraps ui instance\nexport const uiStateManager = {\n\tget state() {\n\t\treturn ui.state;\n\t},\n\tget uiState() {\n\t\treturn { value: ui.state };\n\t},\n\ttoggle: ui.toggle.bind(ui),\n\tshow: (element: keyof UIState) => ui.toggle(element, 'full'),\n\thide: (element: keyof UIState) => ui.toggle(element, 'hidden')\n};\n\n// Compatibility export for userPreferredState - wraps ui.state\nexport const userPreferredState = {\n\tget leftSidebar() {\n\t\treturn ui.state.leftSidebar;\n\t},\n\tget rightSidebar() {\n\t\treturn ui.state.rightSidebar;\n\t},\n\tget pageheader() {\n\t\treturn ui.state.pageheader;\n\t},\n\tset(state: UIVisibility) {\n\t\t// No-op or map to something?\n\t\t// Theme branch likely set a preference.\n\t\tui.userPreferred = state;\n\t}\n};\n\nexport const setRouteContext = ui.setRouteContext.bind(ui);\n"],"names":["CollectionState","$.state","$.proxy","value","#active","#mode","#loading","#error","#currentId","#targetWidget","newCollection","newMode","logger","newValue","newFn","newContentStructure","newWidget","entryId","index","v","collections","collection","collectionValue","mode","contentStructure","targetWidget","setCollection","setMode","setCollectionValue","setModifyEntry","setContentStructure","setTargetWidget","UIStore","#routeContext","#manualOverrideActive","#headerShowMore","#isSearchVisible","#userPreferred","$.effect_root","$.user_effect","size","screen","currentMode","untrack","isViewMode","sidebarState","ScreenSize","showPageHeader","element","visibility","ctx","key","k","ui","toggleUIElement","uiStateManager","userPreferredState","state","setRouteContext"],"mappings":"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"}