{"version":3,"file":"CE8QOwyb.js","sources":["../../../../../../../../shared/services/src/token/tokenTarget.ts"],"sourcesContent":["/**\n * @file src/services/token/tokenTarget.ts\n * @description Svelte Action to register inputs with the Token System.\n */\nimport { activeInput } from '@shared/stores/activeInputStore.svelte';\n\ninterface TokenTargetOptions {\n\tname: string;\n\tlabel?: string;\n\tcollection?: string;\n\tonInsert?: (token: string) => void;\n}\n\nexport function tokenTarget(node: HTMLElement, options: TokenTargetOptions) {\n\tfunction onFocus() {\n\t\tactiveInput.set({\n\t\t\telement: node as HTMLElement | null as any,\n\t\t\tfield: {\n\t\t\t\tname: options.name,\n\t\t\t\tlabel: options.label || options.name,\n\t\t\t\tcollection: options.collection\n\t\t\t},\n\t\t\tonInsert: options.onInsert\n\t\t});\n\t}\n\n\tnode.addEventListener('focus', onFocus);\n\n\treturn {\n\t\tupdate(newOptions: TokenTargetOptions) {\n\t\t\toptions = newOptions;\n\t\t},\n\t\tdestroy() {\n\t\t\tnode.removeEventListener('focus', onFocus);\n\t\t\tif (activeInput.current?.element === node) {\n\t\t\t\tactiveInput.clear();\n\t\t\t}\n\t\t}\n\t};\n}\n"],"names":["tokenTarget","node","options","onFocus","activeInput","newOptions"],"mappings":"kCAaO,SAASA,EAAYC,EAAmBC,EAA6B,CAC3E,SAASC,GAAU,CAClBC,EAAY,IAAI,CACf,QAASH,EACT,MAAO,CACN,KAAMC,EAAQ,KACd,MAAOA,EAAQ,OAASA,EAAQ,KAChC,WAAYA,EAAQ,UAAA,EAErB,SAAUA,EAAQ,QAAA,CAClB,CACF,CAEA,OAAAD,EAAK,iBAAiB,QAASE,CAAO,EAE/B,CACN,OAAOE,EAAgC,CACtCH,EAAUG,CACX,EACA,SAAU,CACTJ,EAAK,oBAAoB,QAASE,CAAO,EACrCC,EAAY,SAAS,UAAYH,GACpCG,EAAY,MAAA,CAEd,CAAA,CAEF"}