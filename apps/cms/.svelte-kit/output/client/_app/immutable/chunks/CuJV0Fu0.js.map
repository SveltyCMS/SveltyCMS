{"version":3,"file":"CuJV0Fu0.js","sources":["../../../../../../../../shared/features/src/dashboard/widgets/UnifiedMetricsWidget.svelte"],"sourcesContent":["<!--\n@file src/routes/(app)/dashboard/widgets/UnifiedMetricsWidget.svelte\n@component\n**Enterprise Unified Metrics Widget**\n\nAdvanced performance monitoring widget integrating with the unified MetricsService\nfor comprehensive system monitoring and performance analysis.\n\n### Features:\n- Real-time unified metrics from MetricsService\n- Performance indicators with color-coded alerts\n- Request/response time tracking with trend analysis\n- Authentication and API performance monitoring\n- Cache hit rates and optimization suggestions\n- Security metrics integration\n- Hook execution time analysis for bottleneck detection\n\n### Props:\n- `label`: Widget title (default: 'System Metrics')\n- `size`: Widget dimensions for responsive layout\n- `showDetails`: Include detailed breakdowns (default: true)\n- `autoRefresh`: Enable automatic refresh (default: true)\n\n@example\n<UnifiedMetricsWidget label=\"Performance Center\" size={{ w: 2, h: 3 }} />\n\n@enterprise Advanced monitoring for production environments\n-->\n\n<script lang=\"ts\" module>\n\texport const widgetMeta = {\n\t\tname: 'Unified Metrics',\n\t\ticon: 'mdi:chart-donut',\n\t\tdescription: 'Comprehensive system performance and security metrics',\n\t\tdefaultSize: { w: 2, h: 3 }\n\t};\n</script>\n\n<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport { logger } from '@shared/utils/logger';\n\timport BaseWidget from '../BaseWidget.svelte';\n\timport type { WidgetSize } from '@cms-types';\n\n\tconst {\n\t\tlabel = 'System Metrics',\n\t\ttheme = 'light',\n\t\ticon = 'mdi:chart-donut',\n\t\twidgetId = undefined,\n\t\tsize = { w: 2, h: 3 } as WidgetSize,\n\t\tshowDetails = true,\n\t\tautoRefresh = true,\n\t\trefreshInterval = 3000,\n\t\tonSizeChange = (_newSize: WidgetSize) => {},\n\t\tonRemove = () => {}\n\t}: {\n\t\tlabel?: string;\n\t\ttheme?: 'light' | 'dark';\n\t\ticon?: string;\n\t\twidgetId?: string;\n\t\tsize?: WidgetSize;\n\t\tshowDetails?: boolean;\n\t\tautoRefresh?: boolean;\n\t\trefreshInterval?: number;\n\t\tonSizeChange?: (newSize: WidgetSize) => void;\n\t\tonRemove?: () => void;\n\t} = $props();\n\n\t// Unified metrics interface (matches MetricsService output)\n\tinterface UnifiedMetrics {\n\t\ttimestamp: number;\n\t\tuptime: number;\n\t\trequests: {\n\t\t\ttotal: number;\n\t\t\terrors: number;\n\t\t\terrorRate: number;\n\t\t\tavgResponseTime: number;\n\t\t};\n\t\tauthentication: {\n\t\t\tvalidations: number;\n\t\t\tfailures: number;\n\t\t\tsuccessRate: number;\n\t\t\tcacheHits: number;\n\t\t\tcacheMisses: number;\n\t\t\tcacheHitRate: number;\n\t\t};\n\t\tapi: {\n\t\t\trequests: number;\n\t\t\terrors: number;\n\t\t\tcacheHits: number;\n\t\t\tcacheMisses: number;\n\t\t\tcacheHitRate: number;\n\t\t};\n\t\tsecurity: {\n\t\t\trateLimitViolations: number;\n\t\t\tcspViolations: number;\n\t\t\tauthFailures: number;\n\t\t};\n\t\tperformance: {\n\t\t\tslowRequests: number;\n\t\t\tavgHookExecutionTime: number;\n\t\t\tbottlenecks: string[];\n\t\t};\n\t}\n\n\t// Reactive state\n\tlet metrics = $state({\n\t\ttimestamp: 0,\n\t\tuptime: 0,\n\t\trequests: { total: 0, errors: 0, errorRate: 0, avgResponseTime: 0 },\n\t\tauthentication: { validations: 0, failures: 0, successRate: 0, cacheHits: 0, cacheMisses: 0, cacheHitRate: 0 },\n\t\tapi: { requests: 0, errors: 0, cacheHits: 0, cacheMisses: 0, cacheHitRate: 0 },\n\t\tsecurity: { rateLimitViolations: 0, cspViolations: 0, authFailures: 0 },\n\t\tperformance: { slowRequests: 0, avgHookExecutionTime: 0, bottlenecks: [] }\n\t});\n\n\tlet isLoading = $state(true);\n\tlet error: string | null = $state(null);\n\tlet refreshTimer: ReturnType<typeof setInterval> | null = null;\n\tlet lastUpdate = $state(0);\n\n\t// Computed performance indicators - using $derived correctly\n\tconst overallHealth = $derived(calculateOverallHealth(metrics));\n\tconst healthColor = $derived(getHealthColor(overallHealth));\n\tconst healthIcon = $derived(getHealthIcon(overallHealth));\n\tconst primaryMetrics = $derived(getPrimaryMetrics(metrics));\n\n\tfunction calculateOverallHealth(m: UnifiedMetrics): 'excellent' | 'good' | 'fair' | 'poor' | 'critical' {\n\t\tconst factors = {\n\t\t\terrorRate: m.requests.errorRate,\n\t\t\tresponseTime: m.requests.avgResponseTime,\n\t\t\tauthSuccessRate: m.authentication.successRate,\n\t\t\tcacheHitRate: (m.authentication.cacheHitRate + m.api.cacheHitRate) / 2,\n\t\t\tsecurityViolations: m.security.rateLimitViolations + m.security.cspViolations,\n\t\t\tslowRequests: m.performance.slowRequests\n\t\t};\n\n\t\t// Critical indicators\n\t\tif (factors.errorRate > 10 || factors.responseTime > 5000 || factors.authSuccessRate < 80) {\n\t\t\treturn 'critical';\n\t\t}\n\n\t\t// Poor performance indicators\n\t\tif (factors.errorRate > 5 || factors.responseTime > 2000 || factors.authSuccessRate < 90 || factors.securityViolations > 50) {\n\t\t\treturn 'poor';\n\t\t}\n\n\t\t// Fair performance indicators\n\t\tif (factors.errorRate > 2 || factors.responseTime > 1000 || factors.cacheHitRate < 70 || factors.securityViolations > 20) {\n\t\t\treturn 'fair';\n\t\t}\n\n\t\t// Good performance indicators\n\t\tif (factors.errorRate > 1 || factors.responseTime > 500 || factors.cacheHitRate < 85) {\n\t\t\treturn 'good';\n\t\t}\n\n\t\treturn 'excellent';\n\t}\n\n\tfunction getHealthColor(health: string): string {\n\t\tswitch (health) {\n\t\t\tcase 'excellent':\n\t\t\t\treturn 'text-green-600';\n\t\t\tcase 'good':\n\t\t\t\treturn 'text-green-500';\n\t\t\tcase 'fair':\n\t\t\t\treturn 'text-yellow-500';\n\t\t\tcase 'poor':\n\t\t\t\treturn 'text-orange-500';\n\t\t\tcase 'critical':\n\t\t\t\treturn 'text-red-600 animate-pulse';\n\t\t\tdefault:\n\t\t\t\treturn 'text-gray-500';\n\t\t}\n\t}\n\n\tfunction getHealthIcon(health: string): string {\n\t\tswitch (health) {\n\t\t\tcase 'excellent':\n\t\t\t\treturn 'mdi:heart-pulse';\n\t\t\tcase 'good':\n\t\t\t\treturn 'mdi:heart';\n\t\t\tcase 'fair':\n\t\t\t\treturn 'mdi:heart-half';\n\t\t\tcase 'poor':\n\t\t\t\treturn 'mdi:heart-broken';\n\t\t\tcase 'critical':\n\t\t\t\treturn 'mdi:heart-off';\n\t\t\tdefault:\n\t\t\t\treturn 'mdi:heart-outline';\n\t\t}\n\t}\n\n\tfunction getPrimaryMetrics(m: UnifiedMetrics) {\n\t\treturn {\n\t\t\tresponseTime: {\n\t\t\t\tvalue: m.requests.avgResponseTime,\n\t\t\t\tformatted: `${m.requests.avgResponseTime.toFixed(0)}ms`,\n\t\t\t\tstatus: m.requests.avgResponseTime < 500 ? 'good' : m.requests.avgResponseTime < 1000 ? 'fair' : 'poor'\n\t\t\t},\n\t\t\terrorRate: {\n\t\t\t\tvalue: m.requests.errorRate,\n\t\t\t\tformatted: `${m.requests.errorRate.toFixed(2)}%`,\n\t\t\t\tstatus: m.requests.errorRate < 1 ? 'good' : m.requests.errorRate < 5 ? 'fair' : 'poor'\n\t\t\t},\n\t\t\tauthSuccess: {\n\t\t\t\tvalue: m.authentication.successRate,\n\t\t\t\tformatted: `${m.authentication.successRate.toFixed(1)}%`,\n\t\t\t\tstatus: m.authentication.successRate > 95 ? 'good' : m.authentication.successRate > 90 ? 'fair' : 'poor'\n\t\t\t},\n\t\t\tcacheEfficiency: {\n\t\t\t\tvalue: (m.authentication.cacheHitRate + m.api.cacheHitRate) / 2,\n\t\t\t\tformatted: `${((m.authentication.cacheHitRate + m.api.cacheHitRate) / 2).toFixed(1)}%`,\n\t\t\t\tstatus: (m.authentication.cacheHitRate + m.api.cacheHitRate) / 2 > 80 ? 'good' : 'fair'\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction getMetricColor(status: string): string {\n\t\tswitch (status) {\n\t\t\tcase 'good':\n\t\t\t\treturn 'text-green-600';\n\t\t\tcase 'fair':\n\t\t\t\treturn 'text-yellow-600';\n\t\t\tcase 'poor':\n\t\t\t\treturn 'text-red-600';\n\t\t\tdefault:\n\t\t\t\treturn 'text-gray-600';\n\t\t}\n\t}\n\n\t// Data fetching\n\tasync function fetchMetrics(): Promise<void> {\n\t\ttry {\n\t\t\tisLoading = true;\n\t\t\terror = null;\n\n\t\t\tconst response = await fetch('/api/metrics/unified');\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`Metrics fetch failed: ${response.status}`);\n\t\t\t}\n\n\t\t\tconst data = await response.json();\n\t\t\tmetrics = data;\n\t\t\tlastUpdate = Date.now();\n\t\t} catch (err) {\n\t\t\terror = err instanceof Error ? err.message : 'Failed to fetch metrics';\n\t\t\tlogger.error('Unified metrics fetch error:', err);\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\t// Utility functions\n\tfunction formatUptime(ms: number): string {\n\t\tconst seconds = Math.floor(ms / 1000);\n\t\tconst minutes = Math.floor(seconds / 60);\n\t\tconst hours = Math.floor(minutes / 60);\n\t\tconst days = Math.floor(hours / 24);\n\n\t\tif (days > 0) return `${days}d ${hours % 24}h`;\n\t\tif (hours > 0) return `${hours}h ${minutes % 60}m`;\n\t\tif (minutes > 0) return `${minutes}m ${seconds % 60}s`;\n\t\treturn `${seconds}s`;\n\t}\n\n\tfunction formatNumber(num: number): string {\n\t\tif (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;\n\t\tif (num >= 1000) return `${(num / 1000).toFixed(1)}K`;\n\t\treturn num.toString();\n\t}\n\n\tfunction formatLastUpdate(): string {\n\t\tif (!lastUpdate) return 'Never';\n\t\tconst ago = Math.floor((Date.now() - lastUpdate) / 1000);\n\t\tif (ago < 60) return `${ago}s ago`;\n\t\treturn `${Math.floor(ago / 60)}m ago`;\n\t}\n\n\t// Lifecycle\n\tonMount(() => {\n\t\tfetchMetrics();\n\n\t\tif (autoRefresh) {\n\t\t\trefreshTimer = setInterval(fetchMetrics, refreshInterval);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (refreshTimer) {\n\t\t\tclearInterval(refreshTimer);\n\t\t}\n\t});\n</script>\n\n<BaseWidget {label} {theme} {icon} {widgetId} {size} {onSizeChange} onCloseRequest={onRemove} {isLoading} {error}>\n\t<div class=\"flex h-full flex-col space-y-3 p-2\">\n\t\t<!-- Health Status Header -->\n\t\t<div class=\"flex items-center justify-between\">\n\t\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t\t<iconify-icon icon={healthIcon} class=\"text-xl {healthColor}\"></iconify-icon>\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"font-semibold capitalize\">{overallHealth}</h3>\n\t\t\t\t\t<p class=\"text-xs text-gray-500\">System Health</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"text-right\">\n\t\t\t\t<div class=\"text-xs text-gray-500\">Uptime</div>\n\t\t\t\t<div class=\"font-mono text-sm\">{formatUptime(metrics.uptime)}</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Primary Metrics Grid -->\n\t\t<div class=\"grid grid-cols-2 gap-2\">\n\t\t\t<div class=\"rounded bg-surface-100 p-2 dark:bg-surface-700\">\n\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">Response Time</div>\n\t\t\t\t<div class=\"font-bold {getMetricColor(primaryMetrics.responseTime.status)}\">\n\t\t\t\t\t{primaryMetrics.responseTime.formatted}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"rounded bg-surface-100 p-2 dark:bg-surface-700\">\n\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">Error Rate</div>\n\t\t\t\t<div class=\"font-bold {getMetricColor(primaryMetrics.errorRate.status)}\">\n\t\t\t\t\t{primaryMetrics.errorRate.formatted}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"rounded bg-surface-100 p-2 dark:bg-surface-700\">\n\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">Auth Success</div>\n\t\t\t\t<div class=\"font-bold {getMetricColor(primaryMetrics.authSuccess.status)}\">\n\t\t\t\t\t{primaryMetrics.authSuccess.formatted}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"rounded bg-surface-100 p-2 dark:bg-surface-700\">\n\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">Cache Hit</div>\n\t\t\t\t<div class=\"font-bold {getMetricColor(primaryMetrics.cacheEfficiency.status)}\">\n\t\t\t\t\t{primaryMetrics.cacheEfficiency.formatted}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Detailed Metrics (if space allows) -->\n\t\t{#if showDetails && size.h >= 3}\n\t\t\t<div class=\"min-h-0 flex-1 space-y-2\">\n\t\t\t\t<!-- Request Statistics -->\n\t\t\t\t<div class=\"border-t pt-2\">\n\t\t\t\t\t<h5 class=\"mb-1 text-xs font-medium\">Request Statistics</h5>\n\t\t\t\t\t<div class=\"grid grid-cols-3 gap-1 text-xs\">\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono\">{formatNumber(metrics.requests.total)}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Total</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-red-600\">{formatNumber(metrics.requests.errors)}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Errors</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-yellow-600\">{formatNumber(metrics.performance.slowRequests)}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Slow</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Security Overview -->\n\t\t\t\t<div class=\"border-t pt-2\">\n\t\t\t\t\t<h5 class=\"mb-1 text-xs font-medium\">Security Events</h5>\n\t\t\t\t\t<div class=\"grid grid-cols-3 gap-1 text-xs\">\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-orange-600\">{metrics.security.rateLimitViolations}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Rate Limits</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-purple-600\">{metrics.security.cspViolations}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">CSP Violations</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-red-600\">{metrics.security.authFailures}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Auth Fails</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Performance Bottlenecks -->\n\t\t\t\t{#if metrics.performance.bottlenecks.length > 0}\n\t\t\t\t\t<div class=\"border-t pt-2\">\n\t\t\t\t\t\t<h5 class=\"mb-1 text-xs font-medium\">Performance Bottlenecks</h5>\n\t\t\t\t\t\t<div class=\"space-y-1\">\n\t\t\t\t\t\t\t{#each metrics.performance.bottlenecks.slice(0, 3) as bottleneck}\n\t\t\t\t\t\t\t\t<div class=\"rounded bg-yellow-100 px-1 py-0.5 text-xs dark:bg-yellow-900/20\">\n\t\t\t\t\t\t\t\t\t{bottleneck}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- Footer with last update -->\n\t\t<div class=\"border-t pt-1 text-center text-xs text-gray-500\">\n\t\t\tLast updated: {formatLastUpdate()}\n\t\t</div>\n\t</div>\n</BaseWidget>\n"],"names":["widgetMeta","label","theme","icon","widgetId","size","showDetails","autoRefresh","refreshInterval","onSizeChange","$.prop","$$props","_newSize","onRemove","metrics","$.state","$.proxy","isLoading","error","refreshTimer","lastUpdate","overallHealth","$.derived","calculateOverallHealth","$.get","healthColor","getHealthColor","healthIcon","getHealthIcon","primaryMetrics","getPrimaryMetrics","m","factors","health","getMetricColor","status","fetchMetrics","$.set","response","data","err","logger","formatUptime","ms","seconds","minutes","hours","days","formatNumber","num","formatLastUpdate","ago","onMount","onDestroy","BaseWidget","$$anchor","div","root_1","div_1","div_2","iconify_icon","$.template_effect","$.set_custom_element_data","div_3","h3","div_4","div_5","div_6","div_7","div_8","div_9","div_10","div_11","div_12","div_13","div_14","div_15","root_2","div_16","div_17","div_18","div_19","div_20","div_21","div_22","div_23","div_24","div_25","div_26","div_27","div_28","div_29","div_30","div_31","div_32","root_3","div_33","$.each","bottleneck","div_34","root_4","$$render","consequent","consequent_1","div_35","$.sibling","node","$.set_class","$1","$2","$3","$4"],"mappings":"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"}