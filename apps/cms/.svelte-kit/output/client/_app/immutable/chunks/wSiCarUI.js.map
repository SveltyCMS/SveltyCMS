{"version":3,"file":"wSiCarUI.js","sources":["../../../../../../src/widgets/core/DateRange/Display.svelte"],"sourcesContent":["<!--\n@file src/widgets/core/DateRange/Display.svelte\n@component\n**DateRange Display Component**\n\nA lightweight renderer for the DateRange widget. Formats a `{ start, end }` value\n(ISO 8601 strings) into a human-readable date range string with duration and context.\n\n@example\n<DateRangeDisplay value={value} format=\"medium\" />\n\n#### Props\n- `value: DateRangeWidgetData | null | undefined` - The date range value ({ start, end })\n- `format?: 'short' | 'medium' | 'long' | 'full'` - Display month formatting (default: 'medium')\n\n#### Features\n- Compact synchronous renderer optimized for lists\n- Shows duration (days, weeks, months, years)\n- Shows temporal context (Current / Past / Future)\n- Locale-aware formatting using browser locale\n- Single date display when start equals end\n- Graceful error handling\n-->\n\n<script lang=\"ts\">\n\timport type { DateRangeWidgetData } from './';\n\timport { logger } from '@shared/utils/logger';\n\n\tinterface Props {\n\t\tvalue: DateRangeWidgetData | null | undefined;\n\t\tformat?: 'short' | 'medium' | 'long' | 'full';\n\t}\n\n\tconst { value, format = 'medium' }: Props = $props();\n\n\t// Get the user's preferred language from the browser\n\tconst userLocale = $derived(typeof document !== 'undefined' ? document.documentElement.lang || 'en-US' : 'en-US');\n\n\t/**\n\t * Format the date range string\n\t */\n\tconst formattedRange = $derived.by(() => {\n\t\tif (!value?.start || !value?.end) return '–';\n\n\t\ttry {\n\t\t\tconst start = new Date(value.start);\n\t\t\tconst end = new Date(value.end);\n\n\t\t\tif (isNaN(start.getTime()) || isNaN(end.getTime())) {\n\t\t\t\treturn 'Invalid Range';\n\t\t\t}\n\n\t\t\tconst dateFormatter = new Intl.DateTimeFormat(userLocale, {\n\t\t\t\tyear: 'numeric',\n\t\t\t\tmonth: format === 'short' ? 'short' : 'long',\n\t\t\t\tday: 'numeric'\n\t\t\t});\n\n\t\t\tconst startFormatted = dateFormatter.format(start);\n\t\t\tconst endFormatted = dateFormatter.format(end);\n\n\t\t\t// If dates are the same, show single date\n\t\t\tif (start.toDateString() === end.toDateString()) {\n\t\t\t\treturn startFormatted;\n\t\t\t}\n\n\t\t\treturn `${startFormatted} → ${endFormatted}`;\n\t\t} catch (e) {\n\t\t\tlogger.warn('Date range formatting error:', e);\n\t\t\treturn 'Invalid Range';\n\t\t}\n\t});\n\n\t/**\n\t * Calculate duration for additional context\n\t */\n\tconst duration = $derived.by(() => {\n\t\tif (!value?.start || !value?.end) return null;\n\n\t\ttry {\n\t\t\tconst start = new Date(value.start);\n\t\t\tconst end = new Date(value.end);\n\t\t\tconst diffTime = end.getTime() - start.getTime();\n\t\t\tconst diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n\t\t\tif (diffDays === 1) return '1 day';\n\t\t\tif (diffDays < 7) return `${diffDays} days`;\n\t\t\tif (diffDays < 30) {\n\t\t\t\tconst weeks = Math.ceil(diffDays / 7);\n\t\t\t\treturn `${weeks} week${weeks > 1 ? 's' : ''}`;\n\t\t\t}\n\t\t\tif (diffDays < 365) {\n\t\t\t\tconst months = Math.ceil(diffDays / 30);\n\t\t\t\treturn `${months} month${months > 1 ? 's' : ''}`;\n\t\t\t}\n\t\t\tconst years = Math.ceil(diffDays / 365);\n\t\t\treturn `${years} year${years > 1 ? 's' : ''}`;\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t});\n\n\t/**\n\t * Determine temporal context (Current / Past / Future)\n\t */\n\tconst relativeContext = $derived.by(() => {\n\t\tif (!value?.start || !value?.end) return null;\n\n\t\ttry {\n\t\t\tconst now = new Date();\n\t\t\tconst start = new Date(value.start);\n\t\t\tconst end = new Date(value.end);\n\n\t\t\tif (start <= now && end >= now) return 'Current';\n\t\t\tif (end < now) return 'Past';\n\t\t\tif (start > now) return 'Future';\n\n\t\t\treturn null;\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t});\n\n\t/**\n\t * Get context badge classes\n\t */\n\tconst contextClasses = $derived.by(() => {\n\t\tconst baseClasses = 'ml-2 inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium';\n\t\tconst contextMap = {\n\t\t\tCurrent: 'bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200',\n\t\t\tPast: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300',\n\t\t\tFuture: 'bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-200'\n\t\t};\n\t\treturn `${baseClasses} ${relativeContext ? contextMap[relativeContext as keyof typeof contextMap] : ''}`;\n\t});\n\n\t/**\n\t * Get tooltip text\n\t */\n\tconst tooltipText = $derived.by(() => {\n\t\tif (!value?.start || !value?.end) return undefined;\n\t\ttry {\n\t\t\tconst start = new Date(value.start).toISOString();\n\t\t\tconst end = new Date(value.end).toISOString();\n\t\t\treturn `${start} to ${end}`;\n\t\t} catch {\n\t\t\treturn undefined;\n\t\t}\n\t});\n</script>\n\n<span class=\"inline-flex items-center font-medium text-gray-900 dark:text-gray-100\" title={tooltipText}>\n\t<span>{formattedRange}</span>\n\t{#if duration}\n\t\t<span class=\"ml-2 text-sm font-normal text-gray-500 dark:text-gray-400\" aria-label=\"Duration: {duration}\">\n\t\t\t({duration})\n\t\t</span>\n\t{/if}\n\t{#if relativeContext}\n\t\t<span class={contextClasses} aria-label=\"Time context: {relativeContext}\">\n\t\t\t{relativeContext}\n\t\t</span>\n\t{/if}\n</span>\n"],"names":["format","userLocale","$.derived","formattedRange","$$props","start","end","dateFormatter","startFormatted","endFormatted","e","logger","duration","diffTime","diffDays","weeks","months","years","relativeContext","now","contextClasses","baseClasses","contextMap","$.get","tooltipText","span","root","span_1","span_2","root_1","$.set_attribute","$$render","consequent","span_3","root_2","$.set_class","consequent_1"],"mappings":"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"}