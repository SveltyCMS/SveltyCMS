{"version":3,"file":"rateLimiter.js","sources":["../../../../../../node_modules/.bun/sveltekit-rate-limiter@0.7.0+fe0513b84f156ec4/node_modules/sveltekit-rate-limiter/dist/server/hashFunction.js","../../../../../../node_modules/.bun/sveltekit-rate-limiter@0.7.0+fe0513b84f156ec4/node_modules/sveltekit-rate-limiter/dist/server/limiters/cookieRateLimiter.js","../../../../../../node_modules/.bun/sveltekit-rate-limiter@0.7.0+fe0513b84f156ec4/node_modules/sveltekit-rate-limiter/dist/server/limiters/ipRateLimiter.js","../../../../../../node_modules/.bun/sveltekit-rate-limiter@0.7.0+fe0513b84f156ec4/node_modules/sveltekit-rate-limiter/dist/server/limiters/ipUaRateLimiter.js","../../../../../../node_modules/.bun/sveltekit-rate-limiter@0.7.0+fe0513b84f156ec4/node_modules/sveltekit-rate-limiter/dist/server/stores/ttlStore.js","../../../../../../node_modules/.bun/sveltekit-rate-limiter@0.7.0+fe0513b84f156ec4/node_modules/sveltekit-rate-limiter/dist/server/rate.js","../../../../../../node_modules/.bun/sveltekit-rate-limiter@0.7.0+fe0513b84f156ec4/node_modules/sveltekit-rate-limiter/dist/server/rateLimiter.js"],"sourcesContent":["export let defaultHashFunction;\nif (globalThis?.crypto?.subtle) {\n    defaultHashFunction = subtleSha256;\n}\nasync function subtleSha256(str) {\n    const digest = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(str));\n    return [...new Uint8Array(digest)]\n        .map((b) => b.toString(16).padStart(2, '0'))\n        .join('');\n}\n","import { defaultHashFunction } from '../hashFunction.js';\nimport { nanoid } from 'nanoid';\nexport class CookieRateLimiter {\n    rate;\n    cookieOptions;\n    secret;\n    requirePreflight;\n    cookieId;\n    hashFunction;\n    constructor(options) {\n        this.cookieId = options.name;\n        this.secret = options.secret;\n        this.rate = options.rate;\n        this.requirePreflight = options.preflight;\n        this.hashFunction = options.hashFunction ?? defaultHashFunction;\n        this.cookieOptions = {\n            path: '/',\n            httpOnly: true,\n            maxAge: 60 * 60 * 24 * 7,\n            sameSite: 'strict',\n            ...options.serializeOptions\n        };\n    }\n    async hash(event) {\n        const currentId = await this.userIdFromCookie(event.cookies.get(this.cookieId), event);\n        return currentId ? currentId : false;\n    }\n    async preflight(event) {\n        const data = event.cookies.get(this.cookieId);\n        if (data) {\n            const userId = await this.userIdFromCookie(data, event);\n            if (userId)\n                return userId;\n        }\n        return this.setPreflightCookie(event);\n    }\n    async setPreflightCookie(event) {\n        const userId = nanoid();\n        event.cookies.set(this.cookieId, userId + ';' + (await this.hashFunction(this.secret + userId)), this.cookieOptions);\n        return userId;\n    }\n    async userIdFromCookie(cookie, event) {\n        if (!cookie)\n            return this.requirePreflight ? null : this.preflight(event);\n        const [userId, secretHash] = cookie.split(';');\n        if (!userId || !secretHash) {\n            return this.setPreflightCookie(event);\n        }\n        if ((await this.hashFunction(this.secret + userId)) != secretHash) {\n            return this.setPreflightCookie(event);\n        }\n        return userId;\n    }\n}\n","export class IPRateLimiter {\n    rate;\n    constructor(rate) {\n        this.rate = rate;\n    }\n    async hash(event) {\n        return event.getClientAddress();\n    }\n}\n","export class IPUserAgentRateLimiter {\n    rate;\n    constructor(rate) {\n        this.rate = rate;\n    }\n    async hash(event) {\n        const ua = event.request.headers.get('user-agent');\n        if (!ua)\n            return false;\n        return event.getClientAddress() + ua;\n    }\n}\n","import TTLCache from '@isaacs/ttlcache';\nexport class TTLStore {\n    cache;\n    constructor(maxTTL, maxItems = Infinity) {\n        this.cache = new TTLCache({\n            ttl: maxTTL,\n            max: maxItems,\n            noUpdateTTL: true\n        });\n    }\n    async clear() {\n        return this.cache.clear();\n    }\n    async add(hash, ttl) {\n        const currentRate = this.cache.get(hash) ?? 0;\n        return this.set(hash, currentRate + 1, ttl);\n    }\n    set(hash, rate, ttl) {\n        this.cache.set(hash, rate, { ttl });\n        return rate;\n    }\n}\n","export function TTLTime(unit) {\n    switch (unit) {\n        case 's':\n            return 1000;\n        case 'm':\n            return 60000;\n        case 'h':\n            return 60 * 60000;\n        case '2s':\n            return 2000;\n        case '5s':\n            return 5000;\n        case '10s':\n            return 10000;\n        case '15s':\n            return 15000;\n        case '30s':\n            return 30000;\n        case '45s':\n            return 45000;\n        case '2m':\n            return 2 * 60000;\n        case '5m':\n            return 5 * 60000;\n        case '10m':\n            return 10 * 60000;\n        case '15m':\n            return 15 * 60000;\n        case '30m':\n            return 30 * 60000;\n        case '45m':\n            return 45 * 60000;\n        case '100ms':\n            return 100;\n        case '250ms':\n            return 250;\n        case '500ms':\n            return 500;\n        case '2h':\n            return 2 * 60 * 60000;\n        case '6h':\n            return 6 * 60 * 60000;\n        case '12h':\n            return 12 * 60 * 60000;\n        case 'd':\n            return 24 * 60 * 60000;\n        case 'ms':\n            return 1;\n    }\n    throw new Error('Invalid unit for TTLTime: ' + unit);\n}\n","import { CookieRateLimiter } from './limiters/cookieRateLimiter.js';\nimport { IPRateLimiter } from './limiters/ipRateLimiter.js';\nimport { IPUserAgentRateLimiter } from './limiters/ipUaRateLimiter.js';\nimport { defaultHashFunction } from './hashFunction.js';\nimport { TTLStore } from './stores/ttlStore.js';\nimport {} from './limiters/rateLimiterPlugin.js';\nimport { TTLTime } from './rate.js';\nexport class RateLimiter {\n    store;\n    plugins;\n    onLimited;\n    hashFunction;\n    cookieLimiter;\n    async isLimited(event, extraData) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return (await this._isLimited(event, extraData))\n            .limited;\n    }\n    /**\n     * Clear all rate limits.\n     */\n    async clear() {\n        return await this.store.clear();\n    }\n    /**\n     * Check if a request event is rate limited.\n     * @param {RequestEvent} event\n     * @returns {Promise<limited: boolean, reason: 'IP' | 'IPUA' | 'cookie' | number>} Rate limit status for the event.\n     */\n    async check(event, extraData) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const result = await this._isLimited(event, extraData);\n        if (!result.limited)\n            return { limited: false };\n        return { limited: true, reason: result.reason };\n    }\n    /**\n     * Check if a request event is rate limited.\n     * @param {RequestEvent} event\n     * @returns {Promise<boolean>} true if request is limited, false otherwise\n     */\n    async _isLimited(event, extraData) {\n        let limited = undefined;\n        for (let i = 0; i < this.plugins.length; i++) {\n            const plugin = this.plugins[i];\n            const rate = plugin.rate;\n            const id = await plugin.limiter.hash(event, extraData);\n            if (id === false) {\n                if (this.onLimited) {\n                    const status = await this.onLimited(event, 'rejected');\n                    if (status === true)\n                        return { limited: false, hash: null, ttl: rate[1] };\n                }\n                return {\n                    limited: true,\n                    hash: null,\n                    ttl: rate[1],\n                    reason: this.limitReason(plugin.limiter, i)\n                };\n            }\n            else if (id === null) {\n                if (limited === undefined)\n                    limited = true;\n                continue;\n            }\n            else {\n                limited = false;\n            }\n            if (!id) {\n                throw new Error('Empty hash returned from rate limiter ' + plugin.constructor.name);\n            }\n            if (id === true) {\n                return { limited: false, hash: null, ttl: rate[1] };\n            }\n            // Add the plugin index to the hash, so it differs between limiters with multiple rates\n            const hash = i.toString() + (await this.hashFunction(id));\n            const currentRate = await this.store.add(hash, rate[1]);\n            if (currentRate > rate[0]) {\n                if (this.onLimited) {\n                    const status = await this.onLimited(event, 'rate');\n                    if (status === true)\n                        return { limited: false, hash, ttl: rate[1] };\n                }\n                return {\n                    limited: true,\n                    hash,\n                    ttl: rate[1],\n                    reason: this.limitReason(plugin.limiter, i)\n                };\n            }\n        }\n        if (limited) {\n            return {\n                limited: true,\n                hash: null,\n                ttl: this.plugins[this.plugins.length - 1].rate[1],\n                reason: this.limitReason(this.plugins[this.plugins.length - 1].limiter, this.plugins.length - 1)\n            };\n        }\n        return {\n            limited: false,\n            hash: null,\n            ttl: this.plugins[this.plugins.length - 1].rate[1]\n        };\n    }\n    limitReason(plugin, index) {\n        if (plugin instanceof IPRateLimiter)\n            return 'IP';\n        if (plugin instanceof IPUserAgentRateLimiter)\n            return 'IPUA';\n        if (plugin instanceof CookieRateLimiter)\n            return 'cookie';\n        return index;\n    }\n    constructor(options = {}) {\n        this.onLimited = options.onLimited;\n        this.hashFunction = options.hashFunction ?? defaultHashFunction;\n        if (!this.hashFunction) {\n            throw new Error('No RateLimiter hash function found. Please set one with the hashFunction option.');\n        }\n        //#region Plugin setup\n        function mapPluginRates(limiter) {\n            if (!limiter.rate.length)\n                throw new Error(`Empty rate for limiter ${limiter.constructor.name}`);\n            const pluginRates = (Array.isArray(limiter.rate[0]) ? limiter.rate : [limiter.rate]);\n            return pluginRates.map((rate) => ({\n                rate: [rate[0], TTLTime(rate[1])],\n                limiter\n            }));\n        }\n        this.plugins = (options.plugins ?? []).flatMap(mapPluginRates);\n        const IPRates = options.IP ?? options.rates?.IP;\n        if (IPRates) {\n            this.plugins = this.plugins.concat(mapPluginRates(new IPRateLimiter(IPRates)));\n        }\n        const IPUARates = options.IPUA ?? options.rates?.IPUA;\n        if (IPUARates) {\n            this.plugins = this.plugins.concat(mapPluginRates(new IPUserAgentRateLimiter(IPUARates)));\n        }\n        const cookieRates = options.cookie ?? options.rates?.cookie;\n        if (cookieRates) {\n            this.plugins = this.plugins.concat(mapPluginRates((this.cookieLimiter = new CookieRateLimiter({\n                hashFunction: this.hashFunction,\n                ...cookieRates\n            }))));\n        }\n        if (!this.plugins.length) {\n            throw new Error('No plugins set for RateLimiter!');\n        }\n        // Sort plugins by rate, if early cancelling\n        this.plugins.sort((a, b) => {\n            const diff = a.rate[1] - b.rate[1];\n            return diff == 0 ? a.rate[0] - b.rate[0] : diff;\n        });\n        //#endregion\n        const maxTTL = this.plugins.reduce((acc, plugin) => {\n            const rate = plugin.rate[1];\n            if (rate == 1) {\n                console.warn('RateLimiter: The \"ms\" unit is not reliable due to OS timing issues.');\n            }\n            return Math.max(rate, acc);\n        }, 0);\n        this.store = options.store ?? new TTLStore(maxTTL, options.maxItems);\n    }\n}\n"],"names":[],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}