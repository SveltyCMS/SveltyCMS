{"version":3,"file":"schemas.js","sources":["../../../../../../shared/database/src/schemas.ts"],"sourcesContent":["/**\n * @file src/databases/schemas.ts\n * @description Defines validation schemas for application configuration and base database structures.\n */\n\nimport type { BaseIssue, BaseSchema, InferOutput } from 'valibot';\nimport type { DatabaseId, ISODateString } from './dbInterface';\nimport { array, boolean, literal, maxValue, minLength, minValue, number, object, optional, pipe, safeParse, string, transform, union } from 'valibot';\nimport { logger } from '@shared/utils/logger';\n\n// ----------------- CONFIGURATION SCHEMAS -----------------\n\n// The PRIVATE configuration for the application.\nexport const privateConfigSchema = object({\n\t// --- Database configuration (Essential for startup) ---\n\tDB_TYPE: union([literal('mongodb'), literal('mongodb+srv'), literal('mariadb'), literal('')]),\n\tDB_HOST: pipe(string(), minLength(1, 'Database host is required.')),\n\tDB_PORT: pipe(number(), minValue(1)),\n\tDB_NAME: pipe(string(), minLength(1, 'Database name is required.')),\n\tDB_USER: string(),\n\tDB_PASSWORD: string(),\n\tDB_RETRY_ATTEMPTS: optional(pipe(number(), minValue(1))),\n\tDB_RETRY_DELAY: optional(pipe(number(), minValue(1))),\n\tDB_POOL_SIZE: optional(pipe(number(), minValue(1))),\n\n\t// --- JWT Secret (Essential for startup) ---\n\tJWT_SECRET_KEY: pipe(string(), minLength(32, 'JWT Secret Key must be at least 32 characters long for security.')),\n\n\t// --- Encryption Key (Essential for startup) ---\n\tENCRYPTION_KEY: pipe(string(), minLength(32, 'Encryption Key must be at least 32 characters long for security.')),\n\n\t// --- Multi-tenancy (Essential for startup) ---\n\tMULTI_TENANT: optional(boolean()),\n\tDEMO: optional(boolean()),\n\n\t// --- Licensing & Telemetry (BSL 1.1 Support) ---\n\tLICENSE_KEY: optional(string()), // For Enterprise users to disable nags/tracking\n\tSVELTYCMS_TELEMETRY: optional(boolean()), // Usage tracking (default: true)\n\n\t// --- Optional service toggles (populated dynamically post-startup) ---\n\tUSE_REDIS: optional(boolean()),\n\tREDIS_HOST: optional(pipe(string(), minLength(1))),\n\tREDIS_PORT: optional(pipe(number(), minValue(1))),\n\tREDIS_PASSWORD: optional(string()),\n\n\t// --- Cache TTL Configuration (in seconds) ---\n\tCACHE_TTL_SCHEMA: optional(pipe(number(), minValue(1))),\n\tCACHE_TTL_WIDGET: optional(pipe(number(), minValue(1))),\n\tCACHE_TTL_THEME: optional(pipe(number(), minValue(1))),\n\tCACHE_TTL_CONTENT: optional(pipe(number(), minValue(1))),\n\tCACHE_TTL_MEDIA: optional(pipe(number(), minValue(1))),\n\tCACHE_TTL_SESSION: optional(pipe(number(), minValue(1))),\n\tCACHE_TTL_USER: optional(pipe(number(), minValue(1))),\n\tCACHE_TTL_API: optional(pipe(number(), minValue(1))),\n\n\tGOOGLE_CLIENT_ID: optional(pipe(string(), minLength(1))),\n\tGOOGLE_CLIENT_SECRET: optional(pipe(string(), minLength(1))),\n\tGOOGLE_API_KEY: optional(pipe(string(), minLength(1))),\n\tSMTP_HOST: optional(pipe(string(), minLength(1))),\n\tSMTP_PORT: optional(pipe(number(), minValue(1))),\n\tSMTP_USER: optional(string()),\n\tSMTP_PASS: optional(string()),\n\tSMTP_MAIL_FROM: optional(string()),\n\tSMTP_EMAIL: optional(string()),\n\n\t// Roles schema\n\tROLES: optional(\n\t\tarray(\n\t\t\tobject({\n\t\t\t\t_id: pipe(string(), minLength(1)),\n\t\t\t\tname: pipe(string(), minLength(1)),\n\t\t\t\tdescription: optional(string()),\n\t\t\t\tpermissions: array(pipe(string(), minLength(1))),\n\t\t\t\tisAdmin: optional(boolean()),\n\t\t\t\ticon: optional(string()),\n\t\t\t\tcolor: optional(string())\n\t\t\t})\n\t\t)\n\t),\n\tMEDIA_FOLDER: optional(pipe(string(), minLength(1))),\n\n\t// --- Cloud Storage Credentials ---\n\tMEDIA_CLOUD_ACCESS_KEY: optional(pipe(string(), minLength(1))),\n\tMEDIA_CLOUD_SECRET_KEY: optional(pipe(string(), minLength(1))),\n\tMEDIA_CLOUDINARY_CLOUD_NAME: optional(pipe(string(), minLength(1))),\n\tMEDIA_CLOUDINARY_API_KEY: optional(pipe(string(), minLength(1))),\n\tMEDIA_CLOUDINARY_API_SECRET: optional(pipe(string(), minLength(1))),\n\n\tTWITCH_CLIENT_ID: optional(pipe(string(), minLength(1))),\n\tTWITCH_TOKEN: optional(pipe(string(), minLength(1))),\n\tTIKTOK_TOKEN: optional(pipe(string(), minLength(1))),\n\n\t// --- Firewall Configuration ---\n\tFIREWALL_ENABLED: optional(boolean()),\n\tFIREWALL_ALLOWED_BOTS: optional(array(string())),\n\tFIREWALL_BLOCKED_BOTS: optional(array(string()))\n});\n\n// The PUBLIC configuration for the application.\nexport const publicConfigSchema = object({\n\t// --- Host configuration ---\n\tHOST_DEV: pipe(string(), minLength(1)),\n\tHOST_PROD: pipe(string(), minLength(1)),\n\n\t// --- Site configuration ---\n\tSITE_NAME: pipe(string(), minLength(1)),\n\tPASSWORD_LENGTH: pipe(number(), minValue(8)),\n\n\t// --- Language Configuration ---\n\tDEFAULT_CONTENT_LANGUAGE: pipe(string(), minLength(1)),\n\tAVAILABLE_CONTENT_LANGUAGES: pipe(array(pipe(string(), minLength(1))), minLength(1)),\n\tBASE_LOCALE: pipe(string(), minLength(1)),\n\tLOCALES: pipe(array(pipe(string(), minLength(1))), minLength(1)),\n\n\t// --- Media configuration ---\n\tMEDIA_STORAGE_TYPE: union([literal('local'), literal('s3'), literal('r2'), literal('cloudinary')]),\n\tMEDIA_FOLDER: pipe(string(), minLength(1)),\n\tMEDIA_OUTPUT_FORMAT_QUALITY: object({\n\t\tformat: union([literal('original'), literal('jpg'), literal('webp'), literal('avif')]),\n\t\tquality: pipe(number(), minValue(1), maxValue(100))\n\t}),\n\tMEDIASERVER_URL: optional(string()),\n\tMEDIA_BUCKET_NAME: optional(pipe(string(), minLength(1))),\n\n\t// --- Cloud Storage Configuration ---\n\tMEDIA_CLOUD_REGION: optional(string()),\n\tMEDIA_CLOUD_ENDPOINT: optional(string()),\n\tMEDIA_CLOUD_PUBLIC_URL: optional(string()),\n\tIMAGE_SIZES: object({}),\n\tMAX_FILE_SIZE: optional(pipe(number(), minValue(1))),\n\tBODY_SIZE_LIMIT: optional(pipe(number(), minValue(1))),\n\tEXTRACT_DATA_PATH: optional(string()),\n\tUSE_ARCHIVE_ON_DELETE: optional(boolean()),\n\n\t// --- Seasons Icons ---\n\tSEASONS: optional(boolean()),\n\tSEASON_REGION: optional(union([literal('Western_Europe'), literal('South_Asia'), literal('East_Asia'), literal('Global')])),\n\n\t// --- Versioning ---\n\tPKG_VERSION: optional(string()),\n\n\t// --- Logging ---\n\tLOG_LEVELS: pipe(\n\t\tarray(union([literal('none'), literal('error'), literal('info'), literal('warn'), literal('debug'), literal('fatal'), literal('trace')])),\n\t\tminLength(1)\n\t),\n\tLOG_RETENTION_DAYS: optional(pipe(number(), minValue(1))),\n\tLOG_ROTATION_SIZE: optional(pipe(number(), minValue(1))),\n\n\t// --- Demo Mode ---\n\tUSE_GOOGLE_OAUTH: optional(boolean()),\n\tDEMO: optional(boolean())\n});\n\nexport const websiteTokenSchema = object({\n\t_id: pipe(\n\t\tstring(),\n\t\ttransform((input) => input as DatabaseId)\n\t) as BaseSchema<string, DatabaseId, BaseIssue<string>>,\n\tname: pipe(string(), minLength(1, 'Token name is required.')),\n\ttoken: pipe(string(), minLength(32)),\n\tcreatedAt: pipe(\n\t\tstring(),\n\t\ttransform((input) => input as ISODateString)\n\t) as BaseSchema<string, ISODateString, BaseIssue<string>>,\n\tupdatedAt: pipe(\n\t\tstring(),\n\t\ttransform((input) => input as ISODateString)\n\t) as BaseSchema<string, ISODateString, BaseIssue<string>>,\n\tcreatedBy: string()\n});\n\nexport const databaseConfigSchema = object({\n\ttype: union([literal('mongodb'), literal('mongodb+srv'), literal('mariadb')]),\n\thost: pipe(string(), minLength(1)),\n\tport: optional(pipe(number(), minValue(0))),\n\tname: pipe(string(), minLength(1)),\n\tuser: string(),\n\tpassword: string()\n});\n\n// ----------------- TYPES & HELPERS -----------------\nexport type DatabaseConfig = InferOutput<typeof databaseConfigSchema>;\nexport type PrivateConfig = InferOutput<typeof privateConfigSchema>;\nexport type WebsiteToken = InferOutput<typeof websiteTokenSchema>;\nexport type PublicConfig = InferOutput<typeof publicConfigSchema>;\n\n// --- DYNAMIC COLLECTION SCHEMAS ---\nexport const collectionSchemas = {\n\tNames: { name: 'Names', label: 'Names', fields: [] },\n\tRelation: { name: 'Relation', label: 'Relation', fields: [] },\n\tWidgetTest: { name: 'WidgetTest', label: 'WidgetTest', fields: [] }\n};\n\nexport const createPrivateConfig = (arg: PrivateConfig): PrivateConfig => arg;\nexport const createPublicConfig = (arg: PublicConfig): PublicConfig => arg;\n\n// ----------------- ENHANCED VALIDATION & LOGGING -----------------\nlet validationLogPrinted = false;\n\nconst colors = {\n\treset: '',\n\tred: '',\n\tgreen: '',\n\tyellow: '',\n\tblue: '',\n\tmagenta: '',\n\tcyan: '',\n\twhite: '',\n\tgray: ''\n};\n\nfunction formatPath(path: BaseIssue<unknown>['path']): string {\n\tif (!path || path.length === 0) return 'root';\n\treturn path.map((p) => String(p.key)).join('.');\n}\n\nfunction logValidationErrors(issues: BaseIssue<unknown>[], configFile: string): void {\n\tlogger.error(`\\n${colors.yellow}⚠️ Invalid configuration in ${colors.cyan}${configFile}${colors.reset}`);\n\tissues.forEach((issue) => {\n\t\tconst fieldPath = formatPath(issue.path) || 'Configuration object';\n\t\tlogger.error(`\\n   - ${colors.white}Location:${colors.cyan} ${fieldPath}`);\n\t\tlogger.error(`     ${colors.red}Error: ${issue.message}${colors.reset}`);\n\t\tif (issue.input !== undefined) {\n\t\t\tlogger.error(`     ${colors.magenta}Received: ${colors.red}${JSON.stringify(issue.input)}${colors.reset}`);\n\t\t}\n\t});\n}\n\ninterface Config {\n\tUSE_2FA?: boolean;\n\tTWO_FACTOR_AUTH_BACKUP_CODES_COUNT?: number;\n\tUSE_GOOGLE_OAUTH?: boolean;\n\tGOOGLE_CLIENT_ID?: string;\n\tGOOGLE_CLIENT_SECRET?: string;\n\tUSE_REDIS?: boolean;\n\tREDIS_HOST?: string;\n\tREDIS_PORT?: number;\n\tUSE_MAPBOX?: boolean;\n\tMAPBOX_API_TOKEN?: string;\n\tUSE_TIKTOK?: boolean;\n\tTIKTOK_TOKEN?: string;\n\tSEASONS?: string[];\n\tSEASON_REGION?: string;\n\tAVAILABLE_CONTENT_LANGUAGES?: string[];\n\tDEFAULT_CONTENT_LANGUAGE?: string;\n\tLOCALES?: string[];\n\tBASE_LOCALE?: string;\n}\n\nfunction performConditionalValidation(config: Config): string[] {\n\tconst errors: string[] = [];\n\n\tif (config.USE_GOOGLE_OAUTH && (!config.GOOGLE_CLIENT_ID || !config.GOOGLE_CLIENT_SECRET)) {\n\t\terrors.push(`When USE_GOOGLE_OAUTH is true, both GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET are required.`);\n\t}\n\tif (config.USE_REDIS && (!config.REDIS_HOST || !config.REDIS_PORT)) {\n\t\terrors.push(`When USE_REDIS is true, both REDIS_HOST and REDIS_PORT are required.`);\n\t}\n\tif (config.USE_MAPBOX && !config.MAPBOX_API_TOKEN) {\n\t\terrors.push(`When USE_MAPBOX is true, a MAPBOX_API_TOKEN is required.`);\n\t}\n\tif (config.USE_TIKTOK && !config.TIKTOK_TOKEN) {\n\t\terrors.push(`When USE_TIKTOK is true, a TIKTOK_TOKEN is required.`);\n\t}\n\tif (\n\t\tconfig.USE_2FA &&\n\t\tconfig.TWO_FACTOR_AUTH_BACKUP_CODES_COUNT &&\n\t\t(config.TWO_FACTOR_AUTH_BACKUP_CODES_COUNT < 1 || config.TWO_FACTOR_AUTH_BACKUP_CODES_COUNT > 50)\n\t) {\n\t\terrors.push(`When USE_2FA is enabled, TWO_FACTOR_AUTH_BACKUP_CODES_COUNT must be between 1 and 50.`);\n\t}\n\tif (config.SEASONS && !config.SEASON_REGION) {\n\t\terrors.push(`When SEASONS is true, a SEASON_REGION must be selected.`);\n\t}\n\tif (\n\t\tconfig.DEFAULT_CONTENT_LANGUAGE &&\n\t\tconfig.AVAILABLE_CONTENT_LANGUAGES &&\n\t\t!config.AVAILABLE_CONTENT_LANGUAGES.includes(config.DEFAULT_CONTENT_LANGUAGE)\n\t) {\n\t\terrors.push(`The DEFAULT_CONTENT_LANGUAGE must be included in the AVAILABLE_CONTENT_LANGUAGES array.`);\n\t}\n\tif (config.BASE_LOCALE && config.LOCALES && Array.isArray(config.LOCALES) && config.LOCALES.includes(config.BASE_LOCALE)) {\n\t\terrors.push(`The BASE_LOCALE must be included in the LOCALES array.`);\n\t}\n\n\treturn errors;\n}\n\nexport function validateConfig(schema: BaseSchema<unknown, unknown, BaseIssue<unknown>>, config: unknown, configName: string): unknown {\n\tif (!validationLogPrinted) {\n\t\tlogger.info('Validating CMS configuration...');\n\t\tvalidationLogPrinted = true;\n\t}\n\n\tconst result = safeParse(schema, config, { abortEarly: false });\n\tconst configFile = configName.includes('Private') ? 'config/private.ts' : 'config/public.ts';\n\n\tif (result.success) {\n\t\tconst conditionalErrors = performConditionalValidation(result.output as Config);\n\t\tif (conditionalErrors.length > 0) {\n\t\t\tlogger.error(`${configName} validation failed with logical errors:`);\n\t\t\tconditionalErrors.forEach((error) => logger.error(`   - ${error}`));\n\t\t\tprocess.exit(1);\n\t\t}\n\t\treturn result.output;\n\t} else {\n\t\tlogger.error(`${configName} validation failed. Please check your configuration.`);\n\t\tlogValidationErrors(result.issues, configFile);\n\t\tprocess.exit(1);\n\t}\n}\n"],"names":[],"mappings":"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"}