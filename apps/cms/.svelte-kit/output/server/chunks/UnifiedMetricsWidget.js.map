{"version":3,"file":"UnifiedMetricsWidget.js","sources":["../../../../../../shared/features/src/dashboard/widgets/UnifiedMetricsWidget.svelte"],"sourcesContent":["<!--\n@file src/routes/(app)/dashboard/widgets/UnifiedMetricsWidget.svelte\n@component\n**Enterprise Unified Metrics Widget**\n\nAdvanced performance monitoring widget integrating with the unified MetricsService\nfor comprehensive system monitoring and performance analysis.\n\n### Features:\n- Real-time unified metrics from MetricsService\n- Performance indicators with color-coded alerts\n- Request/response time tracking with trend analysis\n- Authentication and API performance monitoring\n- Cache hit rates and optimization suggestions\n- Security metrics integration\n- Hook execution time analysis for bottleneck detection\n\n### Props:\n- `label`: Widget title (default: 'System Metrics')\n- `size`: Widget dimensions for responsive layout\n- `showDetails`: Include detailed breakdowns (default: true)\n- `autoRefresh`: Enable automatic refresh (default: true)\n\n@example\n<UnifiedMetricsWidget label=\"Performance Center\" size={{ w: 2, h: 3 }} />\n\n@enterprise Advanced monitoring for production environments\n-->\n\n<script lang=\"ts\" module>\n\texport const widgetMeta = {\n\t\tname: 'Unified Metrics',\n\t\ticon: 'mdi:chart-donut',\n\t\tdescription: 'Comprehensive system performance and security metrics',\n\t\tdefaultSize: { w: 2, h: 3 }\n\t};\n</script>\n\n<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport { logger } from '@shared/utils/logger';\n\timport BaseWidget from '../BaseWidget.svelte';\n\timport type { WidgetSize } from '@cms-types';\n\n\tconst {\n\t\tlabel = 'System Metrics',\n\t\ttheme = 'light',\n\t\ticon = 'mdi:chart-donut',\n\t\twidgetId = undefined,\n\t\tsize = { w: 2, h: 3 } as WidgetSize,\n\t\tshowDetails = true,\n\t\tautoRefresh = true,\n\t\trefreshInterval = 3000,\n\t\tonSizeChange = (_newSize: WidgetSize) => {},\n\t\tonRemove = () => {}\n\t}: {\n\t\tlabel?: string;\n\t\ttheme?: 'light' | 'dark';\n\t\ticon?: string;\n\t\twidgetId?: string;\n\t\tsize?: WidgetSize;\n\t\tshowDetails?: boolean;\n\t\tautoRefresh?: boolean;\n\t\trefreshInterval?: number;\n\t\tonSizeChange?: (newSize: WidgetSize) => void;\n\t\tonRemove?: () => void;\n\t} = $props();\n\n\t// Unified metrics interface (matches MetricsService output)\n\tinterface UnifiedMetrics {\n\t\ttimestamp: number;\n\t\tuptime: number;\n\t\trequests: {\n\t\t\ttotal: number;\n\t\t\terrors: number;\n\t\t\terrorRate: number;\n\t\t\tavgResponseTime: number;\n\t\t};\n\t\tauthentication: {\n\t\t\tvalidations: number;\n\t\t\tfailures: number;\n\t\t\tsuccessRate: number;\n\t\t\tcacheHits: number;\n\t\t\tcacheMisses: number;\n\t\t\tcacheHitRate: number;\n\t\t};\n\t\tapi: {\n\t\t\trequests: number;\n\t\t\terrors: number;\n\t\t\tcacheHits: number;\n\t\t\tcacheMisses: number;\n\t\t\tcacheHitRate: number;\n\t\t};\n\t\tsecurity: {\n\t\t\trateLimitViolations: number;\n\t\t\tcspViolations: number;\n\t\t\tauthFailures: number;\n\t\t};\n\t\tperformance: {\n\t\t\tslowRequests: number;\n\t\t\tavgHookExecutionTime: number;\n\t\t\tbottlenecks: string[];\n\t\t};\n\t}\n\n\t// Reactive state\n\tlet metrics = $state({\n\t\ttimestamp: 0,\n\t\tuptime: 0,\n\t\trequests: { total: 0, errors: 0, errorRate: 0, avgResponseTime: 0 },\n\t\tauthentication: { validations: 0, failures: 0, successRate: 0, cacheHits: 0, cacheMisses: 0, cacheHitRate: 0 },\n\t\tapi: { requests: 0, errors: 0, cacheHits: 0, cacheMisses: 0, cacheHitRate: 0 },\n\t\tsecurity: { rateLimitViolations: 0, cspViolations: 0, authFailures: 0 },\n\t\tperformance: { slowRequests: 0, avgHookExecutionTime: 0, bottlenecks: [] }\n\t});\n\n\tlet isLoading = $state(true);\n\tlet error: string | null = $state(null);\n\tlet refreshTimer: ReturnType<typeof setInterval> | null = null;\n\tlet lastUpdate = $state(0);\n\n\t// Computed performance indicators - using $derived correctly\n\tconst overallHealth = $derived(calculateOverallHealth(metrics));\n\tconst healthColor = $derived(getHealthColor(overallHealth));\n\tconst healthIcon = $derived(getHealthIcon(overallHealth));\n\tconst primaryMetrics = $derived(getPrimaryMetrics(metrics));\n\n\tfunction calculateOverallHealth(m: UnifiedMetrics): 'excellent' | 'good' | 'fair' | 'poor' | 'critical' {\n\t\tconst factors = {\n\t\t\terrorRate: m.requests.errorRate,\n\t\t\tresponseTime: m.requests.avgResponseTime,\n\t\t\tauthSuccessRate: m.authentication.successRate,\n\t\t\tcacheHitRate: (m.authentication.cacheHitRate + m.api.cacheHitRate) / 2,\n\t\t\tsecurityViolations: m.security.rateLimitViolations + m.security.cspViolations,\n\t\t\tslowRequests: m.performance.slowRequests\n\t\t};\n\n\t\t// Critical indicators\n\t\tif (factors.errorRate > 10 || factors.responseTime > 5000 || factors.authSuccessRate < 80) {\n\t\t\treturn 'critical';\n\t\t}\n\n\t\t// Poor performance indicators\n\t\tif (factors.errorRate > 5 || factors.responseTime > 2000 || factors.authSuccessRate < 90 || factors.securityViolations > 50) {\n\t\t\treturn 'poor';\n\t\t}\n\n\t\t// Fair performance indicators\n\t\tif (factors.errorRate > 2 || factors.responseTime > 1000 || factors.cacheHitRate < 70 || factors.securityViolations > 20) {\n\t\t\treturn 'fair';\n\t\t}\n\n\t\t// Good performance indicators\n\t\tif (factors.errorRate > 1 || factors.responseTime > 500 || factors.cacheHitRate < 85) {\n\t\t\treturn 'good';\n\t\t}\n\n\t\treturn 'excellent';\n\t}\n\n\tfunction getHealthColor(health: string): string {\n\t\tswitch (health) {\n\t\t\tcase 'excellent':\n\t\t\t\treturn 'text-green-600';\n\t\t\tcase 'good':\n\t\t\t\treturn 'text-green-500';\n\t\t\tcase 'fair':\n\t\t\t\treturn 'text-yellow-500';\n\t\t\tcase 'poor':\n\t\t\t\treturn 'text-orange-500';\n\t\t\tcase 'critical':\n\t\t\t\treturn 'text-red-600 animate-pulse';\n\t\t\tdefault:\n\t\t\t\treturn 'text-gray-500';\n\t\t}\n\t}\n\n\tfunction getHealthIcon(health: string): string {\n\t\tswitch (health) {\n\t\t\tcase 'excellent':\n\t\t\t\treturn 'mdi:heart-pulse';\n\t\t\tcase 'good':\n\t\t\t\treturn 'mdi:heart';\n\t\t\tcase 'fair':\n\t\t\t\treturn 'mdi:heart-half';\n\t\t\tcase 'poor':\n\t\t\t\treturn 'mdi:heart-broken';\n\t\t\tcase 'critical':\n\t\t\t\treturn 'mdi:heart-off';\n\t\t\tdefault:\n\t\t\t\treturn 'mdi:heart-outline';\n\t\t}\n\t}\n\n\tfunction getPrimaryMetrics(m: UnifiedMetrics) {\n\t\treturn {\n\t\t\tresponseTime: {\n\t\t\t\tvalue: m.requests.avgResponseTime,\n\t\t\t\tformatted: `${m.requests.avgResponseTime.toFixed(0)}ms`,\n\t\t\t\tstatus: m.requests.avgResponseTime < 500 ? 'good' : m.requests.avgResponseTime < 1000 ? 'fair' : 'poor'\n\t\t\t},\n\t\t\terrorRate: {\n\t\t\t\tvalue: m.requests.errorRate,\n\t\t\t\tformatted: `${m.requests.errorRate.toFixed(2)}%`,\n\t\t\t\tstatus: m.requests.errorRate < 1 ? 'good' : m.requests.errorRate < 5 ? 'fair' : 'poor'\n\t\t\t},\n\t\t\tauthSuccess: {\n\t\t\t\tvalue: m.authentication.successRate,\n\t\t\t\tformatted: `${m.authentication.successRate.toFixed(1)}%`,\n\t\t\t\tstatus: m.authentication.successRate > 95 ? 'good' : m.authentication.successRate > 90 ? 'fair' : 'poor'\n\t\t\t},\n\t\t\tcacheEfficiency: {\n\t\t\t\tvalue: (m.authentication.cacheHitRate + m.api.cacheHitRate) / 2,\n\t\t\t\tformatted: `${((m.authentication.cacheHitRate + m.api.cacheHitRate) / 2).toFixed(1)}%`,\n\t\t\t\tstatus: (m.authentication.cacheHitRate + m.api.cacheHitRate) / 2 > 80 ? 'good' : 'fair'\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction getMetricColor(status: string): string {\n\t\tswitch (status) {\n\t\t\tcase 'good':\n\t\t\t\treturn 'text-green-600';\n\t\t\tcase 'fair':\n\t\t\t\treturn 'text-yellow-600';\n\t\t\tcase 'poor':\n\t\t\t\treturn 'text-red-600';\n\t\t\tdefault:\n\t\t\t\treturn 'text-gray-600';\n\t\t}\n\t}\n\n\t// Data fetching\n\tasync function fetchMetrics(): Promise<void> {\n\t\ttry {\n\t\t\tisLoading = true;\n\t\t\terror = null;\n\n\t\t\tconst response = await fetch('/api/metrics/unified');\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`Metrics fetch failed: ${response.status}`);\n\t\t\t}\n\n\t\t\tconst data = await response.json();\n\t\t\tmetrics = data;\n\t\t\tlastUpdate = Date.now();\n\t\t} catch (err) {\n\t\t\terror = err instanceof Error ? err.message : 'Failed to fetch metrics';\n\t\t\tlogger.error('Unified metrics fetch error:', err);\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\t// Utility functions\n\tfunction formatUptime(ms: number): string {\n\t\tconst seconds = Math.floor(ms / 1000);\n\t\tconst minutes = Math.floor(seconds / 60);\n\t\tconst hours = Math.floor(minutes / 60);\n\t\tconst days = Math.floor(hours / 24);\n\n\t\tif (days > 0) return `${days}d ${hours % 24}h`;\n\t\tif (hours > 0) return `${hours}h ${minutes % 60}m`;\n\t\tif (minutes > 0) return `${minutes}m ${seconds % 60}s`;\n\t\treturn `${seconds}s`;\n\t}\n\n\tfunction formatNumber(num: number): string {\n\t\tif (num >= 1000000) return `${(num / 1000000).toFixed(1)}M`;\n\t\tif (num >= 1000) return `${(num / 1000).toFixed(1)}K`;\n\t\treturn num.toString();\n\t}\n\n\tfunction formatLastUpdate(): string {\n\t\tif (!lastUpdate) return 'Never';\n\t\tconst ago = Math.floor((Date.now() - lastUpdate) / 1000);\n\t\tif (ago < 60) return `${ago}s ago`;\n\t\treturn `${Math.floor(ago / 60)}m ago`;\n\t}\n\n\t// Lifecycle\n\tonMount(() => {\n\t\tfetchMetrics();\n\n\t\tif (autoRefresh) {\n\t\t\trefreshTimer = setInterval(fetchMetrics, refreshInterval);\n\t\t}\n\t});\n\n\tonDestroy(() => {\n\t\tif (refreshTimer) {\n\t\t\tclearInterval(refreshTimer);\n\t\t}\n\t});\n</script>\n\n<BaseWidget {label} {theme} {icon} {widgetId} {size} {onSizeChange} onCloseRequest={onRemove} {isLoading} {error}>\n\t<div class=\"flex h-full flex-col space-y-3 p-2\">\n\t\t<!-- Health Status Header -->\n\t\t<div class=\"flex items-center justify-between\">\n\t\t\t<div class=\"flex items-center space-x-2\">\n\t\t\t\t<iconify-icon icon={healthIcon} class=\"text-xl {healthColor}\"></iconify-icon>\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"font-semibold capitalize\">{overallHealth}</h3>\n\t\t\t\t\t<p class=\"text-xs text-gray-500\">System Health</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"text-right\">\n\t\t\t\t<div class=\"text-xs text-gray-500\">Uptime</div>\n\t\t\t\t<div class=\"font-mono text-sm\">{formatUptime(metrics.uptime)}</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Primary Metrics Grid -->\n\t\t<div class=\"grid grid-cols-2 gap-2\">\n\t\t\t<div class=\"rounded bg-surface-100 p-2 dark:bg-surface-700\">\n\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">Response Time</div>\n\t\t\t\t<div class=\"font-bold {getMetricColor(primaryMetrics.responseTime.status)}\">\n\t\t\t\t\t{primaryMetrics.responseTime.formatted}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"rounded bg-surface-100 p-2 dark:bg-surface-700\">\n\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">Error Rate</div>\n\t\t\t\t<div class=\"font-bold {getMetricColor(primaryMetrics.errorRate.status)}\">\n\t\t\t\t\t{primaryMetrics.errorRate.formatted}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"rounded bg-surface-100 p-2 dark:bg-surface-700\">\n\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">Auth Success</div>\n\t\t\t\t<div class=\"font-bold {getMetricColor(primaryMetrics.authSuccess.status)}\">\n\t\t\t\t\t{primaryMetrics.authSuccess.formatted}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"rounded bg-surface-100 p-2 dark:bg-surface-700\">\n\t\t\t\t<div class=\"text-xs text-gray-600 dark:text-gray-400\">Cache Hit</div>\n\t\t\t\t<div class=\"font-bold {getMetricColor(primaryMetrics.cacheEfficiency.status)}\">\n\t\t\t\t\t{primaryMetrics.cacheEfficiency.formatted}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Detailed Metrics (if space allows) -->\n\t\t{#if showDetails && size.h >= 3}\n\t\t\t<div class=\"min-h-0 flex-1 space-y-2\">\n\t\t\t\t<!-- Request Statistics -->\n\t\t\t\t<div class=\"border-t pt-2\">\n\t\t\t\t\t<h5 class=\"mb-1 text-xs font-medium\">Request Statistics</h5>\n\t\t\t\t\t<div class=\"grid grid-cols-3 gap-1 text-xs\">\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono\">{formatNumber(metrics.requests.total)}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Total</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-red-600\">{formatNumber(metrics.requests.errors)}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Errors</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-yellow-600\">{formatNumber(metrics.performance.slowRequests)}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Slow</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Security Overview -->\n\t\t\t\t<div class=\"border-t pt-2\">\n\t\t\t\t\t<h5 class=\"mb-1 text-xs font-medium\">Security Events</h5>\n\t\t\t\t\t<div class=\"grid grid-cols-3 gap-1 text-xs\">\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-orange-600\">{metrics.security.rateLimitViolations}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Rate Limits</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-purple-600\">{metrics.security.cspViolations}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">CSP Violations</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"font-mono text-red-600\">{metrics.security.authFailures}</div>\n\t\t\t\t\t\t\t<div class=\"text-gray-500\">Auth Fails</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Performance Bottlenecks -->\n\t\t\t\t{#if metrics.performance.bottlenecks.length > 0}\n\t\t\t\t\t<div class=\"border-t pt-2\">\n\t\t\t\t\t\t<h5 class=\"mb-1 text-xs font-medium\">Performance Bottlenecks</h5>\n\t\t\t\t\t\t<div class=\"space-y-1\">\n\t\t\t\t\t\t\t{#each metrics.performance.bottlenecks.slice(0, 3) as bottleneck}\n\t\t\t\t\t\t\t\t<div class=\"rounded bg-yellow-100 px-1 py-0.5 text-xs dark:bg-yellow-900/20\">\n\t\t\t\t\t\t\t\t\t{bottleneck}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- Footer with last update -->\n\t\t<div class=\"border-t pt-1 text-center text-xs text-gray-500\">\n\t\t\tLast updated: {formatLastUpdate()}\n\t\t</div>\n\t</div>\n</BaseWidget>\n"],"names":["$$renderer","$.attr","$.attr_class","$.stringify","$.escape"],"mappings":"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"}