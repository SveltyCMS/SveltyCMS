{"version":3,"file":"modalUtils.js","sources":["../../../../../../shared/utils/src/modalState.svelte.ts","../../../../../../shared/components/src/system/ConfirmDialog.svelte","../../../../../../shared/utils/src/modalUtils.ts"],"sourcesContent":["/**\n * @file src/utils/modalState.svelte.ts\n * @description Modal state management\n *\n * ### Features\n * - Modal state management\n * - Modal component trigger\n * - Modal response handling\n *\n * ### Usage\n * <script>\n * \timport { modalState } from '$lib/utils/modalState';\n * </script>\n *\n * <ModalState />\n *\n * <button on:click={() => modalState.trigger(MyModal, { foo: 'bar' })}>Open Modal</button>\n *\n * <ModalState />\n *\n * ### Props\n * - component: Component to render\n * - props: Props to pass to the component\n * - response: Callback to handle response from the modal\n *\n * ### Events\n * - close: Emitted when the modal is closed\n */\n\nimport { type Component } from 'svelte';\n\nexport interface ModalStateItem {\n\tcomponent: Component;\n\tprops?: Record<string, any>;\n\tresponse?: (r: any) => void;\n}\n\nclass ModalState {\n\tactive = $state<ModalStateItem | null>(null);\n\n\tget isOpen() {\n\t\treturn this.active !== null;\n\t}\n\n\ttrigger(component: Component, props: Record<string, any> = {}, response?: (r: any) => void) {\n\t\tthis.active = { component, props, response };\n\t}\n\n\t// Updated close to handle value passing\n\tclose(value?: any) {\n\t\tif (this.active?.response && value !== undefined) {\n\t\t\tthis.active.response(value);\n\t\t}\n\t\tthis.active = null;\n\t}\n\n\tclear() {\n\t\tthis.active = null;\n\t}\n}\n\nexport const modalState = new ModalState();\n","<!--\n@file src/components/system/ConfirmDialog.svelte\n@component\n**ConfirmDialog**\n-->\n\n<script lang=\"ts\">\n\tinterface Props {\n\t\thtmlTitle?: string;\n\t\tbody?: string;\n\t\tbuttonTextConfirm?: string;\n\t\tbuttonTextCancel?: string;\n\t\tclose?: (result: boolean) => void;\n\t}\n\n\tconst { htmlTitle, body = 'Are you sure?', buttonTextConfirm = 'Confirm', buttonTextCancel = 'Cancel', close }: Props = $props();\n\n\tfunction onConfirm() {\n\t\tclose?.(true);\n\t}\n\n\tfunction onCancel() {\n\t\tclose?.(false);\n\t}\n</script>\n\n<div class=\"space-y-4\">\n\t{#if htmlTitle}\n\t\t<h3 class=\"h3 font-bold text-center\">{@html htmlTitle}</h3>\n\t{/if}\n\t{#if body}\n\t\t<p class=\"text-surface-600 dark:text-surface-300 text-center\">{@html body}</p>\n\t{/if}\n\n\t<div class=\"flex justify-between gap-4 pt-4\">\n\t\t{#if buttonTextCancel}\n\t\t\t<button class=\"btn hover:bg-surface-500/10 border border-surface-200 dark:text-surface-50\" onclick={onCancel}>\n\t\t\t\t{buttonTextCancel}\n\t\t\t</button>\n\t\t{/if}\n\t\t<button class=\"btn preset-filled-primary-500\" onclick={onConfirm}>\n\t\t\t{buttonTextConfirm}\n\t\t</button>\n\t</div>\n</div>\n","/**\n * @file src/utils/modalUtils.ts\n * @description Centralized utility functions for creating consistent modal configurations\n */\n\nimport { modalState } from '@shared/utils/modalState.svelte';\nimport * as m from '@shared/paraglide/messages';\n\n// Dialog Components\nimport ConfirmDialog from '@cms/components/system/ConfirmDialog.svelte';\nimport ScheduleModal from '@cms/components/collectionDisplay/ScheduleModal.svelte';\n\nexport interface ConfirmModalOptions {\n\ttitle: string;\n\tbody: string;\n\tconfirmText?: string;\n\t/** Alias for confirmText */\n\tbuttonTextConfirm?: string;\n\tcancelText?: string;\n\tonConfirm?: () => void | Promise<void>;\n\tonCancel?: () => void;\n}\n\n// Triggers a modal using the custom modalState\nexport function showModal(settings: any): void {\n\tconst comp = settings.component?.ref || settings.component;\n\tmodalState.trigger(comp, settings.props || settings.meta || {}, settings.response);\n}\n\n// Standardized confirmation modal\nexport function showConfirm(options: ConfirmModalOptions): void {\n\tmodalState.trigger(\n\t\tConfirmDialog,\n\t\t{\n\t\t\thtmlTitle: options.title,\n\t\t\tbody: options.body,\n\t\t\tbuttonTextConfirm: options.buttonTextConfirm || options.confirmText || m.button_confirm?.() || 'Confirm',\n\t\t\tbuttonTextCancel: options.cancelText || m.button_cancel?.() || 'Cancel'\n\t\t},\n\t\t(confirmed: boolean) => {\n\t\t\tif (confirmed) {\n\t\t\t\toptions.onConfirm?.();\n\t\t\t} else {\n\t\t\t\toptions.onCancel?.();\n\t\t\t}\n\t\t}\n\t);\n}\n\n// Delete confirmation modal\nexport function showDeleteConfirm(options: {\n\tisArchive?: boolean;\n\tcount?: number;\n\tonConfirm: () => void | Promise<void>;\n\tonCancel?: () => void;\n}): void {\n\tconst { isArchive = false, count = 1, onConfirm, onCancel } = options;\n\tconst action = isArchive ? 'Archive' : 'Delete';\n\n\tshowConfirm({\n\t\ttitle: `Confirm ${action}`,\n\t\tbody: `Are you sure you want to ${action.toLowerCase()} ${count} item(s)?`,\n\t\tconfirmText: action,\n\t\tonConfirm,\n\t\tonCancel\n\t});\n}\n\n// Status change confirmation\nexport function showStatusChangeConfirm(options: {\n\tstatus: string;\n\tcount?: number;\n\tonConfirm: () => void | Promise<void>;\n\tonCancel?: () => void;\n}): void {\n\tconst { status, count = 1, onConfirm, onCancel } = options;\n\tshowConfirm({\n\t\ttitle: 'Confirm Status Change',\n\t\tbody: `Are you sure you want to change ${count} item(s) to ${status}?`,\n\t\tconfirmText: 'Change Status',\n\t\tonConfirm,\n\t\tonCancel\n\t});\n}\n\n// Schedule modal\nexport function showScheduleModal(options: { initialAction?: string; onSchedule: (date: Date, action: string) => void | Promise<void> }): void {\n\tmodalState.trigger(ScheduleModal, { initialAction: options.initialAction }, (result: any) => {\n\t\tif (result?.confirmed && result.date) {\n\t\t\toptions.onSchedule(result.date, result.action || options.initialAction || 'publish');\n\t\t}\n\t});\n}\n\n// Clone confirmation\nexport function showCloneModal(options: { count?: number; onConfirm: () => void | Promise<void>; onCancel?: () => void }): void {\n\tconst { count = 1, onConfirm, onCancel } = options;\n\tshowConfirm({\n\t\ttitle: 'Clone Items',\n\t\tbody: `Are you sure you want to clone ${count} item(s)?`,\n\t\tconfirmText: 'Clone',\n\t\tonConfirm,\n\t\tonCancel\n\t});\n}\n"],"names":["m.button_confirm","m.button_cancel"],"mappings":";;;;AAqCM,MAAA,WAAW;AAAA,EAChB,SAAuC;AAAA,EAEnC,IAAA,SAAS;WACL,KAAK,WAAW;AAAA,EACxB;AAAA,EAEA,QAAQ,WAAsB,QAAA,CAAA,GAAiC,UAA6B;AAC3F,SAAK,SAAA,EAAW,WAAW,OAAO,SAAA;AAAA,EACnC;AAAA;AAAA,EAGA,MAAM,OAAa;QACd,KAAK,QAAQ,YAAY,UAAA,QAAqB;AACjD,WAAK,OAAO,SAAS,KAAK;AAAA,IAC3B;AACA,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,QAAQ;AACP,SAAK,SAAS;AAAA,EACf;AACD;AAEa,MAAA,iBAAiB,WAAA;;wCCvD9B;;MASS;AAAA,MAAW,OAAO;AAAA,MAAiB,oBAAoB;AAAA,MAAW,mBAAmB;AAAA,MAAU;AAAA;;QAYlG,WAAS;;oEAC+B,SAAS,CAAA,OAAA;AAAA;;;;QAEjD,MAAI;;6FAC6D,IAAI,CAAA,MAAA;AAAA;;;;QAIpE,kBAAgB;;iIAElB,gBAAgB,CAAA,WAAA;AAAA;;;2FAIjB,iBAAiB,CAAA,uBAAA;AAAA,EAjBb,CAAA;;ACAD,SAAS,UAAU,UAAqB;AAC9C,QAAM,OAAO,SAAS,WAAW,OAAO,SAAS;AACjD,aAAW,QAAQ,MAAM,SAAS,SAAS,SAAS,QAAQ,CAAA,GAAI,SAAS,QAAQ;AAClF;AAGO,SAAS,YAAY,SAAoC;AAC/D,aAAW;AAAA,IACV;AAAA,IACA;AAAA,MACC,WAAW,QAAQ;AAAA,MACnB,MAAM,QAAQ;AAAA,MACd,mBAAmB,QAAQ,qBAAqB,QAAQ,eAAeA,sBAAwB;AAAA,MAC/F,kBAAkB,QAAQ,cAAcC,qBAAuB;AAAA,IAAA;AAAA,IAEhE,CAAC,cAAuB;AACvB,UAAI,WAAW;AACd,gBAAQ,YAAA;AAAA,MACT,OAAO;AACN,gBAAQ,WAAA;AAAA,MACT;AAAA,IACD;AAAA,EAAA;AAEF;AAGO,SAAS,kBAAkB,SAKzB;AACR,QAAM,EAAE,YAAY,OAAO,QAAQ,GAAG,WAAW,aAAa;AAC9D,QAAM,SAAS,YAAY,YAAY;AAEvC,cAAY;AAAA,IACX,OAAO,WAAW,MAAM;AAAA,IACxB,MAAM,4BAA4B,OAAO,YAAA,CAAa,IAAI,KAAK;AAAA,IAC/D,aAAa;AAAA,IACb;AAAA,IACA;AAAA,EAAA,CACA;AACF;AAGO,SAAS,wBAAwB,SAK/B;AACR,QAAM,EAAE,QAAQ,QAAQ,GAAG,WAAW,aAAa;AACnD,cAAY;AAAA,IACX,OAAO;AAAA,IACP,MAAM,mCAAmC,KAAK,eAAe,MAAM;AAAA,IACnE,aAAa;AAAA,IACb;AAAA,IACA;AAAA,EAAA,CACA;AACF;"}