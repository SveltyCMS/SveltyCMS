{"version":3,"file":"PageTitle.js","sources":["../../../../../../shared/components/src/PageTitle.svelte"],"sourcesContent":["<!-- \n@file src/components/PageTitle.svelte \n@component\n**Dynamic Page Title with Accessibility and CMS Features**\n\n@example\n<PageTitle \n  name=\"Dashboard\" \n  icon=\"bi:bar-chart-line\" \n  highlight=\"Dash\" \n  iconColor=\"text-primary-500\" \n  iconSize=\"24\" \n  showBackButton={true}  \n  backUrl=\"/home\" \n  onBackClick={(defaultBehavior) => {\n    // Custom navigation logic\n    defaultBehavior();\n  }}\n/>\n\n#### Props - Required \n- `name` {string} - Page title\n- `icon` {string} - Icon name from [iconify](https://iconify.design/)\n\n#### Props - Optional \n- `highlight` {string} - Part of `name` to highlight\n- `iconColor` {string} - Icon color (default: `text-tertiary-500 dark:text-primary-500`)\n- `iconSize` {string} - Icon size (default: `32`)\n- `showBackButton` {boolean} - Show back button (default: `false`)\n- `backUrl` {string} - Navigation URL for back button\n- `truncate` {boolean} - Enable title truncation (default: `true`)\n- `onBackClick` {function} - Custom back navigation callback\n- `color` {string} - Background/text color (default: `blue`)\n\n#### Accessibility Features:\n- ARIA live region for title changes\n- Keyboard navigation support\n- Screen reader optimization with visually hidden full title\n- Contrast validation for highlighted text\n- Responsive touch targets\n\n#### CMS Features:\n- Data attributes for CMS field mapping\n- Content editor hints\n- Fluid typography scaling\n-->\n<script lang=\"ts\">\n\t// Stores\n\timport { ui } from '@shared/stores/UIStore.svelte';\n\timport { screen } from '@shared/stores/screenSizeStore.svelte';\n\n\ttype DefaultBehaviorFn = () => void;\n\n\t// Props\n\tinterface Props {\n\t\tname: string;\n\t\thighlight?: string;\n\t\ticon?: string;\n\t\ticonColor?: string;\n\t\ticonSize?: string;\n\t\tshowBackButton?: boolean;\n\t\tbackUrl?: string;\n\t\ttruncate?: boolean;\n\t\tonBackClick?: (defaultBehavior: DefaultBehaviorFn) => void;\n\t\tchildren?: import('svelte').Snippet; // For action buttons\n\t}\n\n\tconst {\n\t\tname,\n\t\thighlight = '',\n\t\ticon,\n\t\ticonColor = 'text-tertiary-500 dark:text-primary-500',\n\t\ticonSize = '32',\n\t\tshowBackButton = false,\n\t\tbackUrl = '',\n\t\ttruncate = true,\n\t\tonBackClick,\n\t\tchildren\n\t}: Props = $props();\n\n\tconst titleParts = $derived(() => {\n\t\tif (highlight && name.toLowerCase().includes(highlight.toLowerCase())) {\n\t\t\tconst regex = new RegExp(`(${highlight})`, 'gi');\n\t\t\treturn name.split(regex);\n\t\t}\n\t\treturn [name];\n\t});\n\n\tfunction handleBackClick(event: Event) {\n\t\tconst defaultBehavior: DefaultBehaviorFn = () => {\n\t\t\tif (!backUrl) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\twindow.history.back();\n\t\t\t}\n\t\t\t// If backUrl exists, let the link handle navigation naturally\n\t\t};\n\n\t\tif (onBackClick) {\n\t\t\tevent.preventDefault();\n\t\t\tonBackClick(defaultBehavior);\n\t\t} else if (!backUrl) {\n\t\t\t// No backUrl provided, use browser history\n\t\t\tevent.preventDefault();\n\t\t\twindow.history.back();\n\t\t}\n\t\t// Otherwise, let the <a> tag handle navigation with preloading\n\t}\n</script>\n\n<div class=\"my-1.5 flex w-full min-w-0 items-center justify-between gap-4\">\n\t<div class=\"flex min-w-0 items-center\">\n\t\t{#if ui.state.leftSidebar === 'hidden'}\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonclick={() => ui.toggle('leftSidebar', screen.isDesktop ? 'full' : 'collapsed')}\n\t\t\t\taria-label=\"Open Sidebar\"\n\t\t\t\tclass=\"preset-outlined-surface-500btn-icon\"\n\t\t\t>\n\t\t\t\t<iconify-icon icon=\"mingcute:menu-fill\" width=\"24\"></iconify-icon>\n\t\t\t</button>\n\t\t{/if}\n\t\t<h1\n\t\t\tclass=\"transition-max-width h1 relative ml-2 flex items-center gap-1 font-bold\"\n\t\t\tstyle=\"font-size: clamp(1.5rem, 3vw + 1rem, 2.25rem);\"\n\t\t\taria-live=\"polite\"\n\t\t\tdata-cms-field=\"pageTitle\"\n\t\t\tdata-cms-type=\"text\"\n\t\t>\n\t\t\t{#if icon}\n\t\t\t\t<iconify-icon {icon} width={iconSize} class={`mr-1 shrink-0 ${iconColor} sm:mr-2`} aria-hidden=\"true\"></iconify-icon>\n\t\t\t{/if}\n\n\t\t\t<span class:block={truncate} class:overflow-hidden={truncate} class:text-ellipsis={truncate} class:whitespace-nowrap={truncate}>\n\t\t\t\t{#each titleParts() as part, i (i)}\n\t\t\t\t\t<span class={i % 2 === 1 ? 'font-semibold text-tertiary-500 dark:text-primary-500' : ''}>\n\t\t\t\t\t\t{part}\n\t\t\t\t\t</span>\n\t\t\t\t{/each}\n\t\t\t</span>\n\n\t\t\t<span class=\"sr-only absolute inset-0 overflow-hidden whitespace-normal\">\n\t\t\t\t{name}\n\t\t\t</span>\n\t\t</h1>\n\t</div>\n\n\t<div class=\"flex items-center gap-2\">\n\t\t<!-- Action Buttons -->\n\t\t{#if children}\n\t\t\t{@render children()}\n\t\t{/if}\n\n\t\t{#if showBackButton}\n\t\t\t{#if backUrl}\n\t\t\t\t<a\n\t\t\t\t\thref={backUrl}\n\t\t\t\t\taria-label=\"Go back\"\n\t\t\t\t\tclass=\"btn-icon rounded-full border border-surface-500 dark:border-surface-200 hover:bg-surface-500/10 shrink-0\"\n\t\t\t\t\tdata-cms-action=\"back\"\n\t\t\t\t\tdata-sveltekit-preload-data=\"hover\"\n\t\t\t\t\tonclick={(e) => handleBackClick(e)}\n\t\t\t\t>\n\t\t\t\t\t<iconify-icon icon=\"ri:arrow-left-line\" width=\"24\" aria-hidden=\"true\"></iconify-icon>\n\t\t\t\t</a>\n\t\t\t{:else}\n\t\t\t\t<button\n\t\t\t\t\tonclick={(e) => handleBackClick(e)}\n\t\t\t\t\taria-label=\"Go back\"\n\t\t\t\t\ttabindex=\"0\"\n\t\t\t\t\tclass=\"btn-icon rounded-full border border-surface-500 dark:border-surface-200 hover:bg-surface-500/10 shrink-0\"\n\t\t\t\t\tdata-cms-action=\"back\"\n\t\t\t\t>\n\t\t\t\t\t<iconify-icon icon=\"ri:arrow-left-line\" width=\"24\" aria-hidden=\"true\"></iconify-icon>\n\t\t\t\t</button>\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n</div>\n"],"names":["$.attr","$.attr_class","$$renderer"],"mappings":";;;;wCA8CA;;MAsBE;AAAA,MACA,YAAY;AAAA,MACZ;AAAA,MACA,YAAY;AAAA,MACZ,WAAW;AAAA,MACX,iBAAiB;AAAA,MACjB,UAAU;AAAA,MACV,WAAW;AAAA,MACX;AAAA,MACA;AAAA;AAGK,UAAA,aAAU,MAAkB;UAC7B,aAAa,KAAK,YAAW,EAAG,SAAS,UAAU,YAAW,CAAA,GAAK;AAChE,cAAA,QAAK,IAAO,OAAM,IAAK,SAAS,KAAK,IAAI;eACxC,KAAK,MAAM,KAAK;AAAA,MACxB;cACQ,IAAI;AAAA,IACb;;AAyBM,QAAA,GAAG,MAAM,gBAAgB,UAAQ;;;;;;;QAiBhC,MAAI;;oDACO,IAAI,CAAA,GAAAA,KAAA,SAAS,QAAQ,CAAA,GAAAC,WAAA,iBAA0B,SAAS,UAAA,CAAA,qCAAA;AAAA;;;;eAGrD;AAAA,yBAAiC;AAAA,uBAA+B;AAAA,2BAAmC;AAAA;yCAC9G,YAAU;;UAAM,OAAI,WAAA,CAAA;+CACb,IAAI,MAAM,IAAI,0DAA0D,EAAE,kBACrF,IAAI,CAAA,SAAA;AAAA;6HAMN,IAAI,CAAA,0DAAA;QAOF,UAAQ;;AACH,eAAQC,WAAA;;;;;;QAGb,gBAAc;;UACb,SAAO;;2CAEJ,OAAO,CAAA,6RAAA;AAAA;;;;;;;;;EAhDV,CAAA;;"}