{"version":3,"file":"screenSizeStore.svelte.js","sources":["../../../../../../shared/utils/src/screenSize.ts","../../../../../../shared/stores/src/screenSizeStore.svelte.ts"],"sourcesContent":["/**\n * @file src/utils/screenSize.ts\n * @description Screen size utilities - breakpoints and size detection\n *\n * This file contains pure functions and enums for screen size detection,\n * separated from the reactive Svelte store for better testability.\n */\n\n// Enum for screen sizes (matches Tailwind CSS breakpoints)\nexport enum ScreenSize {\n\tXS = 'XS',\n\tSM = 'SM',\n\tMD = 'MD',\n\tLG = 'LG',\n\tXL = 'XL',\n\tXXL = '2XL'\n}\n\n// Screen size breakpoints matching Tailwind CSS\nexport const BREAKPOINTS = {\n\t[ScreenSize.XS]: 0,\n\t[ScreenSize.SM]: 640,\n\t[ScreenSize.MD]: 768,\n\t[ScreenSize.LG]: 1024,\n\t[ScreenSize.XL]: 1280,\n\t[ScreenSize.XXL]: 1536\n} as const;\n\n/**\n * Helper function to calculate screen size from width\n * @param width - The screen width in pixels\n * @returns The corresponding ScreenSize enum value\n */\nexport function getScreenSize(width: number): ScreenSize {\n\tif (width < BREAKPOINTS[ScreenSize.SM]) return ScreenSize.XS;\n\tif (width < BREAKPOINTS[ScreenSize.MD]) return ScreenSize.SM;\n\tif (width < BREAKPOINTS[ScreenSize.LG]) return ScreenSize.MD;\n\tif (width < BREAKPOINTS[ScreenSize.XL]) return ScreenSize.LG;\n\tif (width < BREAKPOINTS[ScreenSize.XXL]) return ScreenSize.XL;\n\treturn ScreenSize.XXL;\n}\n","/**\n * @file src/stores/screenSizeStore.svelte.ts\n * @description Reactive screen size tracking using Svelte 5 runes\n *\n * Features:\n * - Class-based singleton with $state properties\n * - matchMedia for efficient breakpoint detection\n * - requestAnimationFrame for smooth resize updates\n * - prefers-reduced-motion accessibility support\n */\n\n// Import for internal use\nimport { ScreenSize, BREAKPOINTS, getScreenSize } from '@shared/utils/screenSize';\n\n// Re-export utilities for backwards compatibility\nexport { ScreenSize, BREAKPOINTS, getScreenSize };\n\n/**\n * ScreenSizeStore - Reactive screen size management\n *\n * Usage:\n * - screen.size - Current ScreenSize enum value\n * - screen.width / screen.height - Current dimensions\n * - screen.isMobile / screen.isTablet / screen.isDesktop - Boolean helpers\n * - screen.prefersReducedMotion - Accessibility preference\n */\nclass ScreenSizeStore {\n\t// Core reactive state\n\twidth = $state(typeof window !== 'undefined' ? window.innerWidth : 1024);\n\theight = $state(typeof window !== 'undefined' ? window.innerHeight : 768);\n\n\t// Accessibility: detect reduced motion preference\n\tprefersReducedMotion = $state(typeof window !== 'undefined' ? window.matchMedia('(prefers-reduced-motion: reduce)').matches : false);\n\n\t// Computed screen size\n\tget size(): ScreenSize {\n\t\treturn getScreenSize(this.width);\n\t}\n\n\t// Convenience getters for common checks\n\tget isMobile(): boolean {\n\t\treturn this.size === ScreenSize.XS || this.size === ScreenSize.SM;\n\t}\n\n\tget isTablet(): boolean {\n\t\treturn this.size === ScreenSize.MD;\n\t}\n\n\tget isDesktop(): boolean {\n\t\tconst s = this.size;\n\t\treturn s === ScreenSize.LG || s === ScreenSize.XL || s === ScreenSize.XXL;\n\t}\n\n\tget isLargeScreen(): boolean {\n\t\treturn this.size === ScreenSize.XL || this.size === ScreenSize.XXL;\n\t}\n\n\t// Internal state\n\tprivate rafId: number | null = null;\n\tprivate cleanup?: () => void;\n\n\tconstructor() {\n\t\tif (typeof window === 'undefined') return;\n\n\t\tconst update = () => {\n\t\t\tthis.width = window.innerWidth;\n\t\t\tthis.height = window.innerHeight;\n\t\t\tthis.rafId = null;\n\t\t};\n\n\t\tconst handleResize = () => {\n\t\t\tif (this.rafId) cancelAnimationFrame(this.rafId);\n\t\t\tthis.rafId = requestAnimationFrame(update);\n\t\t};\n\n\t\t// Listen for reduced motion preference changes\n\t\tconst motionQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n\t\tconst handleMotionChange = (e: MediaQueryListEvent) => {\n\t\t\tthis.prefersReducedMotion = e.matches;\n\t\t};\n\n\t\t// Set up listeners\n\t\twindow.addEventListener('resize', handleResize);\n\t\tmotionQuery.addEventListener('change', handleMotionChange);\n\t\tupdate();\n\n\t\t// Store cleanup for disposal\n\t\tthis.cleanup = () => {\n\t\t\tif (this.rafId) cancelAnimationFrame(this.rafId);\n\t\t\twindow.removeEventListener('resize', handleResize);\n\t\t\tmotionQuery.removeEventListener('change', handleMotionChange);\n\t\t};\n\t}\n\n\t// Manual cleanup method\n\tdestroy() {\n\t\tthis.cleanup?.();\n\t}\n}\n\n// Singleton instance - the main export\nexport const screen = new ScreenSizeStore();\n"],"names":["ScreenSize"],"mappings":";AASO,IAAK,+BAAAA,gBAAL;AACNA,cAAA,IAAA,IAAK;AACLA,cAAA,IAAA,IAAK;AACLA,cAAA,IAAA,IAAK;AACLA,cAAA,IAAA,IAAK;AACLA,cAAA,IAAA,IAAK;AACLA,cAAA,KAAA,IAAM;AANK,SAAAA;AAAA,GAAA,cAAA,CAAA,CAAA;AAUL,MAAM,cAAc;AAAA,EAE1B;AAAA,IAAC;AAAA;AAAA,KAAgB;AAAA,EACjB;AAAA,IAAC;AAAA;AAAA,KAAgB;AAAA,EACjB;AAAA,IAAC;AAAA;AAAA,KAAgB;AAAA,EACjB;AAAA,IAAC;AAAA;AAAA,KAAgB;AAAA,EACjB;AAAA,IAAC;AAAA;AAAA,KAAiB;AACnB;AAOO,SAAS,cAAc,OAA2B;AACxD,MAAI,QAAQ;AAAA,IAAY;AAAA;AAAA,EAAA,EAAgB,QAAO;AAC/C,MAAI,QAAQ;AAAA,IAAY;AAAA;AAAA,EAAA,EAAgB,QAAO;AAC/C,MAAI,QAAQ;AAAA,IAAY;AAAA;AAAA,EAAA,EAAgB,QAAO;AAC/C,MAAI,QAAQ;AAAA,IAAY;AAAA;AAAA,EAAA,EAAgB,QAAO;AAC/C,MAAI,QAAQ;AAAA,IAAY;AAAA;AAAA,EAAA,EAAiB,QAAO;AAChD,SAAO;AACR;ACdM,MAAA,gBAAgB;AAAA;AAAA,EAErB,eAAsB,WAAW,cAAc,OAAO,aAAa;AAAA,EACnE,gBAAuB,WAAW,cAAc,OAAO,cAAc;AAAA;AAAA,EAGrE,uBAAA,OAAqC,WAAW,cAAc,OAAO,WAAW,kCAAkC,EAAE,UAAU;AAAA;AAAA,EAG1H,IAAA,OAAmB;WACf,cAAc,KAAK,KAAK;AAAA,EAChC;AAAA;AAAA,EAGI,IAAA,WAAoB;AAChB,WAAA,KAAK,SAAS,WAAW,MAAM,KAAK,SAAS,WAAW;AAAA,EAChE;AAAA,EAEI,IAAA,WAAoB;AAChB,WAAA,KAAK,SAAS,WAAW;AAAA,EACjC;AAAA,EAEI,IAAA,YAAqB;UAClB,IAAI,KAAK;AACR,WAAA,MAAM,WAAW,MAAM,MAAM,WAAW,MAAM,MAAM,WAAW;AAAA,EACvE;AAAA,EAEI,IAAA,gBAAyB;AACrB,WAAA,KAAK,SAAS,WAAW,MAAM,KAAK,SAAS,WAAW;AAAA,EAChE;AAAA;AAAA,EAGQ,QAAuB;AAAA,EACvB;AAAA,EAER,cAAc;AACF,QAAA,OAAA,WAAW,YAAA;AAEhB,UAAA,eAAe;AACpB,WAAK,QAAQ,OAAO;AACpB,WAAK,SAAS,OAAO;AACrB,WAAK,QAAQ;AAAA,IACd;AAEM,UAAA,qBAAqB;AACtB,UAAA,KAAK,MAAO,sBAAqB,KAAK,KAAK;AAC/C,WAAK,QAAQ,sBAAsB,MAAM;AAAA,IAC1C;AAGM,UAAA,cAAc,OAAO,WAAW,kCAAkC;UAClE,qBAAA,CAAsB,MAA2B;AACtD,WAAK,uBAAuB,EAAE;AAAA,IAC/B;AAGA,WAAO,iBAAiB,UAAU,YAAY;AAC9C,gBAAY,iBAAiB,UAAU,kBAAkB;AACzD,WAAA;AAGA,SAAK,gBAAgB;AAChB,UAAA,KAAK,MAAO,sBAAqB,KAAK,KAAK;AAC/C,aAAO,oBAAoB,UAAU,YAAY;AACjD,kBAAY,oBAAoB,UAAU,kBAAkB;AAAA,IAC7D;AAAA,EACD;AAAA;AAAA,EAGA,UAAU;AACT,SAAK,UAAA;AAAA,EACN;AACD;AAGa,MAAA,aAAa,gBAAA;"}