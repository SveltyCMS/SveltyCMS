{"version":3,"file":"_server.ts.js","sources":["../../../../../../../../src/routes/api/website-tokens/[id]/+server.ts"],"sourcesContent":["import { error } from '@sveltejs/kit';\nimport { dbAdapter } from '@shared/database/db';\nimport { logger } from '@shared/utils/logger.server';\nimport type { DatabaseId } from '@shared/database/dbInterface';\n\nexport async function DELETE({ locals, params }) {\n\tif (!locals.user) {\n\t\tthrow error(401, 'Unauthorized');\n\t}\n\n\tif (!dbAdapter) {\n\t\tthrow error(500, 'Database not available');\n\t}\n\n\tconst { id } = params;\n\n\tif (!id) {\n\t\tthrow error(400, 'Token ID is required');\n\t}\n\n\tconst result = await dbAdapter.websiteTokens.delete(id as DatabaseId);\n\n\tif (!result.success) {\n\t\tlogger.error(`Failed to delete website token ${id}:`, result.error);\n\t\tthrow error(500, 'Failed to delete website token');\n\t}\n\n\treturn new Response(null, { status: 204 });\n}\n"],"names":[],"mappings":";;;AAKA,eAAsB,OAAO,EAAE,QAAQ,UAAU;AAChD,MAAI,CAAC,OAAO,MAAM;AACjB,UAAM,MAAM,KAAK,cAAc;AAAA,EAChC;AAEA,MAAI,CAAC,WAAW;AACf,UAAM,MAAM,KAAK,wBAAwB;AAAA,EAC1C;AAEA,QAAM,EAAE,OAAO;AAEf,MAAI,CAAC,IAAI;AACR,UAAM,MAAM,KAAK,sBAAsB;AAAA,EACxC;AAEA,QAAM,SAAS,MAAM,UAAU,cAAc,OAAO,EAAgB;AAEpE,MAAI,CAAC,OAAO,SAAS;AACpB,WAAO,MAAM,kCAAkC,EAAE,KAAK,OAAO,KAAK;AAClE,UAAM,MAAM,KAAK,gCAAgC;AAAA,EAClD;AAEA,SAAO,IAAI,SAAS,MAAM,EAAE,QAAQ,KAAK;AAC1C;"}