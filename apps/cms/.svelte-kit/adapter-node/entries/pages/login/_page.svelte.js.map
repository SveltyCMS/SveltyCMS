{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../shared/components/src/VersionCheck.svelte","../../../../../../../../node_modules/.bun/svelte-confetti@2.3.2+796414adea99c8c6/node_modules/svelte-confetti/dist/Confetti.svelte","../../../../../../../../shared/components/src/system/icons/Seasons.svelte","../../../../../../../../shared/utils/src/Form.svelte.ts","../../../../../../src/routes/login/components/icons/SigninIcon.svelte","../../../../../../../../shared/components/src/PasswordStrength.svelte","../../../../../../../../shared/components/src/system/FloatingPaths.svelte","../../../../../../src/routes/login/components/OauthLogin.svelte","../../../../../../src/routes/login/components/SignIn.svelte","../../../../../../src/routes/login/components/icons/SignupIcon.svelte","../../../../../../src/routes/login/components/SignUp.svelte","../../../../../../src/routes/login/+page.svelte"],"sourcesContent":["<!--\n@file src/components/VersionCheck.svelte\n@component **VersionCheck - Enhanced Svelte 5**\n\nA dynamic component that compares the running application's version against the\nlatest version available on GitHub with comprehensive status reporting.\n\n@props\n- `transparent` (boolean): Renders a minimal semi-transparent overlay (default: false)\n- `compact` (boolean): Shows just version number (default: false)\n- `onStatusChange` (function): Callback that receives version status object\n- `children` (Snippet): Custom rendering function for headless mode\n\n### Features\n- Fetches latest version from GitHub with caching\n- Semantic version comparison (major, minor, patch)\n- Security vulnerability detection\n- Visual states: critical (red), update (yellow), current (green)\n- Headless/renderless mode with Svelte 5 snippets\n- Accessible with proper ARIA attributes\n- Error handling with retry logic\n- Reduced motion support\n-->\n<script lang=\"ts\">\n\timport { onMount, onDestroy } from 'svelte';\n\timport { publicEnv } from '@shared/stores/globalSettings.svelte';\n\timport { browser } from '$app/environment';\n\n\t// Types\n\ttype VersionStatus = {\n\t\tpkg: string;\n\t\tgithubVersion: string;\n\t\tbadgeVariant: 'variant-filled' | 'variant-soft' | 'variant-outline' | 'variant-glass';\n\t\tbadgeColor: string;\n\t\tversionStatusMessage: string;\n\t\tstatusIcon: string;\n\t\tstatusSeverity: 'critical' | 'warning' | 'info' | 'success' | 'unknown';\n\t\tisLoading: boolean;\n\t\terror: string | null;\n\t\tlastChecked: number | null;\n\t};\n\n\ttype VersionProps = {\n\t\ttransparent?: boolean;\n\t\tcompact?: boolean;\n\t\tonStatusChange?: (status: VersionStatus) => void;\n\t\tchildren?: import('svelte').Snippet<[VersionStatus]>;\n\t};\n\n\tconst { transparent = false, compact = false, onStatusChange, children }: VersionProps = $props();\n\n\t// Constants\n\tconst GITHUB_RELEASES_URL = 'https://github.com/SveltyCMS/SveltyCMS/releases';\n\tconst CHECK_INTERVAL = 1000 * 60 * 60; // 1 hour\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 2000;\n\n\t// State - use publicEnv directly instead of page.data\n\tconst pkg = $derived(publicEnv?.PKG_VERSION || '0.0.0');\n\tlet githubVersion = $state('');\n\tlet badgeVariant = $state<'variant-filled' | 'variant-soft' | 'variant-outline' | 'variant-glass'>('variant-filled');\n\tlet badgeColor = $state('bg-primary-500 text-white');\n\tlet versionStatusMessage = $state('Checking for updates...');\n\tlet statusIcon = $state('mdi:loading');\n\tlet statusSeverity = $state<'critical' | 'warning' | 'info' | 'success' | 'unknown'>('unknown');\n\tlet isLoading = $state(true);\n\tlet error = $state<string | null>(null);\n\tlet lastChecked = $state<number | null>(null);\n\tlet checkInterval: ReturnType<typeof setInterval> | null = null;\n\n\t// Derived state for full status object\n\tconst versionStatus = $derived<VersionStatus>({\n\t\tpkg,\n\t\tgithubVersion,\n\t\tbadgeVariant,\n\t\tbadgeColor,\n\t\tversionStatusMessage,\n\t\tstatusIcon,\n\t\tstatusSeverity,\n\t\tisLoading,\n\t\terror,\n\t\tlastChecked\n\t});\n\n\t// Transparent mode styling - check pathname defensively\n\tconst isLoginRoute = $derived(browser ? window.location.pathname.startsWith('/login') : false);\n\tconst effectiveTransparent = $derived(transparent || isLoginRoute);\n\n\tconst transparentClasses = $derived.by(() => {\n\t\tif (badgeColor.includes('success')) {\n\t\t\treturn 'bg-success-500/20 text-success-700 dark:text-success-300';\n\t\t} else if (badgeColor.includes('warning')) {\n\t\t\treturn 'bg-warning-500/20 text-warning-700 dark:text-warning-300';\n\t\t} else if (badgeColor.includes('error')) {\n\t\t\treturn 'bg-error-500/20 text-black';\n\t\t}\n\t\treturn 'bg-surface-900/10 dark:text-white';\n\t});\n\n\t// Parse semantic version\n\tfunction parseVersion(version: string): [number, number, number] {\n\t\tconst parts = version.split('.').map(Number);\n\t\treturn [parts[0] || 0, parts[1] || 0, parts[2] || 0];\n\t}\n\n\t// Compare versions\n\tfunction compareVersions(local: string, remote: string): 'major' | 'minor' | 'patch' | 'current' {\n\t\tconst [localMajor, localMinor, localPatch] = parseVersion(local);\n\t\tconst [remoteMajor, remoteMinor, remotePatch] = parseVersion(remote);\n\n\t\tif (remoteMajor > localMajor) return 'major';\n\t\tif (remoteMajor === localMajor && remoteMinor > localMinor) return 'minor';\n\t\tif (remoteMajor === localMajor && remoteMinor === localMinor && remotePatch > localPatch) return 'patch';\n\t\treturn 'current';\n\t}\n\n\t// Update status based on version comparison\n\tfunction updateStatus(data: any) {\n\t\tif (data.status === 'disabled') {\n\t\t\tgithubVersion = pkg;\n\t\t\tbadgeVariant = 'variant-filled';\n\t\t\tbadgeColor = 'bg-surface-500 text-white';\n\t\t\tversionStatusMessage = 'Version check disabled';\n\t\t\tstatusIcon = 'mdi:shield-off';\n\t\t\tstatusSeverity = 'info';\n\t\t\terror = null;\n\t\t} else if (data.status === 'error') {\n\t\t\tgithubVersion = pkg;\n\t\t\tbadgeVariant = 'variant-filled';\n\t\t\tbadgeColor = 'bg-warning-500 text-white';\n\t\t\tversionStatusMessage = 'Could not check for updates';\n\t\t\tstatusIcon = 'mdi:wifi-off';\n\t\t\tstatusSeverity = 'warning';\n\t\t\terror = data.error || 'Network error';\n\t\t} else {\n\t\t\tgithubVersion = data.latest || pkg;\n\t\t\tconst comparison = compareVersions(pkg, githubVersion);\n\n\t\t\t// Security issue takes priority\n\t\t\tif (data.security_issue) {\n\t\t\t\tbadgeVariant = 'variant-filled';\n\t\t\t\tbadgeColor = 'bg-error-500 text-white';\n\t\t\t\tversionStatusMessage = data.message || `Critical security update to v${githubVersion} available!`;\n\t\t\t\tstatusIcon = 'mdi:shield-alert';\n\t\t\t\tstatusSeverity = 'critical';\n\t\t\t} else if (comparison === 'major') {\n\t\t\t\tbadgeVariant = 'variant-filled';\n\t\t\t\tbadgeColor = 'bg-error-500 text-white';\n\t\t\t\tversionStatusMessage = `Major update to v${githubVersion} available`;\n\t\t\t\tstatusIcon = 'mdi:alert-circle';\n\t\t\t\tstatusSeverity = 'critical';\n\t\t\t} else if (comparison === 'minor' || comparison === 'patch') {\n\t\t\t\tbadgeVariant = 'variant-filled';\n\t\t\t\tbadgeColor = 'bg-warning-500 text-black';\n\t\t\t\tversionStatusMessage = `Update to v${githubVersion} recommended`;\n\t\t\t\tstatusIcon = 'mdi:information';\n\t\t\t\tstatusSeverity = 'warning';\n\t\t\t} else {\n\t\t\t\tbadgeVariant = 'variant-filled';\n\t\t\t\tbadgeColor = 'bg-success-500 text-white';\n\t\t\t\tversionStatusMessage = 'You are up to date';\n\t\t\t\tstatusIcon = 'mdi:check-circle';\n\t\t\t\tstatusSeverity = 'success';\n\t\t\t}\n\t\t\terror = null;\n\t\t}\n\n\t\tlastChecked = Date.now();\n\t}\n\n\t// Fetch version with retry logic\n\tasync function checkVersion(retry = 0): Promise<void> {\n\t\tif (isLoading && retry === 0) return; // Prevent duplicate requests\n\n\t\tisLoading = true;\n\t\terror = null;\n\n\t\ttry {\n\t\t\tconst controller = new AbortController();\n\t\t\tconst timeout = setTimeout(() => controller.abort(), 10000); // 10s timeout\n\n\t\t\tconst response = await fetch('/api/system/version', {\n\t\t\t\tsignal: controller.signal,\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tclearTimeout(timeout);\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`HTTP ${response.status}: ${response.statusText}`);\n\t\t\t}\n\n\t\t\tconst data = await response.json();\n\t\t\tupdateStatus(data);\n\t\t} catch (err) {\n\t\t\tconst errorMessage = err instanceof Error ? err.message : 'Unknown error';\n\n\t\t\tif (retry < MAX_RETRIES) {\n\t\t\t\tsetTimeout(() => checkVersion(retry + 1), RETRY_DELAY * Math.pow(2, retry));\n\t\t\t} else {\n\t\t\t\tgithubVersion = pkg;\n\t\t\t\tbadgeVariant = 'variant-soft';\n\t\t\t\tbadgeColor = 'bg-surface-500 text-white';\n\t\t\t\tversionStatusMessage = 'Update check failed';\n\t\t\t\tstatusIcon = 'mdi:alert-octagon';\n\t\t\t\tstatusSeverity = 'unknown';\n\t\t\t\terror = errorMessage;\n\t\t\t}\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\t// Notify parent of status changes\n\t$effect(() => {\n\t\tif (onStatusChange && !isLoading) {\n\t\t\tonStatusChange(versionStatus);\n\t\t}\n\t});\n\n\t// Setup periodic checks\n\tonMount(() => {\n\t\t// Initial check\n\t\tcheckVersion();\n\n\t\t// Periodic checks every hour\n\t\tcheckInterval = setInterval(() => {\n\t\t\tcheckVersion();\n\t\t}, CHECK_INTERVAL);\n\n\t\treturn () => {\n\t\t\tif (checkInterval) {\n\t\t\t\tclearInterval(checkInterval);\n\t\t\t}\n\t\t};\n\t});\n\n\tonDestroy(() => {\n\t\tif (checkInterval) {\n\t\t\tclearInterval(checkInterval);\n\t\t}\n\t});\n\n\t// Get appropriate ARIA label\n\tconst statusAriaLabel = $derived.by(() => {\n\t\tif (isLoading) {\n\t\t\treturn 'Checking application version';\n\t\t}\n\t\tif (error) {\n\t\t\treturn `Version ${pkg}. ${error}`;\n\t\t}\n\t\treturn `Application version ${pkg}. ${versionStatusMessage}`;\n\t});\n</script>\n\n{#if children}\n\t<!-- Headless mode - render custom UI via snippet -->\n\t{@render children(versionStatus)}\n{:else}\n\t<!-- Default UI -->\n\t<a\n\t\thref={GITHUB_RELEASES_URL}\n\t\ttarget=\"_blank\"\n\t\trel=\"noopener noreferrer\"\n\t\tclass={effectiveTransparent\n\t\t\t? `absolute bottom-5 left-1/2 flex -translate-x-1/2 transform items-center justify-between w-28 gap-2 rounded-full ${transparentClasses} px-4 py-1 text-sm font-bold transition-opacity duration-300 hover:opacity-90  focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2`\n\t\t\t: compact\n\t\t\t\t? `inline-flex items-center gap-1 text-xs font-medium transition-colors hover:opacity-80 focus:opacity-80 badge ${badgeVariant} ${badgeColor} rounded-full px-2 py-0.5 focus:outline-none focus:ring-2 focus:ring-primary-500`\n\t\t\t\t: `inline-flex items-center gap-1.5 text-xs font-medium transition-colors hover:opacity-80 focus:opacity-80 badge ${badgeVariant} ${badgeColor} rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500`}\n\t\taria-label={statusAriaLabel}\n\t\taria-live=\"polite\"\n\t>\n\t\t{#if effectiveTransparent}\n\t\t\t<!-- Transparent mode -->\n\t\t\t<span class=\"text-black\">Ver.</span>\n\t\t\t<span class=\"text-white\">{pkg}</span>\n\n\t\t\t{#if !isLoading && statusSeverity === 'critical'}\n\t\t\t\t<span class=\"flex h-2 w-2\">\n\t\t\t\t\t<span class=\"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-error-400 opacity-75\"></span>\n\t\t\t\t\t<span class=\"relative inline-flex h-2 w-2 rounded-full bg-error-500\"></span>\n\t\t\t\t</span>\n\t\t\t{/if}\n\t\t{:else}\n\t\t\t<!-- Standard/Compact mode -->\n\t\t\t<span>\n\t\t\t\t{#if compact}\n\t\t\t\t\tv.{pkg}\n\t\t\t\t{:else}\n\t\t\t\t\tVer. {pkg}\n\t\t\t\t\t{#if githubVersion && githubVersion !== pkg && !isLoading}\n\t\t\t\t\t\t<span class=\"opacity-70\">→ {githubVersion}</span>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t</span>\n\n\t\t\t<!-- Status indicator dot (only show when check is complete) -->\n\t\t\t{#if !compact && !isLoading && statusSeverity !== 'unknown'}\n\t\t\t\t<span\n\t\t\t\t\tclass=\"inline-block h-2 w-2 rounded-full {statusSeverity === 'critical'\n\t\t\t\t\t\t? 'bg-error-500'\n\t\t\t\t\t\t: statusSeverity === 'warning'\n\t\t\t\t\t\t\t? 'bg-warning-500'\n\t\t\t\t\t\t\t: statusSeverity === 'success'\n\t\t\t\t\t\t\t\t? 'bg-success-500'\n\t\t\t\t\t\t\t\t: 'bg-surface-500'}\"\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t></span>\n\t\t\t{/if}\n\t\t{/if}\n\n\t\t<!-- Tooltip on hover -->\n\t\t{#if !compact && !effectiveTransparent}\n\t\t\t<span class=\"sr-only\">{versionStatusMessage}</span>\n\t\t{/if}\n\t</a>\n\n\t<!-- Error toast/message (optional - only shown if critical) -->\n\t{#if error && statusSeverity === 'critical' && !compact && !transparent}\n\t\t<div\n\t\t\tclass=\"mt-2 rounded border-l-4 border-error-500 bg-error-50 p-2 text-xs text-error-700 dark:bg-error-900/20 dark:text-error-300\"\n\t\t\trole=\"alert\"\n\t\t>\n\t\t\t<strong>Version check failed:</strong>\n\t\t\t{error}\n\t\t</div>\n\t{/if}\n{/if}\n","<script>\r\n  import { onMount } from \"svelte\"\r\n\r\n  /**\r\n   * @typedef {Object} Props\r\n   * @property {number} [size] The maximum size of each confetti piece, each piece will randomly be given a size up to this number\r\n   * @property {[number, number]} [x] The X multiplier of the distance between which the pieces will fly horizontally\r\n   * @property {[number, number]} [y] The Y multiplier of the distance between which the pieces will fly vertically\r\n   * @property {number} [duration] The total duration of the animation in milliseconds\r\n   * @property {boolean} [infinite] Whether the effect should loop infinitely\r\n   * @property {[number, number]} [delay] Range of random delay between two values, in milliseconds, which will be randomly given to each piece\r\n   * @property {[number, number]} [colorRange] Hue color range between which the confetti will be colored\r\n   * @property {string[]} [colorArray] An array of colors in any valid CSS value, colors will be asigned to each piece randomly from this array\r\n   * @property {number} [amount] The amount of confetti pieces in total, high numbers might lead to performance issues\r\n   * @property {number | \"infinite\" | \"initial\" | \"inherit\"} [iterationCount] The number of times the animation will fire, allows any value valid for the css prop `animation-iteration-count`\r\n   * @property {string} [fallDistance] The distance elements fall, represented as a css value such as \"10px\" or \"5rem\"\r\n   * @property {boolean} [rounded] Whether the confetti pieces should have rounded edges\r\n   * @property {boolean} [cone] Whether the effect should be shaped like a cone, rather than more box-shaped\r\n   * @property {boolean} [noGravity] Whether gravity should be disabled for the effect\r\n   * @property {number} [xSpread] The horizontal spread of the effect as it falls down, from 0 to 1\r\n   * @property {boolean} [destroyOnComplete] Whether to destroy the elements after the animation is complete\r\n   * @property {boolean} [disableForReducedMotion] Disable the effect if reduced motion is enabled\r\n   */\r\n\r\n  /** @type {Props} */\r\n  const {\r\n    size = 10,\r\n    x = [-0.5, 0.5],\r\n    y = [0.25, 1],\r\n    duration = 2000,\r\n    infinite = false,\r\n    delay = [0, 50],\r\n    colorRange = [0, 360],\r\n    colorArray = [],\r\n    amount = 50,\r\n    iterationCount = 1,\r\n    fallDistance = \"100px\",\r\n    rounded = false,\r\n    cone = false,\r\n    noGravity = false,\r\n    xSpread = 0.15,\r\n    destroyOnComplete = true,\r\n    disableForReducedMotion = false\r\n  } = $props()\r\n\r\n  let complete = $state(false)\r\n\r\n  onMount(() => {\r\n    if (!destroyOnComplete || infinite || typeof iterationCount === \"string\") return\r\n\r\n    setTimeout(() => complete = true, (duration + delay[1]) * iterationCount)\r\n  })\r\n\r\n  /**\r\n\t * @param {number} min\r\n\t * @param {number} max\r\n   * @returns {number}\r\n\t */\r\n  function randomBetween(min, max) {\r\n    return Math.random() * (max - min) + min\r\n  }\r\n\r\n  /** @returns {string} */\r\n  function getColor() {\r\n    if (colorArray.length) return colorArray[Math.round(Math.random() * (colorArray.length - 1))]\r\n    else return `hsl(${Math.round(randomBetween(colorRange[0], colorRange[1]))}, 75%, 50%)`\r\n  }\r\n</script>\r\n\r\n{#if !complete}\r\n  <div\r\n    class=\"confetti-holder\"\r\n    class:rounded\r\n    class:cone\r\n    class:no-gravity={noGravity}\r\n    class:reduced-motion={disableForReducedMotion}\r\n    style=\"\r\n    --fall-distance: {fallDistance};\r\n    --size: {size}px;\r\n    --x-spread: {(1 - xSpread)};\r\n    --transition-iteration-count: {infinite ? \"infinite\" : iterationCount};\">\r\n    {#each { length: amount } as _}\r\n      <div\r\n        class=\"confetti\"\r\n        style=\"\r\n        --color: {getColor()};\r\n        --skew: {randomBetween(-45, 45)}deg,{randomBetween(-45, 45)}deg;\r\n        --rotation-xyz: {randomBetween(-10, 10)}, {randomBetween(-10, 10)}, {randomBetween(-10, 10)};\r\n        --rotation-deg: {randomBetween(0, 360)}deg;\r\n        --translate-y-multiplier: {randomBetween(y[0], y[1])};\r\n        --translate-x-multiplier: {randomBetween(x[0], x[1])};\r\n        --scale: {0.1 * randomBetween(2, 10)};\r\n        --transition-delay: {randomBetween(delay[0], delay[1])}ms;\r\n        --transition-duration: {infinite ? `calc(${duration}ms * var(--scale))` : `${duration}ms`};\"></div>\r\n    {/each}\r\n  </div>\r\n{/if}\r\n\r\n<style>\r\n  .confetti-holder {\r\n    position: relative;\r\n  }\r\n\r\n  @keyframes rotate {\r\n    0% {\r\n      transform: skew(var(--skew)) rotate3d(var(--full-rotation));\r\n    }\r\n\r\n    100% {\r\n      transform: skew(var(--skew)) rotate3d(var(--rotation-xyz), calc(var(--rotation-deg) + 360deg));\r\n    }\r\n  }\r\n\r\n  @keyframes translate {\r\n    0% {\r\n      opacity: 1;\r\n    }\r\n\r\n    8% {\r\n      transform: translateY(calc(var(--translate-y) * 0.95)) translateX(calc(var(--translate-x) * (var(--x-spread) * 0.9)));\r\n      opacity: 1;\r\n    }\r\n\r\n    12% {\r\n      transform: translateY(var(--translate-y)) translateX(calc(var(--translate-x) * (var(--x-spread) * 0.95)));\r\n      opacity: 1;\r\n    }\r\n\r\n    16% {\r\n      transform: translateY(var(--translate-y)) translateX(calc(var(--translate-x) * var(--x-spread)));\r\n      opacity: 1;\r\n    }\r\n\r\n    100% {\r\n      transform: translateY(calc(var(--translate-y) + var(--fall-distance))) translateX(var(--translate-x));\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  @keyframes no-gravity-translate {\r\n    0% {\r\n      opacity: 1;\r\n    }\r\n\r\n    100% {\r\n      transform: translateY(var(--translate-y)) translateX(var(--translate-x));\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  .confetti {\r\n    --translate-y: calc(-200px * var(--translate-y-multiplier));\r\n    --translate-x: calc(200px * var(--translate-x-multiplier));\r\n    position: absolute;\r\n    height: calc(var(--size) * var(--scale));\r\n    width: calc(var(--size) * var(--scale));\r\n    animation: translate var(--transition-duration) var(--transition-delay) var(--transition-iteration-count) linear;\r\n    opacity: 0;\r\n    pointer-events: none;\r\n  }\r\n\r\n  .confetti::before {\r\n    --full-rotation: var(--rotation-xyz), var(--rotation-deg);\r\n    content: '';\r\n    display: block;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: var(--color);\r\n    background-size: contain;\r\n    transform: skew(var(--skew)) rotate3d(var(--full-rotation));\r\n    animation: rotate var(--transition-duration) var(--transition-delay) var(--transition-iteration-count) linear;\r\n  }\r\n\r\n  .rounded .confetti::before {\r\n    border-radius: 50%;\r\n  }\r\n\r\n  .cone .confetti {\r\n    --translate-x: calc(200px * var(--translate-y-multiplier) * var(--translate-x-multiplier));\r\n  }\r\n\r\n  .no-gravity .confetti {\r\n    animation-name: no-gravity-translate;\r\n    animation-timing-function: ease-out;\r\n  }\r\n\r\n  @media (prefers-reduced-motion) {\r\n    .reduced-motion .confetti,\r\n    .reduced-motion .confetti::before {\r\n      animation: none;\r\n    }\r\n  }\r\n</style>\r\n","<!--\n@file src/components/system/icons/Seasons.svelte\n@component Seasons Component\n\n@description\nDynamically displays seasonal greetings and festival-based UI decorations based on the configured `publicEnv.SEASON_REGION`. \nSupports regional celebrations for Western Europe, East Asia, and South Asia, with conditional rendering of festive messages and animations.\n\n### Features\n- **ZERO MAINTENANCE**: All festival dates calculated algorithmically - works for any year!\n- Regional support: Western Europe, East Asia, South Asia\n- Accurate lunar phase calculations using Meeus algorithm (±2-3 days)\n- Perfect Gregorian calculations (Easter, fixed holidays)\n- Dynamic festive icons, effects, and gradient overlays\n- Fully configurable via `publicEnv.SEASONS` and `publicEnv.SEASON_REGION`\n\n### Accuracy\n- Easter: 100% accurate (Oudin's algorithm)\n- Chinese New Year: ±2 days (Meeus lunar algorithm)\n- Diwali, Holi: ±2-3 days (lunar phase calculations)\n- Fixed holidays: 100% accurate\n-->\n\n<script lang=\"ts\">\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\t// Confetti effect\n\timport { Confetti } from 'svelte-confetti';\n\n\t// Settings helper\n\timport { publicEnv } from '@shared/stores/globalSettings.svelte';\n\n\t// =====================================================================\n\t// LUNAR PHASE CALCULATIONS (Meeus Algorithm - Simplified)\n\t// =====================================================================\n\n\t/**\n\t * Calculate approximate new moon date using lunar cycle\n\t * Accurate to within ±2 days for years 1900-2100\n\t */\n\tfunction findNewMoonNear(year: number, month: number, _day: number): Date {\n\t\tconst k = Math.floor((year - 2000) * 12.3685 + (month - 1));\n\t\tconst T = k / 1236.85;\n\n\t\t// New moon time (simplified Meeus formula)\n\t\tconst JDE = 2451550.09766 + 29.530588861 * k + 0.00015437 * T * T - 0.00000015 * T * T * T + 0.00000000073 * T * T * T * T;\n\n\t\t// Convert back to Gregorian date\n\t\tconst jd = Math.floor(JDE + 0.5);\n\t\tconst a = jd + 32044;\n\t\tconst b = Math.floor((4 * a + 3) / 146097);\n\t\tconst c = a - Math.floor((146097 * b) / 4);\n\t\tconst d = Math.floor((4 * c + 3) / 1461);\n\t\tconst e = c - Math.floor((1461 * d) / 4);\n\t\tconst m = Math.floor((5 * e + 2) / 153);\n\n\t\tconst resultDay = e - Math.floor((153 * m + 2) / 5) + 1;\n\t\tconst resultMonth = m + 3 - 12 * Math.floor(m / 10);\n\t\tconst resultYear = 100 * b + d - 4800 + Math.floor(m / 10);\n\n\t\treturn new Date(resultYear, resultMonth - 1, resultDay);\n\t}\n\n\t// Calculate full moon date (14.77 days after new moon)\n\tfunction findFullMoonNear(year: number, month: number, _day: number): Date {\n\t\tconst newMoon = findNewMoonNear(year, month, _day);\n\t\tconst fullMoon = new Date(newMoon);\n\t\tfullMoon.setDate(fullMoon.getDate() + 15);\n\t\treturn fullMoon;\n\t}\n\n\t// =====================================================================\n\t// CHINESE LUNAR FESTIVALS\n\t// =====================================================================\n\n\t// Chinese New Year - First new moon between Jan 21 and Feb 20\n\tfunction calculateChineseNewYear(year: number): Date {\n\t\tconst newMoon = findNewMoonNear(year, 1, 25);\n\n\t\t// Adjust if outside valid range\n\t\tif (newMoon.getMonth() === 0 && newMoon.getDate() < 21) {\n\t\t\treturn findNewMoonNear(year, 2, 10);\n\t\t}\n\t\tif (newMoon.getMonth() === 1 && newMoon.getDate() > 20) {\n\t\t\treturn findNewMoonNear(year, 1, 15);\n\t\t}\n\n\t\treturn newMoon;\n\t}\n\n\t// Dragon Boat Festival - 5th day of 5th lunar month\n\tfunction calculateDragonBoatFestival(year: number): Date {\n\t\tconst cny = calculateChineseNewYear(year);\n\t\tconst approxDate = new Date(cny);\n\t\tapproxDate.setDate(cny.getDate() + 29.53 * 4 + 5); // 4 lunar months + 5 days\n\t\treturn approxDate;\n\t}\n\n\t// Mid-Autumn Festival - 15th day of 8th lunar month (full moon)\n\tfunction calculateMidAutumnFestival(year: number): Date {\n\t\tconst cny = calculateChineseNewYear(year);\n\t\tconst approxDate = new Date(cny);\n\t\tapproxDate.setDate(cny.getDate() + 29.53 * 7.5);\n\n\t\t// Find nearest full moon\n\t\treturn findFullMoonNear(approxDate.getFullYear(), approxDate.getMonth() + 1, approxDate.getDate());\n\t}\n\n\t// =====================================================================\n\t// HINDU LUNAR FESTIVALS\n\t// =====================================================================\n\n\t// Diwali - New moon in Hindu month Kartik (Oct/Nov)\n\tfunction calculateDiwali(year: number): Date {\n\t\tconst newMoon = findNewMoonNear(year, 10, 25);\n\n\t\t// Validate range\n\t\tif (newMoon.getMonth() === 9 && newMoon.getDate() < 13) {\n\t\t\treturn findNewMoonNear(year, 11, 5);\n\t\t}\n\t\tif (newMoon.getMonth() === 10 && newMoon.getDate() > 14) {\n\t\t\treturn findNewMoonNear(year, 10, 5);\n\t\t}\n\n\t\treturn newMoon;\n\t}\n\n\t// Holi - Full moon in Hindu month Phalguna (Feb/Mar)\n\tfunction calculateHoli(year: number): Date {\n\t\tconst fullMoon = findFullMoonNear(year, 3, 10);\n\n\t\t// Validate range\n\t\tif (fullMoon.getMonth() === 1 && fullMoon.getDate() < 25) {\n\t\t\treturn findFullMoonNear(year, 3, 20);\n\t\t}\n\t\tif (fullMoon.getMonth() === 2 && fullMoon.getDate() > 25) {\n\t\t\treturn findFullMoonNear(year, 2, 20);\n\t\t}\n\n\t\treturn fullMoon;\n\t}\n\n\t// Navratri - Starts 20 days before Diwali\n\tfunction calculateNavratri(year: number): Date {\n\t\tconst diwali = calculateDiwali(year);\n\t\tconst navratri = new Date(diwali);\n\t\tnavratri.setDate(diwali.getDate() - 20);\n\t\treturn navratri;\n\t}\n\n\t// =====================================================================\n\t// WESTERN GREGORIAN FESTIVALS\n\t// =====================================================================\n\n\t/**\n\t * Easter Sunday using Oudin's algorithm\n\t * Perfect accuracy for years 1900-2199\n\t */\n\tfunction calculateEaster(year: number): Date {\n\t\tconst f = Math.floor;\n\t\tconst G = year % 19;\n\t\tconst C = f(year / 100);\n\t\tconst H = (C - f(C / 4) - f((8 * C + 13) / 25) + 19 * G + 15) % 30;\n\t\tconst I = H - f(H / 28) * (1 - f(29 / (H + 1)) * f((21 - G) / 11));\n\t\tconst J = (year + f(year / 4) + I + 2 - C + f(C / 4)) % 7;\n\t\tconst L = I - J;\n\t\tconst month = 3 + f((L + 40) / 44);\n\t\tconst day = L + 28 - 31 * f(month / 4);\n\t\treturn new Date(year, month - 1, day);\n\t}\n\n\t// Cherry Blossom Season (March-April)\n\tfunction isCherryBlossomSeason(date: Date): boolean {\n\t\tconst month = date.getMonth();\n\t\treturn month === 2 || month === 3; // March-April\n\t}\n\n\t// Helper to check if date is within range\n\tfunction isDateInRange(date: Date, start: Date, end: Date): boolean {\n\t\treturn date >= start && date <= end;\n\t}\n\n\t// =====================================================================\n\t// REACTIVE STATE\n\t// =====================================================================\n\n\t// Use $state and $derived for reactivity in Svelte 5 runes mode\n\tlet currentDate = $state(new Date());\n\tlet year = $derived(currentDate.getFullYear());\n\n\t// Calculate all festival dates for the current year\n\tlet festivalDates = $derived.by(() => {\n\t\treturn {\n\t\t\tchineseNewYear: calculateChineseNewYear(year),\n\t\t\tdragonBoatFestival: calculateDragonBoatFestival(year),\n\t\t\tmidAutumnFestival: calculateMidAutumnFestival(year),\n\t\t\tdiwali: calculateDiwali(year),\n\t\t\tholi: calculateHoli(year),\n\t\t\tnavratri: calculateNavratri(year),\n\t\t\teaster: calculateEaster(year)\n\t\t};\n\t});\n\n\t// Destructure for easier access\n\tlet chineseNewYear = $derived(festivalDates.chineseNewYear);\n\tlet midAutumnFestival = $derived(festivalDates.midAutumnFestival);\n\tlet dragonBoatFestival = $derived(festivalDates.dragonBoatFestival);\n\tlet diwali = $derived(festivalDates.diwali);\n\tlet holi = $derived(festivalDates.holi);\n\tlet navratri = $derived(festivalDates.navratri);\n\tlet easterSunday = $derived(festivalDates.easter);\n\n\t// Easter week (7 days)\n\tlet eastertideEndDate = $derived.by(() => {\n\t\tconst end = new Date(easterSunday);\n\t\tend.setDate(easterSunday.getDate() + 6);\n\t\treturn end;\n\t});\n\n\t// =====================================================================\n\t// FESTIVAL CHECKS\n\t// =====================================================================\n\n\t// Fixed Gregorian holidays\n\tlet isNewYear = $derived(currentDate.getMonth() === 0 && currentDate.getDate() === 1);\n\tlet isValentine = $derived(currentDate.getMonth() === 1 && currentDate.getDate() === 14);\n\tlet isMayDay = $derived(currentDate.getMonth() === 4 && currentDate.getDate() === 1);\n\tlet isHalloween = $derived(currentDate.getMonth() === 9 && currentDate.getDate() === 31);\n\tlet isChristmas = $derived(currentDate.getMonth() === 11 && (currentDate.getDate() === 24 || currentDate.getDate() === 25));\n\n\t// Calculated festivals (with tolerance windows)\n\tlet isEaster = $derived(isDateInRange(currentDate, easterSunday, eastertideEndDate));\n\tlet isChineseNewYear = $derived(Math.abs(currentDate.getTime() - chineseNewYear.getTime()) < 3 * 24 * 60 * 60 * 1000); // 3 days\n\tlet isMidAutumnFestival = $derived(currentDate.toDateString() === midAutumnFestival.toDateString());\n\tlet isDragonBoatFestival = $derived(currentDate.toDateString() === dragonBoatFestival.toDateString());\n\tlet isCherryBlossom = $derived(isCherryBlossomSeason(currentDate));\n\tlet isDiwali = $derived(Math.abs(currentDate.getTime() - diwali.getTime()) < 5 * 24 * 60 * 60 * 1000); // 5 days\n\tlet isHoli = $derived(Math.abs(currentDate.getTime() - holi.getTime()) < 2 * 24 * 60 * 60 * 1000); // 2 days\n\tlet isNavratri = $derived(Math.abs(currentDate.getTime() - navratri.getTime()) < 9 * 24 * 60 * 60 * 1000); // 9 days\n\n\t// Settings\n\tlet seasonsEnabled = $derived(publicEnv.SEASONS === true);\n\tlet seasonRegion = $derived(publicEnv.SEASON_REGION);\n</script>\n\n<!-- New Year Confetti - Always shows on Jan 1st regardless of settings -->\n{#if isNewYear}\n\t<div class=\"pointer-events-none fixed inset-0 z-50 flex justify-center\">\n\t\t<Confetti x={[-0.5, 0.5]} y={[0.25, 1]} delay={[0, 2000]} duration={3500} amount={200} fallDistance=\"100vh\" />\n\t</div>\n{/if}\n\n{#if seasonsEnabled}\n\t{#if seasonRegion === 'Western_Europe'}\n\t\t{#if isNewYear}\n\t\t\t<!-- New Year with Confetti -->\n\t\t\t<div class=\"pointer-events-none fixed inset-0 z-50 flex justify-center\">\n\t\t\t\t<Confetti x={[-0.5, 0.5]} y={[0.25, 1]} delay={[0, 2000]} duration={3500} amount={200} fallDistance=\"100vh\" />\n\t\t\t</div>\n\n\t\t\t<p class=\"absolute -top-28 left-1/2 z-20 -translate-x-1/2 -translate-y-1/2 whitespace-nowrap text-4xl font-bold text-error-500\">\n\t\t\t\t{m.login_new_year()}\n\t\t\t</p>\n\n\t\t\t<p class=\"absolute left-1/2 top-28 z-20 -translate-x-1/2 -translate-y-1/2 whitespace-nowrap text-5xl font-bold text-error-500\">\n\t\t\t\t{currentDate.getFullYear()}\n\t\t\t</p>\n\t\t{/if}\n\n\t\t{#if isValentine}\n\t\t\t<!-- Valentine's Day -->\n\t\t\t<div class=\"absolute -top-28 left-1/2 -translate-x-1/2 -translate-y-1/2\">\n\t\t\t\t<iconify-icon icon=\"mdi:heart\" width=\"40\" class=\"absolute -left-[60px] -top-[10px] text-red-600\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"mdi:cards-heart\" width=\"40\" class=\"absolute -right-[60px] -top-[20px] text-pink-500\"></iconify-icon>\n\t\t\t</div>\n\n\t\t\t<p class=\"absolute left-1/2 top-28 z-20 -translate-x-1/2 -translate-y-1/2 whitespace-nowrap text-4xl font-bold text-pink-500\">\n\t\t\t\tHappy Valentine's Day\n\t\t\t</p>\n\t\t{/if}\n\n\t\t{#if isEaster}\n\t\t\t<!-- Easter -->\n\t\t\t<div class=\"absolute -top-24 left-1/2 -translate-x-1/2 -translate-y-1/2\">\n\t\t\t\t<iconify-icon icon=\"mdi:egg-easter\" width=\"40\" class=\"absolute -top-[18px] right-2 -rotate-25 text-tertiary-500\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"game-icons:easter-egg\" width=\"40\" class=\"absolute -top-[25px] left-0 rotate-12 text-yellow-500\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"game-icons:high-grass\" width=\"40\" class=\"absolute -top-[5px] right-10 -rotate-32 text-green-500\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"mdi:easter\" width=\"70\" class=\"absolute -top-[31px] left-8 rotate-32 text-red-500\"></iconify-icon>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if isMayDay}\n\t\t\t<!-- May Day -->\n\t\t\t<div class=\"absolute -top-24 left-1/2 -translate-x-1/2 -translate-y-1/2\">\n\t\t\t\t<iconify-icon icon=\"noto:tulip\" width=\"60\" class=\"absolute -left-[16px] -top-[45px] rotate-12\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"fluent-emoji:tulip\" width=\"40\" class=\"absolute -top-[14px] right-[20px] -rotate-12\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"noto:sunflower\" width=\"50\" class=\"absolute -top-[16px] left-10 rotate-6\"></iconify-icon>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if isHalloween}\n\t\t\t<!-- Halloween -->\n\t\t\t<img src=\"/seasons/Halloween.avif\" alt=\"Spider\" class=\"absolute -bottom-[200px] left-1/2 -translate-x-1/2 -translate-y-1/2\" />\n\t\t{/if}\n\n\t\t{#if isChristmas}\n\t\t\t<!-- Christmas -->\n\t\t\t<img src=\"/seasons/SantaHat.avif\" alt=\"Santa hat\" class=\"absolute -right-[105px] -top-14 h-20 w-20 -translate-x-1/2 -translate-y-1/2\" />\n\t\t{/if}\n\t{/if}\n\n\t{#if seasonRegion === 'East_Asia'}\n\t\t{#if isChineseNewYear}\n\t\t\t<!-- Chinese New Year -->\n\t\t\t<div class=\"absolute left-1/2 top-[-50px] -translate-x-1/2 justify-center\">\n\t\t\t\t<iconify-icon icon=\"noto:lantern\" width=\"40\" class=\"absolute -left-[60px] -top-[20px] text-red-600\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"noto:dragon-face\" width=\"40\" class=\"absolute -right-[60px] -top-[20px]\"></iconify-icon>\n\t\t\t</div>\n\t\t\t<p class=\"absolute left-[-40px] top-[-50px] justify-center whitespace-nowrap text-2xl font-bold text-red-600\">\n\t\t\t\t{m.login_new_year()}\n\t\t\t</p>\n\t\t{/if}\n\n\t\t{#if isCherryBlossom}\n\t\t\t<!-- Cherry Blossom Season -->\n\t\t\t<div class=\"absolute left-1/2 top-[-50px] -translate-x-1/2 justify-center\">\n\t\t\t\t<iconify-icon icon=\"noto:cherry-blossom\" width=\"40\" class=\"absolute -left-[60px] -top-[20px] text-pink-400\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"noto:cherry-blossom\" width=\"60\" class=\"absolute -right-[140px] top-[40px] text-pink-300\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"noto:white-flower\" width=\"60\" class=\"absolute -left-[140px] top-[40px] text-pink-300\"></iconify-icon>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if isDragonBoatFestival}\n\t\t\t<!-- Dragon Boat Festival -->\n\t\t\t<div class=\"absolute left-1/2 top-[-50px] -translate-x-1/2 justify-center\">\n\t\t\t\t<iconify-icon icon=\"noto:dragon\" width=\"100\" class=\"absolute left-0 -top-[35px] rotate-12\"></iconify-icon>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if isMidAutumnFestival}\n\t\t\t<!-- Mid-Autumn Festival -->\n\t\t\t<div class=\"absolute left-1/2 top-[-50px] -translate-x-1/2 justify-center\">\n\t\t\t\t<iconify-icon icon=\"noto:full-moon\" width=\"80\" class=\"absolute -left-[100px] -top-[10px]\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"noto:moon-cake\" width=\"60\" class=\"absolute -right-[120px] top-[220px]\"></iconify-icon>\n\t\t\t</div>\n\t\t{/if}\n\t{/if}\n\n\t{#if seasonRegion === 'South_Asia'}\n\t\t{#if isDiwali}\n\t\t\t<!-- Diwali -->\n\t\t\t<div class=\"absolute left-1/2 top-[-50px] -translate-x-1/2 justify-center\">\n\t\t\t\t<iconify-icon icon=\"noto:diya-lamp\" width=\"70\" class=\"absolute left-[120px] top-[190px]\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"noto:sparkles\" width=\"50\" class=\"absolute -right-[160px] top-[120px] text-yellow-500\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"noto:sparkles\" width=\"50\" class=\"absolute -right-[200px] top-[100px] rotate-90 text-warning-500\"></iconify-icon>\n\t\t\t</div>\n\t\t\t<p class=\"absolute -left-[10px] top-[170px] justify-center whitespace-nowrap text-3xl font-bold italic text-yellow-600\">\n\t\t\t\t{m.login_happy_diwali()}\n\t\t\t</p>\n\t\t{/if}\n\n\t\t{#if isHoli}\n\t\t\t<!-- Holi -->\n\t\t\t<div class=\"absolute inset-0 flex\">\n\t\t\t\t<!-- Powder effects with gradients -->\n\t\t\t\t<div class=\"h-full w-full translate-y-8 bg-linear-to-b from-red-300/80 via-red-400/80 to-transparent blur-xl\"></div>\n\t\t\t\t<div class=\"h-full w-full translate-y-12 bg-linear-to-b from-yellow-200/80 via-yellow-300/80 to-transparent blur-xl\"></div>\n\t\t\t\t<div class=\"h-full w-full translate-y-8 bg-linear-to-b from-green-300/80 via-green-400/80 to-transparent blur-xl\"></div>\n\t\t\t\t<div class=\"h-full w-full translate-y-12 bg-linear-to-b from-cyan-300/80 via-cyan-400/80 to-transparent blur-xl\"></div>\n\t\t\t\t<div class=\"h-full w-full translate-y-8 bg-linear-to-b from-blue-300/80 via-blue-400/80 to-transparent blur-xl\"></div>\n\t\t\t\t<div class=\"h-full w-full translate-y-12 bg-linear-to-b from-purple-300/80 via-purple-400/80 to-transparent blur-xl\"></div>\n\t\t\t</div>\n\n\t\t\t<div class=\"absolute left-1/2 top-[-50px] -translate-x-1/2 justify-center\">\n\t\t\t\t<iconify-icon icon=\"noto:balloon\" width=\"40\" class=\"absolute -left-[60px] -top-[20px] text-purple-500\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"noto:balloon\" width=\"50\" class=\"absolute right-[60px] top-[20px] text-green-500\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"game-icons:powder\" width=\"50\" class=\"absolute -right-[150px] top-[220px] text-primary-500\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"game-icons:powder\" width=\"30\" class=\"absolute -right-[120px] top-[220px] -rotate-12 text-warning-500\"></iconify-icon>\n\t\t\t</div>\n\t\t\t<p\n\t\t\t\tclass=\"absolute -left-[30px] top-[170px] justify-center bg-linear-to-br from-pink-500 to-violet-500 box-decoration-clone bg-clip-text text-4xl font-bold text-transparent\"\n\t\t\t>\n\t\t\t\t{m.login_Happy_Holi()}\n\t\t\t</p>\n\t\t{/if}\n\n\t\t{#if isNavratri}\n\t\t\t<!-- Navratri -->\n\t\t\t<div class=\"absolute left-1/2 top-[-50px] -translate-x-1/2 justify-center\">\n\t\t\t\t<iconify-icon icon=\"noto:prayer-beads\" width=\"40\" class=\"absolute -left-[100px] top-[30px]\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"token-branded:starl\" width=\"40\" class=\"absolute -right-[60px] -top-[20px]\"></iconify-icon>\n\t\t\t\t<iconify-icon icon=\"token-branded:starl\" width=\"60\" class=\"absolute -right-[160px] top-[50px]\"></iconify-icon>\n\t\t\t</div>\n\n\t\t\t<p\n\t\t\t\tclass=\"absolute -left-[30px] top-[170px] justify-center text-nowrap bg-linear-to-br from-pink-500 to-warning-500 box-decoration-clone bg-clip-text text-4xl font-bold text-transparent\"\n\t\t\t>\n\t\t\t\t{m.login_happy_navratri()}\n\t\t\t</p>\n\t\t{/if}\n\t{/if}\n{/if}\n","/**\n * @file: src/utils/Form.svelte.ts\n * @description: Form class for handling form data and validation\n *\n * @requires @sveltejs/kit - For action and submit function types\n * @requires valibot - For schema definition and validation\n */\n\nimport type { ActionResult, SubmitFunction } from '@sveltejs/kit';\nimport { safeParse, type BaseSchema, flatten } from 'valibot';\n\ntype EnhanceOptions = {\n\tonSubmit?: (input: Parameters<SubmitFunction>[0]) => void;\n\tonResult?: (input: { result: ActionResult; update: (opts?: { reset: boolean }) => Promise<void> }) => void | Promise<void>;\n};\n\nexport class Form<T extends Record<string, any>> {\n\tdata = $state<T>({} as T);\n\terrors = $state<Record<string, string[]>>({});\n\tsubmitting = $state(false);\n\tmessage = $state<string | undefined>(undefined);\n\n\tconstructor(\n\t\tinitialData: T,\n\t\tprivate schema?: BaseSchema<any, any, any>\n\t) {\n\t\tthis.data = { ...initialData };\n\t}\n\n\t// Helper to reset form\n\treset(newData?: T) {\n\t\tif (newData) {\n\t\t\tthis.data = { ...newData };\n\t\t}\n\t\tthis.errors = {};\n\t\tthis.message = undefined;\n\t\tthis.submitting = false;\n\t}\n\n\t// Validate form data against schema\n\tvalidate(): boolean {\n\t\tthis.errors = {};\n\t\tthis.message = undefined;\n\n\t\tif (this.schema) {\n\t\t\tconst result = safeParse(this.schema, this.data);\n\t\t\tif (!result.success) {\n\t\t\t\tconst flatErrors = flatten(result.issues).nested;\n\t\t\t\tthis.errors = flatErrors as Record<string, string[]>;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t// Enhance action for SvelteKit forms\n\tenhance(options?: EnhanceOptions): SubmitFunction {\n\t\treturn (input) => {\n\t\t\tthis.submitting = true;\n\t\t\tthis.message = undefined;\n\t\t\tthis.errors = {};\n\n\t\t\tif (options?.onSubmit) {\n\t\t\t\toptions.onSubmit(input);\n\t\t\t\t// Note: We can't easily check if cancel() was called effectively unless we wrap it,\n\t\t\t\t// but standard SvelteKit cancel() throws or sets a flag.\n\t\t\t\t// For now we assume if onSubmit cancels, it handles it.\n\t\t\t}\n\n\t\t\t// Client-side validation\n\t\t\tif (this.schema) {\n\t\t\t\tconst result = safeParse(this.schema, this.data);\n\t\t\t\tif (!result.success) {\n\t\t\t\t\tconst flatErrors = flatten(result.issues).nested;\n\t\t\t\t\tthis.errors = flatErrors as Record<string, string[]>;\n\t\t\t\t\tthis.submitting = false;\n\t\t\t\t\tinput.cancel();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn async (resultInput) => {\n\t\t\t\tconst { result, update } = resultInput;\n\t\t\t\tthis.submitting = false;\n\n\t\t\t\tif (result.type === 'failure') {\n\t\t\t\t\tif (result.data?.errors) {\n\t\t\t\t\t\tthis.errors = result.data.errors as Record<string, string[]>;\n\t\t\t\t\t}\n\t\t\t\t\tif (result.data?.message) {\n\t\t\t\t\t\tthis.message = result.data.message as string;\n\t\t\t\t\t}\n\t\t\t\t} else if (result.type === 'success') {\n\t\t\t\t\tif (result.data?.message) {\n\t\t\t\t\t\tthis.message = result.data.message as string;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (options?.onResult) {\n\t\t\t\t\tawait options.onResult(resultInput);\n\t\t\t\t} else {\n\t\t\t\t\tawait update();\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n\n\t// Manual submit handler for standard API endpoints\n\tasync submit(url: string, options: RequestInit = {}) {\n\t\tthis.submitting = true;\n\t\tthis.message = undefined;\n\t\tthis.errors = {};\n\n\t\t// Client-side validation\n\t\tif (this.schema) {\n\t\t\tconst result = safeParse(this.schema, this.data);\n\t\t\tif (!result.success) {\n\t\t\t\tconst flatErrors = flatten(result.issues).nested;\n\t\t\t\tthis.errors = flatErrors as Record<string, string[]>;\n\t\t\t\tthis.submitting = false;\n\t\t\t\treturn { success: false, errors: this.errors };\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await fetch(url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t...options,\n\t\t\t\tbody: JSON.stringify(this.data)\n\t\t\t});\n\n\t\t\tconst data = await response.json();\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthis.errors = data.errors || {};\n\t\t\t\tthis.message = data.message || 'An error occurred';\n\t\t\t\treturn { success: false, data };\n\t\t\t}\n\n\t\t\tthis.message = data.message;\n\t\t\treturn { success: true, data };\n\t\t} catch (error) {\n\t\t\tthis.message = error instanceof Error ? error.message : 'Network error';\n\t\t\treturn { success: false, error };\n\t\t} finally {\n\t\t\tthis.submitting = false;\n\t\t}\n\t}\n}\n","<!--\n@file src/routes/login/components/icons/SigninIcon.svelte\n@component\n**SigninIcon component**\n-->\n\n<script lang=\"ts\">\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\tlet { show = $bindable(true), disabled = false, onClick = (_event: Event) => {} } = $props();\n\n\tfunction handleClick(event: MouseEvent) {\n\t\tif (disabled) return;\n\t\tevent.stopPropagation();\n\t\tonClick(event); // Ensure onClick uses the event meaningfully\n\t}\n\n\tfunction handleKeyDown(event: KeyboardEvent) {\n\t\tif (disabled) return;\n\t\tif (event.key === 'Enter') {\n\t\t\tevent.stopPropagation();\n\t\t\tonClick(event); // Ensure onClick uses the event meaningfully\n\t\t}\n\t}\n</script>\n\n<div\n\tclass=\"icon dark:text-dark absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] transition-all duration-300\"\n\tclass:hide={!show}\n\tclass:pointer-events-none={!show || disabled}\n\tclass:opacity-50={disabled}\n>\n\t<div onclick={handleClick} onkeydown={handleKeyDown} role=\"button\" tabindex={disabled ? -1 : 0} class=\"flex cursor-pointer flex-col items-center\">\n\t\t<div class=\"relative w-max rounded-full border-4 border-[#2b2f31] p-3\">\n\t\t\t<svg\n\t\t\t\tclass=\"aspect-square h-12 fill-[#2b2f31]\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\t\t\t\tviewBox=\"0 0 50 50\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M25 3C19.464844 3 15 7.464844 15 13L15 19C15 22.238281 16.585938 25.144531 19 26.96875L19 31.5C19 31.605469 18.980469 31.695313 18.71875 31.9375C18.457031 32.179688 17.992188 32.503906 17.375 32.8125C16.144531 33.429688 14.367188 34.0625 12.5625 34.9375C10.757813 35.8125 8.886719 36.925781 7.4375 38.53125C5.988281 40.136719 5 42.289063 5 45L5 46L45 46L45 45C45 42.265625 44.011719 40.105469 42.5625 38.5C41.113281 36.894531 39.242188 35.800781 37.4375 34.9375C35.632813 34.074219 33.851563 33.421875 32.625 32.8125C32.011719 32.507813 31.539063 32.210938 31.28125 31.96875C31.023438 31.726563 31 31.625 31 31.5L31 26.96875C33.414063 25.144531 35 22.238281 35 19L35 13C35 7.464844 30.535156 3 25 3 Z M 25 5C29.464844 5 33 8.535156 33 13L33 19C33 21.757813 31.558594 24.242188 29.4375 25.65625L29 25.96875L29 31.5C29 32.273438 29.398438 32.957031 29.90625 33.4375C30.414063 33.917969 31.050781 34.277344 31.75 34.625C33.148438 35.320313 34.867188 35.9375 36.5625 36.75C38.257813 37.5625 39.886719 38.542969 41.0625 39.84375C42.039063 40.921875 42.605469 42.304688 42.8125 44L7.1875 44C7.394531 42.324219 7.964844 40.957031 8.9375 39.875C10.113281 38.570313 11.742188 37.574219 13.4375 36.75C15.132813 35.925781 16.855469 35.289063 18.25 34.59375C18.945313 34.246094 19.589844 33.878906 20.09375 33.40625C20.597656 32.933594 21 32.269531 21 31.5L21 25.96875L20.5625 25.65625C18.441406 24.242188 17 21.757813 17 19L17 13C17 8.535156 20.535156 5 25 5Z\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</div>\n\t\t<p class=\"text-center font-semibold uppercase text-black!\">{m.form_signin()}</p>\n\t</div>\n</div>\n\n<style>\n\t.hide {\n\t\tanimation: _hide 0.3s forwards;\n\t}\n\t@keyframes _hide {\n\t\tfrom {\n\t\t\topacity: 1;\n\t\t}\n\t\tto {\n\t\t\topacity: 0;\n\t\t\ttop: 70%;\n\t\t}\n\t}\n</style>\n","<!--\n@file src/components/PasswordStrength.svelte\n@component\n**Enhanced PasswordStrength - Svelte 5 Optimized**\n\nVisual password strength indicator with match validation and accessibility features.\n\n@example\n```svelte\n<PasswordStrength password={formData.password} confirmPassword={formData.confirmPassword} />\n```\n\n### Props\n- `password` (string): Password value\n- `confirmPassword` (string): Confirm password value\n- `showRequirements` (boolean): Show password requirements list (default: false)\n\n### Features\n- Real-time strength calculation with complexity scoring\n- Visual progress bar with animated feedback\n- Password match validation\n- Customizable strength thresholds\n- Full ARIA support for screen readers\n- Reduced motion support\n- Smooth CSS transitions (no JS animation overhead)\n- Performance optimized with derived state\n- Password requirements checklist\n\n### Improvements\n- Better accessibility with comprehensive ARIA attributes\n- Reduced motion support\n- Memoized all calculations\n- Requirements checklist for better UX\n- Live regions for screen reader updates\n- Semantic HTML structure\n-->\n\n<script lang=\"ts\">\n\timport { publicEnv } from '@shared/stores/globalSettings.svelte';\n\timport { fade, slide } from 'svelte/transition';\n\timport { onMount } from 'svelte';\n\n\tinterface Props {\n\t\tpassword?: string;\n\t\tconfirmPassword?: string;\n\t\tshowRequirements?: boolean;\n\t}\n\n\tconst { password = '', confirmPassword = '', showRequirements = false }: Props = $props();\n\n\t// Configuration\n\tconst MIN_PASSWORD_LENGTH = publicEnv?.PASSWORD_LENGTH ?? 8;\n\tconst YELLOW_LENGTH = MIN_PASSWORD_LENGTH + 3;\n\tconst GREEN_LENGTH = YELLOW_LENGTH + 4;\n\n\t// State\n\tlet prefersReducedMotion = $state(false);\n\tlet showRequirementsList = $state(false);\n\n\t// Complexity checks (memoized)\n\tconst complexityChecks = $derived.by(() => {\n\t\tconst pwd = longerPassword;\n\t\treturn {\n\t\t\thasUpper: /[A-Z]/.test(pwd),\n\t\t\thasLower: /[a-z]/.test(pwd),\n\t\t\thasNumber: /\\d/.test(pwd),\n\t\t\thasSpecial: /[^A-Za-z0-9]/.test(pwd),\n\t\t\thasMinLength: pwd.length >= MIN_PASSWORD_LENGTH\n\t\t};\n\t});\n\n\t// Calculate password score\n\tfunction calculateScore(pwd: string, checks: Record<string, boolean>): number {\n\t\tif (pwd.length === 0) return 0;\n\n\t\tlet score = 0;\n\n\t\t// Base score from length\n\t\tif (pwd.length >= MIN_PASSWORD_LENGTH && pwd.length < YELLOW_LENGTH) score = 1;\n\t\telse if (pwd.length >= YELLOW_LENGTH && pwd.length < GREEN_LENGTH) score = 2;\n\t\telse if (pwd.length >= GREEN_LENGTH) score = 3;\n\n\t\t// Complexity bonus (excluding hasMinLength)\n\t\tconst complexityCount = Object.entries(checks).filter(([key, value]) => key !== 'hasMinLength' && value).length;\n\n\t\tscore += Math.floor(complexityCount / 2);\n\n\t\treturn Math.min(score, 5);\n\t}\n\n\t// Feedback messages\n\tconst FEEDBACK_MESSAGES: Record<number, string> = {\n\t\t0: 'Too Short',\n\t\t1: 'Weak',\n\t\t2: 'Fair',\n\t\t3: 'Good',\n\t\t4: 'Strong',\n\t\t5: 'Very Strong'\n\t};\n\n\t// Color classes\n\tconst COLOR_CLASSES: Record<number, string> = {\n\t\t0: 'bg-gray-300 text-gray-700 dark:bg-gray-600 dark:text-gray-300',\n\t\t1: 'bg-red-500 text-white',\n\t\t2: 'bg-orange-500 text-white',\n\t\t3: 'bg-yellow-500 text-gray-900',\n\t\t4: 'bg-green-600 text-white',\n\t\t5: 'bg-green-500 text-white'\n\t};\n\n\t// Bar colors\n\tfunction getBarColor(barIndex: number, score: number): string {\n\t\tif (score === 0) return 'bg-gray-200 dark:bg-gray-700';\n\t\tif (barIndex === 0) return score >= 1 ? 'bg-red-500' : 'bg-gray-200 dark:bg-gray-700';\n\t\tif (barIndex === 1) return score >= 2 ? 'bg-yellow-500' : 'bg-gray-200 dark:bg-gray-700';\n\t\treturn score >= 3 ? 'bg-green-500' : 'bg-gray-200 dark:bg-gray-700';\n\t}\n\n\t// Derived values\n\tconst longerPassword = $derived(password.length >= confirmPassword.length ? password : confirmPassword);\n\n\tconst score = $derived(calculateScore(longerPassword, complexityChecks));\n\tconst feedback = $derived(FEEDBACK_MESSAGES[score] || 'Unknown');\n\tconst scoreColor = $derived(COLOR_CLASSES[score] || COLOR_CLASSES[0]);\n\tconst showStrength = $derived(password.length > 0 || confirmPassword.length > 0);\n\tconst percentage = $derived(Math.min(100, (longerPassword.length / GREEN_LENGTH) * 100));\n\tconst passwordsMatch = $derived(password === confirmPassword && confirmPassword.length > 0 && password.length > 0);\n\tconst showMatchIndicator = $derived(confirmPassword.length > 0);\n\n\t// Count met requirements\n\tconst metRequirements = $derived(Object.values(complexityChecks).filter(Boolean).length);\n\tconst totalRequirements = $derived(Object.keys(complexityChecks).length);\n\n\t// Accessibility label\n\tconst strengthLabel = $derived(() => {\n\t\tconst parts = [`Password strength: ${feedback}`];\n\n\t\tif (showMatchIndicator) {\n\t\t\tparts.push(passwordsMatch ? 'Passwords match' : 'Passwords do not match');\n\t\t}\n\n\t\tparts.push(`${metRequirements} of ${totalRequirements} requirements met`);\n\n\t\treturn parts.join('. ');\n\t});\n\n\t// Toggle requirements list\n\tfunction toggleRequirements() {\n\t\tshowRequirementsList = !showRequirementsList;\n\t}\n\n\t// Lifecycle\n\tonMount(() => {\n\t\tconst mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n\t\tprefersReducedMotion = mediaQuery.matches;\n\n\t\tconst handleChange = (e: MediaQueryListEvent) => {\n\t\t\tprefersReducedMotion = e.matches;\n\t\t};\n\n\t\tmediaQuery.addEventListener('change', handleChange);\n\t\treturn () => mediaQuery.removeEventListener('change', handleChange);\n\t});\n</script>\n\n{#if showStrength}\n\t<div\n\t\tclass=\"relative -mt-1 w-full space-y-2\"\n\t\trole=\"region\"\n\t\taria-label=\"Password strength indicator\"\n\t\ttransition:fade={{ duration: prefersReducedMotion ? 0 : 200 }}\n\t>\n\t\t<!-- Progress bar container -->\n\t\t<div class=\"relative h-4 w-full overflow-hidden rounded-sm bg-gray-200 dark:bg-gray-700\">\n\t\t\t<!-- Animated progress bar -->\n\t\t\t<div\n\t\t\t\trole=\"progressbar\"\n\t\t\t\taria-valuenow={Math.round(percentage)}\n\t\t\t\taria-valuemin={0}\n\t\t\t\taria-valuemax={100}\n\t\t\t\taria-label={strengthLabel()}\n\t\t\t\tclass=\"h-full rounded-sm transition-all {prefersReducedMotion ? 'duration-0' : 'duration-500 ease-out'} {scoreColor}\"\n\t\t\t\tstyle=\"width: {percentage}%;\"\n\t\t\t>\n\t\t\t\t<!-- Strength text -->\n\t\t\t\t{#if percentage > 25}\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"absolute inset-0 flex items-center justify-center text-[10px] font-bold sm:text-xs\"\n\t\t\t\t\t\ttransition:fade={{ duration: prefersReducedMotion ? 0 : 200 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{feedback}\n\t\t\t\t\t</span>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- Screen reader announcement -->\n\t\t\t\t<span class=\"sr-only\" aria-live=\"polite\" aria-atomic=\"true\">\n\t\t\t\t\t{strengthLabel()}\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<!-- Shine effect (only when motion allowed) -->\n\t\t\t{#if !prefersReducedMotion && percentage > 0 && percentage < 100}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"absolute inset-0 bg-linear-to-r from-transparent via-white/20 to-transparent opacity-60 transition-transform duration-500\"\n\t\t\t\t\tstyle=\"transform: translateX({percentage - 20}%);\"\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t></div>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<!-- Bottom row: Match indicator and strength bars -->\n\t\t<div class=\"flex min-h-7 w-full items-center justify-between gap-2\">\n\t\t\t<!-- Left side: Match indicator or requirements toggle -->\n\t\t\t<div class=\"min-w-0 flex-1\">\n\t\t\t\t{#if !showMatchIndicator}\n\t\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t\t<span class=\"text-xs text-gray-500 dark:text-gray-400\"> Strength </span>\n\t\t\t\t\t\t{#if showRequirements}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tonclick={toggleRequirements}\n\t\t\t\t\t\t\t\tclass=\"text-xs text-primary-500 hover:text-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-1 rounded\"\n\t\t\t\t\t\t\t\taria-expanded={showRequirementsList}\n\t\t\t\t\t\t\t\taria-controls=\"password-requirements\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{showRequirementsList ? 'Hide' : 'Show'} requirements\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"text-xs transition-colors {prefersReducedMotion ? 'duration-0' : 'duration-200'}\"\n\t\t\t\t\t\tclass:text-red-500={!passwordsMatch}\n\t\t\t\t\t\tclass:text-green-500={passwordsMatch}\n\t\t\t\t\t\trole=\"status\"\n\t\t\t\t\t\taria-live=\"polite\"\n\t\t\t\t\t\ttransition:fade={{ duration: prefersReducedMotion ? 0 : 200 }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{passwordsMatch ? '✓ Passwords match' : '✗ Passwords do not match'}\n\t\t\t\t\t</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<!-- Right side: Strength bars -->\n\t\t\t<div class=\"flex shrink-0 gap-1\" role=\"presentation\" aria-hidden=\"true\">\n\t\t\t\t{#each [0, 1, 2] as barIndex (barIndex)}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"h-1.5 w-8 rounded-full transition-all {prefersReducedMotion ? 'duration-0' : 'duration-400 ease-out'} {getBarColor(\n\t\t\t\t\t\t\tbarIndex,\n\t\t\t\t\t\t\tscore\n\t\t\t\t\t\t)}\"\n\t\t\t\t\t\tstyle=\"transform: scale({barIndex < score ? 1 : 0.8}); opacity: {barIndex <= score ? 1 : 0.3};\"\n\t\t\t\t\t></div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Requirements checklist (collapsible) -->\n\t\t{#if showRequirements && showRequirementsList}\n\t\t\t<div\n\t\t\t\tid=\"password-requirements\"\n\t\t\t\tclass=\"rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-700 dark:bg-gray-800\"\n\t\t\t\ttransition:slide={{ duration: prefersReducedMotion ? 0 : 200 }}\n\t\t\t>\n\t\t\t\t<h4 class=\"mb-2 text-xs font-semibold text-gray-700 dark:text-gray-300\">Password Requirements</h4>\n\t\t\t\t<ul class=\"space-y-1 text-xs\" role=\"list\">\n\t\t\t\t\t<li class=\"flex items-center gap-2\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"flex h-4 w-4 items-center justify-center rounded-full text-[10px] {complexityChecks.hasMinLength\n\t\t\t\t\t\t\t\t? 'bg-green-500 text-white'\n\t\t\t\t\t\t\t\t: 'bg-gray-300 text-gray-600 dark:bg-gray-600 dark:text-gray-400'}\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{complexityChecks.hasMinLength ? '✓' : '○'}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class={complexityChecks.hasMinLength ? 'text-green-600 dark:text-green-400' : 'text-gray-600 dark:text-gray-400'}>\n\t\t\t\t\t\t\tAt least {MIN_PASSWORD_LENGTH} characters\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"flex items-center gap-2\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"flex h-4 w-4 items-center justify-center rounded-full text-[10px] {complexityChecks.hasUpper\n\t\t\t\t\t\t\t\t? 'bg-green-500 text-white'\n\t\t\t\t\t\t\t\t: 'bg-gray-300 text-gray-600 dark:bg-gray-600 dark:text-gray-400'}\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{complexityChecks.hasUpper ? '✓' : '○'}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class={complexityChecks.hasUpper ? 'text-green-600 dark:text-green-400' : 'text-gray-600 dark:text-gray-400'}>\n\t\t\t\t\t\t\tOne uppercase letter\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"flex items-center gap-2\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"flex h-4 w-4 items-center justify-center rounded-full text-[10px] {complexityChecks.hasLower\n\t\t\t\t\t\t\t\t? 'bg-green-500 text-white'\n\t\t\t\t\t\t\t\t: 'bg-gray-300 text-gray-600 dark:bg-gray-600 dark:text-gray-400'}\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{complexityChecks.hasLower ? '✓' : '○'}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class={complexityChecks.hasLower ? 'text-green-600 dark:text-green-400' : 'text-gray-600 dark:text-gray-400'}>\n\t\t\t\t\t\t\tOne lowercase letter\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"flex items-center gap-2\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"flex h-4 w-4 items-center justify-center rounded-full text-[10px] {complexityChecks.hasNumber\n\t\t\t\t\t\t\t\t? 'bg-green-500 text-white'\n\t\t\t\t\t\t\t\t: 'bg-gray-300 text-gray-600 dark:bg-gray-600 dark:text-gray-400'}\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{complexityChecks.hasNumber ? '✓' : '○'}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class={complexityChecks.hasNumber ? 'text-green-600 dark:text-green-400' : 'text-gray-600 dark:text-gray-400'}> One number </span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"flex items-center gap-2\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"flex h-4 w-4 items-center justify-center rounded-full text-[10px] {complexityChecks.hasSpecial\n\t\t\t\t\t\t\t\t? 'bg-green-500 text-white'\n\t\t\t\t\t\t\t\t: 'bg-gray-300 text-gray-600 dark:bg-gray-600 dark:text-gray-400'}\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{complexityChecks.hasSpecial ? '✓' : '○'}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class={complexityChecks.hasSpecial ? 'text-green-600 dark:text-green-400' : 'text-gray-600 dark:text-gray-400'}>\n\t\t\t\t\t\t\tOne special character (!@#$%^&*)\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n{/if}\n","<!--\n@file src/components/system/FloatingPaths.svelte\n@component\n**Animated SVG Background Pattern Component**\n\nCreates a dynamic animated background with SVG paths that draw themselves\nwith varying widths, opacities, and colors. Replicates the svelte-motion\nbehavior using native Svelte 5 $state and requestAnimationFrame.\n\n@example\n<FloatingPaths />\n\n@features\n- Automatic contrasting colors based on background\n- Customizable background color (white or dark)\n- Smooth path drawing animations\n- Responsive design\n-->\n\n<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\n\tinterface Props {\n\t\tbackground?: string;\n\t\tposition?: number;\n\t\tmirrorAnimation?: boolean;\n\t}\n\n\tconst { background = 'white', position = 1, mirrorAnimation = false }: Props = $props();\n\n\t// Generate paths with their animation configs\n\tconst pathConfigs = Array.from({ length: 36 }, (_, i) => ({\n\t\tid: i,\n\t\td: `M-${380 - i * 5 * position} -${189 + i * 6}C-${380 - i * 5 * position} -${189 + i * 6} -${312 - i * 5 * position} ${216 - i * 6} ${\n\t\t\t152 - i * 5 * position\n\t\t} ${343 - i * 6}C${616 - i * 5 * position} ${470 - i * 6} ${684 - i * 5 * position} ${875 - i * 6} ${684 - i * 5 * position} ${875 - i * 6}`,\n\t\twidth: 0.05 + i * 0.01,\n\t\tduration: 20 + (i % 15) * 0.7, // Duration in seconds (matching original)\n\t\tbaseOpacity: 0.1 + i * 0.03\n\t}));\n\n\t// Reactive state for all path animations - using array to store animation values\n\tlet pathStates = $state<Array<{ pathLength: number; opacity: number; pathOffset: number }>>(\n\t\tpathConfigs.map(() => ({\n\t\t\tpathLength: 0.3,\n\t\t\topacity: 0.3,\n\t\t\tpathOffset: mirrorAnimation ? 1 : 0\n\t\t}))\n\t);\n\n\tonMount(() => {\n\t\t// Check for reduced motion preference\n\t\tconst prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\t\tif (prefersReducedMotion) return;\n\n\t\tlet animationId: number;\n\t\tconst startTime = performance.now();\n\n\t\tconst animate = (currentTime: number) => {\n\t\t\tconst elapsed = (currentTime - startTime) / 1000; // Convert to seconds\n\n\t\t\tpathStates = pathConfigs.map((config) => {\n\t\t\t\tconst duration = config.duration;\n\t\t\t\t// Progress cycles from 0 to 1 over the duration\n\t\t\t\tconst progress = (elapsed / duration) % 1;\n\n\t\t\t\t// Create smooth sinusoidal animation for pathLength (0.3 -> 1 -> 0.3)\n\t\t\t\t// Using cosine for smooth start\n\t\t\t\tconst wave = 0.5 * (1 - Math.cos(progress * Math.PI * 2));\n\t\t\t\tconst pathLength = 0.3 + wave * 0.7; // Range: 0.3 to 1.0\n\n\t\t\t\t// Opacity animation (0.3 -> 0.6 -> 0.3)\n\t\t\t\tconst opacity = 0.3 + wave * 0.3; // Range: 0.3 to 0.6\n\n\t\t\t\t// PathOffset animation (for the \"drawing\" effect)\n\t\t\t\tconst pathOffset = mirrorAnimation ? 1 - progress : progress;\n\n\t\t\t\treturn {\n\t\t\t\t\tpathLength,\n\t\t\t\t\topacity,\n\t\t\t\t\tpathOffset\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tanimationId = requestAnimationFrame(animate);\n\t\t};\n\n\t\tanimationId = requestAnimationFrame(animate);\n\n\t\treturn () => cancelAnimationFrame(animationId);\n\t});\n</script>\n\n<div class=\"pointer-events-none absolute inset-0\">\n\t<svg\n\t\tclass=\"h-full w-full {background === 'white' ? 'text-slate-950' : 'text-white'} {mirrorAnimation ? '-scale-x-100' : ''}\"\n\t\tviewBox=\"0 0 696 316\"\n\t\tstroke-linecap=\"round\"\n\t\tfill=\"transparent\"\n\t>\n\t\t{#each pathConfigs as path, index (path.id)}\n\t\t\t{@const state = pathStates[index]}\n\t\t\t<path\n\t\t\t\td={path.d}\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstroke-width={path.width}\n\t\t\t\tstroke-opacity={state.opacity}\n\t\t\t\tpathLength=\"1\"\n\t\t\t\tstroke-dasharray={state.pathLength}\n\t\t\t\tstroke-dashoffset={state.pathOffset}\n\t\t\t/>\n\t\t{/each}\n\t</svg>\n</div>\n","<script lang=\"ts\">\n\t// Show OAuth when OAuth is enabled and an admin has sent an invitation\n\timport { publicEnv } from '@shared/stores/globalSettings.svelte';\n\timport { deserialize } from '$app/forms';\n\timport { preloadData } from '$app/navigation';\n\n\tconst { showOAuth = true } = $props();\n\n\tlet prefetched = $state(false);\n\n\tasync function prefetchFirstCollection() {\n\t\tif (prefetched) return;\n\t\tprefetched = true;\n\n\t\ttry {\n\t\t\tconst data = new FormData();\n\t\t\tconst response = await fetch('?/prefetch', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: data\n\t\t\t});\n\n\t\t\tconst result = deserialize(await response.text());\n\n\t\t\tif (result.type === 'success') {\n\t\t\t\tconst collection = (result.data as any)?.collection;\n\t\t\t\tif (collection?.path) {\n\t\t\t\t\tawait preloadData(collection.path);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Prefetch failed:', error);\n\t\t}\n\t}\n</script>\n\n{#if publicEnv?.USE_GOOGLE_OAUTH === true && showOAuth}\n\t<form id=\"oauth-login\" action=\"?/signInOAuth\" method=\"post\" class=\"flex flex-col items-center justify-center\">\n\t\t<button\n\t\t\tform=\"oauth-login\"\n\t\t\ttype=\"submit\"\n\t\t\taria-label=\"OAuth\"\n\t\t\tclass=\"preset-filled-surface-500 btn w-full sm:w-auto\"\n\t\t\tonmouseenter={prefetchFirstCollection}\n\t\t>\n\t\t\t<iconify-icon icon=\"flat-color-icons:google\" color=\"white\" width=\"20\" class=\"mt-1\"></iconify-icon>\n\t\t\t<p>OAuth</p>\n\t\t</button>\n\t</form>\n{/if}\n","<!-- \n@file src/routes/login/components/SignIn.svelte\n@component\n**SignIn component with OAuth support**\n\n### Props\n- `active`: number\n- `onClick`: () => void\n- `onPointerEnter`: () => void\n- `onBack`: () => void\n- `firstCollectionPath`: string\n\n### Features:\n - User authentication with password or OAuth\n - Dynamic language selection with debounced input field or dropdown for multiple languages\n - Demo mode support with auto-reset timer displayed when active\n - Initial form display adapts based on environment variables (`SEASON`, `DEMO`)\n - Password reset functionality\n - Two-factor authentication (2FA) support\n - Accessibility features for language selection and form navigation\n\nNote: First-user registration is now handled by /setup route (enforced by handleSetup hook)\n-->\n\n<script lang=\"ts\">\n\timport { browser } from '$app/environment';\n\timport { goto, preloadData } from '$app/navigation';\n\timport { enhance } from '$app/forms';\n\n\t// Stores\n\timport { page } from '$app/state';\n\timport type { PageData } from '../$types';\n\n\timport { Form } from '@shared/utils/Form.svelte';\n\timport { loginFormSchema, forgotFormSchema, resetFormSchema } from '@shared/utils/formSchemas';\n\n\t// Components\n\timport SiteName from '@shared/components/SiteName.svelte';\n\timport SigninIcon from './icons/SigninIcon.svelte';\n\timport FloatingInput from '@cms/components/system/inputs/floatingInput.svelte';\n\timport SveltyCMSLogo from '@cms/components/system/icons/SveltyCMS_Logo.svelte';\n\timport SveltyCMSLogoFull from '@cms/components/system/icons/SveltyCMS_LogoFull.svelte';\n\timport PasswordStrength from '@cms/components/PasswordStrength.svelte';\n\timport FloatingPaths from '@cms/components/system/FloatingPaths.svelte';\n\n\t// Skeleton\n\timport { toaster } from '@shared/stores/store.svelte';\n\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\timport OauthLogin from './OauthLogin.svelte';\n\n\t// Stores\n\timport { screen } from '@shared/stores/screenSizeStore.svelte';\n\timport { globalLoadingStore, loadingOperations } from '@shared/stores/loadingStore.svelte';\n\n\t// Props\n\tconst {\n\t\tactive = $bindable(undefined),\n\t\tonClick = () => {},\n\t\tonPointerEnter: onPointerEnterProp = () => {},\n\t\tonBack = () => {},\n\t\tfirstCollectionPath = ''\n\t}: {\n\t\tactive?: number;\n\t\tonClick?: () => void;\n\t\tonPointerEnter?: (e: PointerEvent) => void;\n\t\tonBack?: () => void;\n\t\tfirstCollectionPath?: string;\n\t} = $props();\n\n\t// State management\n\tlet PWforgot = $state(false);\n\tlet PWreset = $state(false);\n\tconst showPassword = $state(false);\n\tlet formElement: HTMLFormElement | null = $state(null);\n\tconst tabIndex = $state(1);\n\n\t// Pre-calculate tab indices\n\tconst emailTabIndex = 1;\n\tconst passwordTabIndex = 2;\n\tconst confirmPasswordTabIndex = 3;\n\tconst forgotPasswordTabIndex = 4;\n\tconst pageData = page.data as PageData;\n\n\t// URL handling\n\tconst current_url = $state(browser ? window.location.href : '');\n\n\t// State for improved spinner control\n\tlet isSubmitting = $state(false);\n\tlet isAuthenticating = $state(false);\n\n\t// 2FA state\n\tlet requires2FA = $state(false);\n\tlet twoFAUserId = $state('');\n\tlet twoFACode = $state('');\n\tlet useBackupCode = $state(false);\n\tlet isVerifying2FA = $state(false);\n\n\tlet prefetched = $state(false);\n\n\tasync function prefetchFirstCollection() {\n\t\tif (prefetched || !firstCollectionPath) return;\n\t\tprefetched = true;\n\n\t\ttry {\n\t\t\tawait preloadData(firstCollectionPath);\n\t\t} catch (error) {\n\t\t\tconsole.error('Prefetch failed:', error);\n\t\t}\n\t}\n\n\t// Login form setup\n\t// Login form setup\n\tconst loginForm = new Form({ email: '', password: '', isToken: false }, loginFormSchema);\n\tconst loginSubmit = loginForm.enhance({\n\t\tonSubmit: ({ cancel }) => {\n\t\t\tif (loginForm.data.email) {\n\t\t\t\tloginForm.data.email = loginForm.data.email.toLowerCase();\n\t\t\t}\n\n\t\t\t// handle login form submission\n\t\t\tif (Object.keys(loginForm.errors).length > 0) {\n\t\t\t\tcancel();\n\t\t\t\tformElement?.classList.add('wiggle');\n\t\t\t\tsetTimeout(() => formElement?.classList.remove('wiggle'), 300);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set submitting state for better UX\n\t\t\tisSubmitting = true;\n\t\t\tisAuthenticating = true;\n\t\t\tglobalLoadingStore.startLoading(loadingOperations.authentication);\n\t\t},\n\n\t\tonResult: async ({ result, update }) => {\n\t\t\t// Reset submitting state\n\t\t\tisSubmitting = false;\n\n\t\t\tif (result.type === 'redirect') {\n\t\t\t\t// Keep authenticating state for redirect phase\n\t\t\t\tisAuthenticating = true;\n\n\t\t\t\t// Store flash message in sessionStorage for display after redirect\n\t\t\t\tsessionStorage.setItem(\n\t\t\t\t\t'flashMessage',\n\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\ttitle: 'Welcome Back!',\n\t\t\t\t\t\tdescription: 'Successfully signed in.',\n\t\t\t\t\t\tduration: 4000\n\t\t\t\t\t})\n\t\t\t\t);\n\n\t\t\t\t// Use window.location.href for reliable redirect after auth\n\t\t\t\tconst redirectUrl = (result.location as string) || '/';\n\t\t\t\twindow.location.href = redirectUrl;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if 2FA is required\n\t\t\tif (result.type === 'failure' && result.data?.requires2FA) {\n\t\t\t\trequires2FA = true;\n\t\t\t\ttwoFAUserId = result.data.userId || '';\n\t\t\t\tisAuthenticating = false;\n\t\t\t\tglobalLoadingStore.stopLoading(loadingOperations.authentication);\n\n\t\t\t\t// Show 2FA required message\n\t\t\t\ttoaster.warning({\n\t\t\t\t\ttitle: 'Two-Factor Authentication Required',\n\t\t\t\t\tdescription: 'Please enter your authentication code to continue'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Reset all states on error\n\t\t\tisAuthenticating = false;\n\t\t\tglobalLoadingStore.stopLoading(loadingOperations.authentication);\n\n\t\t\tif (result.type === 'failure' || result.type === 'error') {\n\t\t\t\tconst errorMessage =\n\t\t\t\t\tresult.type === 'failure' ? result.data?.message || 'Invalid email or password' : result.error?.message || 'An unexpected error occurred';\n\n\t\t\t\ttoaster.error({\n\t\t\t\t\ttitle: 'Sign In Failed',\n\t\t\t\t\tdescription: errorMessage\n\t\t\t\t});\n\n\t\t\t\t// add wiggle animation to form element\n\t\t\t\tformElement?.classList.add('wiggle');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tformElement?.classList.remove('wiggle');\n\t\t\t\t}, 300);\n\t\t\t}\n\n\t\t\tawait update();\n\t\t}\n\t});\n\n\t// Forgot Form setup\n\t// Forgot Form setup\n\tconst forgotForm = new Form({ email: '' }, forgotFormSchema);\n\tconst forgotSubmit = forgotForm.enhance({\n\t\tonSubmit: ({ cancel }) => {\n\t\t\tif (forgotForm.data.email) {\n\t\t\t\tforgotForm.data.email = forgotForm.data.email.toLowerCase();\n\t\t\t}\n\n\t\t\tif (Object.keys(forgotForm.errors).length > 0) {\n\t\t\t\tcancel();\n\t\t\t\tformElement?.classList.add('wiggle');\n\t\t\t\tsetTimeout(() => formElement?.classList.remove('wiggle'), 300);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisSubmitting = true;\n\t\t},\n\n\t\tonResult: async ({ result, update }) => {\n\t\t\tisSubmitting = false;\n\n\t\t\tif (result.type === 'error') {\n\t\t\t\t// Transform the array of error messages into a single string\n\t\t\t\t// Form class puts errors in forgotForm.errors\n\t\t\t\t// But result.type 'error' is usually 500 or network error\n\t\t\t\t// If it's 400 with errors, it's 'failure'\n\n\t\t\t\t// For now, just show generic error or message from result\n\t\t\t\ttoaster.info({ description: result.error?.message || 'An error occurred' });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (result.type === 'success') {\n\t\t\t\t// Check if user exists (success with data)\n\t\t\t\tif (result.data && result.data.userExists === true) {\n\t\t\t\t\tPWreset = true;\n\t\t\t\t\ttoaster.success({ description: m.signin_forgottontoast() });\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback or specific logic for User check\n\t\t\t\t\tif (result.data?.status === false) {\n\t\t\t\t\t\t// User does not exist case handled by backend returning success: false or similar?\n\t\t\t\t\t\t// Actually, standard SvelteKit 'success' means 200 OK.\n\t\t\t\t\t\t// If backend returns { userExists: false }, we handle it.\n\t\t\t\t\t\tPWreset = false;\n\t\t\t\t\t\ttoaster.error({ description: 'No account found with this email address.' });\n\t\t\t\t\t\tformElement?.classList.add('wiggle');\n\t\t\t\t\t\tsetTimeout(() => formElement?.classList.remove('wiggle'), 300);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Default success\n\t\t\t\t\t\tPWreset = true;\n\t\t\t\t\t\ttoaster.success({\n\t\t\t\t\t\t\ttitle: 'Email Sent',\n\t\t\t\t\t\t\tdescription: 'Password reset instructions have been sent to your email'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (result.type === 'failure') {\n\t\t\t\tconst errorMessage = result.data?.message || 'Password reset failed';\n\n\t\t\t\ttoaster.error({\n\t\t\t\t\ttitle: 'Reset Failed',\n\t\t\t\t\tdescription: errorMessage\n\t\t\t\t});\n\n\t\t\t\tformElement?.classList.add('wiggle');\n\t\t\t\tsetTimeout(() => formElement?.classList.remove('wiggle'), 300);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait update();\n\t\t}\n\t});\n\n\t// Reset Form setup\n\t// Reset Form setup\n\tconst resetForm = new Form({ password: '', confirm_password: '', token: '', email: '' }, resetFormSchema);\n\tconst resetSubmit = resetForm.enhance({\n\t\tonSubmit: ({ cancel }) => {\n\t\t\tif (Object.keys(resetForm.errors).length > 0) {\n\t\t\t\tcancel();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tisSubmitting = true;\n\t\t},\n\n\t\tonResult: async ({ result, update }) => {\n\t\t\tisSubmitting = false;\n\t\t\tPWreset = false;\n\t\t\tPWforgot = false;\n\n\t\t\tif (result.type === 'success' || result.type === 'redirect') {\n\t\t\t\ttoaster.success({\n\t\t\t\t\ttitle: 'Password Reset Successful',\n\t\t\t\t\tdescription: 'You can now sign in with your new password'\n\t\t\t\t});\n\t\t\t\tif (result.type === 'redirect') {\n\t\t\t\t\tif (result.location) goto(result.location);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait update();\n\n\t\t\tif (result.type === 'failure') {\n\t\t\t\tformElement?.classList.add('wiggle');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tformElement?.classList.remove('wiggle');\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t}\n\t});\n\n\t// 2FA Functions\n\tasync function verify2FA() {\n\t\tif (!twoFACode.trim() || isVerifying2FA) return;\n\n\t\tif (!useBackupCode && twoFACode.length !== 6) {\n\t\t\ttoaster.error({ description: m.twofa_error_invalid_code() });\n\t\t\treturn;\n\t\t}\n\n\t\tif (useBackupCode && twoFACode.length < 8) {\n\t\t\ttoaster.error({ description: 'Invalid backup code format' });\n\t\t\treturn;\n\t\t}\n\n\t\tisVerifying2FA = true;\n\n\t\ttry {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('userId', twoFAUserId);\n\t\t\tformData.append('code', twoFACode.trim());\n\n\t\t\tconst response = await fetch('?/verify2FA', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: formData\n\t\t\t});\n\n\t\t\t// Parse response\n\t\t\tif (response.ok) {\n\t\t\t\t// Success - redirect will be handled by SvelteKit\n\t\t\t\ttoaster.success({\n\t\t\t\t\ttitle: 'Verification Successful',\n\t\t\t\t\tdescription: 'Redirecting to your dashboard...'\n\t\t\t\t});\n\n\t\t\t\t// The server will redirect on successful verification\n\t\t\t\twindow.location.reload();\n\t\t\t} else {\n\t\t\t\tconst errorData = await response.json();\n\t\t\t\tthrow new Error(errorData.message || m.twofa_error_invalid_code());\n\t\t\t}\n\t\t} catch (error) {\n\t\t\ttoaster.error({ description: error instanceof Error ? error.message : m.twofa_error_invalid_code() });\n\t\t} finally {\n\t\t\tisVerifying2FA = false;\n\t\t}\n\t}\n\n\tfunction handle2FAInput(event: Event) {\n\t\tconst input = event.target as HTMLInputElement;\n\t\tlet value = input.value;\n\n\t\tif (!useBackupCode) {\n\t\t\t// For TOTP codes, only allow 6 digits\n\t\t\tvalue = value.replace(/\\D/g, '').slice(0, 6);\n\t\t} else {\n\t\t\t// For backup codes, allow alphanumeric and remove spaces\n\t\t\tvalue = value\n\t\t\t\t.replace(/[^a-zA-Z0-9]/g, '')\n\t\t\t\t.toLowerCase()\n\t\t\t\t.slice(0, 10);\n\t\t}\n\n\t\ttwoFACode = value;\n\t}\n\n\tfunction toggle2FACodeType() {\n\t\tuseBackupCode = !useBackupCode;\n\t\ttwoFACode = '';\n\t}\n\n\tfunction back2FAToLogin() {\n\t\trequires2FA = false;\n\t\ttwoFAUserId = '';\n\t\ttwoFACode = '';\n\t\tuseBackupCode = false;\n\t\tisVerifying2FA = false;\n\t}\n\n\t// Side effect for URL token handling\n\t$effect(() => {\n\t\tif (browser && current_url.includes('/login') && current_url.includes('token')) {\n\t\t\tconst urlObj = new URL(current_url);\n\t\t\tconst tokenParam = urlObj.searchParams.get('token') || '';\n\t\t\tconst emailParam = urlObj.searchParams.get('email') || '';\n\t\t\tif (tokenParam && emailParam) {\n\t\t\t\t// Directly update the reset form with token and email values\n\t\t\t\tresetForm.data.token = tokenParam;\n\t\t\t\tresetForm.data.email = emailParam;\n\n\t\t\t\t// Set flags for reset flow\n\t\t\t\tPWforgot = true;\n\t\t\t\tPWreset = true;\n\t\t\t}\n\t\t}\n\t});\n\n\t// Function to handle back button click\n\tfunction handleBack(event: Event) {\n\t\tevent.stopPropagation();\n\t\tif (PWforgot || PWreset) {\n\t\t\tPWforgot = false;\n\t\t\tPWreset = false;\n\t\t} else {\n\t\t\tonBack();\n\t\t}\n\t}\n\n\t// Function to handle icon click\n\tfunction handleFormClick(event: Event) {\n\t\tevent.stopPropagation();\n\t\tonClick();\n\t}\n\n\t// Function to handle forgot password click\n\tfunction handleForgotPassword(event: Event) {\n\t\tevent.stopPropagation();\n\t\tPWforgot = true;\n\t\tPWreset = false;\n\t}\n\n\t// Class computations\n\tconst isActive = $derived(active === 0);\n\tconst isInactive = $derived(active !== undefined && active !== 0);\n\tconst isHover = $derived(active === undefined || active === 1);\n\n\tconst baseClasses = 'hover relative flex items-center';\n\n\t// Prefetch first collection data when active\n\t$effect(() => {\n\t\tif (active === 0) {\n\t\t\tprefetchFirstCollection();\n\t\t}\n\t});\n</script>\n\n<section\n\tonclick={handleFormClick}\n\tonkeydown={(e) => e.key === 'Enter' && onClick?.()}\n\tonpointerenter={onPointerEnterProp}\n\trole=\"button\"\n\ttabindex={tabIndex}\n\tclass={baseClasses}\n\tclass:active={isActive}\n\tclass:inactive={isInactive}\n\tclass:hover={isHover}\n>\n\t{#if active === 0}\n\t\t<!-- Background pattern  -->\n\t\t<div class=\"relative flex min-h-screen w-full items-center justify-center overflow-hidden\">\n\t\t\t{#if screen.isDesktop}\n\t\t\t\t<div class=\"absolute inset-0 z-0\">\n\t\t\t\t\t<FloatingPaths position={1} background=\"white\" />\n\t\t\t\t\t<FloatingPaths position={-1} background=\"white\" />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<div class=\"absolute left-1/2 top-[20%] hidden -translate-x-1/2 -translate-y-1/2 transform xl:block\">\n\t\t\t\t<SveltyCMSLogoFull />\n\t\t\t</div>\n\t\t\t<div class=\"z-0 mx-auto mb-[5%] mt-[15%] w-full overflow-y-auto rounded-md bg-white p-4 lg:w-4/5\" class:hide={active !== 0}>\n\t\t\t\t<div class=\"mb-1 flex flex-row gap-2\">\n\t\t\t\t\t<SveltyCMSLogo className=\"w-14\" fill=\"red\" />\n\n\t\t\t\t\t<h1 class=\"text-3xl font-bold text-black lg:text-4xl\">\n\t\t\t\t\t\t<div class=\"text-xs text-surface-300\"><SiteName highlight=\"CMS\" textClass=\"text-black\" /></div>\n\t\t\t\t\t\t{#if !PWforgot && !PWreset}\n\t\t\t\t\t\t\t<div class=\"lg:-mt-1\">{m.form_signin()}</div>\n\t\t\t\t\t\t{:else if PWforgot && !PWreset}\n\t\t\t\t\t\t\t<div class=\"text-2xl lg:-mt-1 lg:text-4xl\">{m.signin_forgottenpassword()}</div>\n\t\t\t\t\t\t{:else if PWforgot && PWreset}\n\t\t\t\t\t\t\t<div class=\"lg:-mt-1\">{m.form_resetpassword()}</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Required with Back button -->\n\t\t\t\t<div class=\"-mt-2 flex items-center justify-end gap-2 text-right text-xs text-error-500\">\n\t\t\t\t\t{m.form_required()}\n\n\t\t\t\t\t<button onclick={handleBack} aria-label=\"Back\" class=\"btn-icon preset-outlined-secondary-500 rounded-full\">\n\t\t\t\t\t\t<iconify-icon icon=\"ri:arrow-right-line\" width=\"20\" class=\"text-black\"></iconify-icon>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Sign In (first-user signup now handled by /setup) -->\n\t\t\t\t{#if !PWforgot && !PWreset}\n\t\t\t\t\t<form\n\t\t\t\t\t\tid=\"signin-form\"\n\t\t\t\t\t\tmethod=\"POST\"\n\t\t\t\t\t\taction=\"?/signIn\"\n\t\t\t\t\t\tuse:enhance={loginSubmit}\n\t\t\t\t\t\tbind:this={formElement}\n\t\t\t\t\t\tclass=\"flex w-full flex-col gap-3\"\n\t\t\t\t\t\tclass:hide={active !== 0}\n\t\t\t\t\t\tinert={active !== 0}\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- Email field -->\n\t\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\t\tid=\"emailsignIn\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\ttabindex={emailTabIndex}\n\t\t\t\t\t\t\tautocomplete=\"username\"\n\t\t\t\t\t\t\tautocapitalize=\"none\"\n\t\t\t\t\t\t\tspellcheck={false}\n\t\t\t\t\t\t\tbind:value={loginForm.data.email}\n\t\t\t\t\t\t\tlabel={m.email()}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\ticon=\"mdi:email\"\n\t\t\t\t\t\t\tdata-testid=\"signin-email\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if loginForm.errors.email}<span class=\"invalid text-xs text-error-500\">{loginForm.errors.email[0]}</span>{/if}\n\n\t\t\t\t\t\t<!-- Password field -->\n\t\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\t\tid=\"passwordsignIn\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\t\ttabindex={passwordTabIndex}\n\t\t\t\t\t\t\tbind:value={loginForm.data.password}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t{showPassword}\n\t\t\t\t\t\t\tlabel={m.form_password()}\n\t\t\t\t\t\t\ticon=\"mdi:lock\"\n\t\t\t\t\t\t\ticonColor=\"black\"\n\t\t\t\t\t\t\ttextColor=\"black\"\n\t\t\t\t\t\t\tdata-testid=\"signin-password\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if loginForm.errors.password}<span class=\"invalid text-xs text-error-500\">{loginForm.errors.password[0]}</span>{/if}\n\t\t\t\t\t</form>\n\n\t\t\t\t\t<div class=\"mt-4 flex flex-col items-center gap-2 sm:flex-row sm:justify-between\">\n\t\t\t\t\t\t<!-- Row 1 -->\n\t\t\t\t\t\t<div class=\"flex w-full justify-between gap-2 sm:w-auto\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tform=\"signin-form\"\n\t\t\t\t\t\t\t\tclass=\"preset-filled-surface-500 btn w-full text-white sm:w-auto\"\n\t\t\t\t\t\t\t\taria-label={m.form_signin()}\n\t\t\t\t\t\t\t\tdata-testid=\"signin-submit\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{m.form_signin()}\n\t\t\t\t\t\t\t\t<!-- Optimized loading indicators -->\n\t\t\t\t\t\t\t\t{#if isSubmitting || isAuthenticating}\n\t\t\t\t\t\t\t\t\t<img src=\"/Spinner.svg\" alt=\"\" aria-hidden=\"true\" decoding=\"async\" class=\"ml-4 h-6 invert filter\" />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<!-- OAuth Login -->\n\t\t\t\t\t\t\t<OauthLogin showOAuth={pageData.showOAuth} />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Row 2 -->\n\t\t\t\t\t\t<div class=\"mt-4 flex w-full justify-between sm:mt-0 sm:w-auto\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclass=\"btn preset-outlined-surface-500 w-full text-black sm:w-auto\"\n\t\t\t\t\t\t\t\taria-label={m.signin_forgottenpassword()}\n\t\t\t\t\t\t\t\ttabindex={forgotPasswordTabIndex}\n\t\t\t\t\t\t\t\tonclick={handleForgotPassword}\n\t\t\t\t\t\t\t\tdata-testid=\"signin-forgot-password\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{m.signin_forgottenpassword()}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- Two-Factor Authentication -->\n\t\t\t\t{#if requires2FA && !PWforgot && !PWreset}\n\t\t\t\t\t<div class=\"flex w-full flex-col gap-4\">\n\t\t\t\t\t\t<!-- 2FA Header -->\n\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t<div class=\"mb-3\">\n\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:shield-key\" width=\"48\" class=\"mx-auto text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h3 class=\"h3 mb-2\">{m.twofa_verify_title()}</h3>\n\t\t\t\t\t\t\t<p class=\"text-sm text-surface-600 dark:text-surface-300\">\n\t\t\t\t\t\t\t\t{useBackupCode ? 'Enter your backup recovery code:' : m.twofa_verify_description()}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- Code Input -->\n\t\t\t\t\t\t<div class=\"flex flex-col gap-3\">\n\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tbind:value={twoFACode}\n\t\t\t\t\t\t\t\t\toninput={handle2FAInput}\n\t\t\t\t\t\t\t\t\tonkeydown={(e) => e.key === 'Enter' && verify2FA()}\n\t\t\t\t\t\t\t\t\tplaceholder={useBackupCode ? 'Enter backup code' : m.twofa_code_placeholder()}\n\t\t\t\t\t\t\t\t\tclass=\"input text-center font-mono tracking-wider\"\n\t\t\t\t\t\t\t\t\tclass:text-2xl={!useBackupCode}\n\t\t\t\t\t\t\t\t\tclass:text-lg={useBackupCode}\n\t\t\t\t\t\t\t\t\tmaxlength={useBackupCode ? 10 : 6}\n\t\t\t\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<!-- Character counter for backup codes -->\n\t\t\t\t\t\t\t\t{#if useBackupCode}\n\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-center text-xs text-surface-500\">\n\t\t\t\t\t\t\t\t\t\t{twoFACode.length}/10\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Toggle Code Type -->\n\t\t\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonclick={toggle2FACodeType}\n\t\t\t\t\t\t\t\t\tclass=\"text-sm text-primary-500 underline hover:text-primary-600\"\n\t\t\t\t\t\t\t\t\taria-label={useBackupCode ? m.twofa_use_authenticator() : m.twofa_use_backup_code()}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{useBackupCode ? m.twofa_use_authenticator() : m.twofa_use_backup_code()}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Action Buttons -->\n\t\t\t\t\t\t\t<div class=\"flex gap-3\">\n\t\t\t\t\t\t\t\t<button type=\"button\" onclick={back2FAToLogin} class=\"btn preset-tonal -surface-500 flex-1\" aria-label={m.button_back()}>\n\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:arrow-left\" width=\"20\" class=\"mr-2\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t{m.button_back()}\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonclick={verify2FA}\n\t\t\t\t\t\t\t\t\tdisabled={!twoFACode.trim() ||\n\t\t\t\t\t\t\t\t\t\tisVerifying2FA ||\n\t\t\t\t\t\t\t\t\t\t(!useBackupCode && twoFACode.length !== 6) ||\n\t\t\t\t\t\t\t\t\t\t(useBackupCode && twoFACode.length < 8)}\n\t\t\t\t\t\t\t\t\tclass=\"btn preset-filled-primary-500 flex-1\"\n\t\t\t\t\t\t\t\t\taria-label={m.twofa_verify_button()}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{#if isVerifying2FA}\n\t\t\t\t\t\t\t\t\t\t<img src=\"/Spinner.svg\" alt=\"Loading..\" class=\"mr-2 h-5 invert filter\" />\n\t\t\t\t\t\t\t\t\t\t{m.twofa_verifying()}\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:check\" width=\"20\" class=\"mr-2\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t{m.twofa_verify_button()}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<!-- Help Text -->\n\t\t\t\t\t\t\t<div class=\"mt-2 text-center\">\n\t\t\t\t\t\t\t\t<div class=\"text-xs text-surface-500\">\n\t\t\t\t\t\t\t\t\t{#if !useBackupCode}\n\t\t\t\t\t\t\t\t\t\t<p>Enter the 6-digit code from your authenticator app</p>\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t<p>Enter one of your 8-character backup codes</p>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- Forgotten Password -->\n\t\t\t\t{#if PWforgot && !PWreset}\n\t\t\t\t\t<form\n\t\t\t\t\t\tmethod=\"POST\"\n\t\t\t\t\t\taction=\"?/forgotPW\"\n\t\t\t\t\t\tuse:enhance={forgotSubmit}\n\t\t\t\t\t\tbind:this={formElement}\n\t\t\t\t\t\tclass=\"flex w-full flex-col gap-3\"\n\t\t\t\t\t\tclass:hide={active !== 0}\n\t\t\t\t\t\tinert={active !== 0}\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- Email field -->\n\t\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\t\tid=\"emailforgot\"\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\ttabindex={emailTabIndex}\n\t\t\t\t\t\t\tautocomplete=\"email\"\n\t\t\t\t\t\t\tautocapitalize=\"none\"\n\t\t\t\t\t\t\tspellcheck={false}\n\t\t\t\t\t\t\tbind:value={forgotForm.data.email}\n\t\t\t\t\t\t\tlabel={m.email()}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\ticon=\"mdi:email\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if forgotForm.errors.email}\n\t\t\t\t\t\t\t<span class=\"invalid text-xs text-error-500\">\n\t\t\t\t\t\t\t\t{forgotForm.errors.email[0]}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if Object.keys(forgotForm.errors).length > 0 && !forgotForm.errors.email}\n\t\t\t\t\t\t\t<span class=\"invalid text-xs text-error-500\">\n\t\t\t\t\t\t\t\t{Object.values(forgotForm.errors).flat().join(', ')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<div class=\"mt-4 flex items-center justify-between\">\n\t\t\t\t\t\t\t<button type=\"submit\" class=\"preset-filled-surface-500 text-white btn\" aria-label={m.form_resetpassword()}>\n\t\t\t\t\t\t\t\t{m.form_resetpassword()}\n\t\t\t\t\t\t\t\t<!-- Optimized loading indicators -->\n\t\t\t\t\t\t\t\t{#if isSubmitting}\n\t\t\t\t\t\t\t\t\t<img src=\"/Spinner.svg\" alt=\"\" aria-hidden=\"true\" decoding=\"async\" class=\"ml-4 h-6 invert filter\" />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<!-- Back button  -->\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclass=\"btn-icon preset-filled-surface-500 rounded-full\"\n\t\t\t\t\t\t\t\taria-label=\"Back\"\n\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\tPWforgot = false;\n\t\t\t\t\t\t\t\t\tPWreset = false;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:arrow-left-circle\" width=\"38\"></iconify-icon>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- Reset Password -->\n\t\t\t\t{#if PWforgot && PWreset}\n\t\t\t\t\t<form\n\t\t\t\t\t\tmethod=\"POST\"\n\t\t\t\t\t\taction=\"?/resetPW\"\n\t\t\t\t\t\tuse:enhance={resetSubmit}\n\t\t\t\t\t\tbind:this={formElement}\n\t\t\t\t\t\tclass=\"flex w-full flex-col gap-3\"\n\t\t\t\t\t\tclass:hide={active !== 0}\n\t\t\t\t\t\tinert={active !== 0}\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- Hidden fields -->\n\t\t\t\t\t\t<input type=\"hidden\" name=\"email\" bind:value={resetForm.data.email} />\n\t\t\t\t\t\t<input type=\"hidden\" name=\"token\" bind:value={resetForm.data.token} />\n\n\t\t\t\t\t\t<!-- Password field -->\n\t\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\t\tid=\"passwordreset\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\ttabindex={passwordTabIndex}\n\t\t\t\t\t\t\tbind:value={resetForm.data.password}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t{showPassword}\n\t\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t\t\tlabel={m.form_password()}\n\t\t\t\t\t\t\ticon=\"mdi:lock\"\n\t\t\t\t\t\t\ticonColor=\"black\"\n\t\t\t\t\t\t\ttextColor=\"black\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if resetForm.errors.password}\n\t\t\t\t\t\t\t<span class=\"invalid text-xs text-error-500\">\n\t\t\t\t\t\t\t\t{resetForm.errors.password[0]}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<!-- Confirm Password field -->\n\t\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\t\tid=\"confirm_passwordreset\"\n\t\t\t\t\t\t\tname=\"confirm_password\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\ttabindex={confirmPasswordTabIndex}\n\t\t\t\t\t\t\tbind:value={resetForm.data.confirm_password}\n\t\t\t\t\t\t\t{showPassword}\n\t\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t\t\tlabel={m.confirm_password?.() || m.form_confirmpassword?.()}\n\t\t\t\t\t\t\ticon=\"mdi:lock\"\n\t\t\t\t\t\t\ticonColor=\"black\"\n\t\t\t\t\t\t\ttextColor=\"black\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<!-- Password Strength Indicator -->\n\t\t\t\t\t\t<PasswordStrength password={resetForm.data.password} confirmPassword={resetForm.data.confirm_password} />\n\t\t\t\t\t\t<!-- Registration Token -->\n\t\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\t\tid=\"tokenresetPW\"\n\t\t\t\t\t\t\tname=\"token\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tbind:value={resetForm.data.token}\n\t\t\t\t\t\t\t{showPassword}\n\t\t\t\t\t\t\tlabel={m.registration_token?.() || m.signin_registrationtoken?.()}\n\t\t\t\t\t\t\ticon=\"mdi:lock\"\n\t\t\t\t\t\t\ticonColor=\"black\"\n\t\t\t\t\t\t\ttextColor=\"black\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{#if resetForm.errors.token}\n\t\t\t\t\t\t\t<span class=\"invalid text-xs text-error-500\">\n\t\t\t\t\t\t\t\t{resetForm.errors.token[0]}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if Object.keys(resetForm.errors).length > 0 && !resetForm.errors.token}\n\t\t\t\t\t\t\t<span class=\"invalid text-xs text-error-500\">\n\t\t\t\t\t\t\t\t{Object.values(resetForm.errors).flat().join(', ')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<input type=\"email\" name=\"email\" bind:value={resetForm.data.email} hidden />\n\n\t\t\t\t\t\t<div class=\"mt-4 flex items-center justify-between\">\n\t\t\t\t\t\t\t<button type=\"submit\" aria-label={m.signin_savenewpassword()} class=\"btn preset-filled-surface-500 ml-2 mt-6 text-white\">\n\t\t\t\t\t\t\t\t{m.signin_savenewpassword()}\n\t\t\t\t\t\t\t\t<!-- Optimized loading indicators -->\n\t\t\t\t\t\t\t\t{#if isSubmitting}\n\t\t\t\t\t\t\t\t\t<img src=\"/Spinner.svg\" alt=\"\" aria-hidden=\"true\" decoding=\"async\" class=\"ml-4 h-6\" />\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<!-- Back button  -->\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\taria-label={m.button_back()}\n\t\t\t\t\t\t\t\tclass=\"preset-filled-surface-500 btn-icon\"\n\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\tPWforgot = false;\n\t\t\t\t\t\t\t\t\tPWreset = false;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:arrow-left-circle\" width=\"38\"></iconify-icon>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<SigninIcon show={active === 1 || active === undefined} onClick={handleFormClick} />\n</section>\n\n<style>\n\t.hide {\n\t\ttransition: 0s;\n\t\topacity: 0;\n\t}\n\tsection {\n\t\t--width: 0%;\n\t\tbackground: white;\n\t\tflex-grow: 1;\n\t\twidth: var(--width);\n\t\ttransition: 0.4s;\n\t}\n\t.active {\n\t\t--width: 90%;\n\t}\n\t.inactive {\n\t\t--width: 10%;\n\t}\n\t.hover:hover {\n\t\tborder-top-right-radius: 5% 50%;\n\t\tborder-bottom-right-radius: 5% 50%;\n\t\twidth: calc(var(--width) + 10%);\n\t}\n\n\t:global(.wiggle) {\n\t\tanimation: wiggle 0.3s forwards;\n\t}\n\t@keyframes wiggle {\n\t\tfrom {\n\t\t\ttransform: translateX(0);\n\t\t}\n\t\t25% {\n\t\t\ttransform: translateX(150px);\n\t\t}\n\t\t50% {\n\t\t\ttransform: translateX(-75px);\n\t\t}\n\t\t75% {\n\t\t\ttransform: translateX(200px);\n\t\t}\n\t\t100% {\n\t\t\ttransform: translateX(0px);\n\t\t}\n\t}\n</style>\n","<!--\n@file src/routes/login/components/icons/SignupIcon.svelte\n@component\n**SignupIcon component**\n-->\n\n<script lang=\"ts\">\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\tlet { show = $bindable(true), disabled = false, onClick = (_event: MouseEvent | KeyboardEvent) => {} } = $props();\n\n\tfunction handleClick(event: MouseEvent) {\n\t\tif (disabled) return;\n\t\tevent.stopPropagation(); // Prevent event bubbling\n\t\tonClick(event);\n\t}\n\n\tfunction handleKeyDown(event: KeyboardEvent) {\n\t\tif (disabled) return;\n\t\tif (event.key === 'Enter') {\n\t\t\tevent.stopPropagation(); // Prevent event bubbling\n\t\t\tonClick(event);\n\t\t}\n\t}\n</script>\n\n<div\n\tclass=\"overflow icon dark:text-dark absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] transition-all duration-300\"\n\tclass:hide={!show}\n\tclass:pointer-events-none={!show || disabled}\n\tclass:opacity-50={disabled}\n>\n\t<div onclick={handleClick} onkeydown={handleKeyDown} role=\"button\" tabindex={disabled ? -1 : 0} class=\"flex cursor-pointer flex-col items-center\">\n\t\t<div class=\"relative w-max rounded-full border-4 border-white p-3\">\n\t\t\t<svg\n\t\t\t\tclass=\"over aspect-square h-12\"\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\t\t\t\tviewBox=\"0 0 50 50\"\n\t\t\t\tfill=\"#FFFFFF\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\td=\"M19.875 0.40625C15.203125 0.492188 12.21875 2.378906 10.9375 5.3125C9.714844 8.105469 9.988281 11.632813 10.875 15.28125C10.398438 15.839844 10.019531 16.589844 10.15625 17.71875C10.304688 18.949219 10.644531 19.824219 11.125 20.4375C11.390625 20.773438 11.738281 20.804688 12.0625 20.96875C12.238281 22.015625 12.53125 23.0625 12.96875 23.9375C13.21875 24.441406 13.503906 24.90625 13.78125 25.28125C13.90625 25.449219 14.085938 25.546875 14.21875 25.6875C14.226563 26.921875 14.230469 27.949219 14.125 29.25C13.800781 30.035156 13.042969 30.667969 11.8125 31.28125C10.542969 31.914063 8.890625 32.5 7.21875 33.21875C5.546875 33.9375 3.828125 34.8125 2.46875 36.1875C1.109375 37.5625 0.148438 39.449219 0 41.9375L-0.0625 43L25 43L24.34375 41L2.25 41C2.53125 39.585938 3.058594 38.449219 3.90625 37.59375C4.972656 36.515625 6.425781 35.707031 8 35.03125C9.574219 34.355469 11.230469 33.820313 12.6875 33.09375C14.144531 32.367188 15.492188 31.410156 16.0625 29.875L16.125 29.625C16.277344 27.949219 16.21875 26.761719 16.21875 25.3125L16.21875 24.71875L15.6875 24.4375C15.777344 24.484375 15.5625 24.347656 15.375 24.09375C15.1875 23.839844 14.957031 23.476563 14.75 23.0625C14.335938 22.234375 13.996094 21.167969 13.90625 20.3125L13.8125 19.5L12.96875 19.4375C12.960938 19.4375 12.867188 19.449219 12.6875 19.21875C12.507813 18.988281 12.273438 18.480469 12.15625 17.5C12.058594 16.667969 12.480469 16.378906 12.4375 16.40625L13.09375 16L12.90625 15.28125C11.964844 11.65625 11.800781 8.363281 12.78125 6.125C13.757813 3.894531 15.75 2.492188 19.90625 2.40625C19.917969 2.40625 19.925781 2.40625 19.9375 2.40625C21.949219 2.414063 23.253906 3.003906 23.625 3.65625L23.875 4.0625L24.34375 4.125C25.734375 4.320313 26.53125 4.878906 27.09375 5.65625C27.65625 6.433594 27.96875 7.519531 28.0625 8.71875C28.25 11.117188 27.558594 13.910156 27.125 15.21875L26.875 16L27.5625 16.40625C27.519531 16.378906 27.945313 16.667969 27.84375 17.5C27.726563 18.480469 27.492188 18.988281 27.3125 19.21875C27.132813 19.449219 27.039063 19.4375 27.03125 19.4375L26.1875 19.5L26.09375 20.3125C26 21.175781 25.652344 22.234375 25.25 23.0625C25.046875 23.476563 24.839844 23.839844 24.65625 24.09375C24.472656 24.347656 24.28125 24.488281 24.375 24.4375L23.84375 24.71875L23.84375 25.3125C23.84375 26.757813 23.785156 27.949219 23.9375 29.625L23.9375 29.75L24 29.875C24.320313 30.738281 24.882813 31.605469 25.8125 32.15625L26.84375 30.4375C26.421875 30.1875 26.144531 29.757813 25.9375 29.25C25.832031 27.949219 25.835938 26.921875 25.84375 25.6875C25.972656 25.546875 26.160156 25.449219 26.28125 25.28125C26.554688 24.902344 26.816406 24.4375 27.0625 23.9375C27.488281 23.0625 27.796875 22.011719 27.96875 20.96875C28.28125 20.804688 28.617188 20.765625 28.875 20.4375C29.355469 19.824219 29.695313 18.949219 29.84375 17.71875C29.976563 16.625 29.609375 15.902344 29.15625 15.34375C29.644531 13.757813 30.269531 11.195313 30.0625 8.5625C29.949219 7.125 29.582031 5.691406 28.71875 4.5C27.929688 3.40625 26.648438 2.609375 25.03125 2.28125C23.980469 0.917969 22.089844 0.40625 19.90625 0.40625 Z M 38 26C31.382813 26 26 31.382813 26 38C26 44.617188 31.382813 50 38 50C44.617188 50 50 44.617188 50 38C50 31.382813 44.617188 26 38 26 Z M 38 28C43.535156 28 48 32.464844 48 38C48 43.535156 43.535156 48 38 48C32.464844 48 28 43.535156 28 38C28 32.464844 32.464844 28 38 28 Z M 37 32L37 37L32 37L32 39L37 39L37 44L39 44L39 39L44 39L44 37L39 37L39 32Z\"\n\t\t\t\t\tfill=\"#FFFFFF\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</div>\n\t\t<p class=\"text-center font-semibold uppercase text-white\">{m.form_signup()}</p>\n\t</div>\n</div>\n\n<style>\n\t.hide {\n\t\tanimation: _hide 0.3s forwards;\n\t}\n\t@keyframes _hide {\n\t\tfrom {\n\t\t\topacity: 1;\n\t\t}\n\t\tto {\n\t\t\topacity: 0;\n\t\t\ttop: 70%;\n\t\t}\n\t}\n</style>\n","<!--\n@file src/routes/login/components/SignUp.svelte\n@component\n**SignUP with optional OAuth support**\n\n### Props\n- `active`: boolean\n- `isInviteFlow`: boolean\n- `token`: string\n- `invitedEmail`: string\n- `inviteError`: string\n- `onClick`: () => void\n- `onPointerEnter`: () => void\n- `onBack`: () => void\n- `firstCollectionPath`: string\n\n### Features:\n - Dynamic language selection with a debounced input field or dropdown for multiple languages\n - Demo mode support with auto-reset timer \n - Initial form display adapts based on environment variables (`SEASON`, `DEMO`, and `firstUserExists`)\n - Reset state functionality for easy return to initial screen\n - Accessibility features for language selection and form navigation\n-->\n\n<script lang=\"ts\">\n\timport { logger } from '@shared/utils/logger';\n\timport { browser } from '$app/environment';\n\timport { enhance } from '$app/forms';\n\timport { preloadData } from '$app/navigation';\n\n\timport type { PageData } from '../$types';\n\n\t// Stores\n\timport { page } from '$app/state';\n\n\timport { Form } from '@shared/utils/Form.svelte';\n\timport { signUpFormSchema } from '@shared/utils/formSchemas';\n\timport { toaster } from '@shared/stores/store.svelte';\n\t// Components\n\timport PasswordStrength from '@cms/components/PasswordStrength.svelte';\n\timport SiteName from '@shared/components/SiteName.svelte';\n\timport SveltyCMSLogo from '@cms/components/system/icons/SveltyCMS_Logo.svelte';\n\timport SveltyCMSLogoFull from '@cms/components/system/icons/SveltyCMS_LogoFull.svelte';\n\timport FloatingInput from '@cms/components/system/inputs/floatingInput.svelte';\n\timport SignupIcon from './icons/SignupIcon.svelte';\n\timport FloatingPaths from '@cms/components/system/FloatingPaths.svelte';\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\t// Screen size store\n\timport { screen } from '@shared/stores/screenSizeStore.svelte';\n\n\t// Props\n\tconst {\n\t\tactive = $bindable(undefined),\n\t\tisInviteFlow = false,\n\t\ttoken = '',\n\t\tinvitedEmail = '',\n\t\tinviteError = '',\n\t\tonClick = () => {},\n\t\tonPointerEnter = () => {},\n\t\tonBack = () => {},\n\t\tfirstCollectionPath = ''\n\t} = $props();\n\n\tconst pageData = page.data as PageData;\n\tconst firstUserExists = pageData.firstUserExists;\n\tconst showOAuth = pageData.showOAuth;\n\tconst hasExistingOAuthUsers = pageData.hasExistingOAuthUsers;\n\n\t// State management\n\tconst tabIndex = $state(1);\n\tlet response = $state(undefined);\n\tlet formElement: HTMLFormElement | null = $state(null);\n\tlet showPassword = $state(false);\n\tlet isSubmitting = $state(false);\n\tlet isRedirecting = $state(false);\n\n\tlet prefetched = $state(false);\n\n\tasync function prefetchFirstCollection() {\n\t\tif (prefetched || !firstCollectionPath) return;\n\t\tprefetched = true;\n\n\t\ttry {\n\t\t\tawait preloadData(firstCollectionPath);\n\t\t} catch (error) {\n\t\t\tconsole.error('Prefetch failed:', error);\n\t\t}\n\t}\n\n\t// Pre-calculate tab indices\n\tconst usernameTabIndex = 1;\n\tconst emailTabIndex = 2;\n\tconst passwordTabIndex = 3;\n\tconst confirmPasswordTabIndex = 4;\n\tconst tokenTabIndex = 5;\n\n\t// Form setup\n\t// Form setup\n\tconst signUpForm = new Form({ username: '', email: '', password: '', confirm_password: '', token: '' }, signUpFormSchema);\n\n\tconst signUpSubmit = signUpForm.enhance({\n\t\tonSubmit: ({ cancel }) => {\n\t\t\tif (Object.keys(signUpForm.errors).length > 0) {\n\t\t\t\tcancel();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tisSubmitting = true;\n\t\t},\n\n\t\tonResult: async ({ result, update }) => {\n\t\t\tisSubmitting = false;\n\n\t\t\tif (result.type === 'redirect') {\n\t\t\t\tisRedirecting = true;\n\n\t\t\t\ttoaster.success({\n\t\t\t\t\ttitle: 'Account Created!',\n\t\t\t\t\tdescription: 'Welcome to SveltyCMS. Redirecting to your dashboard...'\n\t\t\t\t});\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tisRedirecting = false;\n\t\t\t\t}, 100);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisRedirecting = false;\n\n\t\t\tif (result.type === 'failure' || result.type === 'error') {\n\t\t\t\tconst errorMessage =\n\t\t\t\t\tresult.type === 'failure' ? result.data?.message || 'Failed to create account' : result.error?.message || 'An unexpected error occurred';\n\n\t\t\t\ttoaster.error({\n\t\t\t\t\ttitle: 'Sign Up Failed',\n\t\t\t\t\tdescription: errorMessage\n\t\t\t\t});\n\n\t\t\t\tformElement?.classList.add('wiggle');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tformElement?.classList.remove('wiggle');\n\t\t\t\t}, 300);\n\t\t\t}\n\n\t\t\tif (result.type === 'success') {\n\t\t\t\tresponse = result.data?.message;\n\t\t\t\ttoaster.success({\n\t\t\t\t\ttitle: 'Account Created',\n\t\t\t\t\tdescription: result.data?.message || 'Your account has been successfully created'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tawait update();\n\t\t}\n\t});\n\n\t// Reactive form values for easier access\n\tconst currentFormToken = $derived(signUpForm.data.token);\n\n\t// URL parameter handling - update params when URL changes\n\tconst params = $derived(browser ? new URL(window.location.href).searchParams : new URLSearchParams(''));\n\n\t// Initialize form with invite data when in invite flow\n\t$effect(() => {\n\t\tif (isInviteFlow && invitedEmail && signUpForm.data.email !== invitedEmail) {\n\t\t\tsignUpForm.data.email = invitedEmail;\n\t\t}\n\t\tif (isInviteFlow && token && signUpForm.data.token !== token) {\n\t\t\tsignUpForm.data.token = token;\n\t\t}\n\t\t// Handle URL parameters for invite tokens (both new and legacy formats)\n\t\tif (browser && !isInviteFlow) {\n\t\t\tconst inviteToken = params.get('invite_token') || params.get('regToken');\n\t\t\tif (inviteToken && inviteToken !== signUpForm.data.token) {\n\t\t\t\tsignUpForm.data.token = inviteToken;\n\t\t\t}\n\t\t}\n\t\t// Also check if the form was pre-filled by the server (invalid token case)\n\t\tif (browser && signUpForm.data.token && !isInviteFlow) {\n\t\t\tlogger.debug('Form token pre-filled by server:', signUpForm.data.token);\n\t\t}\n\t});\n\n\t// Event handlers\n\tfunction handleOAuth() {\n\t\t// Check if user needs an invitation token\n\t\t// All users now require invite tokens (first user goes through /setup)\n\t\tif (!isInviteFlow && !hasExistingOAuthUsers && !currentFormToken) {\n\t\t\t// Show a helpful message\n\t\t\talert(\n\t\t\t\t'⚠️ Please enter your invitation token first before using Google OAuth signup. OAuth registration requires an invitation from an administrator.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst form = document.createElement('form');\n\t\tform.method = 'post';\n\n\t\t// Use signInOAuth action when in invite flow to preserve invite token\n\t\tif (isInviteFlow && token) {\n\t\t\t// Build the action URL with the invite token as a query parameter\n\t\t\tform.action = `?/signInOAuth&invite_token=${encodeURIComponent(token)}`;\n\t\t} else if (currentFormToken) {\n\t\t\t// User has entered a token in the form, pass it along\n\t\t\tform.action = `?/signInOAuth&invite_token=${encodeURIComponent(currentFormToken)}`;\n\t\t} else {\n\t\t\tform.action = '?/signInOAuth';\n\t\t}\n\n\t\tdocument.body.appendChild(form);\n\t\tform.submit();\n\t\tdocument.body.removeChild(form);\n\t\tsetTimeout(() => {}, 300);\n\t}\n\n\tfunction handleBack(event: Event) {\n\t\tevent.stopPropagation();\n\t\tonBack();\n\t}\n\n\tfunction handlePointerEnter() {\n\t\tonPointerEnter();\n\t}\n\n\tfunction handleFormClick(event: Event) {\n\t\tevent.stopPropagation();\n\t\tonClick();\n\t}\n\n\t// Class computations\n\tconst isActive = $derived(active === 1);\n\tconst isInactive = $derived(active !== undefined && active !== 1);\n\tconst isHover = $derived(active === undefined || active === 0);\n\n\tconst baseClasses = 'hover relative flex items-center overflow-y-auto';\n\n\t// Prefetch first collection data when active\n\t$effect(() => {\n\t\tif (active === 1) {\n\t\t\tprefetchFirstCollection();\n\t\t}\n\t});\n</script>\n\n<section\n\tonclick={handleFormClick}\n\tonkeydown={(e) => e.key === 'Enter' && onClick?.()}\n\tonpointerenter={handlePointerEnter}\n\trole=\"button\"\n\ttabindex={tabIndex}\n\tclass={baseClasses}\n\tclass:active={isActive}\n\tclass:inactive={isInactive}\n\tclass:hover={isHover}\n>\n\t{#if active === 1}\n\t\t<div class=\"relative flex min-h-screen w-full items-center justify-center overflow-hidden\">\n\t\t\t{#if screen.isDesktop}\n\t\t\t\t<div class=\"absolute inset-0 z-0\">\n\t\t\t\t\t<FloatingPaths position={1} background=\"dark\" mirrorAnimation />\n\t\t\t\t\t<FloatingPaths position={-1} background=\"dark\" mirrorAnimation />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t\t<!-- CSS Logo -->\n\t\t\t<div class=\"absolute left-1/2 top-[20%] hidden -translate-x-1/2 -translate-y-1/2 transform xl:block\">\n\t\t\t\t<SveltyCMSLogoFull />\n\t\t\t</div>\n\t\t\t<div class=\"relative z-10 mx-auto mb-[5%] mt-[15%] w-full rounded-md bg-[#242728] p-4 lg:w-4/5\" class:hide={active !== 1}>\n\t\t\t\t<div class=\"mb-4 flex flex-row gap-2\">\n\t\t\t\t\t<SveltyCMSLogo className=\"w-14\" fill=\"red\" />\n\n\t\t\t\t\t<h1 class=\"text-3xl font-bold text-white lg:text-4xl\">\n\t\t\t\t\t\t<div class=\"text-xs text-surface-200\"><SiteName highlight=\"CMS\" /></div>\n\t\t\t\t\t\t<div class=\"wrap-break-word lg:-mt-1\">\n\t\t\t\t\t\t\t{#if isInviteFlow}\n\t\t\t\t\t\t\t\t{m.form_signup()}\n\t\t\t\t\t\t\t\t<span class=\"text-2xl text-primary-500 sm:text-3xl\">: Complete Invitation</span>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t{m.form_signup()}\n\t\t\t\t\t\t\t\t<span class=\"text-2xl capitalize text-primary-500 sm:text-3xl\">: New User</span>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Required with Back button -->\n\t\t\t\t<div class=\"-mt-2 flex items-center justify-end gap-2 text-right text-xs text-error-500\">\n\t\t\t\t\t{m.form_required()}\n\n\t\t\t\t\t<button onclick={handleBack} aria-label=\"Back\" class=\"btn-icon rounded-full preset-outlined-secondary-500\">\n\t\t\t\t\t\t<iconify-icon icon=\"ri:arrow-left-line\" width=\"20\" class=\"text-white\"></iconify-icon>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- <SuperDebug data={$form} display={dev} /> -->\n\t\t\t\t<form\n\t\t\t\t\tmethod=\"post\"\n\t\t\t\t\taction=\"?/signUp\"\n\t\t\t\t\tuse:enhance={signUpSubmit}\n\t\t\t\t\tbind:this={formElement}\n\t\t\t\t\tclass=\"items flex flex-col gap-3\"\n\t\t\t\t\tclass:hide={active !== 1}\n\t\t\t\t\tinert={active !== 1}\n\t\t\t\t>\n\t\t\t\t\t<!-- Username field -->\n\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\tid=\"usernamesignUp\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\ttabindex={usernameTabIndex}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tbind:value={signUpForm.data.username}\n\t\t\t\t\t\tlabel={m.username()}\n\t\t\t\t\t\tminlength={2}\n\t\t\t\t\t\tmaxlength={24}\n\t\t\t\t\t\ticon=\"mdi:user-circle\"\n\t\t\t\t\t\ticonColor=\"white\"\n\t\t\t\t\t\ttextColor=\"white\"\n\t\t\t\t\t\tinputClass=\"text-white\"\n\t\t\t\t\t\tautocomplete=\"username\"\n\t\t\t\t\t/>\n\t\t\t\t\t{#if signUpForm.errors.username}<span class=\"text-xs text-error-500\">{signUpForm.errors.username[0]}</span>{/if}\n\n\t\t\t\t\t<!-- Email field -->\n\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\tid=\"emailsignUp\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\ttabindex={emailTabIndex}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tautocomplete=\"email\"\n\t\t\t\t\t\tautocapitalize=\"none\"\n\t\t\t\t\t\tspellcheck={false}\n\t\t\t\t\t\tbind:value={signUpForm.data.email}\n\t\t\t\t\t\tlabel={m.email()}\n\t\t\t\t\t\tminlength={5}\n\t\t\t\t\t\tmaxlength={50}\n\t\t\t\t\t\ticon=\"mdi:email\"\n\t\t\t\t\t\ticonColor=\"white\"\n\t\t\t\t\t\ttextColor=\"white\"\n\t\t\t\t\t\tinputClass=\"text-white {isInviteFlow ? 'opacity-70' : ''}\"\n\t\t\t\t\t\tdisabled={isInviteFlow}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if signUpForm.errors.email}<span class=\"text-xs text-error-500\">{signUpForm.errors.email[0]}</span>{/if}\n\t\t\t\t\t{#if isInviteFlow}<span class=\"text-xs text-primary-400\">✓ Email pre-filled from invitation</span>{/if}\n\n\t\t\t\t\t<!-- Hidden email input to ensure form submission when disabled -->\n\t\t\t\t\t{#if isInviteFlow}\n\t\t\t\t\t\t<input type=\"hidden\" name=\"email\" value={signUpForm.data.email} />\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<!-- Password field -->\n\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\tid=\"passwordsignUp\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\ttabindex={passwordTabIndex}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tbind:value={signUpForm.data.password}\n\t\t\t\t\t\tbind:showPassword\n\t\t\t\t\t\tlabel={m.form_password()}\n\t\t\t\t\t\tminlength={8}\n\t\t\t\t\t\tmaxlength={50}\n\t\t\t\t\t\ticon=\"mdi:password\"\n\t\t\t\t\t\ticonColor=\"white\"\n\t\t\t\t\t\ttextColor=\"white\"\n\t\t\t\t\t\tpasswordIconColor=\"white\"\n\t\t\t\t\t\tinputClass=\"text-white\"\n\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t/>\n\t\t\t\t\t{#if signUpForm.errors.password}\n\t\t\t\t\t\t<span class=\"text-xs text-error-500\">{signUpForm.errors.password[0]}</span>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t<!-- Password Confirm -->\n\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\tid=\"confirm_passwordsignUp\"\n\t\t\t\t\t\tname=\"confirm_password\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\ttabindex={confirmPasswordTabIndex}\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tbind:value={signUpForm.data.confirm_password}\n\t\t\t\t\t\tbind:showPassword\n\t\t\t\t\t\tlabel={m.confirm_password?.() || m.form_confirmpassword?.()}\n\t\t\t\t\t\tminlength={8}\n\t\t\t\t\t\tmaxlength={50}\n\t\t\t\t\t\ticon=\"mdi:password\"\n\t\t\t\t\t\ticonColor=\"white\"\n\t\t\t\t\t\ttextColor=\"white\"\n\t\t\t\t\t\tpasswordIconColor=\"white\"\n\t\t\t\t\t\tinputClass=\"text-white\"\n\t\t\t\t\t\tautocomplete=\"new-password\"\n\t\t\t\t\t/>\n\t\t\t\t\t{#if signUpForm.errors.confirm_password}\n\t\t\t\t\t\t<span class=\"text-xs text-error-500\">{signUpForm.errors.confirm_password[0]}</span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t<!-- Password Strength Indicator -->\n\t\t\t\t\t<PasswordStrength password={signUpForm.data.password} confirmPassword={signUpForm.data.confirm_password} />\n\n\t\t\t\t\t{#if !isInviteFlow}\n\t\t\t\t\t\t<!-- Registration Token (hidden when using invite flow, always required now since first user uses /setup) -->\n\t\t\t\t\t\t<FloatingInput\n\t\t\t\t\t\t\tid=\"tokensignUp\"\n\t\t\t\t\t\t\tname=\"token\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\ttabindex={tokenTabIndex}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tbind:value={signUpForm.data.token}\n\t\t\t\t\t\t\tlabel={m.registration_token?.() || m.signup_registrationtoken?.()}\n\t\t\t\t\t\t\tminlength={36}\n\t\t\t\t\t\t\tmaxlength={36}\n\t\t\t\t\t\t\ticon=\"mdi:key-chain\"\n\t\t\t\t\t\t\ticonColor=\"white\"\n\t\t\t\t\t\t\ttextColor=\"white\"\n\t\t\t\t\t\t\tpasswordIconColor=\"white\"\n\t\t\t\t\t\t\tinputClass=\"text-white\"\n\t\t\t\t\t\t\tautocomplete=\"one-time-code\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{#if signUpForm.errors.token}\n\t\t\t\t\t\t\t<span class=\"text-xs text-error-500\">{signUpForm.errors.token[0]}</span>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#if signUpForm.data.token && inviteError}\n\t\t\t\t\t\t\t<span class=\"text-xs text-warning-400\">⚠️ Token was pre-filled from URL and will be validated against the server</span>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{:else if isInviteFlow}\n\t\t\t\t\t\t<!-- Hidden token field for invite flow -->\n\t\t\t\t\t\t<input type=\"hidden\" name=\"token\" value={token} />\n\t\t\t\t\t\t<span class=\"text-xs text-primary-400\">✓ Using invitation token</span>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if response}\n\t\t\t\t\t\t<span class=\"text-xs text-error-500\">{response}</span>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if inviteError && !signUpForm.data.token}\n\t\t\t\t\t\t<span class=\"text-xs text-error-500\">{inviteError}</span>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if !showOAuth}\n\t\t\t\t\t\t<!-- Email SignIn only -->\n\t\t\t\t\t\t<button type=\"submit\" class=\"btn bg-white text-black mt-4 uppercase\" aria-label={isInviteFlow ? 'Accept Invitation' : m.form_signup()}>\n\t\t\t\t\t\t\t{isInviteFlow ? 'Accept Invitation & Create Account' : m.form_signup()}\n\t\t\t\t\t\t\t{#if isSubmitting || isRedirecting}<img src=\"/Spinner.svg\" alt=\"\" aria-hidden=\"true\" decoding=\"async\" class=\"ml-4 h-6\" />{/if}\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<!-- Email + OAuth signin  -->\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"btn-group mt-4 border border-secondary-500 text-white [&>*+*]:border-secondary-500\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tclass=\"btn w-3/4 rounded-none bg-surface-200 text-black hover:text-white\"\n\t\t\t\t\t\t\t\taria-label={isInviteFlow ? 'Accept Invitation' : m.form_signup()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"w-full text-black hover:text-white\">\n\t\t\t\t\t\t\t\t\t{isInviteFlow ? 'Accept Invitation' : m.form_signup()}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<!-- Loading indicators -->\n\t\t\t\t\t\t\t\t{#if isSubmitting || isRedirecting}<img src=\"/Spinner.svg\" alt=\"\" aria-hidden=\"true\" decoding=\"async\" class=\"ml-4 h-6\" />{/if}\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<button type=\"button\" onclick={handleOAuth} aria-label=\"OAuth\" class=\"btn flex w-1/4 items-center justify-center\">\n\t\t\t\t\t\t\t\t<iconify-icon icon=\"flat-color-icons:google\" color=\"white\" width=\"20\" class=\"mr-0.5 sm:mr-2\"></iconify-icon>\n\t\t\t\t\t\t\t\t<span class=\"\">OAuth</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{#if !isInviteFlow && firstUserExists && !hasExistingOAuthUsers}\n\t\t\t\t\t\t\t<p class=\"mt-2 text-xs text-surface-400\">\n\t\t\t\t\t\t\t\t💡 Note: Both email/password and Google OAuth registration require an invitation token from an administrator.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t{:else if !isInviteFlow && hasExistingOAuthUsers}\n\t\t\t\t\t\t\t<p class=\"mt-2 text-xs text-surface-400\">💡 Note: New user registration requires an invitation token from an administrator.</p>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{/if}\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<SignupIcon show={active === 0 || active === undefined} onClick={handleFormClick} />\n</section>\n\n<style>\n\t.hide {\n\t\ttransition: 0s;\n\t\topacity: 0;\n\t}\n\tsection {\n\t\t--width: 0%;\n\t\tbackground: #242728;\n\t\tflex-grow: 1;\n\t\twidth: var(--width);\n\t\ttransition: 0.4s;\n\t}\n\t.active {\n\t\t--width: 90%;\n\t}\n\t.inactive {\n\t\t--width: 10%;\n\t}\n\t.hover:hover {\n\t\tborder-top-left-radius: 5% 50%;\n\t\tborder-bottom-left-radius: 5% 50%;\n\t\twidth: calc(var(--width) + 10%);\n\t}\n\n\t:global(.wiggle) {\n\t\tanimation: wiggle 0.3s forwards;\n\t}\n\t@keyframes wiggle {\n\t\tfrom {\n\t\t\ttransform: translateX(0);\n\t\t}\n\t\t25% {\n\t\t\ttransform: translateX(150px);\n\t\t}\n\t\t50% {\n\t\t\ttransform: translateX(-75px);\n\t\t}\n\t\t75% {\n\t\t\ttransform: translateX(200px);\n\t\t}\n\t\t100% {\n\t\t\ttransform: translateX(0px);\n\t\t}\n\t}\n</style>\n","<!--\n@file src/routes/login/+page.svelte \n@component\n**Authentication Form Component handles both SignIn and SignUp functionality for the SveltyCMS**\n\n### Props:\n - `data`: { firstUserExists: boolean, demoMode: boolean, showDatabaseError: boolean }\n - `dev`: boolean\n \n### Features:\n - Dual SignIn and SignUp functionality with dynamic form switching\n - Dynamic language selection with a debounced input field or dropdown for multiple languages\n - Demo mode support with auto-reset timer displayed when active\n - Initial form display adapts based on environment variables (`SEASON`, `DEMO`, and `firstUserExists`)\n - Reset state functionality for easy return to initial screen\n - Accessibility features for language selection and form navigation\n-->\n\n<script lang=\"ts\">\n\timport { getPublicSetting, publicEnv } from '@shared/stores/globalSettings.svelte';\n\n\t// Components\n\timport Seasons from '@cms/components/system/icons/Seasons.svelte';\n\timport SveltyCMSLogoFull from '@cms/components/system/icons/SveltyCMS_LogoFull.svelte';\n\timport SignIn from './components/SignIn.svelte';\n\timport SignUp from './components/SignUp.svelte';\n\timport VersionCheck from '@shared/components/VersionCheck.svelte';\n\n\t// Stores\n\timport { systemLanguage } from '@shared/stores/store.svelte';\n\timport { getLanguageName } from '@shared/utils/languageUtils';\n\timport { locales as availableLocales } from '@shared/paraglide/runtime';\n\n\t// Skeleton UI\n\timport { Menu, Portal } from '@skeletonlabs/skeleton-svelte';\n\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\t// Props\n\tconst { data } = $props();\n\n\t// Derive firstUserExists to make it reactive (fixes state_referenced_locally warning)\n\tconst firstUserExists = $derived(data.firstUserExists);\n\n\t// Check for reset password URL parameters (initially false, updated by effect)\n\tlet hasResetParams = $state(false);\n\n\t// Set Initial active state - always starts undefined, will be set by user interaction\n\tlet active: undefined | 0 | 1 = $state(undefined);\n\n\t// Update active state when URL parameters are detected\n\t$effect(() => {\n\t\tif (typeof window !== 'undefined') {\n\t\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\t\tconst token = urlParams.get('token');\n\t\t\tconst email = urlParams.get('email');\n\t\t\tconst hasParams = !!(token && email);\n\n\t\t\tif (hasParams !== hasResetParams) {\n\t\t\t\thasResetParams = hasParams;\n\t\t\t\tif (hasResetParams) {\n\t\t\t\t\tactive = 0; // Show SignIn component for reset password\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// Background state - mutable for user interactions\n\tlet background = $state('#242728');\n\n\t// Initialize background based on conditions\n\t$effect(() => {\n\t\t// Only set initial background, don't override user interactions\n\t\tif (active === undefined && !hasResetParams) {\n\t\t\tif (publicEnv?.DEMO) {\n\t\t\t\tbackground = '#242728';\n\t\t\t} else if (publicEnv?.SEASONS) {\n\t\t\t\tbackground = 'white';\n\t\t\t} else if (firstUserExists) {\n\t\t\t\tbackground = 'white';\n\t\t\t} else {\n\t\t\t\tbackground = '#242728';\n\t\t\t}\n\t\t}\n\t});\n\n\t// Update background when hasResetParams changes\n\t$effect(() => {\n\t\tif (hasResetParams) {\n\t\t\tbackground = 'white'; // White background for reset password form\n\t\t}\n\t});\n\n\tlet timeRemaining = $state({ minutes: 0, seconds: 0 });\n\tlet searchQuery = $state('');\n\tlet isDropdownOpen = $state(false);\n\tlet searchInput: HTMLInputElement | null = $state(null);\n\tlet isTransitioning = $state(false);\n\tlet debounceTimeout: ReturnType<typeof setTimeout> | undefined = $state();\n\n\t// Derived state using $derived rune\n\tconst availableLanguages = $derived([...availableLocales].sort((a, b) => getLanguageName(a, 'en').localeCompare(getLanguageName(b, 'en'))));\n\n\tconst filteredLanguages = $derived(\n\t\tavailableLanguages.filter(\n\t\t\t(lang: string) =>\n\t\t\t\tgetLanguageName(lang, systemLanguage.value).toLowerCase().includes(searchQuery.toLowerCase()) ||\n\t\t\t\tgetLanguageName(lang, 'en').toLowerCase().includes(searchQuery.toLowerCase())\n\t\t)\n\t);\n\n\t// Ensure a valid language is always used\n\tconst currentLanguage = $derived(systemLanguage.value && availableLocales.includes(systemLanguage.value) ? systemLanguage.value : 'en');\n\n\t// Language selection\n\tfunction handleLanguageSelection(lang: string) {\n\t\tclearTimeout(debounceTimeout);\n\t\tdebounceTimeout = setTimeout(() => {\n\t\t\t// Set cookie via store (bridge to ParaglideJS)\n\t\t\tsystemLanguage.set(lang as (typeof systemLanguage)['value']);\n\t\t\tisDropdownOpen = false;\n\t\t\tsearchQuery = '';\n\t\t}, 100); // Reduced delay for faster feedback\n\t}\n\n\t// Function to handle clicks outside of the language selector\n\tfunction handleClickOutside(event: MouseEvent) {\n\t\tconst target = event.target as HTMLElement;\n\t\tif (!target.closest('.language-selector')) {\n\t\t\tisDropdownOpen = false;\n\t\t\tsearchQuery = '';\n\t\t}\n\t}\n\n\t// Side effects using $effect rune\n\t$effect(() => {\n\t\tif (typeof window !== 'undefined' && isDropdownOpen) {\n\t\t\twindow.addEventListener('click', handleClickOutside);\n\t\t\t// Focus search input when dropdown opens\n\t\t\tsetTimeout(() => searchInput?.focus(), 0);\n\t\t\treturn () => window.removeEventListener('click', handleClickOutside);\n\t\t}\n\t});\n\n\t// Demo mode timer management\n\tfunction calculateTimeRemaining() {\n\t\tconst now = new Date();\n\t\tconst minutes = now.getMinutes();\n\t\tconst seconds = now.getSeconds();\n\t\tconst timePassed = (minutes % 10) * 60 + seconds;\n\t\tconst timeRemainingInSeconds = 600 - timePassed;\n\t\treturn {\n\t\t\tminutes: Math.floor(timeRemainingInSeconds / 60),\n\t\t\tseconds: timeRemainingInSeconds % 60\n\t\t};\n\t}\n\n\t// Function to update the time remaining every second\n\tfunction updateTimeRemaining() {\n\t\ttimeRemaining = calculateTimeRemaining();\n\t}\n\n\t// Set up the interval to update the countdown every second\n\t$effect(() => {\n\t\tlet interval: ReturnType<typeof setInterval> | undefined;\n\t\tif (getPublicSetting('DEMO')) {\n\t\t\tupdateTimeRemaining();\n\t\t\tinterval = setInterval(updateTimeRemaining, 1000);\n\t\t\treturn () => {\n\t\t\t\tif (interval) clearInterval(interval);\n\t\t\t};\n\t\t}\n\t});\n\n\t// State management functions\n\tfunction resetToInitialState() {\n\t\tif (isTransitioning) return;\n\t\tisTransitioning = true;\n\t\tactive = undefined;\n\t\tbackground = data.demoMode ? '#242728' : getPublicSetting('SEASONS') ? '#242728' : firstUserExists ? 'white' : '#242728';\n\t\tsetTimeout(() => {\n\t\t\tisTransitioning = false;\n\t\t}, 300);\n\t}\n\n\t// Special case for the first user on fresh installation\n\tfunction handleSignInClick(event?: Event) {\n\t\tif (event) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\t\tif (isTransitioning) return;\n\t\tisTransitioning = true;\n\n\t\tif (!firstUserExists) {\n\t\t\tactive = 1; // Show SignUp for fresh installation\n\t\t\tbackground = '#242728';\n\t\t} else {\n\t\t\tactive = 0; // Show SignIn for existing users\n\t\t\tbackground = 'white';\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tisTransitioning = false;\n\t\t}, 400); // Match CSS transition duration\n\t}\n\n\t// Handle SignUp click\n\tfunction handleSignUpClick(event?: Event) {\n\t\tif (event) {\n\t\t\tevent.stopPropagation();\n\t\t}\n\t\tif (isTransitioning) return;\n\t\tisTransitioning = true;\n\t\tactive = 1;\n\t\tbackground = '#242728';\n\t\tsetTimeout(() => {\n\t\t\tisTransitioning = false;\n\t\t}, 400); // Match CSS transition duration\n\t}\n\n\t// Handle pointer enter events\n\tfunction handleSignInPointerEnter() {\n\t\tif (active === undefined && !data.demoMode && !getPublicSetting('SEASONS')) {\n\t\t\tbackground = 'white';\n\t\t}\n\t}\n\n\tfunction handleSignUpPointerEnter() {\n\t\tif (active === undefined && !data.demoMode && !getPublicSetting('SEASONS')) {\n\t\t\tbackground = '#242728';\n\t\t}\n\t}\n</script>\n\n<div class={`flex min-h-lvh w-full overflow-y-auto bg-${background} transition-colors duration-300`}>\n\t<!-- Seasons (always present, opacity/position managed) -->\n\t<div\n\t\tclass=\"pointer-events-none fixed inset-0 z-10 transition-all duration-300\"\n\t\tclass:opacity-0={active === undefined}\n\t\tclass:opacity-100={active !== undefined}\n\t>\n\t\t<Seasons />\n\t</div>\n\n\t<!-- Database Error Display -->\n\t{#if data.showDatabaseError}\n\t\t<div class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4\">\n\t\t\t<div class=\"max-w-2xl rounded-lg bg-white p-8 shadow-xl\">\n\t\t\t\t<div class=\"mb-4 flex items-center gap-3\">\n\t\t\t\t\t<svg class=\"h-8 w-8 text-error-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<h2 class=\"text-2xl font-bold text-error-500\">{m.db_error_title()}</h2>\n\t\t\t\t</div>\n\n\t\t\t\t<p class=\"mb-4 text-lg\">{m.db_error_description()}</p>\n\n\t\t\t\t<div class=\"mb-4 rounded-lg bg-surface-200 p-4\">\n\t\t\t\t\t<p class=\"font-semibold\">{m.db_error_reason_label()}</p>\n\t\t\t\t\t<p class=\"text-sm\">{data.errorReason}</p>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"mb-6\">\n\t\t\t\t\t<h3 class=\"mb-2 font-semibold\">{m.db_error_solutions_title()}</h3>\n\t\t\t\t\t<ul class=\"list-inside list-disc space-y-1 text-sm\">\n\t\t\t\t\t\t<li>{m.db_error_solution_1()}</li>\n\t\t\t\t\t\t<li>{m.db_error_solution_2()}</li>\n\t\t\t\t\t\t<li>{m.db_error_solution_3()}</li>\n\t\t\t\t\t\t<li>{m.db_error_solution_4()}</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\n\t\t\t\t{#if data.canReset}\n\t\t\t\t\t<div class=\"flex gap-4\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonclick={async () => {\n\t\t\t\t\t\t\t\tif (confirm(m.db_error_reset_confirm())) {\n\t\t\t\t\t\t\t\t\tconst response = await fetch('/api/setup/reset', { method: 'POST' });\n\t\t\t\t\t\t\t\t\tconst result = await response.json();\n\t\t\t\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\t\t\t\twindow.location.href = '/setup';\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\talert('Failed to reset setup: ' + result.error);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclass=\"preset-filled-warning-500 btn\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{m.db_error_reset_setup()}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button type=\"button\" onclick={() => window.location.reload()} class=\"preset-filled-secondary-500 btn\">\n\t\t\t\t\t\t\t{m.db_error_refresh_page()}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- SignIn and SignUp Forms -->\n\t<SignIn\n\t\tbind:active\n\t\tonClick={handleSignInClick}\n\t\tonPointerEnter={handleSignInPointerEnter}\n\t\tonBack={resetToInitialState}\n\t\tfirstCollectionPath={data.firstCollectionPath || ''}\n\t/>\n\n\t<SignUp\n\t\tbind:active\n\t\tisInviteFlow={data.isInviteFlow || false}\n\t\ttoken={data.token || ''}\n\t\tinvitedEmail={data.invitedEmail || ''}\n\t\tinviteError={data.inviteError || ''}\n\t\tonClick={handleSignUpClick}\n\t\tonPointerEnter={handleSignUpPointerEnter}\n\t\tonBack={resetToInitialState}\n\t\tfirstCollectionPath={data.firstCollectionPath || ''}\n\t/>\n\n\t{#if active == undefined}\n\t\t{#if data.demoMode}\n\t\t\t<!-- DEMO MODE -->\n\t\t\t<div\n\t\t\t\tclass=\"absolute bottom-2 left-1/2 flex min-w-[350px] -translate-x-1/2 -translate-y-1/2 transform flex-col items-center justify-center rounded-xl bg-error-500 p-3 text-center text-white transition-opacity duration-300 sm:bottom-12\"\n\t\t\t\tclass:opacity-50={isTransitioning}\n\t\t\t\taria-live=\"polite\"\n\t\t\t\taria-atomic=\"true\"\n\t\t\t\trole=\"status\"\n\t\t\t\taria-label=\"Demo mode active. Timer showing time remaining until next reset.\"\n\t\t\t>\n\t\t\t\t<p class=\"text-2xl font-bold\">{m.login_demo_title()}</p>\n\t\t\t\t<p>{m.login_demo_message()}</p>\n\t\t\t\t<p class=\"text-xl font-bold\">\n\t\t\t\t\t{m.login_demo_nextreset()}\n\t\t\t\t\t<!-- Announce remaining time in an accessible format -->\n\t\t\t\t\t<span aria-label=\"Time remaining: {timeRemaining.minutes} minutes and {timeRemaining.seconds} seconds\">\n\t\t\t\t\t\t{timeRemaining.minutes}:{timeRemaining.seconds < 10 ? `0${timeRemaining.seconds}` : timeRemaining.seconds}\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- CMS Logo -->\n\t\t<div class=\"absolute left-1/2 top-1/4 -translate-x-1/2 -translate-y-1/2 transform items-center justify-center\">\n\t\t\t<SveltyCMSLogoFull />\n\t\t</div>\n\n\t\t<!-- Language Select -->\n\t\t<div\n\t\t\tclass=\"language-selector absolute bottom-1/4 left-1/2 -translate-x-1/2 transform transition-opacity duration-300\"\n\t\t\tclass:opacity-50={isTransitioning}\n\t\t>\n\t\t\t<Menu positioning={{ placement: 'top', gutter: 10 }}>\n\t\t\t\t<Menu.Trigger\n\t\t\t\t\tclass=\"flex w-30 items-center justify-between gap-2 rounded-full border-2 bg-[#242728] px-4 py-2 text-white transition-colors duration-300 hover:bg-[#363a3b] focus:ring-2\"\n\t\t\t\t\taria-label=\"Select language\"\n\t\t\t\t>\n\t\t\t\t\t<span>{getLanguageName(currentLanguage)}</span>\n\t\t\t\t\t<iconify-icon icon=\"mdi:chevron-up\" width=\"20\"></iconify-icon>\n\t\t\t\t</Menu.Trigger>\n\n\t\t\t\t<Portal>\n\t\t\t\t\t<Menu.Positioner>\n\t\t\t\t\t\t<Menu.Content class=\"card p-2 shadow-xl preset-filled-surface-100-900 z-9999 w-64 border border-surface-200 dark:border-surface-500\">\n\t\t\t\t\t\t\t<!-- Header to inform user about System Language context -->\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"px-3 py-2 text-xs font-bold text-tertiary-500 dark:text-primary-500 uppercase tracking-wider text-center border-b border-surface-200 dark:border-surface-50 mb-1\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{m.applayout_systemlanguage()}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{#if Array.isArray(getPublicSetting('LOCALES')) && getPublicSetting('LOCALES').length > 5}\n\t\t\t\t\t\t\t\t<div class=\"px-2 pb-2 mb-1 border-b border-surface-200 dark:border-surface-50\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tbind:this={searchInput}\n\t\t\t\t\t\t\t\t\t\tbind:value={searchQuery}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Search language...\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-full rounded-md bg-surface-200 dark:bg-surface-800 px-3 py-2 text-sm placeholder:text-surface-400 focus:outline-none focus:ring-2 focus:ring-primary-500 text-surface-900 dark:text-white border-none\"\n\t\t\t\t\t\t\t\t\t\taria-label=\"Search languages\"\n\t\t\t\t\t\t\t\t\t\tonclick={(e) => e.stopPropagation()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"max-h-64 divide-y divide-surface-200 dark:divide-surface-700 overflow-y-auto\">\n\t\t\t\t\t\t\t\t\t{#each filteredLanguages as lang (lang)}\n\t\t\t\t\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\t\t\t\t\tvalue={lang}\n\t\t\t\t\t\t\t\t\t\t\tonclick={() => handleLanguageSelection(lang)}\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex w-full items-center justify-between px-3 py-2 text-left rounded-sm cursor-pointer\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-sm font-medium text-surface-900 dark:text-surface-200\">{getLanguageName(lang)}</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-xs font-normal text-tertiary-500 dark:text-primary-500 ml-2\">{lang.toUpperCase()}</span>\n\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t{#each availableLanguages.filter((l) => l !== currentLanguage) as lang (lang)}\n\t\t\t\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\t\t\t\tvalue={lang}\n\t\t\t\t\t\t\t\t\t\tonclick={() => handleLanguageSelection(lang)}\n\t\t\t\t\t\t\t\t\t\tclass=\"flex w-full items-center justify-between px-3 py-2 text-left rounded-sm cursor-pointer\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span class=\"text-sm font-medium\">{getLanguageName(lang)}</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"text-xs font-normal text-tertiary-500 dark:text-primary-500 ml-2\">{lang.toUpperCase()}</span>\n\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</Menu.Content>\n\t\t\t\t\t</Menu.Positioner>\n\t\t\t\t</Portal>\n\t\t\t</Menu>\n\t\t</div>\n\t\t<!-- CMS Version -->\n\t\t<div class=\"absolute bottom-5 left-1/2 -translate-x-1/2\">\n\t\t\t<VersionCheck transparent={true} />\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t/* Scrollbar styling */\n\t.overflow-y-auto {\n\t\tscrollbar-width: thin;\n\t\tscrollbar-color: rgba(156, 163, 175, 0.5) transparent;\n\t}\n\n\t.overflow-y-auto::-webkit-scrollbar {\n\t\twidth: 6px;\n\t}\n\n\t.overflow-y-auto::-webkit-scrollbar-track {\n\t\tbackground: transparent;\n\t}\n\n\t.overflow-y-auto::-webkit-scrollbar-thumb {\n\t\tbackground-color: rgba(156, 163, 175, 0.5);\n\t\tborder-radius: 3px;\n\t}\n</style>\n"],"names":["$$renderer","$.attr","$.attr_class","$.clsx","$.stringify","$.ensure_array_like","$.attr_style","year","diwali","navratri","$.escape","m.login_new_year","m.login_happy_diwali","m.login_Happy_Holi","m.login_happy_navratri","m.form_signin","score","m.signin_forgottontoast","m.signin_forgottenpassword","m.form_resetpassword","m.form_required","m.email","m.form_password","m.twofa_verify_title","m.twofa_verify_description","m.twofa_code_placeholder","m.twofa_use_backup_code","m.button_back","m.twofa_verify_button","m.confirm_password","m.form_confirmpassword","m.registration_token","m.signin_registrationtoken","m.signin_savenewpassword","m.form_signup","m.username","m.signup_registrationtoken","availableLocales","m.db_error_title","m.db_error_description","m.db_error_reason_label","m.db_error_solutions_title","m.db_error_solution_1","m.db_error_solution_2","m.db_error_solution_3","m.db_error_solution_4","m.db_error_reset_setup","m.db_error_refresh_page","m.login_demo_title","m.login_demo_message","m.login_demo_nextreset","m.applayout_systemlanguage"],"mappings":"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","x_google_ignoreList":[1]}