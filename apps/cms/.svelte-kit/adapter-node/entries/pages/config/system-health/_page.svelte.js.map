{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../../shared/components/src/SystemHealth.svelte","../../../../../../../src/routes/config/system-health/+page.svelte"],"sourcesContent":["<!--\n@file src/components/SystemHealth.svelte\n@component\n**System Health Monitoring Widget - Enhanced Svelte 5**\n\nDisplays real-time system state and individual service health with comprehensive monitoring.\n\n### Features\n- Proper Svelte 5 runes with optimized reactivity\n- Full keyboard navigation and ARIA support\n- Visual loading states and animations\n- Error boundaries with retry logic\n- Reduced motion support\n- Performance optimized with derived state\n- Real-time updates with proper cleanup\n- Secure API calls with CSRF protection\n- Copy-to-clipboard functionality\n-->\n\n<script lang=\"ts\">\n\timport { systemState, type SystemState, type ServiceHealth } from '@shared/stores/system';\n\timport { showToast } from '@shared/utils/toast';\n\timport { formatDisplayDate } from '@shared/utils/dateUtils';\n\timport { logger } from '@shared/utils/logger';\n\timport { onMount, onDestroy } from 'svelte';\n\n\t// Type for service data\n\ttype ServiceData = {\n\t\tstatus: ServiceHealth;\n\t\tmessage: string;\n\t\terror?: string;\n\t\tlastChecked?: number;\n\t};\n\n\t// State configuration maps\n\tconst STATE_CONFIG = {\n\t\tREADY: { color: 'text-success-500', icon: '‚úÖ', label: 'Ready' },\n\t\tDEGRADED: { color: 'text-warning-500', icon: '‚ö†Ô∏è', label: 'Degraded' },\n\t\tINITIALIZING: { color: 'text-primary-500', icon: 'üîÑ', label: 'Initializing' },\n\t\tFAILED: { color: 'text-error-500', icon: '‚ùå', label: 'Failed' },\n\t\tIDLE: { color: 'text-surface-500', icon: '‚è∏Ô∏è', label: 'Idle' }\n\t} as const;\n\n\tconst SERVICE_CONFIG = {\n\t\thealthy: { color: 'preset-filled-success-500', icon: '‚úì', label: 'Healthy' },\n\t\tunhealthy: { color: 'preset-filled-error-500', icon: '‚úó', label: 'Unhealthy' },\n\t\tinitializing: { color: 'preset-filled-primary-500', icon: '‚ü≥', label: 'Initializing' },\n\t\tunknown: { color: 'preset-filled-surface-500', icon: '?', label: 'Unknown' }\n\t} as const;\n\n\tconst REFRESH_INTERVAL_MS = 5000;\n\tconst MAX_RETRIES = 3;\n\n\t// Reactive state\n\tlet currentState = $state<SystemState>('IDLE');\n\tlet services = $state<Record<string, ServiceData>>({});\n\tlet initializationStartedAt = $state<number | null>(null);\n\tlet lastChecked = $state(new Date().toISOString());\n\tlet autoRefresh = $state(true);\n\tlet isLoading = $state(false);\n\tlet isReinitializing = $state(false);\n\tlet retryCount = $state(0);\n\tlet prefersReducedMotion = $state(false);\n\tlet copiedEndpoint = $state(false);\n\n\t// Refs\n\tlet refreshInterval: ReturnType<typeof setInterval> | null = null;\n\tlet unsubscribe: (() => void) | null = null;\n\n\t// Derived values with proper memoization\n\tconst uptime = $derived.by(() => {\n\t\tif (!initializationStartedAt) return 0;\n\t\treturn Date.now() - initializationStartedAt;\n\t});\n\n\tconst serviceEntries = $derived(Object.entries(services));\n\tconst serviceCount = $derived(serviceEntries.length);\n\n\tconst healthyServices = $derived(serviceEntries.filter(([_, service]) => service.status === 'healthy').length);\n\n\tconst unhealthyServices = $derived(serviceEntries.filter(([_, service]) => service.status === 'unhealthy').length);\n\n\tconst formattedLastChecked = $derived(\n\t\tformatDisplayDate(lastChecked, 'en', {\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit',\n\t\t\tsecond: '2-digit'\n\t\t})\n\t);\n\n\tconst apiHealthUrl = $derived(typeof window !== 'undefined' ? `${window.location.origin}/api/system?action=health` : '/api/system?action=health');\n\n\tconst healthPercentage = $derived(serviceCount > 0 ? Math.round((healthyServices / serviceCount) * 100) : 0);\n\n\t// Subscribe to store with proper cleanup\n\t$effect(() => {\n\t\tunsubscribe = systemState.subscribe((state) => {\n\t\t\tcurrentState = state.overallState;\n\t\t\tservices = state.services;\n\t\t\tinitializationStartedAt = state.initializationStartedAt || null;\n\t\t\tlastChecked = new Date().toISOString();\n\t\t});\n\n\t\treturn () => {\n\t\t\tunsubscribe?.();\n\t\t};\n\t});\n\n\t// Auto-refresh with proper cleanup\n\t$effect(() => {\n\t\tif (autoRefresh && !isLoading) {\n\t\t\trefreshInterval = setInterval(() => {\n\t\t\t\tfetchHealth();\n\t\t\t}, REFRESH_INTERVAL_MS);\n\t\t} else if (refreshInterval) {\n\t\t\tclearInterval(refreshInterval);\n\t\t\trefreshInterval = null;\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (refreshInterval) {\n\t\t\t\tclearInterval(refreshInterval);\n\t\t\t\trefreshInterval = null;\n\t\t\t}\n\t\t};\n\t});\n\n\t// Fetch health with retry logic\n\tasync function fetchHealth(): Promise<void> {\n\t\tif (isLoading) return;\n\n\t\tisLoading = true;\n\n\t\ttry {\n\t\t\tconst response = await fetch('/api/system?action=health', {\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`Health check failed: ${response.status}`);\n\t\t\t}\n\n\t\t\tretryCount = 0; // Reset on success\n\t\t} catch (err) {\n\t\t\tlogger.error('Failed to fetch health:', err);\n\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tshowToast(`Health check failed. Retrying... (${retryCount}/${MAX_RETRIES})`, 'warning', 2000);\n\n\t\t\t\t// Exponential backoff\n\t\t\t\tsetTimeout(() => fetchHealth(), 1000 * Math.pow(2, retryCount));\n\t\t\t} else {\n\t\t\t\tshowToast('Failed to fetch system health after multiple retries', 'error', 5000);\n\t\t\t\tretryCount = 0;\n\t\t\t}\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\t// Reinitialize with loading state\n\tasync function reinitializeSystem(): Promise<void> {\n\t\tif (isReinitializing) return;\n\n\t\tconst confirmed = confirm('Are you sure you want to reinitialize the system? This may cause temporary downtime.');\n\t\tif (!confirmed) return;\n\n\t\tisReinitializing = true;\n\n\t\ttry {\n\t\t\tshowToast('Reinitializing system...', 'warning');\n\n\t\t\tconst response = await fetch('/api/system', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\taction: 'reinitialize',\n\t\t\t\t\tforce: true\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tif (response.ok) {\n\t\t\t\tconst result = await response.json();\n\t\t\t\tshowToast(result.message || `System reinitialized: ${result.status}`, 'success', 5000);\n\n\t\t\t\t// Wait a bit before fetching health\n\t\t\t\tsetTimeout(() => fetchHealth(), 1000);\n\t\t\t} else {\n\t\t\t\tconst error = await response.json();\n\t\t\t\tthrow new Error(error.error || 'Reinitialization failed');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconst message = err instanceof Error ? err.message : 'Unknown error';\n\t\t\tlogger.error('Reinitialization failed:', err);\n\n\t\t\tshowToast(`Failed to reinitialize: ${message}`, 'error', 5000);\n\t\t} finally {\n\t\t\tisReinitializing = false;\n\t\t}\n\t}\n\n\t// Copy endpoint to clipboard\n\tasync function copyEndpoint(): Promise<void> {\n\t\ttry {\n\t\t\tawait navigator.clipboard.writeText(apiHealthUrl);\n\t\t\tcopiedEndpoint = true;\n\t\t\tshowToast('Endpoint copied to clipboard', 'success', 2000);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tcopiedEndpoint = false;\n\t\t\t}, 2000);\n\t\t} catch (err) {\n\t\t\tlogger.error('Failed to copy:', err);\n\t\t\tshowToast('Failed to copy endpoint', 'error', 2000);\n\t\t}\n\t}\n\n\t// Helper functions\n\tfunction getStateColor(state: SystemState): string {\n\t\treturn STATE_CONFIG[state]?.color || STATE_CONFIG.IDLE.color;\n\t}\n\n\tfunction getStateIcon(state: SystemState): string {\n\t\treturn STATE_CONFIG[state]?.icon || '‚ùì';\n\t}\n\n\tfunction getStateLabel(state: SystemState): string {\n\t\treturn STATE_CONFIG[state]?.label || 'Unknown';\n\t}\n\n\tfunction getServiceColor(status: ServiceHealth): string {\n\t\treturn SERVICE_CONFIG[status]?.color || SERVICE_CONFIG.unknown.color;\n\t}\n\n\tfunction getServiceIcon(status: ServiceHealth): string {\n\t\treturn SERVICE_CONFIG[status]?.icon || SERVICE_CONFIG.unknown.icon;\n\t}\n\n\tfunction getServiceLabel(status: ServiceHealth): string {\n\t\treturn SERVICE_CONFIG[status]?.label || 'Unknown';\n\t}\n\n\tfunction formatUptime(ms: number): string {\n\t\tif (ms <= 0) return '0s';\n\n\t\tconst seconds = Math.floor(ms / 1000);\n\t\tconst minutes = Math.floor(seconds / 60);\n\t\tconst hours = Math.floor(minutes / 60);\n\t\tconst days = Math.floor(hours / 24);\n\n\t\tif (days > 0) return `${days}d ${hours % 24}h`;\n\t\tif (hours > 0) return `${hours}h ${minutes % 60}m`;\n\t\tif (minutes > 0) return `${minutes}m ${seconds % 60}s`;\n\t\treturn `${seconds}s`;\n\t}\n\n\tfunction formatServiceName(name: string): string {\n\t\treturn (\n\t\t\tname.charAt(0).toUpperCase() +\n\t\t\tname\n\t\t\t\t.slice(1)\n\t\t\t\t.replace(/([A-Z])/g, ' $1')\n\t\t\t\t.trim()\n\t\t);\n\t}\n\n\t// Lifecycle\n\tonMount(() => {\n\t\t// Check reduced motion preference\n\t\tconst mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');\n\t\tprefersReducedMotion = mediaQuery.matches;\n\n\t\tconst handleMotionChange = (e: MediaQueryListEvent) => {\n\t\t\tprefersReducedMotion = e.matches;\n\t\t};\n\n\t\tmediaQuery.addEventListener('change', handleMotionChange);\n\n\t\t// Initial health check\n\t\tfetchHealth();\n\n\t\treturn () => {\n\t\t\tmediaQuery.removeEventListener('change', handleMotionChange);\n\t\t};\n\t});\n\n\tonDestroy(() => {\n\t\tif (refreshInterval) {\n\t\t\tclearInterval(refreshInterval);\n\t\t}\n\t\tunsubscribe?.();\n\t});\n</script>\n\n<div class=\"card space-y-4 p-4\" role=\"region\" aria-label=\"System health monitoring\">\n\t<!-- Header -->\n\t<div class=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n\t\t<div class=\"flex items-center gap-3\">\n\t\t\t<span\n\t\t\t\tclass=\"text-3xl {prefersReducedMotion ? '' : 'transition-transform duration-300'}\"\n\t\t\t\trole=\"img\"\n\t\t\t\taria-label={`System status: ${getStateLabel(currentState)}`}\n\t\t\t>\n\t\t\t\t{getStateIcon(currentState)}\n\t\t\t</span>\n\t\t\t<div>\n\t\t\t\t<h3 class=\"h3 flex items-center gap-2\">\n\t\t\t\t\tSystem Health\n\t\t\t\t\t{#if isLoading}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"inline-block h-4 w-4 animate-spin rounded-full border-2 border-primary-500 border-t-transparent\"\n\t\t\t\t\t\t\trole=\"status\"\n\t\t\t\t\t\t\taria-label=\"Loading\"\n\t\t\t\t\t\t></span>\n\t\t\t\t\t{/if}\n\t\t\t\t</h3>\n\t\t\t\t<p class=\"text-sm opacity-70\">\n\t\t\t\t\tStatus: <span class={`font-bold ${getStateColor(currentState)}`}>{currentState}</span>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"flex flex-wrap items-center gap-2\">\n\t\t\t<label class=\"flex items-center gap-2 text-sm\">\n\t\t\t\t<input type=\"checkbox\" class=\"checkbox\" bind:checked={autoRefresh} aria-label=\"Enable auto-refresh\" />\n\t\t\t\tAuto-refresh\n\t\t\t</label>\n\n\t\t\t<button\n\t\t\t\tclass=\"preset-outlined-primary-500 btn-sm\"\n\t\t\t\tonclick={fetchHealth}\n\t\t\t\tdisabled={isLoading}\n\t\t\t\ttitle=\"Refresh now\"\n\t\t\t\taria-label=\"Refresh system health\"\n\t\t\t>\n\t\t\t\t<span class=\"text-lg {isLoading && !prefersReducedMotion ? 'animate-spin' : ''}\" role=\"img\" aria-hidden=\"true\"> üîÑ </span>\n\t\t\t</button>\n\n\t\t\t<button\n\t\t\t\tclass=\"preset-outlined-warning-500 btn-sm\"\n\t\t\t\tonclick={reinitializeSystem}\n\t\t\t\tdisabled={isReinitializing || isLoading}\n\t\t\t\ttitle=\"Reinitialize system\"\n\t\t\t\taria-label=\"Reinitialize system\"\n\t\t\t>\n\t\t\t\t{#if isReinitializing}\n\t\t\t\t\t<span class=\"inline-block h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent\"></span>\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\"text-lg\" role=\"img\" aria-hidden=\"true\">‚ö°</span>\n\t\t\t\t{/if}\n\t\t\t\tReinitialize\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\t<!-- Stats Grid -->\n\t<div class=\"grid grid-cols-2 gap-3 sm:grid-cols-4\">\n\t\t<div class=\"card preset-outlined-surface-500p-3\">\n\t\t\t<p class=\"text-xs opacity-70\">Uptime</p>\n\t\t\t<p class=\"text-lg font-bold\">{formatUptime(uptime)}</p>\n\t\t</div>\n\n\t\t<div class=\"card preset-outlined-surface-500p-3\">\n\t\t\t<p class=\"text-xs opacity-70\">Last Checked</p>\n\t\t\t<p class=\"text-sm font-bold\">{formattedLastChecked}</p>\n\t\t</div>\n\n\t\t<div class=\"card preset-outlined-surface-500p-3\">\n\t\t\t<p class=\"text-xs opacity-70\">Services</p>\n\t\t\t<p class=\"text-lg font-bold\">\n\t\t\t\t{serviceCount}\n\t\t\t\t<span class=\"text-xs opacity-70\">\n\t\t\t\t\t({healthyServices}/{serviceCount})\n\t\t\t\t</span>\n\t\t\t</p>\n\t\t</div>\n\n\t\t<div class=\"card preset-outlined-surface-500p-3\">\n\t\t\t<p class=\"text-xs opacity-70\">Health</p>\n\t\t\t<p class=\"text-lg font-bold {healthPercentage >= 80 ? 'text-success-500' : healthPercentage >= 50 ? 'text-warning-500' : 'text-error-500'}\">\n\t\t\t\t{healthPercentage}%\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\n\t<!-- Health Progress Bar -->\n\t{#if serviceCount > 0}\n\t\t<div\n\t\t\tclass=\"h-2 w-full overflow-hidden rounded-full bg-surface-700\"\n\t\t\trole=\"progressbar\"\n\t\t\taria-valuenow={healthPercentage}\n\t\t\taria-valuemin={0}\n\t\t\taria-valuemax={100}\n\t\t\taria-label=\"System health percentage\"\n\t\t>\n\t\t\t<div\n\t\t\t\tclass=\"h-full {healthPercentage >= 80\n\t\t\t\t\t? 'bg-success-500'\n\t\t\t\t\t: healthPercentage >= 50\n\t\t\t\t\t\t? 'bg-warning-500'\n\t\t\t\t\t\t: 'bg-error-500'} transition-all duration-500\"\n\t\t\t\tstyle=\"width: {healthPercentage}%\"\n\t\t\t></div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Services Grid -->\n\t<div class=\"space-y-2\">\n\t\t<div class=\"flex items-center justify-between\">\n\t\t\t<h4 class=\"h4 text-sm font-semibold opacity-70\">Service Status</h4>\n\t\t\t{#if unhealthyServices > 0}\n\t\t\t\t<span class=\"badge preset-filled-error-500 text-xs\">\n\t\t\t\t\t{unhealthyServices} unhealthy\n\t\t\t\t</span>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t{#if serviceCount === 0}\n\t\t\t<div class=\"card preset-outlined-surface-500p-6 text-center\">\n\t\t\t\t<p class=\"text-sm opacity-70\">No services registered</p>\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3\">\n\t\t\t\t{#each serviceEntries as [name, service] (name)}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"card flex items-start gap-3 p-3 transition-shadow duration-200 hover:shadow-lg\"\n\t\t\t\t\t\trole=\"article\"\n\t\t\t\t\t\taria-label={`${formatServiceName(name)} service status`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass={`badge ${getServiceColor(service.status)} flex h-8 w-8 shrink-0 items-center justify-center text-lg`}\n\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\taria-label={getServiceLabel(service.status)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{getServiceIcon(service.status)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"min-w-0 flex-1\">\n\t\t\t\t\t\t\t<p class=\"text-sm font-semibold\">{formatServiceName(name)}</p>\n\t\t\t\t\t\t\t<p class=\"truncate text-xs opacity-70\" title={service.message}>\n\t\t\t\t\t\t\t\t{service.message}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{#if service.error}\n\t\t\t\t\t\t\t\t<p class=\"mt-1 truncate text-xs text-error-500\" title={service.error}>\n\t\t\t\t\t\t\t\t\tError: {service.error}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{#if service.lastChecked}\n\t\t\t\t\t\t\t\t<p class=\"mt-1 text-xs opacity-50\">\n\t\t\t\t\t\t\t\t\t{new Date(service.lastChecked).toLocaleTimeString()}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<!-- API Health Endpoint Info -->\n\t<div class=\"card preset-outlined-surface-500p-3\">\n\t\t<details class=\"space-y-2\">\n\t\t\t<summary class=\"cursor-pointer text-sm font-semibold opacity-70 hover:opacity-100\"> API Health Endpoint </summary>\n\t\t\t<div class=\"space-y-2 text-xs opacity-70\">\n\t\t\t\t<p>For external monitoring, use:</p>\n\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t<code class=\"code flex-1 p-2\">{apiHealthUrl}</code>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tclass=\"btn-sm preset-outlined-primary-500\"\n\t\t\t\t\t\tonclick={copyEndpoint}\n\t\t\t\t\t\ttitle=\"Copy to clipboard\"\n\t\t\t\t\t\taria-label=\"Copy endpoint URL to clipboard\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if copiedEndpoint}\n\t\t\t\t\t\t\t‚úì\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\tüìã\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"mt-2 space-y-1\">\n\t\t\t\t\t<p><strong>Returns:</strong> JSON with system status and component health</p>\n\t\t\t\t\t<p><strong>Status codes:</strong></p>\n\t\t\t\t\t<ul class=\"ml-4 list-disc space-y-0.5\">\n\t\t\t\t\t\t<li>200 = READY/DEGRADED</li>\n\t\t\t\t\t\t<li>503 = INITIALIZING/FAILED/IDLE</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</details>\n\t</div>\n</div>\n","<!--\n@file src/routes/(app)/config/system-health/+page.svelte\n@component\n**System Health Monitoring Page**\n\nFull-page system health monitoring interface for administrators.\n-->\n\n<script lang=\"ts\">\n\timport SystemHealth from '@cms/components/SystemHealth.svelte';\n\timport PageTitle from '@cms/components/PageTitle.svelte';\n</script>\n\n<PageTitle name=\"System Health\" showBackButton={true} backUrl=\"/config\" icon=\"mdi:heart-pulse\" />\n\n<div class=\"wrapper p-4\">\n\t<SystemHealth />\n</div>\n"],"names":["$.attr","$.escape","$$renderer","$.attr_class","$.stringify"],"mappings":"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"}