{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../../shared/stores/src/configStore.svelte.ts","../../../../../../../src/routes/config/components/GenericSettingsGroup.svelte","../../../../../../../src/routes/config/systemsetting/+page.svelte"],"sourcesContent":["/**\n * @file src/stores/configStore.svelte.ts\n * @description Global store for configuration UI state\n */\n\nimport { writable } from 'svelte/store';\n\n// Track which settings groups need configuration (empty required fields)\nexport const groupsNeedingConfig = writable<Set<string>>(new Set());\n","<!--\n@file  src/routes/(app)/config/systemsetting/GenericSettingsGroup.svelte\n@component\n**Generic component for rendering any settings group**\n\nHandles all field types and validation automatically\n\n### Props\n- `group`: The settings group to render, containing fields and metadata.\n\n### Feature:\n- Handles all field types including text, number, boolean, password, select, multi-select, language picker, log level picker, and array inputs\n-->\n<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport type { Writable } from 'svelte/store';\n\timport type { SettingGroup, SettingField } from '../index';\n\timport { toaster } from '@shared/stores/store.svelte';\n\t// getModalStore deprecated - use modalState from @shared/utils/modalState.svelte;\n\timport iso6391 from '@shared/utils/iso639-1.json';\n\timport { getLanguageName } from '@shared/utils/languageUtils';\n\timport { logger } from '@shared/utils/logger';\n\timport { showConfirm } from '@shared/utils/modalUtils';\n\n\t// Log levels from logger.svelte.ts\n\tconst LOG_LEVELS = ['none', 'fatal', 'error', 'warn', 'info', 'debug', 'trace'] as const;\n\ttype LogLevel = (typeof LOG_LEVELS)[number];\n\n\tinterface Props {\n\t\tgroup: SettingGroup;\n\t\tgroupsNeedingConfig: Writable<Set<string>>;\n\t\tonUnsavedChanges?: (hasChanges: boolean) => void;\n\t}\n\n\tconst { group, groupsNeedingConfig, onUnsavedChanges }: Props = $props();\n\n\tlet loading = $state(false);\n\tlet saving = $state(false);\n\tlet error = $state<string | null>(null);\n\tlet values = $state<Record<string, unknown>>({});\n\tlet originalValues = $state<Record<string, unknown>>({}); // Track original values\n\tlet errors = $state<Record<string, string>>({});\n\tlet hasEmptyRequiredFields = $state(false);\n\tlet hasUnsavedChanges = $state(false);\n\tconst showPassword = $state<Record<string, boolean>>({}); // Track password visibility per field\n\tconst showLanguagePicker = $state<Record<string, boolean>>({}); // Track language picker visibility per field\n\tconst languageSearch = $state<Record<string, string>>({}); // Track search input per field\n\tconst showLogLevelPicker = $state<Record<string, boolean>>({}); // Track log level picker visibility per field\n\tlet allowedLocales = $state<string[]>([]); // Locales from project.inlang/settings.json\n\n\t// Load allowed locales from project.inlang/settings.json\n\tasync function loadAllowedLocales() {\n\t\ttry {\n\t\t\tconst response = await fetch('/project.inlang/settings.json');\n\t\t\tconst data = await response.json();\n\t\t\tif (data.locales && Array.isArray(data.locales)) {\n\t\t\t\tallowedLocales = data.locales;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tlogger.warn('[GenericSettingsGroup] Could not load project.inlang/settings.json, using all languages:', err);\n\t\t\t// Fall back to all languages if we can't read the file\n\t\t\tallowedLocales = [];\n\t\t}\n\t}\n\n\t// Track if values have changed\n\t$effect(() => {\n\t\t// Compare current values with original values\n\t\tconst changed = Object.keys(values).some((key) => {\n\t\t\treturn JSON.stringify(values[key]) !== JSON.stringify(originalValues[key]);\n\t\t});\n\t\thasUnsavedChanges = changed;\n\n\t\t// Notify parent component\n\t\tif (onUnsavedChanges) {\n\t\t\tonUnsavedChanges(hasUnsavedChanges);\n\t\t}\n\t});\n\n\tfunction checkForEmptyFields() {\n\t\thasEmptyRequiredFields = group.fields.some((field: SettingField) => {\n\t\t\tconst value = values[field.key];\n\n\t\t\t// Check for empty strings, especially in critical fields like email, host, etc.\n\t\t\tif (typeof value === 'string') {\n\t\t\t\treturn value === '' && (field.required || field.key.includes('HOST') || field.key.includes('EMAIL'));\n\t\t\t}\n\n\t\t\treturn false;\n\t\t});\n\n\t\t// Update the store\n\t\tgroupsNeedingConfig.update((groups) => {\n\t\t\tif (hasEmptyRequiredFields) {\n\t\t\t\tgroups.add(group.id);\n\t\t\t} else {\n\t\t\t\tgroups.delete(group.id);\n\t\t\t}\n\t\t\treturn groups;\n\t\t});\n\t}\n\n\t// Load current values\n\tasync function loadSettings(bypassCache = false) {\n\t\tloading = true;\n\t\terror = null;\n\n\t\ttry {\n\t\t\t// Load values from API with optional cache bypass\n\t\t\tconst url = bypassCache ? `/api/settings/${group.id}?refresh=true` : `/api/settings/${group.id}`;\n\t\t\tconst response = await fetch(url);\n\t\t\tconst data = await response.json();\n\n\t\t\tif (data.success) {\n\t\t\t\tvalues = data.values || {};\n\t\t\t\t// Store a deep copy of original values\n\t\t\t\toriginalValues = JSON.parse(JSON.stringify(values));\n\t\t\t\tcheckForEmptyFields(); // Check if configuration is needed\n\t\t\t} else {\n\t\t\t\tthrow new Error(data.error || 'Failed to load settings');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tlogger.error(`[${group.id}] Load error:`, err);\n\t\t\terror = err instanceof Error ? err.message : 'Failed to load settings';\n\t\t} finally {\n\t\t\tloading = false;\n\t\t}\n\t}\n\n\t// Utility: Display language name using Intl.DisplayNames API\n\tfunction displayLanguage(code: string): string {\n\t\ttry {\n\t\t\treturn getLanguageName(code);\n\t\t} catch {\n\t\t\treturn code.toUpperCase();\n\t\t}\n\t}\n\n\t// Utility: Get appropriate icon for field\n\tfunction getFieldIcon(field: SettingField): string {\n\t\t// Check field key patterns first\n\t\tconst key = field.key.toLowerCase();\n\t\tif (key.includes('email') || key.includes('smtp_user')) return 'mdi:email';\n\t\tif (key.includes('password') || key.includes('secret') || key.includes('token')) return 'mdi:lock';\n\t\tif (key.includes('host') || key.includes('url') || key.includes('domain')) return 'mdi:web';\n\t\tif (key.includes('port')) return 'mdi:power-plug';\n\t\tif (key.includes('database') || key.includes('db')) return 'mdi:database';\n\t\tif (key.includes('path') || key.includes('folder') || key.includes('directory')) return 'mdi:folder';\n\t\tif (key.includes('log') || key.includes('logging')) return 'mdi:math-log';\n\t\tif (key.includes('cache')) return 'mdi:cached';\n\t\tif (key.includes('timeout') || key.includes('duration') || key.includes('ttl')) return 'mdi:timer';\n\t\tif (key.includes('limit') || key.includes('max') || key.includes('min')) return 'mdi:speedometer';\n\t\tif (key.includes('enable') || key.includes('allow')) return 'mdi:toggle-switch';\n\t\tif (key.includes('jwt')) return 'mdi:key';\n\t\tif (key.includes('oauth') || key.includes('auth')) return 'mdi:shield-account';\n\t\tif (key.includes('redis')) return 'mdi:database-cog';\n\t\tif (key.includes('smtp')) return 'mdi:email-send';\n\t\tif (key.includes('site') || key.includes('name')) return 'mdi:web-box';\n\t\tif (key.includes('storage')) return 'mdi:harddisk';\n\t\tif (key.includes('backup')) return 'mdi:backup-restore';\n\n\t\t// Check field type\n\t\tif (field.type === 'boolean') return 'mdi:checkbox-marked';\n\t\tif (field.type === 'number') return 'mdi:numeric';\n\t\tif (field.type === 'array') return 'mdi:format-list-bulleted';\n\t\tif (field.type === 'select') return 'mdi:form-dropdown';\n\t\tif (field.type === 'password') return 'mdi:lock';\n\t\tif (field.type === 'loglevel-multi') return 'mdi:math-log';\n\n\t\t// Default icon\n\t\treturn 'mdi:text-box';\n\t}\n\n\t// Helper for language picker\n\tfunction toggleLanguage(fieldKey: string, langCode: string) {\n\t\tconst currentValues = (values[fieldKey] as string[]) || [];\n\t\tif (currentValues.includes(langCode)) {\n\t\t\tvalues[fieldKey] = currentValues.filter((code) => code !== langCode);\n\t\t} else {\n\t\t\tvalues[fieldKey] = [...currentValues, langCode];\n\t\t}\n\t\t// Trigger validation\n\t\tconst field = group.fields.find((f: SettingField) => f.key === fieldKey);\n\t\tif (field) {\n\t\t\tconst validationError = validateField(field, values[fieldKey]);\n\t\t\tif (validationError) {\n\t\t\t\terrors[fieldKey] = validationError;\n\t\t\t} else {\n\t\t\t\tdelete errors[fieldKey];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction removeLanguage(fieldKey: string, langCode: string) {\n\t\tconst currentValues = (values[fieldKey] as string[]) || [];\n\t\tvalues[fieldKey] = currentValues.filter((code) => code !== langCode);\n\t\t// Trigger validation\n\t\tconst field = group.fields.find((f: SettingField) => f.key === fieldKey);\n\t\tif (field) {\n\t\t\tconst validationError = validateField(field, values[fieldKey]);\n\t\t\tif (validationError) {\n\t\t\t\terrors[fieldKey] = validationError;\n\t\t\t} else {\n\t\t\t\tdelete errors[fieldKey];\n\t\t\t}\n\t\t}\n\t}\n\n\t// Helper for log level picker\n\tfunction toggleLogLevel(fieldKey: string, level: LogLevel) {\n\t\tconst currentValues = (values[fieldKey] as LogLevel[]) || [];\n\t\tif (currentValues.includes(level)) {\n\t\t\tvalues[fieldKey] = currentValues.filter((l) => l !== level);\n\t\t} else {\n\t\t\tvalues[fieldKey] = [...currentValues, level];\n\t\t}\n\t\t// Trigger validation\n\t\tconst field = group.fields.find((f: SettingField) => f.key === fieldKey);\n\t\tif (field) {\n\t\t\tconst validationError = validateField(field, values[fieldKey]);\n\t\t\tif (validationError) {\n\t\t\t\terrors[fieldKey] = validationError;\n\t\t\t} else {\n\t\t\t\tdelete errors[fieldKey];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction removeLogLevel(fieldKey: string, level: LogLevel) {\n\t\tconst currentValues = (values[fieldKey] as LogLevel[]) || [];\n\t\tvalues[fieldKey] = currentValues.filter((l) => l !== level);\n\t\t// Trigger validation\n\t\tconst field = group.fields.find((f: SettingField) => f.key === fieldKey);\n\t\tif (field) {\n\t\t\tconst validationError = validateField(field, values[fieldKey]);\n\t\t\tif (validationError) {\n\t\t\t\terrors[fieldKey] = validationError;\n\t\t\t} else {\n\t\t\t\tdelete errors[fieldKey];\n\t\t\t}\n\t\t}\n\t}\n\n\t// Validate a single field\n\tfunction validateField(field: SettingField, value: unknown): string | null {\n\t\t// Required check\n\t\tif (field.required && (value === undefined || value === null || value === '')) {\n\t\t\treturn `${field.label} is required`;\n\t\t}\n\n\t\t// Email validation for email-related fields\n\t\tif (\n\t\t\ttypeof value === 'string' &&\n\t\t\tvalue &&\n\t\t\t(field.key.toLowerCase().includes('email') || field.key === 'SMTP_USER' || field.label.toLowerCase().includes('email'))\n\t\t) {\n\t\t\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\t\t\tif (!emailRegex.test(value)) {\n\t\t\t\treturn `${field.label} must be a valid email address`;\n\t\t\t}\n\t\t}\n\n\t\t// Type-specific validation\n\t\tif (field.type === 'number' && typeof value === 'number') {\n\t\t\tif (field.min !== undefined && value < field.min) {\n\t\t\t\treturn `${field.label} must be at least ${field.min}`;\n\t\t\t}\n\t\t\tif (field.max !== undefined && value > field.max) {\n\t\t\t\treturn `${field.label} must be at most ${field.max}`;\n\t\t\t}\n\t\t}\n\n\t\t// Custom validation\n\t\tif (field.validation) {\n\t\t\treturn field.validation(value);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t// Validate all fields\n\tfunction validateAll(): boolean {\n\t\terrors = {};\n\t\tlet isValid = true;\n\n\t\tgroup.fields.forEach((field: SettingField) => {\n\t\t\tconst err = validateField(field, values[field.key]);\n\t\t\tif (err) {\n\t\t\t\terrors[field.key] = err;\n\t\t\t\tisValid = false;\n\t\t\t}\n\t\t});\n\n\t\treturn isValid;\n\t}\n\n\t// Save settings\n\tasync function saveSettings() {\n\t\tif (!validateAll()) {\n\t\t\terror = 'Please fix the validation errors';\n\t\t\treturn;\n\t\t}\n\n\t\tsaving = true;\n\t\terror = null;\n\n\t\ttry {\n\t\t\tconst response = await fetch(`/api/settings/${group.id}`, {\n\t\t\t\tmethod: 'PUT',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify(values)\n\t\t\t});\n\n\t\t\tconst data = await response.json();\n\n\t\t\tif (data.success) {\n\t\t\t\tlet message = `${group.name} settings saved successfully!`;\n\t\t\t\tif (group.requiresRestart) {\n\t\t\t\t\tmessage += ' Server restart required for changes to take effect.';\n\t\t\t\t}\n\t\t\t\ttoaster.success({ description: message });\n\t\t\t\tawait loadSettings(true); // Bypass cache after save - this also resets originalValues\n\t\t\t\tcheckForEmptyFields(); // Update the warning status after save\n\t\t\t} else {\n\t\t\t\terror = data.error || 'Failed to save settings';\n\t\t\t}\n\t\t} catch (err) {\n\t\t\terror = err instanceof Error ? err.message : 'Failed to save settings';\n\t\t} finally {\n\t\t\tsaving = false;\n\t\t}\n\t}\n\n\t// Reset to defaults (with confirmation)\n\tasync function resetToDefaults() {\n\t\tshowConfirm({\n\t\t\ttitle: 'Reset Settings',\n\t\t\tbody: `Are you sure you want to reset all <strong>${group.name}</strong> settings to their default values? This action cannot be undone.`,\n\t\t\tonConfirm: async () => {\n\t\t\t\tsaving = true;\n\t\t\t\terror = null;\n\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await fetch(`/api/settings/${group.id}`, {\n\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t});\n\n\t\t\t\t\tconst data = await response.json();\n\n\t\t\t\t\tif (data.success) {\n\t\t\t\t\t\ttoaster.success({ description: `${group.name} settings reset to defaults!` });\n\t\t\t\t\t\tawait loadSettings(true); // Bypass cache after reset\n\t\t\t\t\t\tcheckForEmptyFields(); // Re-check after reset\n\t\t\t\t\t} else {\n\t\t\t\t\t\terror = data.error || 'Failed to reset settings';\n\t\t\t\t\t\ttoaster.error({ description: error || 'Failed to reset settings' });\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\terror = err instanceof Error ? err.message : 'Failed to reset settings';\n\t\t\t\t\ttoaster.error({ description: error || 'Failed to reset settings' });\n\t\t\t\t} finally {\n\t\t\t\t\tsaving = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t// Format duration for display\n\tfunction formatDuration(seconds: number): string {\n\t\tif (seconds < 60) return `${seconds}s`;\n\t\tif (seconds < 3600) return `${Math.floor(seconds / 60)}m`;\n\t\tconst hours = Math.floor(seconds / 3600);\n\t\tconst mins = Math.floor((seconds % 3600) / 60);\n\t\treturn mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;\n\t}\n\n\t// Handle array input (comma-separated)\n\tfunction handleArrayInput(field: SettingField, event: Event) {\n\t\tconst input = (event.target as HTMLInputElement).value;\n\t\tvalues[field.key] = input\n\t\t\t.split(',')\n\t\t\t.map((s) => s.trim())\n\t\t\t.filter((s) => s.length > 0);\n\t}\n\n\t// Get array display value\n\tfunction getArrayValue(key: string): string {\n\t\tconst val = values[key];\n\t\tif (Array.isArray(val)) {\n\t\t\treturn val.join(', ');\n\t\t}\n\t\treturn '';\n\t}\n\n\t// Close language picker on click outside\n\t$effect(() => {\n\t\tconst openPickers = Object.keys(showLanguagePicker).filter((key) => showLanguagePicker[key]);\n\t\tif (openPickers.length === 0) return;\n\n\t\tconst handler = (e: MouseEvent) => {\n\t\t\topenPickers.forEach((key) => {\n\t\t\t\tconst el = document.getElementById(`${key}-lang-picker`);\n\t\t\t\tif (el && !el.contains(e.target as Node)) {\n\t\t\t\t\tshowLanguagePicker[key] = false;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tdocument.addEventListener('mousedown', handler);\n\t\treturn () => document.removeEventListener('mousedown', handler);\n\t});\n\n\t// Close log level picker on click outside\n\t$effect(() => {\n\t\tconst openPickers = Object.keys(showLogLevelPicker).filter((key) => showLogLevelPicker[key]);\n\t\tif (openPickers.length === 0) return;\n\n\t\tconst handler = (e: MouseEvent) => {\n\t\t\topenPickers.forEach((key) => {\n\t\t\t\tconst el = document.getElementById(`${key}-loglevel-picker`);\n\t\t\t\tif (el && !el.contains(e.target as Node)) {\n\t\t\t\t\tshowLogLevelPicker[key] = false;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tdocument.addEventListener('mousedown', handler);\n\t\treturn () => document.removeEventListener('mousedown', handler);\n\t});\n\n\tonMount(() => {\n\t\tloadSettings();\n\t\tloadAllowedLocales();\n\t});\n</script>\n\n<div class=\"space-y-4 max-w-full overflow-x-hidden\">\n\t<!-- Header -->\n\t<div class=\"mb-6\">\n\t\t<h2 class=\"mb-2 text-xl font-bold md:text-2xl\">\n\t\t\t<span class=\" mr-2\">{group.icon}</span>\n\t\t\t{group.name}\n\t\t</h2>\n\t\t<p class=\"text-sm text-surface-600 dark:text-surface-300\">{group.description}</p>\n\t</div>\n\n\t<!-- Restart Warning -->\n\t{#if group.requiresRestart}\n\t\t<div class=\"alert preset-filled-warning-500 mb-4 rounded-xl p-3 md:p-4\">\n\t\t\t<div class=\"alert-message\">\n\t\t\t\t<strong class=\"mb-1 block text-sm md:text-base\">⚠️ Restart Required</strong>\n\t\t\t\t<p class=\"text-xs md:text-sm\">Changes to these settings require a server restart to take effect.</p>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Default Values Notice -->\n\t{#if hasEmptyRequiredFields}\n\t\t<div class=\"bordered alert preset-filled-error-500 mb-4 rounded-xl p-3 md:p-4\">\n\t\t\t<div class=\"alert-message\">\n\t\t\t\t<strong class=\"mb-1 block text-sm md:text-base\">ℹ️ Default Values Detected</strong>\n\t\t\t\t<p class=\"text-xs md:text-sm\">\n\t\t\t\t\tSome settings are using placeholder values from the system defaults. Please review and update these values to match your infrastructure and\n\t\t\t\t\trequirements before using in production.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Loading State -->\n\t{#if loading}\n\t\t<div class=\"card preset-tonal -surface-500 rounded-xl p-6 text-center\">\n\t\t\t<p>Loading settings...</p>\n\t\t</div>\n\t{:else}\n\t\t<!-- Error Message -->\n\t\t{#if error}\n\t\t\t<div class=\"alert preset-filled-error-500 mb-4 rounded-xl p-3 md:p-4\">\n\t\t\t\t<div class=\"alert-message\">\n\t\t\t\t\t<strong class=\"mb-1 block text-sm md:text-base\">Error</strong>\n\t\t\t\t\t<p class=\"text-xs md:text-sm\">{error}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- Settings Form -->\n\t\t<form\n\t\t\tonsubmit={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tsaveSettings();\n\t\t\t}}\n\t\t\tclass=\"space-y-4 md:space-y-6\"\n\t\t>\n\t\t\t<!-- Special Layout for Languages Group -->\n\t\t\t{#if group.id === 'languages'}\n\t\t\t\t<div class=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n\t\t\t\t\t<!-- Left Column: Default Content Language + Available Content Languages -->\n\t\t\t\t\t{#each [null] as _}\n\t\t\t\t\t\t{@const defaultLangField = group.fields.find((f: any) => f.key === 'DEFAULT_CONTENT_LANGUAGE')}\n\t\t\t\t\t\t{@const availableLangsField = group.fields.find((f: any) => f.key === 'AVAILABLE_CONTENT_LANGUAGES')}\n\n\t\t\t\t\t\t<div class=\"space-y-3 rounded-md border border-slate-300/50 bg-surface-50/60 p-4 dark:border-slate-600/60 dark:bg-surface-800/40\">\n\t\t\t\t\t\t\t{#if defaultLangField}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label for={defaultLangField.key} class=\"mb-1 flex items-center gap-1 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:book-open-page-variant\" width=\"18\" class=\"text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t<span>{defaultLangField.label}</span>\n\t\t\t\t\t\t\t\t\t\t{#if defaultLangField.required}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-error-500\">*</span>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-1 text-slate-400 hover:text-primary-500\"\n\t\t\t\t\t\t\t\t\t\t\tdata-tooltip={defaultLangField.description}\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Field information\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:help-circle-outline\" width=\"16\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tid={defaultLangField.key}\n\t\t\t\t\t\t\t\t\t\tbind:value={values[defaultLangField.key]}\n\t\t\t\t\t\t\t\t\t\tclass=\"input w-full rounded {errors[defaultLangField.key] ? 'border-error-500' : ''}\"\n\t\t\t\t\t\t\t\t\t\trequired={defaultLangField.required}\n\t\t\t\t\t\t\t\t\t\tonchange={() => (errors[defaultLangField.key] = '')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{#if (values.AVAILABLE_CONTENT_LANGUAGES as string[])?.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t{#each values.AVAILABLE_CONTENT_LANGUAGES as string[] as langCode}\n\t\t\t\t\t\t\t\t\t\t\t\t<option value={langCode}>{displayLanguage(langCode)} ({langCode})</option>\n\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"en\">English (en)</option>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t{#if errors[defaultLangField.key]}\n\t\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-xs text-error-500\">{errors[defaultLangField.key]}</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if availableLangsField}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class=\"mb-1 flex items-center gap-1 text-sm font-medium tracking-wide\">\n\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:book-multiple\" width=\"14\" class=\"text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t<span>{availableLangsField.label}</span>\n\t\t\t\t\t\t\t\t\t\t{#if availableLangsField.required}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-error-500\">*</span>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-1 text-slate-400 hover:text-primary-500\"\n\t\t\t\t\t\t\t\t\t\t\tdata-tooltip={availableLangsField.description}\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Field information\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:help-circle-outline\" width=\"14\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex min-h-10 flex-wrap gap-2 rounded border p-2 pr-16 {errors[availableLangsField.key]\n\t\t\t\t\t\t\t\t\t\t\t\t? 'border-error-500 bg-error-50 dark:bg-error-900/20'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'border-slate-300/50 bg-surface-50 dark:border-slate-600 dark:bg-surface-700/40'}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if (values[availableLangsField.key] as string[])?.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t\t{#each values[availableLangsField.key] as string[] as langCode}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"group preset-ghost-tertiary-500 badge inline-flex items-center gap-1 rounded-full dark:preset-ghost-primary-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{displayLanguage(langCode)} ({langCode})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{#if !availableLangsField.readonly}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"opacity-60 transition hover:opacity-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => removeLanguage(availableLangsField.key, langCode)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Remove {langCode}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t×\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t\t{:else if availableLangsField.placeholder}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-surface-500 dark:text-surface-50 text-xs\">{availableLangsField.placeholder}</span>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t\t{#if !availableLangsField.readonly}\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"preset-filled-surface-500 badge absolute right-2 top-2 rounded-full\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowLanguagePicker[availableLangsField.key] = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlanguageSearch[availableLangsField.key] = '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-expanded={showLanguagePicker[availableLangsField.key]}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-controls=\"{availableLangsField.key}-lang-picker\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:plus\" width=\"14\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<!-- Language Picker Dropdown -->\n\t\t\t\t\t\t\t\t\t\t{#if showLanguagePicker[availableLangsField.key]}\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"{availableLangsField.key}-lang-picker\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute left-0 top-full z-20 mt-2 w-64 rounded-md border border-slate-300/60 bg-surface-50 p-2 shadow-lg dark:border-slate-600 dark:bg-surface-800\"\n\t\t\t\t\t\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Add language\"\n\t\t\t\t\t\t\t\t\t\t\t\ttabindex=\"-1\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mb-2 w-full rounded border border-slate-300/60 bg-transparent px-2 py-1 text-xs outline-none focus:border-primary-500 dark:border-slate-600\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Search...\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbind:value={languageSearch[availableLangsField.key]}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"max-h-48 overflow-auto\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#each iso6391.filter((lang: { code: string; name: string; native: string }) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst search = (languageSearch[availableLangsField.key] || '').toLowerCase();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst currentValues = (values[availableLangsField.key] as string[]) || [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !currentValues.includes(lang.code) && (search === '' || lang.name.toLowerCase().includes(search) || lang.native\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(search) || lang.code.toLowerCase().includes(search));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}) as lang}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex w-full items-center justify-between rounded px-2 py-1 text-left text-xs hover:bg-primary-500/10\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleLanguage(availableLangsField.key, lang.code);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowLanguagePicker[availableLangsField.key] = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Set as default if it's the first language\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!(values[availableLangsField.key] as string[])?.length || !values.DEFAULT_CONTENT_LANGUAGE) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues.DEFAULT_CONTENT_LANGUAGE = lang.code;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{lang.native} ({lang.code})</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:plus-circle-outline\" width=\"14\" class=\"text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"px-1 py-2 text-center text-[11px] text-slate-500\">No matches</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{#if errors[availableLangsField.key]}\n\t\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-xs text-error-500\">{errors[availableLangsField.key]}</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{#if availableLangsField.placeholder}\n\t\t\t\t\t\t\t\t\t\t<p class=\"mt-1 text-[10px] text-slate-500 dark:text-slate-400\">Example: {availableLangsField.placeholder}</p>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\n\t\t\t\t\t<!-- Right Column: Base Locale + Available Locales -->\n\t\t\t\t\t{#each [null] as _}\n\t\t\t\t\t\t{@const baseLocaleField = group.fields.find((f: any) => f.key === 'BASE_LOCALE')}\n\t\t\t\t\t\t{@const localesField = group.fields.find((f: any) => f.key === 'LOCALES')}\n\n\t\t\t\t\t\t<div class=\"space-y-3 rounded-md border border-slate-300/50 bg-surface-50/60 p-4 dark:border-slate-600/60 dark:bg-surface-800/40\">\n\t\t\t\t\t\t\t{#if baseLocaleField}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label for={baseLocaleField.key} class=\"mb-1 flex items-center gap-1 text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:translate\" width=\"18\" class=\"text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t<span>{baseLocaleField.label}</span>\n\t\t\t\t\t\t\t\t\t\t{#if baseLocaleField.required}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-error-500\">*</span>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-1 text-slate-400 hover:text-primary-500\"\n\t\t\t\t\t\t\t\t\t\t\tdata-tooltip={baseLocaleField.description}\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Field information\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:help-circle-outline\" width=\"16\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tid={baseLocaleField.key}\n\t\t\t\t\t\t\t\t\t\tbind:value={values[baseLocaleField.key]}\n\t\t\t\t\t\t\t\t\t\tclass=\"input w-full rounded {errors[baseLocaleField.key] ? 'border-error-500' : ''}\"\n\t\t\t\t\t\t\t\t\t\trequired={baseLocaleField.required}\n\t\t\t\t\t\t\t\t\t\tonchange={() => (errors[baseLocaleField.key] = '')}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{#if (values.LOCALES as string[])?.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t{#each values.LOCALES as string[] as langCode}\n\t\t\t\t\t\t\t\t\t\t\t\t<option value={langCode}>{displayLanguage(langCode)} ({langCode})</option>\n\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"en\">English (en)</option>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t{#if errors[baseLocaleField.key]}\n\t\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-xs text-error-500\">{errors[baseLocaleField.key]}</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if localesField}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div class=\"mb-1 flex items-center gap-1 text-sm font-medium tracking-wide\">\n\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:translate-variant\" width=\"14\" class=\"text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t<span>{localesField.label}</span>\n\t\t\t\t\t\t\t\t\t\t{#if localesField.required}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-error-500\">*</span>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-1 text-slate-400 hover:text-primary-500\"\n\t\t\t\t\t\t\t\t\t\t\tdata-tooltip={localesField.description}\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Field information\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:help-circle-outline\" width=\"14\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"flex min-h-10 flex-wrap gap-2 rounded border p-2 pr-16 {errors[localesField.key]\n\t\t\t\t\t\t\t\t\t\t\t\t? 'border-error-500 bg-error-50 dark:bg-error-900/20'\n\t\t\t\t\t\t\t\t\t\t\t\t: 'border-slate-300/50 bg-surface-50 dark:border-slate-600 dark:bg-surface-700/40'}\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{#if (values[localesField.key] as string[])?.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t\t{#each values[localesField.key] as string[] as langCode}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"group preset-ghost-tertiary-500 badge inline-flex items-center gap-1 rounded-full dark:preset-ghost-primary-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{displayLanguage(langCode)} ({langCode})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{#if !localesField.readonly}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"opacity-60 transition hover:opacity-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst currentBase = values.BASE_LOCALE;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tremoveLanguage(localesField.key, langCode);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Reset base if it was removed\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (currentBase === langCode) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst remaining = (values[localesField.key] as string[]) || [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues.BASE_LOCALE = remaining[0] || 'en';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Remove {langCode}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t×\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t\t{:else if localesField.placeholder}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-surface-500 dark:text-surface-50 text-xs\">{localesField.placeholder}</span>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t\t{#if !localesField.readonly}\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"preset-filled-surface-500 badge absolute right-2 top-2 rounded-full\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowLanguagePicker[localesField.key] = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlanguageSearch[localesField.key] = '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-expanded={showLanguagePicker[localesField.key]}\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-controls=\"{localesField.key}-lang-picker\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:plus\" width=\"14\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<!-- Language Picker Dropdown -->\n\t\t\t\t\t\t\t\t\t\t{#if showLanguagePicker[localesField.key]}\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"{localesField.key}-lang-picker\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute left-0 top-full z-20 mt-2 w-64 rounded-md border border-slate-300/60 bg-surface-50 p-2 shadow-lg dark:border-slate-600 dark:bg-surface-800\"\n\t\t\t\t\t\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Add language\"\n\t\t\t\t\t\t\t\t\t\t\t\ttabindex=\"-1\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mb-2 w-full rounded border border-slate-300/60 bg-transparent px-2 py-1 text-xs outline-none focus:border-primary-500 dark:border-slate-600\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Search...\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tbind:value={languageSearch[localesField.key]}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"max-h-48 overflow-auto\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#each allowedLocales.filter((code: string) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst search = (languageSearch[localesField.key] || '').toLowerCase();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst currentValues = (values[localesField.key] as string[]) || [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst langName = displayLanguage(code).toLowerCase();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn !currentValues.includes(code) && (search === '' || langName.includes(search) || code\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(search));\n\t\t\t\t\t\t\t\t\t\t\t\t\t}) as code}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex w-full items-center justify-between rounded px-2 py-1 text-left text-xs hover:bg-primary-500/10\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleLanguage(localesField.key, code);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowLanguagePicker[localesField.key] = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Set as base if it's the first locale\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!(values[localesField.key] as string[])?.length || !values.BASE_LOCALE) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues.BASE_LOCALE = code;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{displayLanguage(code)} ({code.toUpperCase()})</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:plus-circle-outline\" width=\"14\" class=\"text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"px-1 py-2 text-center text-[11px] text-slate-500\">No matches</p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{#if errors[localesField.key]}\n\t\t\t\t\t\t\t\t\t\t<div class=\"mt-1 text-xs text-error-500\">{errors[localesField.key]}</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{#if localesField.placeholder}\n\t\t\t\t\t\t\t\t\t\t<p class=\"mt-1 text-[10px] text-slate-500 dark:text-slate-400\">Example: {localesField.placeholder}</p>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t<!-- Default Grid Layout for Other Groups -->\n\t\t\t\t<div class=\"grid grid-cols-1 gap-4 md:gap-6 lg:grid-cols-2\">\n\t\t\t\t\t{#each group.fields as field}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"space-y-2 overflow-visible max-w-full {field.type === 'array' ||\n\t\t\t\t\t\t\tfield.type === 'password' ||\n\t\t\t\t\t\t\tfield.type === 'language-multi' ||\n\t\t\t\t\t\t\tfield.type === 'loglevel-multi'\n\t\t\t\t\t\t\t\t? 'lg:col-span-2'\n\t\t\t\t\t\t\t\t: ''}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<label for={field.key} class=\"mb-2 block\">\n\t\t\t\t\t\t\t\t<span class=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t<iconify-icon icon={getFieldIcon(field)} width=\"18\" class=\"text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t<span class=\"text-sm font-semibold text-tertiary-500 dark:text-primary-500 md:text-base\">{field.label}</span>\n\t\t\t\t\t\t\t\t\t{#if field.required}\n\t\t\t\t\t\t\t\t\t\t<span class=\"text-error-500\">*</span>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t<!-- Info icon with tooltip -->\n\t\t\t\t\t\t\t\t\t<div class=\"group relative inline-block\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text-surface-500 hover:text-surface-900 dark:text-surface-50 dark:hover:text-surface-50 cursor-help\"\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Field information\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"material-symbols:info-outline\" width=\"16\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<!-- Tooltip Content -->\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclass=\"pointer-events-none absolute bottom-full left-1/2 z-1000 mb-2 w-max max-w-[200px] -translate-x-1/2 rounded-md bg-black/90 px-3 py-2 text-xs leading-tight text-white opacity-0 transition-opacity group-hover:opacity-100 group-focus:opacity-100 md:max-w-[250px]\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{field.description}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<!-- Text Input -->\n\t\t\t\t\t\t\t{#if field.type === 'text'}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tid={field.key}\n\t\t\t\t\t\t\t\t\ttype={field.key.toLowerCase().includes('email') || field.key === 'SMTP_USER' || field.label.toLowerCase().includes('email')\n\t\t\t\t\t\t\t\t\t\t? 'email'\n\t\t\t\t\t\t\t\t\t\t: 'text'}\n\t\t\t\t\t\t\t\t\tclass=\"input w-full max-w-full min-h-[44px]\"\n\t\t\t\t\t\t\t\t\tbind:value={values[field.key]}\n\t\t\t\t\t\t\t\t\tplaceholder={field.placeholder}\n\t\t\t\t\t\t\t\t\trequired={field.required}\n\t\t\t\t\t\t\t\t\tdisabled={field.readonly}\n\t\t\t\t\t\t\t\t\toninput={() => (errors[field.key] = '')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<!-- Number Input -->\n\t\t\t\t\t\t\t{:else if field.type === 'number'}\n\t\t\t\t\t\t\t\t<div class=\"input-group input-group-divider grid-cols-[1fr_auto] flex flex-col sm:flex-row max-w-full text-center sm:text-left\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tid={field.key}\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\tclass=\"input w-full max-w-full min-h-[44px]\"\n\t\t\t\t\t\t\t\t\t\tbind:value={values[field.key]}\n\t\t\t\t\t\t\t\t\t\tplaceholder={field.placeholder}\n\t\t\t\t\t\t\t\t\t\trequired={field.required}\n\t\t\t\t\t\t\t\t\t\tmin={field.min}\n\t\t\t\t\t\t\t\t\t\tmax={field.max}\n\t\t\t\t\t\t\t\t\t\toninput={() => (errors[field.key] = '')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{#if field.unit}\n\t\t\t\t\t\t\t\t\t\t<div class=\"input-group-shim text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t{field.unit}\n\t\t\t\t\t\t\t\t\t\t\t{#if typeof values[field.key] === 'number' && field.unit === 'seconds'}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"ml-2 text-surface-500 dark:text-surface-50\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t({formatDuration(values[field.key] as number)})\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Password Input -->\n\t\t\t\t\t\t\t{:else if field.type === 'password'}\n\t\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tid={field.key}\n\t\t\t\t\t\t\t\t\t\ttype={showPassword[field.key] ? 'text' : 'password'}\n\t\t\t\t\t\t\t\t\t\tclass=\"input w-full max-w-full min-h-[44px] pr-10\"\n\t\t\t\t\t\t\t\t\t\tbind:value={values[field.key]}\n\t\t\t\t\t\t\t\t\t\tplaceholder={field.placeholder}\n\t\t\t\t\t\t\t\t\t\trequired={field.required}\n\t\t\t\t\t\t\t\t\t\tdisabled={field.readonly}\n\t\t\t\t\t\t\t\t\t\toninput={() => (errors[field.key] = '')}\n\t\t\t\t\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{#if !field.readonly}\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute right-2 top-1/2 -translate-y-1/2 text-surface-600 hover:text-surface-900 dark:text-surface-300 dark:hover:text-surface-50\"\n\t\t\t\t\t\t\t\t\t\t\tonclick={() => (showPassword[field.key] = !showPassword[field.key])}\n\t\t\t\t\t\t\t\t\t\t\taria-label={showPassword[field.key] ? 'Hide password' : 'Show password'}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon={showPassword[field.key] ? 'bi:eye-slash-fill' : 'bi:eye-fill'} width=\"20\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<!-- Boolean Input -->\n\t\t\t\t\t\t\t{:else if field.type === 'boolean'}\n\t\t\t\t\t\t\t\t<label class=\"flex items-center space-x-2\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tid={field.key}\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\tclass=\"checkbox w-auto min-w-[20px] min-h-[20px]\"\n\t\t\t\t\t\t\t\t\t\tchecked={!!values[field.key]}\n\t\t\t\t\t\t\t\t\t\tonchange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\tvalues[field.key] = (e.target as HTMLInputElement).checked;\n\t\t\t\t\t\t\t\t\t\t\terrors[field.key] = '';\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span>Enable {field.label}</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<!-- Select Input -->\n\t\t\t\t\t\t\t{:else if field.type === 'select' && field.options}\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tid={field.key}\n\t\t\t\t\t\t\t\t\tclass=\"select w-full max-w-full min-h-[44px]\"\n\t\t\t\t\t\t\t\t\tbind:value={values[field.key]}\n\t\t\t\t\t\t\t\t\trequired={field.required}\n\t\t\t\t\t\t\t\t\tonchange={() => (errors[field.key] = '')}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"\">Select {field.label}...</option>\n\t\t\t\t\t\t\t\t\t{#each field.options as option}\n\t\t\t\t\t\t\t\t\t\t<option value={option.value}>{option.label}</option>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</select>\n\n\t\t\t\t\t\t\t\t<!-- Array Input -->\n\t\t\t\t\t\t\t{:else if field.type === 'array'}\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tid={field.key}\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"input w-full max-w-full min-h-[44px]\"\n\t\t\t\t\t\t\t\t\tvalue={getArrayValue(field.key)}\n\t\t\t\t\t\t\t\t\tplaceholder={field.placeholder}\n\t\t\t\t\t\t\t\t\trequired={field.required}\n\t\t\t\t\t\t\t\t\toninput={(e) => {\n\t\t\t\t\t\t\t\t\t\thandleArrayInput(field, e);\n\t\t\t\t\t\t\t\t\t\terrors[field.key] = '';\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p class=\"mt-1 text-xs text-surface-500 dark:text-surface-50\">Enter values separated by commas</p>\n\n\t\t\t\t\t\t\t\t<!-- Language Multi-Select -->\n\t\t\t\t\t\t\t{:else if field.type === 'language-multi'}\n\t\t\t\t\t\t\t\t<!-- Language Multi-Select (Styled like SystemConfig.svelte) -->\n\t\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"flex min-h-10 flex-wrap gap-2 rounded border p-2 pr-16 {errors[field.key]\n\t\t\t\t\t\t\t\t\t\t\t? 'border-error-500 bg-error-50 dark:bg-error-900/20'\n\t\t\t\t\t\t\t\t\t\t\t: 'border-slate-300/50 bg-surface-50 dark:border-slate-600 dark:bg-surface-700/40'}\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{#if (values[field.key] as string[])?.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t{#each values[field.key] as string[] as langCode}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"group preset-ghost-tertiary-500 badge inline-flex items-center gap-1 rounded-full dark:preset-ghost-primary-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{displayLanguage(langCode)} ({langCode})\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if !field.readonly}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"opacity-60 transition hover:opacity-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => removeLanguage(field.key, langCode)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Remove {langCode}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t×\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t{:else if field.placeholder}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-surface-500 dark:text-surface-50 text-xs\">{field.placeholder}</span>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t{#if !field.readonly}\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"preset-filled-surface-500 badge absolute right-2 top-2 rounded-full\"\n\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowLanguagePicker[field.key] = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\tlanguageSearch[field.key] = '';\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-expanded={showLanguagePicker[field.key]}\n\t\t\t\t\t\t\t\t\t\t\t\taria-controls=\"{field.key}-lang-picker\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:plus\" width=\"14\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<!-- Language Picker Dropdown -->\n\t\t\t\t\t\t\t\t\t{#if showLanguagePicker[field.key]}\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tid=\"{field.key}-lang-picker\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute left-0 top-full z-20 mt-2 w-64 rounded-md border border-slate-300/60 bg-surface-50 p-2 shadow-lg dark:border-slate-600 dark:bg-surface-800\"\n\t\t\t\t\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Add language\"\n\t\t\t\t\t\t\t\t\t\t\ttabindex=\"-1\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"mb-2 w-full rounded border border-slate-300/60 bg-transparent px-2 py-1 text-xs outline-none focus:border-primary-500 dark:border-slate-600\"\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Search...\"\n\t\t\t\t\t\t\t\t\t\t\t\tbind:value={languageSearch[field.key]}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"max-h-48 overflow-auto\">\n\t\t\t\t\t\t\t\t\t\t\t\t{#each iso6391.filter((lang: { code: string; name: string; native: string }) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst search = (languageSearch[field.key] || '').toLowerCase();\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst currentValues = (values[field.key] as string[]) || [];\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn !currentValues.includes(lang.code) && (search === '' || lang.name.toLowerCase().includes(search) || lang.native\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.includes(search) || lang.code.toLowerCase().includes(search));\n\t\t\t\t\t\t\t\t\t\t\t\t}) as lang}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex w-full items-center justify-between rounded px-2 py-1 text-left text-xs hover:bg-primary-500/10\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleLanguage(field.key, lang.code);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowLanguagePicker[field.key] = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{lang.native} ({lang.code})</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:plus-circle-outline\" width=\"14\" class=\"text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p class=\"px-1 py-2 text-center text-[11px] text-slate-500\">No matches</p>\n\t\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{#if field.placeholder && (values[field.key] as string[])?.length > 0}\n\t\t\t\t\t\t\t\t\t<p class=\"text-surface-500 dark:text-surface-50 mt-1 text-[10px]\">Example: {field.placeholder}</p>\n\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t<!-- Log Level Multi-Select -->\n\t\t\t\t\t\t\t{:else if field.type === 'loglevel-multi'}\n\t\t\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"flex min-h-10 flex-wrap gap-2 rounded border p-2 pr-16 {errors[field.key]\n\t\t\t\t\t\t\t\t\t\t\t? 'border-error-500 bg-error-50 dark:bg-error-900/20'\n\t\t\t\t\t\t\t\t\t\t\t: 'border-slate-300/50 bg-surface-50 dark:border-slate-600 dark:bg-surface-700/40'}\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{#if (values[field.key] as LogLevel[])?.length > 0}\n\t\t\t\t\t\t\t\t\t\t\t{#each values[field.key] as LogLevel[] as level}\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"group preset-ghost-tertiary-500 badge inline-flex items-center gap-1 rounded-full dark:preset-ghost-primary-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{level}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if !field.readonly}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"opacity-60 transition hover:opacity-100\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => removeLogLevel(field.key, level)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"Remove {level}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t×\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t{:else if field.placeholder}\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-surface-500 dark:text-surface-50 text-xs\">{field.placeholder}</span>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t{#if !field.readonly}\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"preset-filled-surface-500 badge absolute right-2 top-2 rounded-full\"\n\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => (showLogLevelPicker[field.key] = true)}\n\t\t\t\t\t\t\t\t\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-expanded={showLogLevelPicker[field.key]}\n\t\t\t\t\t\t\t\t\t\t\t\taria-controls=\"{field.key}-loglevel-picker\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:plus\" width=\"14\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<!-- Log Level Picker Dropdown -->\n\t\t\t\t\t\t\t\t\t{#if showLogLevelPicker[field.key]}\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tid=\"{field.key}-loglevel-picker\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute left-0 top-full z-20 mt-2 w-64 rounded-md border border-slate-300/60 bg-surface-50 p-2 shadow-lg dark:border-slate-600 dark:bg-surface-800\"\n\t\t\t\t\t\t\t\t\t\t\trole=\"dialog\"\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"Add log level\"\n\t\t\t\t\t\t\t\t\t\t\ttabindex=\"-1\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"max-h-48 overflow-auto\">\n\t\t\t\t\t\t\t\t\t\t\t\t{#each LOG_LEVELS as level}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{@const currentValues = (values[field.key] as LogLevel[]) || []}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if !currentValues.includes(level)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex w-full items-center justify-between rounded px-2 py-1 text-left text-xs capitalize hover:bg-primary-500/10\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleLogLevel(field.key, level);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowLogLevelPicker[field.key] = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span>{level}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:plus-circle-outline\" width=\"14\" class=\"text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{#if field.placeholder && (values[field.key] as LogLevel[])?.length > 0}\n\t\t\t\t\t\t\t\t\t<p class=\"text-surface-500 dark:text-surface-50 mt-1 text-[10px]\">Example: {field.placeholder}</p>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t<!-- Field Error -->\n\t\t\t\t\t\t\t{#if errors[field.key]}\n\t\t\t\t\t\t\t\t<p class=\"mt-1 text-sm text-error-500\">{errors[field.key]}</p>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<!-- Actions -->\n\t\t\t<div class=\"flex flex-col justify-between gap-2 pt-4 sm:flex-row max-w-full overflow-visible\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclass=\"preset-filled-surface-500 btn w-full sm:w-auto min-w-fit px-4 sm:min-h-[48px]\"\n\t\t\t\t\tonclick={resetToDefaults}\n\t\t\t\t\tdisabled={saving}\n\t\t\t\t>\n\t\t\t\t\t<span>🔄</span>\n\t\t\t\t\t<span>Reset to Defaults</span>\n\t\t\t\t</button>\n\n\t\t\t\t<button type=\"submit\" class=\"preset-filled-primary-500 btn w-full sm:w-auto min-w-fit px-4 sm:min-h-[48px]\" disabled={saving}>\n\t\t\t\t\t{#if saving}\n\t\t\t\t\t\t<span>Saving...</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span>💾</span>\n\t\t\t\t\t\t<span>Save Changes</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</form>\n\t{/if}\n</div>\n","<!--\n@file src/routes/(app)/config/systemsetting/+page.svelte\n@component\n**System Settings page with tabbed interface**\nAll dynamic CMS settings organized into logical groups\n\n### Props\n- data: { isAdmin: boolean }\n\n### Features:\n- Tabbed interface for easy navigation between setting groups\n- Search bar to quickly find specific settings or groups\n- Warning indicators for groups needing configuration\n- Responsive design with dropdown for mobile view\n-->\n\n<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { page } from '$app/state';\n\timport { goto } from '$app/navigation';\n\timport PageTitle from '@cms/components/PageTitle.svelte';\n\timport { logger } from '@shared/utils/logger';\n\timport { groupsNeedingConfig } from '@shared/stores/configStore.svelte';\n\n\t// Import settings structure\n\timport { getSettingGroupsByRole } from '../settingsGroups';\n\timport type { SettingGroup } from '../settingsGroups';\n\n\t// Import setting component\n\timport GenericSettingsGroup from '../components/GenericSettingsGroup.svelte';\n\n\t// Get user admin status from page data (set by +page.server.ts)\n\tconst { data } = $props();\n\tconst isAdmin = $derived(data.isAdmin);\n\n\t//  Use $state for all component state\n\tlet availableGroups: SettingGroup[] = $state([]);\n\n\t// Derived selection from URL\n\tconst selectedGroupId = $derived(page.url.searchParams.get('group'));\n\n\t// Track which groups need configuration\n\tlet unconfiguredCount = $state(0);\n\n\t// Subscribe to changes in groups needing config (from store)\n\tgroupsNeedingConfig.subscribe((groups) => {\n\t\tunconfiguredCount = groups.size;\n\t});\n\n\t// Remove filteredGroups logic as sidebar manages it externally\n\n\t// Check all groups for empty fields on page load\n\tasync function checkAllGroupsForEmptyFields() {\n\t\tconst groupsWithEmptyFields = new Set<string>();\n\n\t\t// Check each available group\n\t\tfor (const group of availableGroups) {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(`/api/settings/${group.id}`);\n\t\t\t\tconst data = await response.json();\n\n\t\t\t\tif (data.success && data.values) {\n\t\t\t\t\t// Check if this group has empty required/critical fields\n\t\t\t\t\tconst hasEmptyFields = group.fields.some((field) => {\n\t\t\t\t\t\tconst value = data.values[field.key];\n\n\t\t\t\t\t\t// Check for empty strings in critical fields\n\t\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\t\treturn value === '' && (field.required || field.key.includes('HOST') || field.key.includes('EMAIL'));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif (hasEmptyFields) {\n\t\t\t\t\t\tgroupsWithEmptyFields.add(group.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tlogger.error(`Failed to check group ${group.id}:`, err);\n\t\t\t}\n\t\t}\n\n\t\t// Update the store with all groups that need configuration\n\t\tgroupsNeedingConfig.set(groupsWithEmptyFields);\n\t}\n\n\tonMount(() => {\n\t\tavailableGroups = getSettingGroupsByRole(isAdmin).sort((a, b) => a.name.localeCompare(b.name));\n\n\t\t// Default selection if none in URL\n\t\tif (!selectedGroupId && availableGroups.length > 0) {\n\t\t\tconst url = new URL(window.location.href);\n\t\t\turl.searchParams.set('group', availableGroups[0].id);\n\t\t\tgoto(url.toString(), { replaceState: true });\n\t\t}\n\n\t\tcheckAllGroupsForEmptyFields();\n\t});\n</script>\n\n<PageTitle name=\"Dynamic System Settings\" icon=\"mdi:cog\" showBackButton={true} backUrl=\"/config\" />\n\n<p class=\"mb-6 px-2 text-surface-600 dark:text-surface-300\">\n\tThese are critical system settings loaded dynamically from the database. Most changes take effect immediately, though settings marked with \"Restart\n\tRequired\" need a server restart. Settings are organized into <span class=\"font-bold text-primary-500\">{availableGroups.length}</span>\n\tlogical groups for easy management.\n</p>\n\n{#if unconfiguredCount > 0}\n\t<div class=\"wrapper preset-filled-error-500 mb-6\">\n\t\t<div class=\"text-sm opacity-90\">\n\t\t\t<strong\n\t\t\t\t>⚠️ Action Required: {unconfiguredCount}\n\t\t\t\t{unconfiguredCount === 1 ? 'group needs' : 'groups need'} configuration before production use.</strong\n\t\t\t>\n\t\t\t<p class=\"mt-2\">\n\t\t\t\tPlease configure the following {unconfiguredCount === 1 ? 'group' : 'groups'}:\n\t\t\t\t{#each availableGroups.filter((g) => $groupsNeedingConfig.has(g.id)) as group, i}\n\t\t\t\t\t<span class=\"font-semibold\">\n\t\t\t\t\t\t{group.icon}\n\t\t\t\t\t\t{group.name}{i < unconfiguredCount - 1 ? ', ' : ''}\n\t\t\t\t\t</span>\n\t\t\t\t{/each}\n\t\t\t</p>\n\t\t</div>\n\t</div>\n{/if}\n\n<!-- Settings Panel (Standalone) -->\n<div class=\"card overflow-hidden min-h-[500px] max-h-[calc(100vh-140px)] flex flex-col\">\n\t{#if selectedGroupId}\n\t\t{#key selectedGroupId}\n\t\t\t{@const group = availableGroups.find((g) => g.id === selectedGroupId)}\n\t\t\t{#if group}\n\t\t\t\t<div class=\"h-full overflow-y-auto p-6\">\n\t\t\t\t\t<!-- Use generic component for all groups -->\n\t\t\t\t\t<GenericSettingsGroup {group} {groupsNeedingConfig} />\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\"flex h-full items-center justify-center p-6 text-center\">\n\t\t\t\t\t<p class=\"text-surface-500\">Selected group not found.</p>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/key}\n\t{:else}\n\t\t<div class=\"flex h-full items-center justify-center p-6 text-center\">\n\t\t\t<p class=\"text-surface-500\">Select a group to configure.</p>\n\t\t</div>\n\t{/if}\n</div>\n\n<!-- System Status -->\n<div class=\"mx-auto mt-8 flex max-w-4xl items-center justify-center\">\n\t<div class=\"badge-glass flex items-center gap-3 rounded-full px-6 py-3 text-sm\">\n\t\t<span class=\"text-2xl text-tertiary-500 dark:text-primary-500\">●</span>\n\t\t<span class=\"font-semibold text-tertiary-500 dark:text-primary-500\">System Operational</span>\n\t\t<span class=\"text-dark dark:text-white\">|</span>\n\t\t<span class=\"text-surface-600 dark:text-surface-300\">Settings:</span>\n\t\t<span class=\"font-semibold text-tertiary-500 dark:text-primary-500\">Loaded</span>\n\t\t<span class=\"text-dark dark:text-white\">|</span>\n\t\t<span class=\"text-surface-600 dark:text-surface-300\">Groups:</span>\n\t\t<span class=\"font-semibold text-tertiary-500 dark:text-primary-500\">{availableGroups.length}</span>\n\t\t<span class=\"text-dark dark:text-white\">|</span>\n\t\t<span class=\"text-surface-600 dark:text-surface-300\">Environment:</span>\n\t\t<span class=\"font-semibold text-tertiary-500 dark:text-primary-500\">Dynamic</span>\n\t</div>\n</div>\n```\n"],"names":["$.escape","$$renderer","$.attr","$.stringify","$.ensure_array_like","$.attr_class"],"mappings":"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"}