{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../../../src/routes/config/collectionbuilder/[action]/[...contentPath]/tabs/CollectionForm.svelte","../../../../../../../../../../../shared/components/src/VerticalList.svelte","../../../../../../../../../src/routes/config/collectionbuilder/[action]/[...contentPath]/tabs/CollectionWidget.svelte","../../../../../../../../../src/routes/config/collectionbuilder/[action]/[...contentPath]/+page.svelte"],"sourcesContent":["<!-- \n@files src/routes/(app)/config/collectionbuilder/[...contentTypes]/tabs/CollectionForm.svelte\n@component\n**This component displays the collection form**\n\n### Props:\n- `collection` {object} - Collection object\n- `handlePageTitleUpdate` {function} - Function to update the page title\n\n### Features:\n- Collection Name\n- Collection Icon\n- Collection Description\n-->\n\n<script lang=\"ts\">\n\timport { untrack } from 'svelte';\n\t// Stores\n\timport { page } from '$app/state';\n\timport { tabSet } from '@shared/stores/store.svelte';\n\timport { collection, setCollection } from '@shared/stores/collectionStore.svelte';\n\n\t// Components\n\timport IconifyPicker from '@cms/components/IconifyPicker.svelte';\n\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\t// Skeleton\n\t// Collection Manager\n\n\tconst props = $props();\n\n\t//action\n\tconst action = page.params.action;\n\n\t// Form fields\n\tlet searchQuery = $state('');\n\tlet autoUpdateSlug = $state(true);\n\tlet selectedIcon = $state(props.data?.icon || '');\n\n\t// Form field values\n\tlet name = $state(props.data?.name ?? '');\n\tlet slug = $state(props.data?.slug ?? '');\n\tlet description = $state(props.data?.description ?? '');\n\tlet status = $state(props.data?.status ?? 'unpublished');\n\n\t// Update form fields when props.data changes (for async loading)\n\t$effect(() => {\n\t\tif (props.data) {\n\t\t\tname = props.data.name ?? '';\n\t\t\tslug = props.data.slug ?? '';\n\t\t\tdescription = props.data.description ?? '';\n\t\t\tstatus = props.data.status ?? 'unpublished';\n\t\t\tselectedIcon = props.data.icon ?? '';\n\t\t}\n\t});\n\n\t// Derived values\n\tconst DBName = $derived(name ? name.toLowerCase().replace(/ /g, '_') : '');\n\n\t// Update collection value when icon changes\n\t$effect(() => {\n\t\t// Only track the selectedIcon, not the collection\n\t\tconst currentIcon = selectedIcon;\n\n\t\tuntrack(() => {\n\t\t\tif (collection.value && currentIcon !== collection.value.icon) {\n\t\t\t\tsetCollection({\n\t\t\t\t\t...collection.value,\n\t\t\t\t\ticon: currentIcon\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\n\t// Update collection value when form fields change (only if editing an existing collection)\n\t$effect(() => {\n\t\t// Only track the form field changes, not the collection itself\n\t\tconst currentName = name;\n\t\tconst currentSlug = slug;\n\t\tconst currentDescription = description;\n\t\tconst currentStatus = status;\n\t\tconst currentIcon = selectedIcon;\n\n\t\t// Use untrack to prevent reading collection.value from triggering this effect again\n\t\tuntrack(() => {\n\t\t\tif (collection.value?._id) {\n\t\t\t\t// Check if values have actually changed to avoid unnecessary updates\n\t\t\t\tif (\n\t\t\t\t\tcollection.value.name === currentName &&\n\t\t\t\t\tcollection.value.slug === currentSlug &&\n\t\t\t\t\tcollection.value.description === currentDescription &&\n\t\t\t\t\tcollection.value.status === currentStatus &&\n\t\t\t\t\tcollection.value.icon === currentIcon\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetCollection({\n\t\t\t\t\t...collection.value, // Spread existing values (including _id)\n\t\t\t\t\tname: currentName,\n\t\t\t\t\tslug: currentSlug,\n\t\t\t\t\tdescription: currentDescription,\n\t\t\t\t\tstatus: currentStatus,\n\t\t\t\t\ticon: currentIcon // Ensure icon is updated\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\n\tfunction handleNameInput() {\n\t\tif (typeof name === 'string' && name) {\n\t\t\t// Update the URL\n\t\t\twindow.history.replaceState({}, '', `/config/collectionbuilder/${action}/${slug}`);\n\n\t\t\t// Update the page title\n\t\t\tprops.handlePageTitleUpdate(name);\n\n\t\t\t// Update the linked slug input\n\t\t\tslug = name.toLowerCase().replace(/\\s+/g, '_');\n\n\t\t\t// Call the `onSlugInput` function to update the slug variable\n\t\t\tonSlugInput();\n\t\t}\n\t}\n\n\tfunction onSlugInput() {\n\t\t// Update the slug field whenever the name field is changed\n\t\tif (name) {\n\t\t\tslug = name.toLowerCase().replace(/\\s+/g, '_');\n\t\t\treturn slug;\n\t\t}\n\t\t// Disable automatic slug updates\n\t\tautoUpdateSlug = false;\n\t}\n\n\t// Update slug and page title when name changes\n\t$effect(() => {\n\t\t// Only track the name and autoUpdateSlug, not the collection\n\t\tconst currentName = name;\n\t\tconst shouldAutoUpdate = autoUpdateSlug;\n\n\t\t// Automatically update slug when name changes\n\t\tif (shouldAutoUpdate && currentName) {\n\t\t\tslug = currentName.toLowerCase().replace(/ /g, '_');\n\t\t}\n\n\t\t// Update page title based on action and collection name\n\t\tif (action === 'edit') {\n\t\t\tprops.handlePageTitleUpdate(currentName);\n\t\t} else if (currentName) {\n\t\t\tprops.handlePageTitleUpdate(currentName);\n\t\t} else {\n\t\t\tprops.handlePageTitleUpdate(`new`);\n\t\t}\n\t});\n\n\t// Import status types from the content types\n\timport { StatusTypes } from '@cms-types';\n\tconst statuses = Object.values(StatusTypes);\n\n\tfunction handleNextClick() {\n\t\ttabSet.set(1);\n\t}\n</script>\n\n<!-- Single Column Layout Container -->\n<div class=\"flex w-full flex-col\">\n\t<!-- Form Fields Section -->\n\t<div class=\"flex flex-col gap-2 rounded border p-4\">\n\t\t<!-- Collection Name -->\n\t\t<div class=\"flex flex-col\">\n\t\t\t<label for=\"name\" class=\"mb-1 flex items-center font-medium\">\n\t\t\t\t{m.collection_name()} <span class=\"mx-1 text-error-500\">*</span>\n\t\t\t\t<iconify-icon\n\t\t\t\t\ticon=\"material-symbols:info\"\n\t\t\t\t\ttitle={`${m.collection_name_tooltip1()} ${m.collection_name_tooltip2()}`}\n\t\t\t\t\twidth=\"18\"\n\t\t\t\t\tclass=\"ml-1 cursor-pointer text-tertiary-500 dark:text-primary-500\"\n\t\t\t\t></iconify-icon>\n\t\t\t</label>\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\trequired\n\t\t\t\tid=\"name\"\n\t\t\t\tname=\"name\"\n\t\t\t\tdata-testid=\"collection-name-input\"\n\t\t\t\tbind:value={name}\n\t\t\t\toninput={handleNameInput}\n\t\t\t\tplaceholder={m.collection_name_placeholder()}\n\t\t\t\taria-label={m.collection_name()}\n\t\t\t\tclass=\"input w-full text-black dark:text-primary-500\"\n\t\t\t/>\n\t\t\t{#if name}\n\t\t\t\t<!-- Show DBName if name is entered -->\n\t\t\t\t<p class=\"mt-1 text-sm text-gray-600 dark:text-gray-400\">\n\t\t\t\t\t{m.collection_DBname()}\n\t\t\t\t\t<span class=\"font-bold text-tertiary-500 dark:text-primary-500\">{DBName}</span>\n\t\t\t\t</p>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<!-- Separator (Optional) -->\n\t\t<hr class=\"my-2 border-gray-300 dark:border-gray-600\" />\n\n\t\t<p class=\"base-font-color mb-0 text-center font-bold\">{m.collectionname_optional()}:</p>\n\n\t\t<!-- Icon -->\n\t\t<div class=\"flex flex-col\">\n\t\t\t<label for=\"icon\" class=\"mb-1 flex items-center font-medium\">\n\t\t\t\t{m.collectionname_labelicon()}\n\t\t\t\t<iconify-icon\n\t\t\t\t\ticon=\"material-symbols:info\"\n\t\t\t\t\ttitle={m.collection_icon_tooltip()}\n\t\t\t\t\twidth=\"18\"\n\t\t\t\t\tclass=\"ml-1 cursor-pointer text-tertiary-500 dark:text-primary-500\"\n\t\t\t\t></iconify-icon>\n\t\t\t</label>\n\t\t\t<IconifyPicker bind:iconselected={selectedIcon} bind:searchQuery />\n\t\t</div>\n\n\t\t<!-- Slug -->\n\t\t<div class=\"flex flex-col\">\n\t\t\t<label for=\"slug\" class=\"mb-1 flex items-center font-medium\">\n\t\t\t\t{m.collection_slug()}\n\t\t\t\t<iconify-icon\n\t\t\t\t\ticon=\"material-symbols:info\"\n\t\t\t\t\ttitle={m.collection_slug_tooltip()}\n\t\t\t\t\twidth=\"18\"\n\t\t\t\t\tclass=\"ml-1 cursor-pointer text-tertiary-500 dark:text-primary-500\"\n\t\t\t\t></iconify-icon>\n\t\t\t</label>\n\t\t\t<input type=\"text\" id=\"slug\" bind:value={slug} placeholder={m.collection_slug_input()} class=\"input w-full text-black dark:text-primary-500\" />\n\t\t</div>\n\n\t\t<!-- Description -->\n\t\t<div class=\"flex flex-col\">\n\t\t\t<label for=\"description\" class=\"mb-1 flex items-center font-medium\">\n\t\t\t\t{m.collectionname_description()}\n\t\t\t\t<iconify-icon\n\t\t\t\t\ticon=\"material-symbols:info\"\n\t\t\t\t\ttitle={m.collection_description()}\n\t\t\t\t\twidth=\"18\"\n\t\t\t\t\tclass=\"ml-1 cursor-pointer text-tertiary-500 dark:text-primary-500\"\n\t\t\t\t></iconify-icon>\n\t\t\t</label>\n\t\t\t<textarea\n\t\t\t\tid=\"description\"\n\t\t\t\trows=\"2\"\n\t\t\t\tbind:value={description}\n\t\t\t\tplaceholder={m.collection_description_placeholder()}\n\t\t\t\tclass=\"input w-full text-black dark:text-primary-500\"\n\t\t\t></textarea>\n\t\t</div>\n\n\t\t<!-- Status -->\n\t\t<div class=\"flex flex-col\">\n\t\t\t<label for=\"status\" class=\"mb-1 flex items-center font-medium\">\n\t\t\t\t{m.collection_status()}\n\t\t\t\t<iconify-icon\n\t\t\t\t\ticon=\"material-symbols:info\"\n\t\t\t\t\ttitle={m.collection_status_tooltip()}\n\t\t\t\t\twidth=\"18\"\n\t\t\t\t\tclass=\"ml-1 cursor-pointer text-tertiary-500 dark:text-primary-500\"\n\t\t\t\t></iconify-icon>\n\t\t\t</label>\n\t\t\t<select id=\"status\" bind:value={status} class=\"select w-full text-black dark:text-primary-500\">\n\t\t\t\t{#each statuses as statusOption}\n\t\t\t\t\t<option value={statusOption}>{statusOption}</option>\n\t\t\t\t{/each}\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\n\t<!-- Buttons Section -->\n\t<div class=\"mt-6 flex flex-col gap-2 sm:flex-row sm:justify-between\">\n\t\t<a href=\"/config/collectionbuilder\" class=\"preset-outlined-secondary-500 btn sm:w-auto\">{m.button_cancel()}</a>\n\t\t<button type=\"button\" onclick={handleNextClick} class=\"preset-filled-tertiary-500 btn dark:preset-filled-primary-500 sm:w-auto\"\n\t\t\t>{m.button_next()}</button\n\t\t>\n\t</div>\n</div>\n","<!-- \n@file src/components/VerticalList.svelte\n@component\n**VerticalList component for displaying items in a vertical list with drag-and-drop functionality**\n\n```tsx\n<VerticalList  items={items}  headers={headers} flipDurationMs={200} handleDndConsider={handleDndConsider} handleDndFinalize={handleDndFinalize}  children={children} />\n```\n\n### Props\n- `items` {array} - Array of items to be displayed in the list\n- `headers` {array} - Array of headers for the table columns\n- `flipDurationMs` {number} - Duration of the flip animation in milliseconds\n- `handleDndConsider` {function} - Function to handle drag-and-drop consider event\n- `handleDndFinalize` {function} - Function to handle drag-and-drop finalize event\n- `children` {function} - Function to render the content of the list\n-->\n\n<script lang=\"ts\">\n\timport { dndzone } from 'svelte-dnd-action';\n\timport type { DndEvent } from 'svelte-dnd-action';\n\n\tinterface Props {\n\t\titems: Record<string, unknown>[];\n\t\theaders?: string[];\n\t\tflipDurationMs: number;\n\t\thandleDndConsider: (e: CustomEvent<DndEvent>) => void;\n\t\thandleDndFinalize: (e: CustomEvent<DndEvent>) => void;\n\t\tchildren?: import('svelte').Snippet;\n\t}\n\n\tconst { items, headers = [], flipDurationMs, handleDndConsider, handleDndFinalize, children }: Props = $props();\n\n\tconst gridClass = $derived(\n\t\t`grid grid-cols-${headers.length + 1} preset-outlined-tertiary-500 dark:preset-outlined-primary-500 w-full items-start justify-start p-1 py-2 pl-3 text-center font-semibold`\n\t);\n</script>\n\n<div class=\"h-full overflow-y-auto\">\n\t<!-- Header -->\n\t{#if headers.length > 0}\n\t\t<div class={gridClass}>\n\t\t\t{#each headers as header, index (index)}\n\t\t\t\t<div class=\"ml-2 text-left\">{header}:</div>\n\t\t\t{/each}\n\t\t</div>\n\t{/if}\n\n\t<section use:dndzone={{ items: items, flipDurationMs }} onconsider={handleDndConsider} onfinalize={handleDndFinalize} class=\"my-1 w-full\">\n\t\t<!-- Data -->\n\t\t{@render children?.()}\n\t</section>\n</div>\n","<!--\n@fil src/routes/(app)/config/collectionbuilder/[...ContentTypes]/tabs/CollectionWidget.svelte\ncomponent\n**This component displays the collection widget**\n-->\n\n<script lang=\"ts\">\n\t// Stores\n\timport { page } from '$app/state';\n\timport { logger } from '@shared/utils/logger';\n\timport { collection, setTargetWidget } from '@shared/stores/collectionStore.svelte';\n\timport { tabSet } from '@shared/stores/store.svelte';\n\timport { asAny, getGuiFields } from '@shared/utils/utils';\n\t// Components\n\timport VerticalList from '@cms/components/VerticalList.svelte';\n\timport { widgetFunctions } from '@shared/stores/widgetStore.svelte';\n\timport { get } from 'svelte/store';\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\t// Skeleton\n\n\timport { modalState } from '@shared/utils/modalState.svelte';\n\timport ModalSelectWidget from './CollectionWidget/ModalSelectWidget.svelte';\n\timport ModalWidgetForm from './CollectionWidget/ModalWidgetForm.svelte';\n\n\tconst props = $props();\n\n\t// Extract the collection path from the URL\n\tconst contentPath = page.params.contentPath;\n\n\t// Helper function to map fields\n\tfunction mapFieldsWithWidgets(fields: any[]) {\n\t\tif (!fields) return [];\n\t\treturn fields.map((field, index) => {\n\t\t\tconst widgetType =\n\t\t\t\tfield.widget?.key || // For new widgets\n\t\t\t\tfield.widget?.Name || // For existing widgets\n\t\t\t\tfield.__type || // For schema-defined widgets\n\t\t\t\tfield.type || // Backup type field\n\t\t\t\tObject.keys(get(widgetFunctions)).find((key) => field[key]) || // Check if field has widget property\n\t\t\t\t'Unknown Widget'; // Fallback\n\n\t\t\treturn {\n\t\t\t\tid: index + 1,\n\t\t\t\t...field,\n\t\t\t\twidget: {\n\t\t\t\t\tkey: widgetType,\n\t\t\t\t\tName: widgetType,\n\t\t\t\t\t...field.widget\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}\n\n\t// Use state for fields (not derived, since we need to mutate it via drag-and-drop)\n\tlet fields = $state(mapFieldsWithWidgets(props.fields ?? []));\n\n\t// Watch for changes in props.fields and update our state\n\t$effect(() => {\n\t\tif (props.fields) {\n\t\t\tfields = mapFieldsWithWidgets(props.fields);\n\t\t}\n\t});\n\n\t// Collection headers\n\tconst headers = ['Id', 'Icon', 'Name', 'DBName', 'Widget'];\n\n\t// svelte-dnd-action\n\tconst flipDurationMs = 300;\n\n\tconst handleDndConsider = (e: CustomEvent) => {\n\t\tfields = e.detail.items;\n\t};\n\n\tconst handleDndFinalize = (e: CustomEvent) => {\n\t\tfields = e.detail.items;\n\t};\n\n\tfunction modalSelectWidget(): void {\n\t\tmodalState.trigger(\n\t\t\tModalSelectWidget as any,\n\t\t\t{\n\t\t\t\ttitle: 'Select a Widget',\n\t\t\t\tbody: 'Select your widget and then press submit.'\n\t\t\t},\n\t\t\t(r: { selectedWidget: string } | undefined) => {\n\t\t\t\tif (!r) return;\n\t\t\t\tconst { selectedWidget } = r;\n\t\t\t\tconst widgetInstance = get(widgetFunctions)[selectedWidget];\n\t\t\t\tif (selectedWidget && widgetInstance) {\n\t\t\t\t\t// Create a new widget object with the selected widget data\n\t\t\t\t\tconst newWidget = {\n\t\t\t\t\t\twidget: { key: selectedWidget, Name: selectedWidget },\n\t\t\t\t\t\tGuiFields: getGuiFields({ key: selectedWidget }, asAny(widgetInstance.GuiSchema)),\n\t\t\t\t\t\tpermissions: {} // Initialize empty permissions object\n\t\t\t\t\t};\n\t\t\t\t\t// Call modalWidgetForm with the new widget object\n\t\t\t\t\tmodalWidgetForm(newWidget);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\t// Modal 2 to Edit a selected widget\n\tfunction modalWidgetForm(selectedWidget: any): void {\n\t\t// Ensure permissions object exists\n\t\tif (!selectedWidget.permissions) {\n\t\t\tselectedWidget.permissions = {};\n\t\t}\n\t\tsetTargetWidget(selectedWidget);\n\t\tmodalState.trigger(\n\t\t\tModalWidgetForm as any,\n\t\t\t{\n\t\t\t\ttitle: 'Define your Widget',\n\t\t\t\tbody: 'Setup your widget and then press Save.',\n\t\t\t\tvalue: selectedWidget\n\t\t\t},\n\t\t\t(r: any) => {\n\t\t\t\tif (!r) return;\n\t\t\t\t// Find the index of the existing widget based on its ID\n\t\t\t\tconst existingIndex = fields.findIndex((widget) => widget.id === r.id);\n\n\t\t\t\tif (existingIndex !== -1) {\n\t\t\t\t\t// If the existing widget is found, update its properties\n\t\t\t\t\tconst updatedFields = [\n\t\t\t\t\t\t...fields.slice(0, existingIndex), // Copy widgets before the updated one\n\t\t\t\t\t\t{ ...r }, // Update the existing widget\n\t\t\t\t\t\t...fields.slice(existingIndex + 1) // Copy widgets after the updated one\n\t\t\t\t\t];\n\t\t\t\t\tfields = updatedFields;\n\t\t\t\t} else {\n\t\t\t\t\t// If the existing widget is not found, add it as a new widget\n\t\t\t\t\tconst newField = {\n\t\t\t\t\t\tid: fields.length + 1,\n\t\t\t\t\t\t...r\n\t\t\t\t\t};\n\t\t\t\t\tfields = [...fields, newField];\n\t\t\t\t}\n\t\t\t\t// Update the collectionValue store\n\t\t\t\tif (collection?.value) {\n\t\t\t\t\tcollection.value.fields = fields;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\t// Function to save data by sending a POST request\n\tasync function handleSave() {\n\t\ttry {\n\t\t\tconst updatedFields = fields.map((field) => {\n\t\t\t\tconst widgetInstance = field.widget?.Name ? get(widgetFunctions)[field.widget.Name] : undefined;\n\t\t\t\tif (field.widget?.Name && widgetInstance) {\n\t\t\t\t\tconst GuiFields = getGuiFields({ key: field.widget.Name }, asAny(widgetInstance.GuiSchema));\n\t\t\t\t\tfor (const [property, value] of Object.entries(field)) {\n\t\t\t\t\t\tif (typeof value !== 'object' && property !== 'id') {\n\t\t\t\t\t\t\tGuiFields[property] = field[property];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfield.widget.GuiFields = GuiFields;\n\t\t\t\t}\n\t\t\t\treturn field;\n\t\t\t});\n\n\t\t\t// Update the collection fields\n\t\t\tif (collection?.value) {\n\t\t\t\tcollection.value.fields = updatedFields;\n\t\t\t}\n\n\t\t\tawait props.handleCollectionSave();\n\t\t} catch (error) {\n\t\t\tlogger.error('Error saving collection:', error);\n\t\t}\n\t}\n</script>\n\n<div class=\"flex w-full flex-col\">\n\t<div class=\"preset-outlined-tertiary-500 rounded-t-md p-2 text-center dark:preset-outlined-primary-500\">\n\t\t<p>\n\t\t\t{m.collection_widgetfield_addrequired()}\n\t\t\t<span class=\"text-tertiary-500 dark:text-primary-500\">{contentPath}</span> Collection inputs.\n\t\t</p>\n\t\t<p class=\"mb-2\">{m.collection_widgetfield_drag()}</p>\n\t</div>\n\t<div style=\"max-height: 55vh !important;\">\n\t\t<VerticalList items={fields} {headers} {flipDurationMs} {handleDndConsider} {handleDndFinalize}>\n\t\t\t{#each fields as field (field.id)}\n\t\t\t\t<div\n\t\t\t\t\tclass=\"border-blue preset-outlined-surface-500 my-2 grid w-full grid-cols-6 items-center rounded-md border p-1 text-left hover:preset-filled-surface-500 dark:text-white\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"preset-ghost-tertiary-500 badge h-10 w-10 rounded-full dark:preset-ghost-primary-500\">\n\t\t\t\t\t\t{field.id}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<iconify-icon icon={field.icon} width=\"24\" class=\"text-tertiary-500\"></iconify-icon>\n\t\t\t\t\t<div class=\"font-bold dark:text-primary-500\">{field.label}</div>\n\t\t\t\t\t<div class=\" \">{field?.db_fieldName ? field.db_fieldName : '-'}</div>\n\t\t\t\t\t<div class=\" \">{field.widget?.key || field.__type || 'Unknown Widget'}</div>\n\n\t\t\t\t\t<button onclick={() => modalWidgetForm(field)} type=\"button\" aria-label={m.button_edit()} class=\"preset-ghost-primary-500 btn-icon ml-auto\">\n\t\t\t\t\t\t<iconify-icon icon=\"ic:baseline-edit\" width=\"24\" class=\"dark:text-white\"></iconify-icon>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t{/each}\n\t\t</VerticalList>\n\t</div>\n\t<div>\n\t\t<div class=\"mt-2 flex items-center justify-center gap-3\">\n\t\t\t<button\n\t\t\t\tonclick={() => modalSelectWidget()}\n\t\t\t\tclass=\"preset-filled-tertiary-500 btn\"\n\t\t\t\taria-label={m.collection_widgetfield_addFields()}\n\t\t\t\tdata-testid=\"add-field-button\"\n\t\t\t>\n\t\t\t\t{m.collection_widgetfield_addFields()}\n\t\t\t</button>\n\t\t</div>\n\t\t<div class=\" flex items-center justify-between\">\n\t\t\t<button onclick={() => tabSet.set(0)} type=\"button\" aria-label={m.button_previous()} class=\"preset-filled-secondary-500 btn mt-2 justify-end\">\n\t\t\t\t{m.button_previous()}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tonclick={handleSave}\n\t\t\t\ttype=\"button\"\n\t\t\t\taria-label={m.button_save()}\n\t\t\t\tclass=\"preset-filled-tertiary-500 btn mt-2 justify-end dark:preset-filled-primary-500 dark:text-black\">{m.button_save()}</button\n\t\t\t>\n\t\t</div>\n\t</div>\n</div>\n","<!-- \n@files src/routes/(app)/config/collectionbuilder/[...contentTypes]/+page.svelte\n@component  \n**This component sets up and displays the collection page.**\n\nIt provides a user-friendly interface for creating, editing, and deleting collections.\n\n### Props\n- `data`: An object containing:\n- `collection`: The collection schema data (if editing an existing collection).\n- `contentLanguage`: The current content language setting.\n- `user`: The authenticated user information.\n\n### Features\n- Dynamically sets the page title based on whether the user is creating a new collection or editing an existing one.\n- Loads collection data when editing, and initializes state accordingly.\n- Provides tabs for editing collection forms and widget fields.\n-->\n\n<script lang=\"ts\">\n\timport { logger } from '@shared/utils/logger';\n\timport axios from 'axios';\n\timport { onMount } from 'svelte';\n\timport { goto } from '$app/navigation';\n\n\timport { obj2formData } from '@shared/utils/utils';\n\n\t// Stores\n\timport { page } from '$app/state';\n\timport { tabSet } from '@shared/stores/store.svelte';\n\timport { collection, setCollection } from '@shared/stores/collectionStore.svelte';\n\timport { setRouteContext } from '@shared/stores/UIStore.svelte';\n\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\t// Components\n\timport CollectionForm from './tabs/CollectionForm.svelte';\n\timport CollectionWidget from './tabs/CollectionWidget.svelte';\n\timport PageTitle from '@cms/components/PageTitle.svelte';\n\n\t// Skeleton\n\timport { Tabs } from '@skeletonlabs/skeleton-svelte';\n\t// import { Tab, TabGroup } from '@skeletonlabs/skeleton-svelte';\n\timport { toaster } from '@shared/stores/store.svelte';\n\timport { showConfirm } from '@shared/utils/modalUtils';\n\n\timport { widgetStoreActions } from '@shared/stores/widgetStore.svelte';\n\n\t// Create local tabSet variable for binding\n\tlet localTabSet = $state(String(tabSet.value));\n\n\t// Sync with store when local value changes\n\t$effect(() => {\n\t\ttabSet.set(Number(localTabSet));\n\t});\n\n\t// Sync local value when store changes\n\t$effect(() => {\n\t\tlocalTabSet = String(tabSet.value);\n\t});\n\n\timport type { User } from '@shared/database/auth/types';\n\timport type { FieldInstance, Schema } from '@cms-types';\n\n\t// Extract the collection name from the URL\n\tlet collectionPath = $state(page.params.contentPath);\n\tconst action = $state(page.params.action);\n\n\tinterface Props {\n\t\tdata: {\n\t\t\tcollection?: Schema;\n\t\t\tcontentLanguage: string;\n\t\t\tuser: User;\n\t\t};\n\t}\n\n\tconst { data }: Props = $props();\n\n\tlet originalName = $state('');\n\tonMount(() => {\n\t\tif (action === 'edit') {\n\t\t\tloadCollection();\n\t\t} else {\n\t\t\tsetCollection(null);\n\t\t\toriginalName = '';\n\t\t}\n\t});\n\n\tfunction loadCollection() {\n\t\tif (data.collection) {\n\t\t\tsetCollection(data.collection);\n\t\t\toriginalName = String(data.collection.name || '');\n\t\t} else {\n\t\t\tlogger.error('Collection data not found for editing.');\n\t\t\t// Optionally, redirect or show a proper error message\n\t\t}\n\t}\n\n\t// Default widget data (tab1)\n\t// Unwrap the `collection` store value for TS and template usage\n\tconst collectionValue = $derived(collection.value);\n\n\t// Page title\n\tlet pageTitle = $state('');\n\tlet highlightedPart = $state('');\n\n\t// Effect to update page title based on action and collection name\n\t$effect.root(() => {\n\t\t// Set the base page title according to the action\n\t\tif (action === 'edit') {\n\t\t\tpageTitle = `Edit ${collectionPath} Collection`;\n\t\t} else if (collectionPath) {\n\t\t\tpageTitle = `Create ${collectionPath} Collection`;\n\t\t} else {\n\t\t\tpageTitle = 'Create new Collection';\n\t\t}\n\n\t\t// Ensure the highlighted part (e.g., contentTypes) is unique in the title\n\t\thighlightedPart = collectionPath || 'new';\n\n\t\t// Avoid repeating the contentTypes if it's already included in the string\n\t\tif (pageTitle.includes(highlightedPart)) {\n\t\t\tpageTitle = pageTitle.replace(new RegExp(`\\\\b${highlightedPart}\\\\b`, 'g'), highlightedPart);\n\t\t}\n\t});\n\n\tfunction handlePageTitleUpdate(title: string) {\n\t\thighlightedPart = title;\n\t\tcollectionPath = title;\n\t\tif (action === 'edit') {\n\t\t\tpageTitle = `Edit ${highlightedPart} Collection`;\n\t\t} else {\n\t\t\tpageTitle = `Create ${highlightedPart} Collection`;\n\t\t}\n\t}\n\n\t// Import validation store\n\timport { validationStore } from '@shared/stores/store.svelte';\n\n\t// Function to save data by sending a POST request\n\tasync function handleCollectionSave() {\n\t\tconst currentCollection = collection.value;\n\t\tconst currentName = String(currentCollection?.name || '');\n\n\t\t// Check validation errors before submission\n\t\tif (validationStore.errors && Object.keys(validationStore.errors).length > 0) {\n\t\t\ttoaster.error({ description: 'Please fix validation errors before saving' });\n\t\t\treturn;\n\t\t}\n\n\t\t// Prepare form data\n\t\tconst data =\n\t\t\taction == 'edit'\n\t\t\t\t? obj2formData({\n\t\t\t\t\t\toriginalName: originalName,\n\t\t\t\t\t\tname: currentName,\n\t\t\t\t\t\ticon: currentCollection?.icon,\n\t\t\t\t\t\tstatus: currentCollection?.status,\n\t\t\t\t\t\tslug: currentCollection?.slug,\n\t\t\t\t\t\tdescription: currentCollection?.description,\n\t\t\t\t\t\tpermissions: currentCollection?.permissions,\n\t\t\t\t\t\tfields: currentCollection?.fields\n\t\t\t\t\t})\n\t\t\t\t: obj2formData({\n\t\t\t\t\t\tname: currentName,\n\t\t\t\t\t\ticon: currentCollection?.icon,\n\t\t\t\t\t\tstatus: currentCollection?.status,\n\t\t\t\t\t\tslug: currentCollection?.slug,\n\t\t\t\t\t\tdescription: currentCollection?.description,\n\t\t\t\t\t\tpermissions: currentCollection?.permissions,\n\t\t\t\t\t\tfields: currentCollection?.fields\n\t\t\t\t\t});\n\n\t\t// Send the form data to the server\n\t\tconst resp = await axios.post(`?/saveCollection`, data, {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t}\n\t\t});\n\n\t\tif (resp.data.status === 200) {\n\t\t\ttoaster.success({ description: \"Collection Saved. You're all set to build your content.\" });\n\t\t\tif (originalName && originalName !== currentName && currentName) {\n\t\t\t\tconst newPath = page.url.pathname.replace(originalName, currentName);\n\t\t\t\tgoto(newPath);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleCollectionDelete() {\n\t\tconst currentCollection = collection.value;\n\n\t\tshowConfirm({\n\t\t\ttitle: 'Please Confirm',\n\t\t\tbody: 'Are you sure you wish to delete this collection?',\n\t\t\tonConfirm: async () => {\n\t\t\t\t// Send the form data to the server\n\t\t\t\tawait axios.post(`?/deleteCollections`, obj2formData({ contentTypes: String(currentCollection?.name || '') }), {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Notify via global toast helper\n\t\t\t\ttoaster.error({ description: 'Collection Deleted.' });\n\t\t\t\tgoto(`/collection`);\n\t\t\t},\n\t\t\tonCancel: () => {\n\t\t\t\t// User cancelled, do not delete\n\t\t\t\tlogger.debug('User cancelled deletion.');\n\t\t\t}\n\t\t});\n\t}\n\n\tonMount(() => {\n\t\t// Set the initial tab\n\t\twidgetStoreActions.initializeWidgets();\n\t\ttabSet.set(0);\n\t});\n\n\t$effect(() => {\n\t\tsetRouteContext({ isCollectionBuilder: true });\n\t\treturn () => setRouteContext({ isCollectionBuilder: false });\n\t});\n</script>\n\n<!-- Page Title -->\n<div class=\"my-2 flex items-center justify-between gap-2\">\n\t<PageTitle name={pageTitle} highlight={highlightedPart} icon=\"ic:baseline-build\" />\n\n\t<!-- Back -->\n\t<button onclick={() => history.back()} type=\"button\" aria-label=\"Back\" class=\"preset-outlined-primary-500 btn-icon\">\n\t\t<iconify-icon icon=\"ri:arrow-left-line\" width=\"20\"></iconify-icon>\n\t</button>\n</div>\n\n<div class=\"wrapper\">\n\t{#if action == 'edit'}\n\t\t<div class=\"flex justify-center gap-3\">\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonclick={handleCollectionDelete}\n\t\t\t\tclass=\" preset-filled-error-500 btn mb-3 mr-1 mt-1 justify-end dark:preset-filled-error-500 dark:text-black\"\n\t\t\t\t>{m.button_delete()}\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tonclick={handleCollectionSave}\n\t\t\t\tclass=\"preset-filled-tertiary-500 btn mb-3 mr-1 mt-1 justify-end dark:preset-filled-tertiary-500 dark:text-black\">{m.button_save()}</button\n\t\t\t>\n\t\t</div>\n\t{/if}\n\n\t<p class=\"mb-2 hidden text-center text-tertiary-500 dark:text-primary-500 sm:block\">\n\t\t{m.collection_helptext()}\n\t</p>\n\t<!-- Required Text  -->\n\t<div class=\"mb-2 text-center text-xs text-error-500\" data-testid=\"required-indicator\">* {m.collection_required()}</div>\n\t<Tabs value={localTabSet} onValueChange={(e) => (localTabSet = e.value)}>\n\t\t<Tabs.List class=\"flex border-b border-surface-200-800 mb-4\">\n\t\t\t<!-- User Permissions -->\n\t\t\t{#if page.data.isAdmin}\n\t\t\t\t<!-- Edit -->\n\t\t\t\t<Tabs.Trigger value=\"0\">\n\t\t\t\t\t<div class=\"flex items-center gap-1 py-2 px-4\">\n\t\t\t\t\t\t<iconify-icon icon=\"ic:baseline-edit\" width=\"24\" class=\"text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t<span class:active={tabSet.value === 0} class:text-tertiary-500={tabSet.value === 0} class:text-primary-500={tabSet.value === 0}\n\t\t\t\t\t\t\t>{m.button_edit()}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</Tabs.Trigger>\n\n\t\t\t\t<!-- Widget Fields -->\n\t\t\t\t<Tabs.Trigger value=\"1\" data-testid=\"widget-fields-tab\">\n\t\t\t\t\t<div class=\"flex items-center gap-1 py-2 px-4\">\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:widgets-outline\" width=\"24\" class=\"text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t<span class:active={tabSet.value === 1} class:text-tertiary-500={tabSet.value === 2} class:text-primary-500={tabSet.value === 2}\n\t\t\t\t\t\t\t>{m.collection_widgetfields()}</span\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</Tabs.Trigger>\n\t\t\t{/if}\n\t\t</Tabs.List>\n\n\t\t<!-- Tab Panels -->\n\t\t<Tabs.Content value=\"0\">\n\t\t\t<CollectionForm data={collectionValue} {handlePageTitleUpdate} />\n\t\t</Tabs.Content>\n\t\t<Tabs.Content value=\"1\">\n\t\t\t<CollectionWidget fields={collectionValue?.fields as FieldInstance[] | undefined} {handleCollectionSave} />\n\t\t</Tabs.Content>\n\t</Tabs>\n</div>\n"],"names":["$$renderer","$.escape","m.collection_name","$.attr","m.collection_name_tooltip1","m.collection_name_tooltip2","m.collection_name_placeholder","m.collection_DBname","m.collectionname_optional","m.collectionname_labelicon","m.collection_icon_tooltip","m.collection_slug","m.collection_slug_tooltip","m.collection_slug_input","m.collectionname_description","m.collection_description","m.collection_description_placeholder","m.collection_status","m.collection_status_tooltip","m.button_cancel","m.button_next","fields","m.collection_widgetfield_addrequired","m.collection_widgetfield_drag","m.button_edit","m.collection_widgetfield_addFields","m.button_previous","m.button_save","data","m.button_delete","m.collection_helptext","m.collection_required","m.collection_widgetfields"],"mappings":"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"}