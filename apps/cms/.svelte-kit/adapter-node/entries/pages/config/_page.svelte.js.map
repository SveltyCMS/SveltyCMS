{"version":3,"file":"_page.svelte.js","sources":["../../../../../../src/routes/config/+page.svelte"],"sourcesContent":["<!--\n@files src/routes/(app)/config/+page.svelte\n@component\n**This file sets up and displays the config page. It provides a user-friendly interface for managing configuration settings.**\n-->\n\n<script lang=\"ts\">\n\timport PageTitle from '@cms/components/PageTitle.svelte';\n\timport PermissionGuard from '@cms/components/PermissionGuard.svelte';\n\timport * as m from '@shared/paraglide/messages';\n\timport { collections } from '@shared/stores/collectionStore.svelte';\n\timport { ui } from '@shared/stores/UIStore.svelte';\n\timport { onMount } from 'svelte';\n\n\tonMount(() => {\n\t\tcollections.setCollection(null);\n\t});\n\n\tfunction handleMobileSidebarClose() {\n\t\t// Hide sidebar on mobile before navigation\n\t\tif (typeof window !== 'undefined' && window.innerWidth < 768) {\n\t\t\tui.toggle('leftSidebar', 'hidden');\n\t\t}\n\t}\n\n\t// A single, data-driven array to define all configuration items.\n\tconst configItems = [\n\t\t{\n\t\t\tid: 'collectionbuilder',\n\t\t\thref: '/config/collectionbuilder',\n\t\t\tlabel: m.config_collectionbuilder(),\n\t\t\ticon: 'fluent-mdl2:build-definition',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-tertiary-600',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:collectionManagement',\n\t\t\t\tname: 'Collection Builder',\n\t\t\t\tdescription: 'Manage and build collections',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'configuration'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'graphql',\n\t\t\thref: '/api/graphql',\n\t\t\tlabel: m.config_graphql(),\n\t\t\ticon: 'teenyicons:graphql-solid',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-warning-600',\n\t\t\ttarget: '_blank',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'api:graphql',\n\t\t\t\tname: 'GraphQL',\n\t\t\t\tdescription: 'Access GraphQL API',\n\t\t\t\trequiredRole: 'developer',\n\t\t\t\taction: 'access',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'emailPreviews',\n\t\t\thref: '/email-previews',\n\t\t\tlabel: m.config_emailPreviews(),\n\t\t\ticon: 'mdi:email-outline',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-primary-600',\n\t\t\ttarget: '_blank',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'system:admin',\n\t\t\t\tname: 'Email Previews',\n\t\t\t\tdescription: 'Preview system emails',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'access',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'dashboard',\n\t\t\thref: '/dashboard',\n\t\t\tlabel: m.dashboard(),\n\t\t\ticon: 'bi:bar-chart-line',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-error-600',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'system:dashboard',\n\t\t\t\tname: 'Dashboard',\n\t\t\t\tdescription: 'Access system dashboard',\n\t\t\t\trequiredRole: 'user',\n\t\t\t\taction: 'access',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'marketplace',\n\t\t\thref: 'https://www.sveltyCMS.com',\n\t\t\tlabel: m.marketplace(),\n\t\t\ticon: 'icon-park-outline:shopping-bag',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-secondary-500',\n\t\t\ttarget: '_blank',\n\t\t\tpermission: null\n\t\t},\n\t\t{\n\t\t\tid: 'widgetManagement',\n\t\t\thref: '/config/widgetManagement',\n\t\t\tlabel: m.config_widgetManagement(),\n\t\t\ticon: 'mdi:widgets',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-tertiary-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:widgetManagement',\n\t\t\t\tname: 'Widget Management',\n\t\t\t\tdescription: 'Manage system widgets',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'configuration'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'themeManagement',\n\t\t\thref: '/config/themeManagement',\n\t\t\tlabel: m.config_themeManagement(),\n\t\t\ticon: 'ph:layout',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-primary-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:themeManagement',\n\t\t\t\tname: 'Theme Management',\n\t\t\t\tdescription: 'Manage system themes',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'configuration'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'settings',\n\t\t\thref: '/config/systemsetting',\n\t\t\tlabel: m.config_settings(),\n\t\t\ticon: 'uil:setting',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-surface-500',\n\t\t\tpermission: {\n\t\t\t\t// FIX: Changed from 'system:settings' to 'config:settings' to match +page.server.ts\n\t\t\t\tcontextId: 'config:settings',\n\t\t\t\tname: 'Settings',\n\t\t\t\tdescription: 'Manage system settings',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tid: 'importExport',\n\t\t\thref: '/config/import-export',\n\t\t\tlabel: 'Import & Export',\n\t\t\ticon: 'mdi:database-import',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-warning-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:importExport',\n\t\t\t\tname: 'Import & Export',\n\t\t\t\tdescription: 'Import and export system data',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t// START: New Configuration Manager Button\n\t\t{\n\t\t\tid: 'configurationManager',\n\t\t\thref: '/config/configurationManager',\n\t\t\tlabel: 'Config Manager',\n\t\t\ticon: 'mdi:sync-circle',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-secondary-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:synchronization',\n\t\t\t\tname: 'Configuration Manager',\n\t\t\t\tdescription: 'Synchronize configuration between filesystem and database.',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t// END: New Configuration Manager Button\n\t\t// START: System Health Monitor\n\t\t{\n\t\t\tid: 'systemHealth',\n\t\t\thref: '/config/system-health',\n\t\t\tlabel: 'System Health',\n\t\t\ticon: 'mdi:heart-pulse',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-success-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:systemHealth',\n\t\t\t\tname: 'System Health',\n\t\t\t\tdescription: 'Monitor system services and health status',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'view',\n\t\t\t\tcontextType: 'system'\n\t\t\t}\n\t\t},\n\t\t// END: System Health Monitor\n\t\t{\n\t\t\tid: 'accessManagement',\n\t\t\t// FIX: Corrected typo from 'assessManagement'\n\t\t\thref: '/config/accessManagement',\n\t\t\tlabel: m.config_accessManagement(),\n\t\t\ticon: 'mdi:account-group',\n\t\t\tclasses:\n\t\t\t\t'border border-surface-200 dark:border-surface-700 bg-white dark:bg-surface-800 hover:border-primary-500 dark:hover:border-primary-500 text-surface-900 dark:text-white',\n\t\t\ticonColor: 'text-error-500',\n\t\t\tpermission: {\n\t\t\t\tcontextId: 'config:accessManagement',\n\t\t\t\tname: 'Access Management',\n\t\t\t\tdescription: 'Manage user access and roles',\n\t\t\t\trequiredRole: 'admin',\n\t\t\t\taction: 'manage',\n\t\t\t\tcontextType: 'configuration'\n\t\t\t}\n\t\t}\n\t];\n</script>\n\n<PageTitle name={m.config_pagetitle()} showBackButton={true} backUrl=\"/\" icon=\"material-symbols:build-circle\" />\n\n<div class=\"wrapper mb-2 max-h-[calc(100vh-65px)] overflow-auto p-2\">\n\t<h2 class=\"h2 mb-4 text-center font-bold text-tertiary-600 dark:text-primary-500\">\n\t\t{m.config_body()}\n\t</h2>\n\n\t<div class=\"grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-4\">\n\t\t{#each configItems as item (item.id)}\n\t\t\t{@const usePermissionGuard = !!item.permission}\n\n\t\t\t{#if usePermissionGuard}\n\t\t\t\t<PermissionGuard config={item.permission}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={item.href}\n\t\t\t\t\t\tclass={`flex h-24 flex-col items-center justify-center gap-2 rounded p-2 text-center shadow-md transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg lg:h-20 ${item.classes}`}\n\t\t\t\t\t\taria-label={item.label}\n\t\t\t\t\t\ttarget={item.target}\n\t\t\t\t\t\trel={item.target === '_blank' ? 'noopener noreferrer' : undefined}\n\t\t\t\t\t\tdata-sveltekit-preload-data={item.target === '_blank' ? undefined : 'hover'}\n\t\t\t\t\t\tonclick={handleMobileSidebarClose}\n\t\t\t\t\t>\n\t\t\t\t\t\t<iconify-icon icon={item.icon} class={`text-3xl lg:text-2xl ${item.iconColor || ''}`}></iconify-icon>\n\t\t\t\t\t\t<p class=\"w-full truncate text-xs font-medium uppercase lg:text-sm\">{item.label}</p>\n\t\t\t\t\t</a>\n\t\t\t\t</PermissionGuard>\n\t\t\t{:else}\n\t\t\t\t<a\n\t\t\t\t\thref={item.href}\n\t\t\t\t\tclass={`flex h-24 flex-col items-center justify-center gap-2 rounded p-2 text-center shadow-md transition-all duration-200 ease-in-out hover:scale-105 hover:shadow-lg lg:h-20 ${item.classes}`}\n\t\t\t\t\taria-label={item.label}\n\t\t\t\t\ttarget={item.target}\n\t\t\t\t\trel={item.target === '_blank' ? 'noopener noreferrer' : undefined}\n\t\t\t\t\tdata-sveltekit-preload-data={item.target === '_blank' ? undefined : 'hover'}\n\t\t\t\t\tonclick={handleMobileSidebarClose}\n\t\t\t\t>\n\t\t\t\t\t<iconify-icon icon={item.icon} class={`text-3xl lg:text-2xl ${item.iconColor || ''}`}></iconify-icon>\n\t\t\t\t\t<p class=\"w-full truncate text-xs font-medium uppercase lg:text-sm\">{item.label}</p>\n\t\t\t\t</a>\n\t\t\t{/if}\n\t\t{/each}\n\t</div>\n</div>\n"],"names":["m.config_collectionbuilder","m.config_graphql","m.config_emailPreviews","m.dashboard","m.marketplace","m.config_widgetManagement","m.config_themeManagement","m.config_settings","m.config_accessManagement","m.config_pagetitle","$$renderer","$.escape","m.config_body","$.attr_class","$.attr"],"mappings":"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"}