{"version":3,"file":"permissions.js","sources":["../../../../../../shared/database/src/auth/corePermissions.ts","../../../../../../shared/database/src/auth/permissions.ts"],"sourcesContent":["/**\n * @file src/databases/auth/corePermissions.ts\n * @description Core permissions configuration for the authentication system\n *\n * This file contains the core permission definitions that can be easily modified\n * without affecting the core authentication logic.\n *\n * Features:\n * - Defines a set of core permissions used throughout the system.\n * - Each permission has an ID, name, action, type, and optional context.\n * - Permissions cover system access, dashboard, user management, collections, API access, and more.\n *\n * This modular approach allows for easy extension and customization of permissions\n * as the application evolves.\n */\n\nimport { PermissionAction, PermissionType, type Permission } from './types';\n\n// Core permissions that are always available\nexport const corePermissions: Permission[] = [\n\t// System permissions\n\t{ _id: 'system:dashboard', name: 'Dashboard Access', action: PermissionAction.ACCESS, type: PermissionType.SYSTEM },\n\t{ _id: 'system:admin', name: 'Admin Access', action: PermissionAction.MANAGE, type: PermissionType.SYSTEM },\n\t{ _id: 'system:settings', name: 'Settings Management', action: PermissionAction.MANAGE, type: PermissionType.SYSTEM },\n\n\t// Dashboard resource permissions\n\t{ _id: 'dashboard:read', name: 'Dashboard Read Access', action: PermissionAction.READ, type: PermissionType.SYSTEM, contextId: 'dashboard' },\n\t{ _id: 'dashboard:write', name: 'Dashboard Write Access', action: PermissionAction.WRITE, type: PermissionType.SYSTEM, contextId: 'dashboard' },\n\t{ _id: 'dashboard:update', name: 'Dashboard Update Access', action: PermissionAction.UPDATE, type: PermissionType.SYSTEM, contextId: 'dashboard' },\n\n\t// SendMail resource permissions\n\t{ _id: 'sendMail:write', name: 'Send Mail Access', action: PermissionAction.WRITE, type: PermissionType.SYSTEM, contextId: 'sendMail' },\n\n\t// Permissions management resource permissions\n\t{ _id: 'permissions:update', name: 'Update Permissions', action: PermissionAction.UPDATE, type: PermissionType.SYSTEM, contextId: 'permissions' },\n\n\t// System preferences resource permissions\n\t{\n\t\t_id: 'systemPreferences:read',\n\t\tname: 'Read System Preferences',\n\t\taction: PermissionAction.READ,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'systemPreferences'\n\t},\n\t{\n\t\t_id: 'systemPreferences:write',\n\t\tname: 'Write System Preferences',\n\t\taction: PermissionAction.WRITE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'systemPreferences'\n\t},\n\n\t// Search resource permissions\n\t{ _id: 'search:read', name: 'Search Access', action: PermissionAction.READ, type: PermissionType.SYSTEM, contextId: 'search' },\n\n\t// GraphQL resource permissions\n\t{ _id: 'graphql:read', name: 'GraphQL API Access', action: PermissionAction.READ, type: PermissionType.SYSTEM, contextId: 'graphql' },\n\n\t// Media resource permissions\n\t{ _id: 'media:read', name: 'Media Read Access', action: PermissionAction.READ, type: PermissionType.SYSTEM, contextId: 'media' },\n\t{ _id: 'media:write', name: 'Media Write Access', action: PermissionAction.WRITE, type: PermissionType.SYSTEM, contextId: 'media' },\n\t{ _id: 'media:delete', name: 'Media Delete Access', action: PermissionAction.DELETE, type: PermissionType.SYSTEM, contextId: 'media' },\n\n\t// User management permissions\n\t{ _id: 'user:create', name: 'User Create Access', action: PermissionAction.CREATE, type: PermissionType.SYSTEM, contextId: 'user' },\n\t{ _id: 'user:read', name: 'User Read Access', action: PermissionAction.READ, type: PermissionType.SYSTEM, contextId: 'user' },\n\t{ _id: 'user:update', name: 'User Update Access', action: PermissionAction.WRITE, type: PermissionType.SYSTEM, contextId: 'user' },\n\t{ _id: 'user:delete', name: 'User Delete Access', action: PermissionAction.DELETE, type: PermissionType.SYSTEM, contextId: 'user' },\n\n\t// --- NEW: Tenant management permissions (for multi-tenant mode) ---\n\t{ _id: 'tenant:create', name: 'Create Tenants', action: PermissionAction.CREATE, type: PermissionType.SYSTEM, contextId: 'tenant' },\n\t{ _id: 'tenant:read', name: 'Read Tenants', action: PermissionAction.READ, type: PermissionType.SYSTEM, contextId: 'tenant' },\n\t{ _id: 'tenant:update', name: 'Update Tenants', action: PermissionAction.UPDATE, type: PermissionType.SYSTEM, contextId: 'tenant' },\n\t{ _id: 'tenant:delete', name: 'Delete Tenants', action: PermissionAction.DELETE, type: PermissionType.SYSTEM, contextId: 'tenant' },\n\t{ _id: 'tenant:manage', name: 'Manage Tenants', action: PermissionAction.MANAGE, type: PermissionType.SYSTEM, contextId: 'tenant' }, // System resource permissions (used by tokens, themes, content-structure, etc.)\n\n\t{ _id: 'system:read', name: 'System Read Access', action: PermissionAction.READ, type: PermissionType.SYSTEM, contextId: 'system' },\n\t{ _id: 'system:write', name: 'System Write Access', action: PermissionAction.WRITE, type: PermissionType.SYSTEM, contextId: 'system' },\n\t{ _id: 'system:delete', name: 'System Delete Access', action: PermissionAction.DELETE, type: PermissionType.SYSTEM, contextId: 'system' },\n\n\t// Users resource permissions (used by avatar management, user listing, etc.)\n\t{ _id: 'users:read', name: 'Users Read Access', action: PermissionAction.READ, type: PermissionType.SYSTEM, contextId: 'users' },\n\t{ _id: 'users:write', name: 'Users Write Access', action: PermissionAction.WRITE, type: PermissionType.SYSTEM, contextId: 'users' },\n\t{ _id: 'users:delete', name: 'Users Delete Access', action: PermissionAction.DELETE, type: PermissionType.SYSTEM, contextId: 'users' },\n\n\t// Collections management permissions\n\t{ _id: 'collections:read', name: 'Collections Read Access', action: PermissionAction.READ, type: PermissionType.SYSTEM, contextId: 'collections' },\n\t{\n\t\t_id: 'collections:write',\n\t\tname: 'Collections Write Access',\n\t\taction: PermissionAction.WRITE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'collections'\n\t},\n\t{\n\t\t_id: 'collections:create',\n\t\tname: 'Collections Create Access',\n\t\taction: PermissionAction.CREATE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'collections'\n\t},\n\t{\n\t\t_id: 'collections:update',\n\t\tname: 'Collections Update Access',\n\t\taction: PermissionAction.UPDATE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'collections'\n\t},\n\t{\n\t\t_id: 'collections:delete',\n\t\tname: 'Collections Delete Access',\n\t\taction: PermissionAction.DELETE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'collections'\n\t},\n\n\t// API permissions\n\t{ _id: 'api:graphql', name: 'GraphQL API Access', action: PermissionAction.ACCESS, type: PermissionType.SYSTEM },\n\t{ _id: 'api:collections', name: 'Collections API Access', action: PermissionAction.ACCESS, type: PermissionType.SYSTEM },\n\t{ _id: 'api:export', name: 'Export API Access', action: PermissionAction.EXECUTE, type: PermissionType.SYSTEM },\n\t{\n\t\t_id: 'api:user',\n\t\tname: 'User API Access',\n\t\taction: PermissionAction.ACCESS,\n\t\ttype: PermissionType.SYSTEM,\n\t\tdescription: 'Grants access to all API endpoints under /api/user/.'\n\t},\n\t{\n\t\t_id: 'api:sendMail',\n\t\tname: 'Send Mail API Access',\n\t\taction: PermissionAction.EXECUTE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tdescription: 'Grants access to send emails via the API.'\n\t},\n\t{ _id: 'api:exportData', name: 'Export Api Data', action: PermissionAction.EXECUTE, type: PermissionType.SYSTEM, contextId: 'api/exportData' },\n\t{\n\t\t_id: 'api:query',\n\t\tname: 'Query API Access',\n\t\taction: PermissionAction.ACCESS,\n\t\ttype: PermissionType.SYSTEM,\n\t\tdescription: 'Grants access to the query API endpoint.'\n\t},\n\t{\n\t\t_id: 'api:systemPreferences',\n\t\tname: 'System Preferences API Access',\n\t\taction: PermissionAction.ACCESS,\n\t\ttype: PermissionType.SYSTEM,\n\t\tdescription: 'Grants access to the system preferences API endpoints.'\n\t},\n\t{\n\t\t_id: 'api:systemInfo',\n\t\tname: 'System Info API Access',\n\t\taction: PermissionAction.ACCESS,\n\t\ttype: PermissionType.SYSTEM,\n\t\tdescription: 'Grants access to the system information API endpoints.'\n\t},\n\t{\n\t\t_id: 'api:userActivity',\n\t\tname: 'User Activity API Access',\n\t\taction: PermissionAction.ACCESS,\n\t\ttype: PermissionType.SYSTEM,\n\t\tdescription: 'Grants access to the user activity API endpoint for dashboard widgets.'\n\t},\n\t{\n\t\t_id: 'api:media',\n\t\tname: 'Media API Access',\n\t\taction: PermissionAction.ACCESS,\n\t\ttype: PermissionType.SYSTEM,\n\t\tdescription: 'Grants access to the media API endpoints.'\n\t},\n\t{\n\t\t_id: 'api:widgets',\n\t\tname: 'Widget API Access',\n\t\taction: PermissionAction.ACCESS,\n\t\ttype: PermissionType.SYSTEM,\n\t\tdescription: 'Grants access to the widget management API endpoints.'\n\t},\n\n\t// Collection permissions\n\t{ _id: 'collection:create', name: 'Create Collection Entries', action: PermissionAction.CREATE, type: PermissionType.COLLECTION },\n\t{ _id: 'collection:read', name: 'Read Collection Entries', action: PermissionAction.READ, type: PermissionType.COLLECTION },\n\t{ _id: 'collection:update', name: 'Update Collection Entries', action: PermissionAction.UPDATE, type: PermissionType.COLLECTION },\n\t{ _id: 'collection:delete', name: 'Delete Collection Entries', action: PermissionAction.DELETE, type: PermissionType.COLLECTION },\n\n\t// Content permissions\n\t{ _id: 'content:editor', name: 'Content Editor', action: PermissionAction.MANAGE, type: PermissionType.SYSTEM },\n\t{ _id: 'content:builder', name: 'Content Builder', action: PermissionAction.MANAGE, type: PermissionType.SYSTEM },\n\t{ _id: 'content:images', name: 'Image Management', action: PermissionAction.MANAGE, type: PermissionType.SYSTEM },\n\n\t// User management permissions (consolidated)\n\t{ _id: 'user:manage', name: 'Manage Users', action: PermissionAction.MANAGE, type: PermissionType.USER },\n\t{\n\t\t_id: 'user.create',\n\t\tname: 'Create User Tokens',\n\t\taction: PermissionAction.CREATE,\n\t\ttype: PermissionType.USER,\n\t\tcontextId: 'user.create',\n\t\tdescription: 'Allows creating new user registration tokens.'\n\t},\n\n\t// Configuration permissions - matching your original permissionConfigs\n\t{\n\t\t_id: 'config:collectionManagement',\n\t\tname: 'Collection Management',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.CONFIGURATION,\n\t\tcontextId: 'config/collectionManagement'\n\t},\n\t{\n\t\t_id: 'config:collectionbuilder',\n\t\tname: 'Collection Builder Management',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'config/collectionbuilder'\n\t},\n\t{ _id: 'config:graphql', name: 'GraphQL Management', action: PermissionAction.MANAGE, type: PermissionType.SYSTEM, contextId: 'config/graphql' },\n\t{\n\t\t_id: 'config:imageeditor',\n\t\tname: 'ImageEditor Management',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'config/imageeditor'\n\t},\n\t{\n\t\t_id: 'config:dashboard',\n\t\tname: 'Dashboard Management',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'config/dashboard'\n\t},\n\t{\n\t\t_id: 'config:widgetManagement',\n\t\tname: 'Widget Management',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.CONFIGURATION,\n\t\tcontextId: 'config/widgetManagement'\n\t},\n\t{\n\t\t_id: 'config:themeManagement',\n\t\tname: 'Theme Management',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.CONFIGURATION,\n\t\tcontextId: 'config/themeManagement'\n\t},\n\t{ _id: 'config:settings', name: 'Settings Management', action: PermissionAction.MANAGE, type: PermissionType.SYSTEM, contextId: 'config/settings' },\n\t{\n\t\t_id: 'config:accessManagement',\n\t\tname: 'Access Management',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.CONFIGURATION,\n\t\tcontextId: 'config/accessManagement'\n\t},\n\t{\n\t\t_id: 'config:emailPreviews',\n\t\tname: 'Email Previews',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'config/emailPreviews'\n\t},\n\t{\n\t\t_id: 'config:adminArea',\n\t\tname: 'Admin Area Management',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.SYSTEM,\n\t\tcontextId: 'config/adminArea'\n\t},\n\n\t// Admin permissions\n\t{ _id: 'admin:access', name: 'Admin Access', action: PermissionAction.MANAGE, type: PermissionType.SYSTEM, contextId: 'admin/access' },\n\t{\n\t\t_id: 'config:importexport',\n\t\tname: 'Import/Export Management',\n\t\taction: PermissionAction.MANAGE,\n\t\ttype: PermissionType.CONFIGURATION,\n\t\tcontextId: 'config/import-export'\n\t}\n];\n","/**\n * @file src/databases/auth/permissions.ts\n * @description Permission utilities and checking functions\n *\n * This file contains utility functions for permission checking and management\n * that work with the simplified authentication system.\n */\n\n// System Logger\nimport { logger } from '@shared/utils/logger';\n\n// Auth\nimport type { User, Permission, Role } from './types';\nimport { corePermissions } from './corePermissions';\n\nexport interface PermissionConfig {\n\tcontextId: string;\n\tname: string;\n\taction: string;\n\tcontextType: string;\n\tdescription: string;\n}\n\n// Permission registry for dynamic permissions\nconst permissionRegistry = new Map<string, Permission>();\n\n// Initialize with core permissions\ncorePermissions.forEach((permission) => {\n\tpermissionRegistry.set(permission._id, permission);\n});\n\n// Register a new permission\nexport function registerPermission(permission: Permission): void {\n\tpermissionRegistry.set(permission._id, permission);\n\tlogger.trace(`Permission registered: ${permission._id}`);\n}\n\n// Get all registered permissions\nexport function getAllPermissions(): Permission[] {\n\treturn Array.from(permissionRegistry.values());\n}\n\n// Get a permission by ID\nexport function getPermissionById(permissionId: string): Permission | undefined {\n\treturn permissionRegistry.get(permissionId);\n}\n\n// Check if a user has a specific permission (with roles parameter to avoid circular dependency)\nexport function hasPermissionWithRoles(user: User, permissionId: string, roles: Role[]): boolean {\n\tconst userRole = roles.find((role) => role._id === user.role);\n\tif (!userRole) {\n\t\tlogger.warn('Role not found for user', { email: user.email, userRoleId: user.role, rolesAvailable: roles.map((r) => r._id) });\n\t\treturn false;\n\t}\n\n\t// ADMIN OVERRIDE: Admins automatically have ALL permissions\n\tif (userRole.isAdmin) {\n\t\tlogger.trace('Admin user granted permission', { email: user.email, permissionId, userRole });\n\t\treturn true;\n\t}\n\n\t// Check if user's role has the specific permission\n\tconst hasPermission = userRole.permissions.includes(permissionId);\n\tif (!hasPermission) {\n\t\tlogger.warn('Permission denied for user', {\n\t\t\temail: user.email,\n\t\t\tuserId: user._id,\n\t\t\tuserRoleId: user.role,\n\t\t\tuserRole,\n\t\t\tpermissionId,\n\t\t\tuserPermissions: userRole.permissions,\n\t\t\trolesAvailable: roles.map((r) => ({ id: r._id, isAdmin: r.isAdmin }))\n\t\t});\n\t}\n\tlogger.trace('Permission check for user', { permissionId, granted: hasPermission, email: user.email });\n\treturn hasPermission;\n}\n\n// Check if a user has permission by action and type\nexport function hasPermissionByAction(user: User, action: string, type: string, contextId?: string, userRoles?: Role[]): boolean {\n\t// If user is null, they don't have any permissions\n\tif (!user) {\n\t\treturn false;\n\t}\n\n\tlet roles: Role[] = userRoles || []; // If no roles provided, try to get them from a global location\n\tif (!userRoles) {\n\t\ttry {\n\t\t\t// Try to access roles from a different location\n\t\t\tif (typeof globalThis !== 'undefined' && (globalThis as unknown as { __ROLES_CACHE__?: Role[] }).__ROLES_CACHE__) {\n\t\t\t\troles = (globalThis as unknown as { __ROLES_CACHE__: Role[] }).__ROLES_CACHE__;\n\t\t\t} else {\n\t\t\t\t// Last resort - empty array\n\t\t\t\tlogger.warn('No roles available for permission check - defaulting to deny');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} catch (error: unknown) {\n\t\t\tlogger.error('Failed to load roles for hasPermissionByAction:', error);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tconst userRole = roles.find((role) => role._id === user.role);\n\tif (!userRole) return false;\n\n\t// ADMIN OVERRIDE: Admins automatically have ALL permissions\n\tif (userRole.isAdmin) {\n\t\tlogger.trace('Admin user granted permission for action', { email: user.email, action, type });\n\t\treturn true;\n\t}\n\n\t// Find matching permission\n\tconst permission = Array.from(permissionRegistry.values()).find(\n\t\t(p) => p.action === action && p.type === type && (!contextId || p.contextId === contextId)\n\t);\n\n\tif (!permission) return false;\n\n\treturn userRole.permissions.includes(permission._id);\n}\n\n// Get permissions for a specific role (with roles parameter)\nexport function getRolePermissionsWithRoles(roleId: string, roles: Role[]): string[] {\n\tconst role = roles.find((r) => r._id === roleId);\n\treturn role?.permissions || [];\n}\n\n// Check if a role is admin (with roles parameter)\nexport function isAdminRoleWithRoles(roleId: string, roles: Role[]): boolean {\n\tconst role = roles.find((r) => r._id === roleId);\n\treturn role?.isAdmin === true;\n}\n\n// Legacy permission config compatibility - maps old config keys to new permission IDs\nexport function getPermissionConfig(configKey: string): PermissionConfig | null {\n\tconst configMap: Record<string, string> = {\n\t\tcollectionManagement: 'config:collectionManagement',\n\t\tcollectionbuilder: 'config:collectionbuilder',\n\t\tgraphql: 'config:graphql',\n\t\timageeditor: 'config:imageeditor',\n\t\tdashboard: 'config:dashboard',\n\t\twidgetManagement: 'config:widgetManagement',\n\t\tthemeManagement: 'config:themeManagement',\n\t\tsettings: 'config:settings',\n\t\taccessManagement: 'config:accessManagement',\n\t\tadminAccess: 'admin:access',\n\t\temailPreviews: 'config:emailPreviews',\n\t\tadminAreaPermissionConfig: 'config:adminArea',\n\t\texportData: 'api:exportData',\n\t\tapiUser: 'api:user',\n\t\tuserCreateToken: 'user.create'\n\t};\n\n\tconst permissionId = configMap[configKey];\n\tif (!permissionId) {\n\t\tlogger.warn('Unknown permission config key', { configKey });\n\t\treturn null;\n\t}\n\n\tconst permission = getPermissionById(permissionId);\n\tif (!permission) {\n\t\tlogger.warn('Permission not found for ID', { permissionId });\n\t\treturn null;\n\t}\n\n\treturn {\n\t\tcontextId: permission.contextId || permissionId,\n\t\tname: permission.name,\n\t\taction: permission.action,\n\t\tcontextType: permission.type || '',\n\t\tdescription: permission.description ?? ''\n\t};\n}\n\n// Validate user permission from locals.permissions array\nexport function validateUserPermission(userPermissions: string[] | undefined, requiredPermission: string): boolean {\n\tif (!userPermissions) {\n\t\tlogger.warn('No user permissions provided for validation', { requiredPermission });\n\t\treturn false;\n\t}\n\n\tconst hasPermission = userPermissions.includes(requiredPermission);\n\tlogger.trace('User permission validation', { requiredPermission, granted: hasPermission });\n\treturn hasPermission;\n}\n\n// Legacy config map for compatibility\nexport const permissionConfigs: Record<string, { contextId: string; action: string; type: string; name: string; description: string }> = {\n\tcollectionManagement: {\n\t\tcontextId: 'config:collectionManagement',\n\t\taction: 'read',\n\t\ttype: 'config',\n\t\tname: 'Collection Management',\n\t\tdescription: 'Access to collection management'\n\t},\n\tcollectionbuilder: {\n\t\tcontextId: 'config:collectionbuilder',\n\t\taction: 'read',\n\t\ttype: 'config',\n\t\tname: 'Collection Builder',\n\t\tdescription: 'Access to collection builder'\n\t},\n\tgraphql: { contextId: 'config:graphql', action: 'read', type: 'config', name: 'GraphQL', description: 'Access to GraphQL interface' },\n\timageeditor: { contextId: 'config:imageeditor', action: 'read', type: 'config', name: 'Image Editor', description: 'Access to image editor' },\n\tdashboard: { contextId: 'config:dashboard', action: 'read', type: 'config', name: 'Dashboard', description: 'Access to dashboard' },\n\twidgetManagement: {\n\t\tcontextId: 'config:widgetManagement',\n\t\taction: 'read',\n\t\ttype: 'config',\n\t\tname: 'Widget Management',\n\t\tdescription: 'Access to widget management'\n\t},\n\tthemeManagement: {\n\t\tcontextId: 'config:themeManagement',\n\t\taction: 'read',\n\t\ttype: 'config',\n\t\tname: 'Theme Management',\n\t\tdescription: 'Access to theme management'\n\t},\n\tsettings: { contextId: 'config:settings', action: 'read', type: 'config', name: 'Settings', description: 'Access to settings' },\n\n\t// Fine-grained System Settings permissions (13 groups)\n\tsettingsCache: {\n\t\tcontextId: 'config:settings:cache',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Cache & Performance Settings',\n\t\tdescription: 'Manage cache TTLs and performance settings'\n\t},\n\tsettingsDatabase: {\n\t\tcontextId: 'config:settings:database',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Database Settings',\n\t\tdescription: 'Manage database and MongoDB settings'\n\t},\n\tsettingsRedis: {\n\t\tcontextId: 'config:settings:redis',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Redis Cache Settings',\n\t\tdescription: 'Manage Redis configuration and connection'\n\t},\n\tsettingsEmail: {\n\t\tcontextId: 'config:settings:email',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Email/SMTP Settings',\n\t\tdescription: 'Manage email server and SMTP configuration'\n\t},\n\tsettingsSecurity: {\n\t\tcontextId: 'config:settings:security',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Security Settings',\n\t\tdescription: 'Manage 2FA, session, and security settings'\n\t},\n\tsettingsOAuth: {\n\t\tcontextId: 'config:settings:oauth',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'OAuth & Social Login',\n\t\tdescription: 'Manage Google OAuth and social login'\n\t},\n\tsettingsMedia: {\n\t\tcontextId: 'config:settings:media',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Media Storage Settings',\n\t\tdescription: 'Manage media folder, sizes, and formats'\n\t},\n\tsettingsLanguages: {\n\t\tcontextId: 'config:settings:languages',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Languages & Localization',\n\t\tdescription: 'Manage content languages and locales'\n\t},\n\tsettingsIntegrations: {\n\t\tcontextId: 'config:settings:integrations',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Third-Party Integrations',\n\t\tdescription: 'Manage MapBox, TikTok, Twitch integrations'\n\t},\n\tsettingsSite: {\n\t\tcontextId: 'config:settings:site',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Site Configuration',\n\t\tdescription: 'Manage site name, URLs, and basic config'\n\t},\n\tsettingsAppearance: {\n\t\tcontextId: 'config:settings:appearance',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Appearance Settings',\n\t\tdescription: 'Manage default theme and appearance'\n\t},\n\tsettingsLogging: {\n\t\tcontextId: 'config:settings:logging',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Logging Settings',\n\t\tdescription: 'Manage log levels, retention, and rotation'\n\t},\n\tsettingsAdvanced: {\n\t\tcontextId: 'config:settings:advanced',\n\t\taction: 'manage',\n\t\ttype: 'config',\n\t\tname: 'Advanced Settings',\n\t\tdescription: 'Manage server port, roles, permissions, and demo mode'\n\t},\n\n\taccessManagement: {\n\t\tcontextId: 'config:accessManagement',\n\t\taction: 'read',\n\t\ttype: 'config',\n\t\tname: 'Access Management',\n\t\tdescription: 'Access to user management'\n\t},\n\tadminAccess: { contextId: 'admin:access', action: 'read', type: 'admin', name: 'Admin Access', description: 'Administrative access' },\n\temailPreviews: {\n\t\tcontextId: 'config:emailPreviews',\n\t\taction: 'read',\n\t\ttype: 'config',\n\t\tname: 'Email Previews',\n\t\tdescription: 'Access to email previews'\n\t},\n\tadminAreaPermissionConfig: {\n\t\tcontextId: 'config:adminArea',\n\t\taction: 'read',\n\t\ttype: 'config',\n\t\tname: 'Admin Area',\n\t\tdescription: 'Access to admin area'\n\t},\n\texportData: { contextId: 'api:exportData', action: 'export', type: 'api', name: 'Export Data', description: 'Export system data' },\n\tapiUser: { contextId: 'api:user', action: 'read', type: 'api', name: 'User API', description: 'Access to user API' },\n\tuserCreateToken: {\n\t\tcontextId: 'user.create',\n\t\taction: 'create',\n\t\ttype: 'user',\n\t\tname: 'Create User Token',\n\t\tdescription: 'Create user registration tokens'\n\t},\n\tuserManage: {\n\t\tcontextId: 'user:manage',\n\t\taction: 'manage',\n\t\ttype: 'user',\n\t\tname: 'User Management',\n\t\tdescription: 'Manage user accounts and roles'\n\t}\n};\n\n// Export permissions array for compatibility\nexport const permissions = getAllPermissions();\n\n// Convenience functions for common operations\nexport function checkPermissions(user: User, permissionIds: string[], roles: Role[]): boolean {\n\treturn permissionIds.every((permissionId) => hasPermissionWithRoles(user, permissionId, roles));\n}\n\nexport function getUserRole(user: User, roles: Role[]): Role | undefined {\n\treturn roles.find((role) => role._id === user.role);\n}\n\nexport function getUserRoles(user: User, roles: Role[]): Role[] {\n\tconst userRole = getUserRole(user, roles);\n\treturn userRole ? [userRole] : [];\n}\n"],"names":[],"mappings":"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"}