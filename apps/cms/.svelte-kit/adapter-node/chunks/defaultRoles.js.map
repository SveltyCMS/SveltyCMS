{"version":3,"file":"defaultRoles.js","sources":["../../../../../../shared/database/src/auth/defaultRoles.ts"],"sourcesContent":["/**\n * @file src/databases/auth/defaultRoles.ts\n * @description Default roles for CMS initialization and fallback\n *\n * This module provides default roles that are:\n * - Seeded to database during setup wizard (see api/setup/seed.ts)\n * - Used as fallback when database is unavailable (see hooks/handleAuthorization.ts)\n * - Following headless CMS best practices (admin, developer, editor)\n *\n * ### Architecture Notes\n * - Website tokens handle external API access (not user roles)\n * - Multi-tenant support: roles can have optional tenantId field\n * - Database-first: defaultRoles are reference data, DB is source of truth\n */\n\nimport { getAllPermissions } from '@shared/database/auth';\nimport type { Role } from '@shared/database/auth/types';\n\n/**\n * Default roles for headless CMS workflow\n * - Admin: Superuser with full system access\n * - Developer: Setup and development access (technical users)\n * - Editor: Data entry and content management (business users)\n *\n * Note: Admin role permissions will be populated with getAllPermissions()\n * when used. Other roles have explicitly defined permission sets.\n */\nexport const defaultRoles: Role[] = [\n\t{\n\t\t_id: 'admin',\n\t\tname: 'Administrator',\n\t\tdescription: 'Superuser - Full system access to all features and settings',\n\t\tisAdmin: true,\n\t\tpermissions: [], // Will be populated with all permissions\n\t\ticon: 'material-symbols:verified-outline',\n\t\tcolor: 'gradient-primary'\n\t},\n\t{\n\t\t_id: 'developer',\n\t\tname: 'Developer',\n\t\tdescription: 'Technical users - Access to development tools, APIs, and system configuration',\n\t\tisAdmin: false,\n\t\tpermissions: [\n\t\t\t'system:dashboard',\n\t\t\t'api:graphql',\n\t\t\t'api:collections',\n\t\t\t'api:export',\n\t\t\t'api:systemInfo',\n\t\t\t'api:user',\n\t\t\t'api:userActivity',\n\t\t\t'api:media',\n\t\t\t'api:widgets',\n\t\t\t'api:sendMail',\n\t\t\t'collections:read',\n\t\t\t'collections:update',\n\t\t\t'collections:create',\n\t\t\t'content:builder',\n\t\t\t'config:widgetManagement'\n\t\t],\n\t\ticon: 'material-symbols:code',\n\t\tcolor: 'gradient-pink'\n\t},\n\t{\n\t\t_id: 'editor',\n\t\tname: 'Editor',\n\t\tdescription: 'Content managers - Create and edit content, manage media and users',\n\t\tisAdmin: false,\n\t\tpermissions: [\n\t\t\t'collections:read',\n\t\t\t'collections:update',\n\t\t\t'collections:create',\n\t\t\t'content:editor',\n\t\t\t'content:images',\n\t\t\t'system:dashboard',\n\t\t\t'api:systemInfo',\n\t\t\t'api:collections',\n\t\t\t'api:user',\n\t\t\t'api:userActivity',\n\t\t\t'api:media',\n\t\t\t'user:manage'\n\t\t],\n\t\ticon: 'material-symbols:edit',\n\t\tcolor: 'gradient-tertiary'\n\t}\n];\n\n/**\n * Get default roles with admin permissions populated\n * Call this function when you need roles with complete permission sets\n */\nexport function getDefaultRoles(): Role[] {\n\tconst allPermissions = getAllPermissions();\n\treturn defaultRoles.map((role) => ({\n\t\t...role,\n\t\tpermissions: role.isAdmin ? allPermissions.map((p) => p._id) : role.permissions\n\t}));\n}\n"],"names":[],"mappings":";;;;;;AA2BO,MAAM,eAAuB;AAAA,EACnC;AAAA,IACC,KAAK;AAAA,IACL,MAAM;AAAA,IACN,aAAa;AAAA,IACb,SAAS;AAAA,IACT,aAAa,CAAA;AAAA;AAAA,IACb,MAAM;AAAA,IACN,OAAO;AAAA,EAAA;AAAA,EAER;AAAA,IACC,KAAK;AAAA,IACL,MAAM;AAAA,IACN,aAAa;AAAA,IACb,SAAS;AAAA,IACT,aAAa;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,IAED,MAAM;AAAA,IACN,OAAO;AAAA,EAAA;AAAA,EAER;AAAA,IACC,KAAK;AAAA,IACL,MAAM;AAAA,IACN,aAAa;AAAA,IACb,SAAS;AAAA,IACT,aAAa;AAAA,MACZ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,IAED,MAAM;AAAA,IACN,OAAO;AAAA,EAAA;AAET;AAMO,SAAS,kBAA0B;AACzC,QAAM,iBAAiB,kBAAA;AACvB,SAAO,aAAa,IAAI,CAAC,UAAU;AAAA,IAClC,GAAG;AAAA,IACH,aAAa,KAAK,UAAU,eAAe,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,KAAK;AAAA,EAAA,EACnE;AACH;"}