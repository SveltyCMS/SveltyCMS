{"version":3,"file":"GuiFields.js","sources":["../../../../../../shared/components/src/system/dropDown/DropDown.svelte","../../../../../../shared/components/src/system/builder/AddWidget.svelte","../../../../../../shared/components/src/system/builder/WidgetFields.svelte","../../../../../../shared/components/src/system/builder/WidgetBuilder.svelte","../../../../src/widgets/core/MegaMenu/GuiFields.svelte"],"sourcesContent":["<!--\n@file: /src/components/Dropdown.svelte\n@component:\n**Dropdown component that allows selection from a list of items. It supports custom styling, item modification, and an optional icon.**\n\n### Props\n- `items`: Array<any> - List of items to choose from.\n- `selected`: any - Currently selected item (default: first item in `items`).\n- `label`: string - Optional label for the dropdown button.\n- `modifier`: (input: any) => any - Function to modify how items are displayed.\n- `class`: string - Custom class for the dropdown container.\n\n### Features\n- **Customizable Items**: Accepts any array of items for selection.\n- **Default Selection**: Automatically selects the first item if none is provided.\n- **Item Modification**: Allows a function to modify item display.\n- **Expandable Dropdown**: Toggles visibility of the item list.\n-->\n\n<script lang=\"ts\">\n\timport { twMerge } from 'tailwind-merge';\n\n\t// Define props using $props\n\tconst {\n\t\titems, // Array of selectable items\n\t\tselected, // Currently selected item (no default here, handled dynamically)\n\t\tlabel = '', // Optional label for the dropdown\n\t\tmodifier = (input: any) => input, // Function to modify how items are displayed\n\t\tclass: className = '' // Custom class for the dropdown container\n\t} = $props();\n\n\t// --- STATE ---\n\t// State for dropdown expansion and selected item\n\tlet expanded = $state(false);\n\t// Use $derived to reactively track selected prop changes\n\tlet currentSelected = $derived(selected);\n\n\t// Effect to update currentSelected when the selected prop changes or to set initial default\n\t$effect(() => {\n\t\tif (selected !== undefined) {\n\t\t\tcurrentSelected = selected;\n\t\t} else if (items && items.length > 0) {\n\t\t\tcurrentSelected = items[0];\n\t\t} else {\n\t\t\tcurrentSelected = undefined; // No selected item or items available\n\t\t}\n\t});\n\n\t// Derived state for filtered items\n\tconst filteredItems = $derived(items.filter((item: any) => item !== currentSelected));\n\n\t// Toggle dropdown expansion\n\tfunction toggleExpanded() {\n\t\texpanded = !expanded;\n\t}\n\n\t// Handle item selection\n\tfunction selectItem(item: any) {\n\t\tcurrentSelected = item;\n\t\texpanded = false;\n\t}\n\n\t// Effect to update currentSelected when the selected prop changes\n\t$effect(() => {\n\t\tcurrentSelected = selected;\n\t});\n</script>\n\n<!-- Dropdown container -->\n<div class={twMerge('overflow-hidden bg-surface-500', className)}>\n\t<!-- Dropdown button -->\n\t<button\n\t\tonclick={toggleExpanded}\n\t\tclass=\"preset-filled-tertiary-500 btn dark:preset-outlined-primary-500\"\n\t\taria-label=\"Toggle Dropdown\"\n\t\tclass:selected={expanded}\n\t>\n\t\t{currentSelected || label}\n\t</button>\n</div>\n\n<!-- Dropdown content -->\n{#if expanded}\n\t<!-- Dropdown header -->\n\t<div class=\"mb-3 border-b text-center text-tertiary-500 dark:text-primary-500\">Choose your Widget</div>\n\n\t<!-- Dropdown items -->\n\t<div class=\"flex flex-wrap items-center justify-center gap-2\">\n\t\t{#each filteredItems as item}\n\t\t\t<button\n\t\t\t\tonclick={() => selectItem(item)}\n\t\t\t\tclass=\"variant-filled-warning btn relative hover:variant-filled-secondary dark:variant-outline-warning\"\n\t\t\t\taria-label={modifier(item)}\n\t\t\t>\n\t\t\t\t<span class=\"text-surface-700 dark:text-white\">{modifier(item)}</span>\n\t\t\t</button>\n\t\t{/each}\n\t</div>\n{/if}\n","<!-- \n@file src/components/system/builder/AddWidget.svelte\n@description Add widget component for the system builder\n-->\n\n<script lang=\"ts\">\n\t// Components\n\timport PageTitle from '@cms/components/PageTitle.svelte';\n\timport DropDown from '@cms/components/system/dropDown/DropDown.svelte';\n\timport { widgets } from '@shared/stores/widgetStore.svelte';\n\timport type { WidgetFactory } from '@cms-types';\n\timport InputSwitch from './InputSwitch.svelte';\n\n\timport type { AddWidgetProps } from './types';\n\n\tlet {\n\t\tfields = $bindable([]),\n\t\taddField = $bindable(false),\n\t\teditField = $bindable(false),\n\t\tselected_widget = $bindable(null),\n\t\tfield = $bindable({\n\t\t\tlabel: '',\n\t\t\tdb_fieldName: '',\n\t\t\ttranslated: false,\n\t\t\trequired: false,\n\t\t\twidget: { key: null as string | null, GuiFields: {} as Record<string, any> }\n\t\t})\n\t}: AddWidgetProps = $props();\n\n\tconst widget_keys = $derived(Object.keys(widgets.widgetFunctions));\n\tlet guiSchema = $state<WidgetFactory['GuiSchema'] | undefined>(undefined);\n\n\t$effect(() => {\n\t\tif (selected_widget) {\n\t\t\tconst widgetFn = widgets.widgetFunctions[selected_widget];\n\t\t\tguiSchema = (widgetFn as WidgetFactory)?.GuiSchema;\n\t\t}\n\t});\n\n\tfunction handleSave() {\n\t\tif (!selected_widget) return;\n\t\tfield.widget = { key: selected_widget, GuiFields: field.widget.GuiFields };\n\t\tfield.label = field.widget.GuiFields.label;\n\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\tfields = [...fields, field as any];\n\t\taddField = false;\n\t}\n\n\tfunction handleCancel() {\n\t\taddField = false;\n\t}\n\n\tfunction handleWidgetCancel() {\n\t\tselected_widget = null;\n\t}\n</script>\n\n<div class=\"fixed -top-16 left-0 flex h-screen w-full flex-col overflow-auto bg-white dark:bg-surface-900\">\n\t<div class=\"mb-3 flex items-center justify-between text-surface-900 dark:text-white\">\n\t\t<PageTitle name=\"Add a Widget\" icon=\"material-symbols:ink-pen\" iconColor=\"text-tertiary-500 dark:text-primary-500\" />\n\t\t<button type=\"button\" onclick={handleCancel} aria-label=\"Cancel\" class=\"preset-outlined-secondary-500 btn-icon mr-2\">\n\t\t\t<iconify-icon icon=\"material-symbols:close\" width=\"24\"></iconify-icon>\n\t\t</button>\n\t</div>\n\n\t{#if !selected_widget && !editField}\n\t\t<div class=\"flex items-center justify-center\">\n\t\t\t<button type=\"button\" onclick={handleCancel} aria-label=\"Cancel\" class=\"mb-[20px] ml-auto mr-[40px]\">X</button>\n\t\t\t<DropDown items={widget_keys} selected={selected_widget} label=\"Select Widget\" />\n\t\t</div>\n\t{:else}\n\t\t<div class=\"flex-col items-center justify-center overflow-auto\">\n\t\t\t<p class=\"text-wxl mb-3 text-center\">\n\t\t\t\tDefine your <span class=\"text-tertiary-500 dark:text-primary-500\">{selected_widget}</span>\n\t\t\t</p>\n\t\t\t<div class=\"w-100 mx-2 mb-2 flex justify-between gap-2\">\n\t\t\t\t<button class=\"preset-filled-tertiary-500 btn dark:preset-filled-primary-500\" onclick={handleSave}>\n\t\t\t\t\tSave {selected_widget} Widget\n\t\t\t\t</button>\n\t\t\t\t<button class=\"variant-filled-secondary btn dark:preset-outlined-secondary-500\" onclick={handleWidgetCancel}>Cancel</button>\n\t\t\t</div>\n\n\t\t\t{#if guiSchema}\n\t\t\t\t{#each Object.entries(guiSchema) as [property, value] (property)}\n\t\t\t\t\t<!-- eslint-disable-next-line @typescript-eslint/no-explicit-any -->\n\t\t\t\t\t<InputSwitch\n\t\t\t\t\t\tvalue={field.widget.GuiFields[property]}\n\t\t\t\t\t\twidget={(value as any).widget}\n\t\t\t\t\t\tkey={property}\n\t\t\t\t\t\tonupdate={(e: { value: any }) => (field.widget.GuiFields[property] = e.value)}\n\t\t\t\t\t/>\n\t\t\t\t{/each}\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n</div>\n","<!-- \n@file src/components/system/builder/WidgetFields.svelte\n@component\n**Component for displaying and managing widget fields**\n\n### Features\n- Drag and drop fields\n- Edit fields\n- Delete fields\n\n### Props\n- fields: Array of widget fields\n- onFieldsUpdate: Function to update fields\n\n### Events\n- onFieldsUpdate: Function to update fields\n\n### Stores\n- uiStateManager: Store for UI state\n\n### Components\n- AddWidget: Component for adding widgets\n-->\n\n<script lang=\"ts\">\n\t//Stores\n\timport { ui } from '@shared/stores/UIStore.svelte';\n\n\t// Components\n\timport PageTitle from '@cms/components/PageTitle.svelte';\n\timport AddWidget from './AddWidget.svelte';\n\n\timport { debounce } from '@shared/utils/utils';\n\timport type { FieldInstance } from '@cms-types/content';\n\n\t// Props\n\tconst { fields = [], onFieldsUpdate = () => {} } = $props();\n\n\t// State\n\tlet container: HTMLDivElement | null = $state(null);\n\tlet currentFieldKey: string | null = $state(null);\n\tlet currentField: FieldInstance | null = $state(null);\n\n\tfunction initDragAndDrop(node: HTMLElement) {\n\t\tfunction drag(e: PointerEvent) {\n\t\t\tlet timeOut: ReturnType<typeof setTimeout> | undefined;\n\t\t\tconst pointerID = e.pointerId;\n\n\t\t\tlet targets = $state(\n\t\t\t\t[...container!.getElementsByClassName('field')].map((el) => {\n\t\t\t\t\tconst rect = el.getBoundingClientRect();\n\t\t\t\t\treturn { el: el as HTMLElement, center: rect.top + rect.height / 2 };\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tconst onPointerUp = () => {\n\t\t\t\tclearTimeout(timeOut);\n\t\t\t};\n\n\t\t\tnode.onpointerup = onPointerUp;\n\t\t\tnode.onpointerleave = onPointerUp;\n\n\t\t\ttimeOut = setTimeout(() => {\n\t\t\t\tconst clone = node.cloneNode(true) as HTMLElement;\n\t\t\t\tcontainer!.appendChild(clone);\n\t\t\t\tclone.setPointerCapture(pointerID);\n\t\t\t\tnode.style.opacity = '0.5';\n\t\t\t\tclone.style.left = node.getBoundingClientRect().left + 'px';\n\t\t\t\tclone.style.marginLeft = '0';\n\t\t\t\tclone.style.position = 'fixed';\n\t\t\t\tclone.style.top = e.clientY + 'px';\n\t\t\t\tclone.style.width = node.getBoundingClientRect().width + 'px';\n\t\t\t\tconst cloneHeight = clone.offsetHeight + 10 + 'px';\n\t\t\t\tconst deb = debounce(50);\n\t\t\t\tlet old_closest: HTMLElement;\n\n\t\t\t\tclone.onpointermove = (e) => {\n\t\t\t\t\tif (e.clientY < container!.offsetTop || e.clientY > container!.offsetTop + container!.offsetHeight - 60) {\n\t\t\t\t\t\tif (e.clientY < container!.offsetTop) {\n\t\t\t\t\t\t\tcontainer!.scrollBy(0, -5);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontainer!.scrollBy(0, 5);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tclone.style.top = e.clientY + 'px';\n\t\t\t\t\tdeb(() => {\n\t\t\t\t\t\ttargets = [...container!.getElementsByClassName('field')]\n\t\t\t\t\t\t\t.map((el) => {\n\t\t\t\t\t\t\t\tconst rect = el.getBoundingClientRect();\n\t\t\t\t\t\t\t\treturn { el: el as HTMLElement, center: rect.top + rect.height / 2 };\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.filter((el) => el.el != clone);\n\t\t\t\t\t\ttargets.sort((a, b) => (Math.abs(b.center - e.clientY) < Math.abs(a.center - e.clientY) ? 1 : -1));\n\t\t\t\t\t\tconst closest = targets[0];\n\t\t\t\t\t\tif (closest.el == node) return;\n\t\t\t\t\t\tconst closest_index = parseInt(closest.el.getAttribute('data-index') as string);\n\t\t\t\t\t\tconst clone_index = parseInt(clone.getAttribute('data-index') as string);\n\n\t\t\t\t\t\tif (old_closest) {\n\t\t\t\t\t\t\told_closest.style.removeProperty('border-color');\n\t\t\t\t\t\t\told_closest.style.margin = '10px 0';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (e.clientY > closest.center && clone_index - closest_index != 1) {\n\t\t\t\t\t\t\tclosest.el.style.marginBottom = cloneHeight;\n\t\t\t\t\t\t} else if (e.clientY < closest.center && closest_index - clone_index != 1) {\n\t\t\t\t\t\t\tclosest.el.style.marginTop = cloneHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclosest.el.style.borderColor = 'red';\n\t\t\t\t\t\told_closest = closest.el;\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tclone.onpointerup = (e) => {\n\t\t\t\t\tnode.style.opacity = '1';\n\t\t\t\t\tclone.releasePointerCapture(pointerID);\n\t\t\t\t\ttargets.sort((a, b) => (Math.abs(b.center - e.clientY) < Math.abs(a.center - e.clientY) ? 1 : -1));\n\t\t\t\t\tconst closest = targets[0];\n\t\t\t\t\tlet closest_index = parseInt(closest.el.getAttribute('data-index') as string);\n\t\t\t\t\tconst clone_index = parseInt(clone.getAttribute('data-index') as string);\n\t\t\t\t\tconst newFields = [...fields];\n\t\t\t\t\tconst dragged_item = newFields.splice(clone_index, 1)[0];\n\n\t\t\t\t\tif (clone_index < closest_index) {\n\t\t\t\t\t\tclosest_index--;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.clientY > closest.center) {\n\t\t\t\t\t\tclosest_index++;\n\t\t\t\t\t}\n\t\t\t\t\tnewFields.splice(closest_index, 0, dragged_item);\n\t\t\t\t\tonFieldsUpdate(newFields);\n\t\t\t\t\tclone.remove();\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\ttargets.forEach((el) => {\n\t\t\t\t\t\t\tel.el.style.removeProperty('border-color');\n\t\t\t\t\t\t\tel.el.style.margin = '10px 0';\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 50);\n\t\t\t\t};\n\t\t\t}, 200);\n\t\t}\n\n\t\tnode.onpointerdown = drag;\n\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\tnode.onpointerdown = null;\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction handleFieldClick(field: FieldInstance) {\n\t\tcurrentFieldKey = field.widget.Name;\n\t\tcurrentField = field;\n\t}\n\n\tfunction handleFieldDelete(field: FieldInstance, event: Event) {\n\t\tevent.stopPropagation();\n\t\tconst newFields = fields.filter((f: FieldInstance) => f !== field);\n\t\tonFieldsUpdate(newFields);\n\t}\n\n\tfunction handleSave() {\n\t\t// Implement save logic here\n\t\tcurrentField = null;\n\t}\n\n\tfunction handleCancel() {\n\t\tcurrentField = null;\n\t}\n\n\t$effect(() => {\n\t\tif (currentFieldKey) {\n\t\t\t// Any side effects related to currentFieldKey changes\n\t\t}\n\t});\n</script>\n\n<div class=\"wrapper\" bind:this={container}>\n\t{#each fields as field, index (field.id)}\n\t\t<div\n\t\t\tclass=\"field relative\"\n\t\t\taria-label=\"Widget\"\n\t\t\trole=\"button\"\n\t\t\ttabindex=\"0\"\n\t\t\tdata-index={index}\n\t\t\tonclick={() => handleFieldClick(field)}\n\t\t\tonkeydown={(e) => e.key === 'Enter' && handleFieldClick(field)}\n\t\t\tuse:initDragAndDrop\n\t\t>\n\t\t\t<div class=\"h-full w-full p-[10px]\">\n\t\t\t\t<p>widget: {field.widget.Name}</p>\n\t\t\t\t<p>label: {field.label}</p>\n\t\t\t</div>\n\t\t\t<button onclick={(e) => handleFieldDelete(field, e)} aria-label=\"Delete widget\" class=\"absolute right-[5px] top-[5px]\">\n\t\t\t\t<iconify-icon icon=\"tdesign:delete-1\" width=\"24\" height=\"24\"></iconify-icon>\n\t\t\t</button>\n\t\t</div>\n\t{/each}\n</div>\n\n{#if currentField}\n\t<AddWidget {fields} field={currentField as any} addField={false} selected_widget={currentFieldKey} editField={true} />\n{/if}\n\n<!-- Edit individual selected widget  -->\n{#if currentField}\n\t<div\n\t\tclass=\"fixed -top-16 left-0 z-20 flex h-full w-full flex-col items-center justify-center overflow-auto bg-white dark:bg-surface-900 {ui.state\n\t\t\t.leftSidebar === 'full'\n\t\t\t? 'left-[220px] '\n\t\t\t: 'left-0 '}\"\n\t>\n\t\t<div class=\"fixed top-0 flex items-center justify-between {ui.state.leftSidebar === 'full' ? 'left-[220px] w-full' : 'left-0 w-screen'}\">\n\t\t\t<PageTitle name=\"Edit Widget\" icon=\"material-symbols:ink-pen\" iconColor=\"text-primary-500\" />\n\n\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t<!-- Save Button -->\n\t\t\t\t<button class=\"preset-filled-primary-500 btn\" aria-label=\"Save\" onclick={handleSave}>Save</button>\n\t\t\t\t<!-- Cancel Button -->\n\t\t\t\t<button class=\"preset-outlined-secondary-500 btn-icon mr-2\" aria-label=\"Cancel\" onclick={handleCancel}>\n\t\t\t\t\t<iconify-icon icon=\"material-symbols:close\" width=\"24\"></iconify-icon>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"z-100 flex flex-col items-center justify-center gap-1\">\n\t\t\t<!-- Removed loop based on guiSchema, assuming AddWidget handles field editing internally -->\n\t\t</div>\n\t</div>\n{/if}\n","<!--\n@file src/components/system/builder/WidgetBuilder.svelte\n@component\n**Widget builder component**\n\n### Features\n- Add fields\n- Edit fields\n- Delete fields\n\n### Props\n- addField: Boolean to add fields\n- fields: Array of widget fields\n- onFieldsChange: Function to update fields\n\n### Events\n- onFieldsChange: Function to update fields\n\n### Stores\n- uiStateManager: Store for UI state\n\n### Components\n- AddWidget: Component for adding widgets\n-->\n<script lang=\"ts\">\n\timport AddWidget from './AddWidget.svelte';\n\timport WidgetFields from './WidgetFields.svelte';\n\n\t//ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\timport type { FieldInstance } from '@cms-types/content';\n\n\timport type { WidgetBuilderProps } from './types';\n\n\t// Props\n\tlet { addField = $bindable(false), fields = $bindable([]), onFieldsChange }: WidgetBuilderProps = $props();\n\n\tfunction toggleAddField() {\n\t\taddField = true;\n\t}\n\n\tfunction updateFields(newFields: FieldInstance[]) {\n\t\tfields = newFields;\n\t\tonFieldsChange?.(newFields);\n\t}\n</script>\n\n<div class=\"flex flex-col\">\n\t{#if addField}\n\t\t<AddWidget bind:fields bind:addField />\n\t{:else}\n\t\t<button class=\"preset-filled-tertiary-500 btn mb-4 mt-1 dark:preset-filled-primary-500\" onclick={toggleAddField}>\n\t\t\t{m.WidgetBuilder_AddColectionField()}\n\t\t</button>\n\t\t<WidgetFields {fields} onFieldsUpdate={updateFields} />\n\t{/if}\n</div>\n","<!--\n@file src/widgets/core/MegaMenu/GuiFields.svelte\n@component - GUI fields component for mega menu configuration\n\nProvides an intuitive interface for configuring hierarchical menu structures.\nAllows users to define different widget fields for each menu level.\n\n@example\n<GuiFields bind:value={menuLevels} />\nInteractive level configuration with add/remove level capabilities\n\n### Props\n- `value: FieldInstance[][]` - Array of field arrays for each menu level (bindable)\n\n### Features\n- **Level Management**: Add/remove menu levels dynamically\n- **Widget Builder Integration**: Uses WidgetBuilder for field configuration\n- **Visual Hierarchy**: Clear level indicators and organization\n- **Real-time Updates**: Immediate reactivity for level changes\n- **Validation Ready**: Structured for proper validation integration\n- **Accessibility**: Proper ARIA labels and keyboard navigation\n-->\n\n<script lang=\"ts\">\n\timport WidgetBuilder from '@cms/components/system/builder/WidgetBuilder.svelte';\n\timport type { FieldInstance } from '@cms-types';\n\n\tlet { value = $bindable([]) }: { value: FieldInstance[][] } = $props();\n\n\t// Initialize with at least one level if empty\n\tif (!value || value.length === 0) {\n\t\tvalue = [[]];\n\t}\n\n\t// Add a new menu level\n\tfunction addLevel() {\n\t\tvalue = [...value, []];\n\t}\n\n\t// Remove a specific level\n\tfunction removeLevel(index: number) {\n\t\tif (value.length > 1) {\n\t\t\tvalue = value.filter((_, i) => i !== index);\n\t\t}\n\t}\n\n\t// Update fields for a specific level\n\tfunction updateLevelFields(index: number, newFields: FieldInstance[]) {\n\t\tvalue[index] = newFields;\n\t\tvalue = [...value]; // Trigger reactivity\n\t}\n</script>\n\n<div class=\"space-y-6\">\n\t<div class=\"border-b border-surface-200 pb-4 dark:text-surface-50\">\n\t\t<h3 class=\"mb-2 text-lg font-semibold text-surface-900 dark:text-surface-100\">Menu Structure Configuration</h3>\n\t\t<p class=\"text-sm leading-relaxed text-surface-600 dark:text-surface-300\">\n\t\t\tDefine the fields available at each level of your hierarchical menu. Each level can have different widgets and configurations.\n\t\t</p>\n\t</div>\n\n\t<div class=\"levels-container space-y-4\">\n\t\t{#each value as levelFields, levelIndex}\n\t\t\t<div\n\t\t\t\tclass=\"level-card rounded-lg border border-surface-200 bg-surface-50/50 dark:text-surface-50 dark:bg-surface-800/50 {levelIndex === 0\n\t\t\t\t\t? 'border-primary-200! bg-primary-50/30! dark:border-primary-700! dark:bg-primary-900/20!'\n\t\t\t\t\t: ''}\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"level-header flex items-center justify-between border-b border-surface-200 bg-surface-100/50 p-4 dark:text-surface-50 dark:bg-surface-800\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"level-info flex items-center gap-3\">\n\t\t\t\t\t\t<h4 class=\"level-title text-base font-medium text-surface-800 dark:text-surface-100\">Level {levelIndex + 1}</h4>\n\t\t\t\t\t\t{#if levelIndex === 0}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"level-badge rounded-full bg-primary-100 px-2 py-1 text-xs font-medium text-primary-700 dark:bg-primary-900 dark:text-primary-200\"\n\t\t\t\t\t\t\t\t>Root Level</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"level-badge rounded-full bg-secondary-100 px-2 py-1 text-xs font-medium text-secondary-700 dark:bg-secondary-900 dark:text-secondary-200\"\n\t\t\t\t\t\t\t\t>Nested Level</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if value.length > 1}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclass=\"preset-filled-error-500 btn\"\n\t\t\t\t\t\t\tonclick={() => removeLevel(levelIndex)}\n\t\t\t\t\t\t\taria-label=\"Remove level {levelIndex + 1}\"\n\t\t\t\t\t\t\ttitle=\"Remove this menu level\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:close\" width=\"16\"></iconify-icon>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"space-y-4 p-4\">\n\t\t\t\t\t<div class=\"space-y-3\">\n\t\t\t\t\t\t<label class=\"block text-sm font-medium text-surface-700 dark:text-surface-200\" for={'widget-builder-' + levelIndex}>\n\t\t\t\t\t\t\tFields for Level {levelIndex + 1}\n\t\t\t\t\t\t\t<span class=\"field-count font-normal text-surface-500 dark:text-surface-50\"\n\t\t\t\t\t\t\t\t>({levelFields.length} field{levelFields.length !== 1 ? 's' : ''})</span\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t<WidgetBuilder fields={levelFields} onFieldsChange={(newFields) => updateLevelFields(levelIndex, newFields)} />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if levelFields.length === 0}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"empty-fields-notice flex flex-col items-center gap-2 rounded-lg border-2 border-dashed border-surface-300 bg-surface-100/50 p-6 text-center dark:border-surface-600 dark:bg-surface-800/50\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:information-outline\" width=\"20\" class=\"text-surface-400\"></iconify-icon>\n\t\t\t\t\t\t\t<span class=\"text-sm font-medium text-surface-600 dark:text-surface-300\">No fields configured for this level yet.</span>\n\t\t\t\t\t\t\t<span class=\"text-xs text-surface-500 dark:text-surface-50\">Use the Widget Builder above to add fields.</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/each}\n\t</div>\n\n\t<div class=\" border-t border-surface-200 pt-4 dark:text-surface-50\">\n\t\t<button type=\"button\" class=\"preset-filled-tertiary-500 btn dark:preset-filled-primary-500\" onclick={addLevel}>\n\t\t\t<iconify-icon icon=\"mdi:plus\" width=\"20\"></iconify-icon>\n\t\t\tAdd Menu Level\n\t\t</button>\n\t</div>\n</div>\n"],"names":["$.escape","$$renderer","m.WidgetBuilder_AddColectionField","$.attr_class","$.stringify","$.attr"],"mappings":";;;;;;;;;wCAmBA;;MAKE;AAAA;AAAA,MACA;AAAA;AAAA,MACA,QAAQ;AAAA;AAAA,MAER,OAAO,YAAY;AAAA;AAAA;AAKhB,QAAA,WAAkB;AAElB,QAAA,kBAA2B;AAcA,UAAM,QAAQ,SAAc,SAAS,eAAe;;;MAoBxE,QAAQ,kCAAkC,SAAS;AAAA,qHAM7C,SAAQ,CAAA,CAAA,iCAAAA,YAEvB,mBAAmB,KAAK,CAAA,kBAAA;;;;;EAXnB,CAAA;;;wCC7DR;;MAWE,SAAM,CAAA;AAAA,MACN,WAAqB;AAAA,MACrB,YAAsB;AAAA,MACtB,kBAA4B;AAAA,MAC5B,QAAK;AAAA,QACJ,OAAO;AAAA,QACP,cAAc;AAAA,QACd,YAAY;AAAA,QACZ,UAAU;AAAA,QACV,QAAM,EAAI,KAAK,MAAuB,WAAS,CAAA,EAAA;AAAA;;AAI3C,UAAA,cAAuB,OAAO,KAAK,QAAQ,eAAe;;;;;;;;AAoC1D,QAAA,CAAA,oBAAoB,WAAS;;;;eAGhB;AAAA,kBAAuB;AAAA;;;;;AAK4B,MAAAC,YAAA,KAAA,0KAAAD,YAAA,eAAe,uKAI3E,eAAe,CAAA,yHAAA;;;;;;;;EAtBlB,CAAA;;;wCC/BR;AAYS,UAAA,EAAA,SAAM,CAAA,EAAgC,IAAA;;;;MA8IvC;AAAA;;UAAU,QAAK,WAAA,KAAA;uHAMR,KAAK,CAAA,mDAAAA,YAMJ,MAAM,OAAO,IAAI,CAAA,kBAAAA,YAClB,MAAM,KAAK,CAAA,kLAAA;AAAA;;;;;;;;;;EAhBlB,CAAA;;;wCCvJR;AAYO,QAAA,EAAA,WAAqB,OAAQ,aAAwB,eAAc,IAAA;;;;;UAapE,UAAQ;;;;;;;;;;;;;;;;;;;;AAIV,QAAAC,YAAA,KAAA,2FAAAD,YAAAE,iCAAiC,CAAA,CAAA,YAAA;AAEpB,qBAAAD,aAAA,EAAA,OAAoC,CAAA;;;;;;;;;;;;EAT7C,CAAA;;;wCCvBR;UAIO,QAAK,CAAA,EAAA,IAAA;AAGN,QAAA,CAAA,SAAS,MAAM,WAAW,GAAG;AACjC,cAAK,CAAA,CAAA,CAAA;AAAA,IACN;AAeS,aAAA,kBAAkB,OAAe,WAA4B;AACrE,YAAM,KAAK,IAAI;AACf,kBAAY,KAAK;AAAA,IAClB;;yCAYQ,KAAK;;UAAI,cAAW,WAAA,UAAA;AAE4F,MAAAA,YAAA,KAAA,OAAAE,WAAA,gHAAAC,UAAA,eAAe,IACjI,2FACA,EAAE,CAAA,EAAA,CAAA,sSAAAJ,YAMyF,aAAa,CAAC,CAAA,QAAA;AACrG,UAAA,eAAe,GAAC;;;;;;;;UAajB,MAAM,SAAS,GAAC;;AAKO,QAAAC,YAAA,KAAA,4DAAAI,KAAA,cAAA,gBAAAD,UAAA,aAAa,CAAC,CAAA,EAAA,CAAA,oGAAA;AAAA;;;AAU4C,MAAAH,YAAA,KAAA,mJAAAI,KAAA,OAAA,oBAAoB,UAAU,CAAA,qBAAAL,YAChG,aAAa,CAAC,8FAE5B,YAAY,MAAM,CAAA,SAAAA,YAAQ,YAAY,WAAW,IAAI,MAAM,EAAE,CAAA,mBAAA;;gBAI3C;AAAA,QAA8B,gBAAA,CAAA,cAAc,kBAAkB,YAAY,SAAS;AAAA;;UAGtG,YAAY,WAAW,GAAC;;;;;;;;;;EA5D1B,CAAA;;"}