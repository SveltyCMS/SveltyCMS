{"version":3,"file":"MissingWidget.js","sources":["../../../../src/widgets/MissingWidget.svelte"],"sourcesContent":["<!--\n@file src/widgets/MissingWidget.svelte\n@component\n**Enhanced Missing Widget Display**\n\nShows a helpful message when a widget is missing or disabled.\nProvides actionable information for developers and administrators.\n\n@example\n<MissingWidget config={fieldInstance} />\n\n### Props\n- `config`: FieldInstance - The field configuration that references the missing widget\n\n### Features\n- Clear error messaging with widget name\n- Helpful suggestions for resolution\n- Different displays for development vs production\n- Links to widget management\n- Accessibility support\n-->\n\n<script lang=\"ts\">\n\timport type { FieldInstance } from '@cms-types';\n\timport { logger } from '@shared/utils/logger';\n\n\tinterface Props {\n\t\tconfig: FieldInstance;\n\t\tshowDebugInfo?: boolean;\n\t}\n\n\tconst { config, showDebugInfo = import.meta.env.DEV }: Props = $props();\n\n\t// Extract widget information\n\tconst widgetName = $derived(config.widget?.Name || config.__missingWidgetName || 'Unknown');\n\tconst fieldLabel = $derived(config.label || 'Unnamed Field');\n\tconst fieldName = $derived(config.db_fieldName || 'unknown_field');\n\n\t// Log the missing widget for debugging\n\t$effect(() => {\n\t\tlogger.warn(`[MissingWidget] Widget \"${widgetName}\" is missing for field \"${fieldLabel}\" (${fieldName})`);\n\t});\n\n\t// Determine the appropriate message based on environment\n\tconst isDevelopment = import.meta.env.DEV;\n</script>\n\n<div\n\tclass=\"missing-widget rounded-lg border-2 border-warning-400 bg-warning-50 p-4 dark:border-warning-600 dark:bg-warning-950\"\n\trole=\"alert\"\n\taria-live=\"polite\"\n>\n\t<!-- Icon and Title -->\n\t<div class=\"mb-2 flex items-start gap-3\">\n\t\t<svg class=\"h-6 w-6 shrink-0 text-warning-600 dark:text-warning-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\n\t\t\t<path\n\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\tstroke-width=\"2\"\n\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n\t\t\t/>\n\t\t</svg>\n\n\t\t<div class=\"flex-1\">\n\t\t\t<h3 class=\"text-lg font-semibold text-warning-800 dark:text-warning-200\">Missing Widget</h3>\n\n\t\t\t<!-- Main error message -->\n\t\t\t<p class=\"mt-1 text-sm text-warning-700 dark:text-warning-300\">\n\t\t\t\tThe widget <strong>\"{widgetName}\"</strong> is not available for the field <strong>\"{fieldLabel}\"</strong>.\n\t\t\t</p>\n\t\t</div>\n\t</div>\n\n\t<!-- Debug Information (Development Only) -->\n\t{#if showDebugInfo && isDevelopment}\n\t\t<div class=\"mt-3 space-y-2 rounded border border-warning-300 bg-warning-100 p-3 text-xs font-mono dark:border-warning-700 dark:bg-warning-900\">\n\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t<span class=\"font-semibold text-warning-800 dark:text-warning-200\">Widget:</span>\n\t\t\t\t<span class=\"text-warning-700 dark:text-warning-300\">{widgetName}</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t<span class=\"font-semibold text-warning-800 dark:text-warning-200\">Field:</span>\n\t\t\t\t<span class=\"text-warning-700 dark:text-warning-300\">{fieldName}</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t<span class=\"font-semibold text-warning-800 dark:text-warning-200\">Label:</span>\n\t\t\t\t<span class=\"text-warning-700 dark:text-warning-300\">{fieldLabel}</span>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t<!-- Suggested Actions -->\n\t<div class=\"mt-4 space-y-2\">\n\t\t<p class=\"text-sm font-semibold text-warning-800 dark:text-warning-200\">Possible Solutions:</p>\n\n\t\t<ul class=\"ml-4 space-y-1 text-sm text-warning-700 dark:text-warning-300\">\n\t\t\t<li class=\"flex items-start gap-2\">\n\t\t\t\t<span class=\"mt-0.5\">•</span>\n\t\t\t\t<span\n\t\t\t\t\t>Check if the widget is installed and activated in <a\n\t\t\t\t\t\thref=\"/config/widgetManagement\"\n\t\t\t\t\t\tclass=\"underline hover:text-warning-900 dark:hover:text-warning-100\">Widget Management</a\n\t\t\t\t\t></span\n\t\t\t\t>\n\t\t\t</li>\n\t\t\t<li class=\"flex items-start gap-2\">\n\t\t\t\t<span class=\"mt-0.5\">•</span>\n\t\t\t\t<span>Verify the widget name matches an available widget</span>\n\t\t\t</li>\n\t\t\t<li class=\"flex items-start gap-2\">\n\t\t\t\t<span class=\"mt-0.5\">•</span>\n\t\t\t\t<span>Check the collection schema configuration for typos</span>\n\t\t\t</li>\n\t\t\t{#if isDevelopment}\n\t\t\t\t<li class=\"flex items-start gap-2\">\n\t\t\t\t\t<span class=\"mt-0.5\">•</span>\n\t\t\t\t\t<span>Ensure the widget module is properly exported from its index.ts</span>\n\t\t\t\t</li>\n\t\t\t{/if}\n\t\t</ul>\n\t</div>\n\n\t<!-- Production Warning -->\n\t{#if !isDevelopment}\n\t\t<div\n\t\t\tclass=\"mt-4 rounded border border-error-300 bg-error-50 p-2 text-xs text-error-700 dark:border-error-700 dark:bg-error-950 dark:text-error-300\"\n\t\t>\n\t\t\t<strong>Note:</strong> This field will not be editable until the widget is available.\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.missing-widget {\n\t\tanimation: fadeIn 0.3s ease-in;\n\t}\n\n\t@keyframes fadeIn {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(-4px);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}\n</style>\n"],"names":["$$renderer","$.escape"],"mappings":";;;;wCAsBA;YASS,QAAQ,gBAAgB,MAAA,IAAmB;UAG7C,aAAsB,OAAO,QAAQ,QAAQ,OAAO,uBAAuB;AAC3E,UAAA,aAAsB,OAAO,SAAS;AACjB,WAAO,gBAAgB;AAgC1BA,gBAAA,KAAA,0wBAAAC,YAAA,UAAU,mEAAqD,UAAU,CAAA,8BAAA;;;;;;;;;AAuD9E;;;;;EA9EZ,CAAA;;"}