{"version":3,"file":"Input15.js","sources":["../../../../src/widgets/custom/Address/Input.svelte"],"sourcesContent":["<!--\n@file src/widgets/custom/Address/Input.svelte\n@component\n**Address Widget Input Component**\n\nProvides comprehensive address input with interactive Mapbox integration and geocoding.\nPart of the Three Pillars Architecture for widget system.\n\n@example\n<AddressInput bind:value={addressData} field={fieldDefinition} />\nInteractive form with map, country selector, and address validation\n\n### Props\n- `field: FieldType` - Widget field definition with map settings and configuration\n- `value: AddressData | null | undefined` - Structured address object (bindable)\n- `error?: string | null` - Validation error message for display\n\n### Features\n- **Interactive Mapping**: Mapbox GL JS integration with draggable markers\n- **Geocoding Support**: Address lookup and coordinate resolution\n- **Country Selection**: Multilingual country dropdown with ISO codes\n- **Field Visibility**: Configurable hidden fields for flexible layouts\n- **Default Values**: Smart defaults from field configuration\n- **Coordinate Tracking**: Automatic latitude/longitude capture\n- **Responsive Design**: Grid-based form layout for optimal UX\n- **Error Handling**: Accessible error display with ARIA attributes\n- **Language Support**: Localized UI based on system language settings\n-->\n\n<script lang=\"ts\">\n\timport { app } from '@shared/stores/store.svelte';\n\n\timport { onDestroy } from 'svelte';\n\timport type { FieldType } from './';\n\timport countries from './countries.json';\n\timport type { AddressData } from './types';\n\timport { tokenTarget } from '@shared/services/token/tokenTarget';\n\n\tlet { field, value = $bindable(), error }: { field: FieldType; value: AddressData | null | undefined; error?: string | null } = $props();\n\n\t// Initialize value if missing\n\t$effect(() => {\n\t\tif (!value) {\n\t\t\tvalue = {\n\t\t\t\tstreet: '',\n\t\t\t\thouseNumber: '',\n\t\t\t\tpostalCode: '',\n\t\t\t\tcity: '',\n\t\t\t\tcountry: (field.defaultCountry as string) || 'DE',\n\t\t\t\tlatitude: (field.mapCenter as { lat: number; lng: number })?.lat || 0,\n\t\t\t\tlongitude: (field.mapCenter as { lat: number; lng: number })?.lng || 0\n\t\t\t};\n\t\t}\n\t});\n\n\t// Get the current system language for the UI.\n\tconst lang = $derived(app.systemLanguage);\n\n\t// Note: Map functionality is placeholder for future Mapbox integration\n\tconst map: any = null; // Placeholder for future Mapbox integration\n\n\tonDestroy(() => {\n\t\tif (map && typeof map.remove === 'function') {\n\t\t\tmap.remove();\n\t\t}\n\t});\n</script>\n\n<div class=\"address-container\" class:invalid={error}>\n\t{#if !(field.hiddenFields as string[])?.includes('latitude')}\n\t\t<div class=\"map\">\n\t\t\t<!-- Map placeholder - Mapbox integration to be implemented -->\n\t\t</div>\n\t{/if}\n\n\t{#if value}\n\t\t<div class=\"form-grid\">\n\t\t\t<div class=\"field relative\">\n\t\t\t\t<label for=\"{field.db_fieldName}-street\">Street</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tid=\"{field.db_fieldName}-street\"\n\t\t\t\t\tbind:value={value.street}\n\t\t\t\t\tclass=\"input\"\n\t\t\t\t\tuse:tokenTarget={{\n\t\t\t\t\t\tname: field.db_fieldName,\n\t\t\t\t\t\tlabel: field.label,\n\t\t\t\t\t\tcollection: (field as any).collection\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"{field.db_fieldName}-houseNumber\">House Number</label>\n\t\t\t\t<input type=\"text\" id=\"{field.db_fieldName}-houseNumber\" bind:value={value.houseNumber} class=\"input\" />\n\t\t\t</div>\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"{field.db_fieldName}-postalCode\">Postal Code</label>\n\t\t\t\t<input type=\"text\" id=\"{field.db_fieldName}-postalCode\" bind:value={value.postalCode} class=\"input\" />\n\t\t\t</div>\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"{field.db_fieldName}-city\">City</label>\n\t\t\t\t<input type=\"text\" id=\"{field.db_fieldName}-city\" bind:value={value.city} class=\"input\" />\n\t\t\t</div>\n\t\t\t<div class=\"field\">\n\t\t\t\t<label for=\"{field.db_fieldName}-country\">Country</label>\n\t\t\t\t<select id=\"{field.db_fieldName}-country\" bind:value={value.country} class=\"input\">\n\t\t\t\t\t{#each countries as country}\n\t\t\t\t\t\t<option value={country.alpha2}>{country[lang] || country.en}</option>\n\t\t\t\t\t{/each}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t{#if error}\n\t\t<p class=\"error-message\" role=\"alert\">{error}</p>\n\t{/if}\n</div>\n"],"names":["$.attr","$.stringify","$$renderer","$.escape"],"mappings":";;;;;wCA6BA;UASO,OAAO,QAAK,QAAgB,MAAK,IAAA;UAkBjC,OAAgB,IAAI;AAK1B,cAAS,MAAO;AAAA,IAIhB,CAAC;iFAG4C,OAAK,CAAA,GAAA;AAC3C,QAAA,CAAA,MAAM,cAA2B,SAAS,UAAU,GAAA;;;;;;;QAMtD,OAAK;;4GAGM,MAAM,YAAY,CAAA,SAAA,CAAA,qCAAAA,KAAA,MAAA,GAAAC,UAGzB,MAAM,YAAY,CAAA,SAAA,CAAA,GAAAD,KAAA,SACX,MAAM,MAAM,CAAA,mDAAAA,KAAA,OAAA,GAAAC,UAUZ,MAAM,YAAY,mFACP,MAAM,YAAY,CAAA,cAAA,CAAA,GAAAD,KAAA,SAA2B,MAAM,WAAW,CAAA,mDAAAA,KAAA,OAAA,GAAAC,UAGzE,MAAM,YAAY,CAAA,aAAA,CAAA,0CAAAD,KAAA,MAAA,GAAAC,UACP,MAAM,YAAY,gCAA0B,MAAM,UAAU,CAAA,mDAAAD,KAAA,OAAA,GAAAC,UAGvE,MAAM,YAAY,CAAA,OAAA,CAAA,mCAAAD,KAAA,MAAA,GAAAC,UACP,MAAM,YAAY,CAAA,OAAA,CAAA,GAAAD,KAAA,SAAoB,MAAM,IAAI,CAAA,mDAAAA,KAAA,OAAA,GAAAC,UAG3D,MAAM,YAAY,CAAA,UAAA,CAAA,mBAAA;;;UAClB,IAAA,GAAAA,UAAA,MAAM,YAAY,CAAA;AAAA,UAAuB,OAAA,MAAM;AAAA;;;;+CACpD,SAAS;;gBAAI,UAAO,WAAA,OAAA;AACX,YAAAC,YAAA,OAAA,EAAA,OAAA,QAAQ,OAAM,GAAA,CAAAA,gBAAA;AAAG,cAAAA,YAAA,KAAA,GAAAC,YAAA,QAAQ,IAAI,KAAK,QAAQ,EAAE,CAAA,EAAA;AAAA;;;;;;;;;;QAO3D,OAAK;;4EAC8B,KAAK,CAAA,MAAA;AAAA;;;;;EAjDtC,CAAA;;"}