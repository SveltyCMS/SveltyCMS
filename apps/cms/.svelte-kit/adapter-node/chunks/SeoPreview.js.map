{"version":3,"file":"SeoPreview.js","sources":["../../../../src/widgets/custom/Seo/components/SeoPreview.svelte"],"sourcesContent":["<!--\n@file src/widgets/custom/Seo/components/SeoPreview.svelte\n@component\n**SEO Preview widget for SEO Widget**\n\n@example\n<SeoPreview bind:title={title} bind:description={description} bind:hostUrl={hostUrl} bind:SeoPreviewToggle={SeoPreviewToggle} />\n\n#### Props\n- `title` {string} - Title text\n- `description` {string} - Description text\n- `hostUrl` {string} - Host URL\n- `SeoPreviewToggle` {boolean} - Preview toggle\n\n#### Features\n- Translatable\n-->\n\n<script lang=\"ts\">\n\t// ParaglideJS\n\timport * as m from '@shared/paraglide/messages';\n\n\timport { publicEnv } from '@shared/stores/globalSettings.svelte';\n\timport { fade } from 'svelte/transition';\n\n\t// Logic for Heatmap\n\tconst POWER_WORDS = new Set(\n\t\tm.widget_seo_powerwords\n\t\t\t? m\n\t\t\t\t\t.widget_seo_powerwords()\n\t\t\t\t\t.split(',')\n\t\t\t\t\t.map((w) => w.trim().toLowerCase())\n\t\t\t: []\n\t);\n\n\tfunction getHeatColor(word: string, index: number): string {\n\t\tconst lower = word.toLowerCase().replace(/[^a-z0-9]/g, '');\n\t\tif (!lower) return 'transparent';\n\n\t\t// 1. Keyword match (Highest - Red)\n\t\tif (keywords && keywords.some((k) => lower.includes(k.toLowerCase()) || k.toLowerCase().includes(lower))) {\n\t\t\treturn 'rgba(239, 68, 68, 0.8)';\n\t\t}\n\n\t\t// 2. Power Word match (Yellow - Gold)\n\t\tif (POWER_WORDS.has(lower)) {\n\t\t\treturn 'rgba(234, 179, 8, 0.8)';\n\t\t}\n\n\t\t// 3. Position (Start of sentence is hot/Prominent - Orange)\n\t\tif (index < 3) {\n\t\t\treturn 'rgba(249, 115, 22, 0.6)';\n\t\t}\n\n\t\t// 4. Length / Interest (Green)\n\t\tif (lower.length > 4) {\n\t\t\treturn 'rgba(34, 197, 94, 0.5)';\n\t\t}\n\n\t\t// 5. Neutral (Blue)\n\t\treturn 'rgba(59, 130, 246, 0.3)';\n\t}\n\n\tfunction renderHeatmap(text: string) {\n\t\treturn text.split(' ').map((word, i) => {\n\t\t\tconst color = getHeatColor(word, i);\n\t\t\treturn { word, color };\n\t\t});\n\t}\n\n\tinterface Props {\n\t\ttitle: string;\n\t\tdescription: string;\n\t\thostUrl: string;\n\t\tkeywords?: string[];\n\t\tSeoPreviewToggle: boolean;\n\t\tontogglePreview?: () => void;\n\t}\n\n\tconst { title, description, hostUrl, keywords = [], SeoPreviewToggle, ontogglePreview = () => {} }: Props = $props();\n\n\tlet heatmapMode = $state(false);\n\n\tfunction handleTogglePreview() {\n\t\tontogglePreview();\n\t}\n</script>\n\n<div class=\"mt-4 border-t border-surface-500 pt-4 dark:text-surface-50\">\n\t<div class=\"mb-4 flex flex-wrap items-center justify-between gap-4\">\n\t\t<h3 class=\"h3\">SEO Preview</h3>\n\n\t\t<div class=\"flex items-center gap-2\">\n\t\t\t<!-- Device Toggle -->\n\t\t\t<div class=\"preset-filled-surface-500 btn-group [&>*+*]:border-surface-500\">\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonclick={() => !SeoPreviewToggle && handleTogglePreview()}\n\t\t\t\t\tclass=\"{!SeoPreviewToggle ? 'preset-filled-primary-500' : ''} btn-sm\"\n\t\t\t\t\ttitle=\"Desktop View\"\n\t\t\t\t>\n\t\t\t\t\t<iconify-icon icon=\"mdi:monitor\" width=\"18\"></iconify-icon>\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonclick={() => SeoPreviewToggle && handleTogglePreview()}\n\t\t\t\t\tclass=\"{SeoPreviewToggle ? 'preset-filled-primary-500' : ''} btn-sm\"\n\t\t\t\t\ttitle=\"Mobile View\"\n\t\t\t\t>\n\t\t\t\t\t<iconify-icon icon=\"mdi:cellphone\" width=\"18\"></iconify-icon>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<!-- Heatmap Toggle -->\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclass=\"btn-sm {heatmapMode ? 'variant-filled-warning' : 'preset-filled-surface-500'}\"\n\t\t\t\tonclick={() => (heatmapMode = !heatmapMode)}\n\t\t\t\ttitle=\"Toggle Heatmap Visualization\"\n\t\t\t>\n\t\t\t\t<iconify-icon icon=\"mdi:fire\" width=\"18\" class=\"mr-1\"></iconify-icon>\n\t\t\t\tHeatmap\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n\t<!-- Preview Card -->\n\t<div class=\"card variant-glass-surface p-4 transition-all duration-200 {SeoPreviewToggle ? 'max-w-[375px] mx-auto' : 'w-full'}\">\n\t\t<!-- URL Line -->\n\t\t<div class=\"mb-1 flex items-center gap-2 text-xs text-surface-500 dark:text-surface-50\">\n\t\t\t<div class=\"flex h-6 w-6 items-center justify-center rounded-full bg-surface-200 dark:bg-surface-700\">\n\t\t\t\t<iconify-icon icon=\"mdi:earth\" width=\"14\" class=\"text-surface-700 dark:text-surface-300\"></iconify-icon>\n\t\t\t</div>\n\t\t\t<div class=\"flex flex-col leading-none\">\n\t\t\t\t<span class=\"font-bold text-surface-700 dark:text-surface-300\">{publicEnv.HOST_PROD || 'Your Site'}</span>\n\t\t\t\t<span class=\"truncate text-[10px]\">{hostUrl}</span>\n\t\t\t</div>\n\t\t\t<iconify-icon icon=\"mdi:dots-vertical\" class=\"ml-auto\"></iconify-icon>\n\t\t</div>\n\n\t\t<!-- Title -->\n\t\t<div class=\"mb-1\">\n\t\t\t{#if heatmapMode}\n\t\t\t\t<h3 class=\"relative text-lg font-medium leading-tight text-tertiary-500 dark:text-primary-500\">\n\t\t\t\t\t{#each renderHeatmap(title || 'Page Title') as { word, color }}\n\t\t\t\t\t\t<span class=\"relative inline-block mr-1\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full blur-md\"\n\t\t\t\t\t\t\t\tstyle=\"background-color: {color}; width: 120%; height: 120%; z-index: 0;\"\n\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t<span class=\"relative z-10\">{word}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t{/each}\n\t\t\t\t</h3>\n\t\t\t{:else}\n\t\t\t\t<h3 class=\"text-lg font-medium leading-tight text-primary-500 hover:underline dark:text-primary-400\">\n\t\t\t\t\t{title || 'Page Title'}\n\t\t\t\t</h3>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<!-- Description -->\n\t\t<div>\n\t\t\t{#if heatmapMode}\n\t\t\t\t<p class=\"text-sm leading-normal text-surface-600 dark:text-surface-300\">\n\t\t\t\t\t{#each renderHeatmap(description || 'Page description goes here...') as { word, color }}\n\t\t\t\t\t\t<span class=\"relative inline-block mr-1\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full blur-md\"\n\t\t\t\t\t\t\t\tstyle=\"background-color: {color}; width: 140%; height: 140%; z-index: 0;\"\n\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t<span class=\"relative z-10\">{word}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t{/each}\n\t\t\t\t</p>\n\t\t\t{:else}\n\t\t\t\t<p class=\"text-sm leading-normal text-surface-600 dark:text-surface-300\">\n\t\t\t\t\t{description || 'Page description goes here...'}\n\t\t\t\t</p>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n\n\t{#if heatmapMode}\n\t\t<div class=\"mt-4 grid grid-cols-2 md:grid-cols-5 gap-2 text-[10px]\" transition:fade>\n\t\t\t<div class=\"flex items-center gap-1.5 p-1 rounded bg-surface-100 dark:bg-surface-800\">\n\t\t\t\t<div class=\"w-2 h-2 rounded-full bg-red-500\"></div>\n\t\t\t\t<span>Keyword</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center gap-1.5 p-1 rounded bg-surface-100 dark:bg-surface-800\">\n\t\t\t\t<div class=\"w-2 h-2 rounded-full bg-yellow-500\"></div>\n\t\t\t\t<span>Power Word</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center gap-1.5 p-1 rounded bg-surface-100 dark:bg-surface-800\">\n\t\t\t\t<div class=\"w-2 h-2 rounded-full bg-orange-400\"></div>\n\t\t\t\t<span>Prominent</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center gap-1.5 p-1 rounded bg-surface-100 dark:bg-surface-800\">\n\t\t\t\t<div class=\"w-2 h-2 rounded-full bg-green-500\"></div>\n\t\t\t\t<span>Good Length</span>\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center gap-1.5 p-1 rounded bg-surface-100 dark:bg-surface-800\">\n\t\t\t\t<div class=\"w-2 h-2 rounded-full bg-blue-500\"></div>\n\t\t\t\t<span>Neutral</span>\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n</div>\n"],"names":["m.widget_seo_powerwords","$.attr_class","$.stringify","$.escape","$$renderer"],"mappings":";;;;wCAkBA;AAQkB,QAAO,IACvBA,wBACGA,sBACsB,EACrB,MAAM,GAAG,EACT,IAAG,CAAE,MAAM,EAAE,KAAI,EAAG,YAAW,CAAA;;MAgD5B;AAAA,MAAO;AAAA,MAAa;AAAA,MAAS,WAAQ,CAAA;AAAA,MAAO;AAAA,MAAkB,kBAAe,MAAS;AAAA,MAAC;AAAA;uWAmBlF,mBAAmB,8BAA8B,EAAE,CAAA,SAAA,CAAA,mHAAAC,WAAA,GAAAC,UAQpD,mBAAmB,8BAA8B,EAAE,CAAA,SAAA,CAAA,0HAAAD,WAAA,UAAAC,UAUJ,2BAA2B,CAAA,EAAA,CAAA,gJAAAD,WAAA,8DAAAC,UAWd,mBAAmB,0BAA0B,QAAQ,CAAA,EAAA,CAAA,wZAAAC,YAO1D,UAAU,aAAa,WAAW,2DAC9D,OAAO,CAAA,+GAAA;;;AAqBzC,MAAAC,YAAA,KAAA,wGAAAD,YAAA,SAAS,YAAY,CAAA,OAAA;AAAA;;;;AAqBrB,MAAAC,YAAA,KAAA,4EAAAD,YAAA,eAAe,+BAA+B,CAAA,MAAA;AAAA;;;;;;EA3F5C,CAAA;;"}