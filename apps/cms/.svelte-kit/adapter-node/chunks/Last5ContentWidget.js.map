{"version":3,"file":"Last5ContentWidget.js","sources":["../../../../../../shared/features/src/dashboard/widgets/Last5ContentWidget.svelte"],"sourcesContent":["<!--\n@file src/routes/(app)/dashboard/widgets/Last5ContentWidget.svelte\n@component\n**A reusable widget component for displaying last 5 content information with improved rendering and error handling**\n\n@example\n<Last5ContentWidget label=\"Last 5 Content\" />\n\n### Props\n- `label`: The label for the widget (default: 'Last 5 Content')\n\nThis widget fetches and displays the latest content items, including:\n- Content title and collection\n- Creation date and author\n- Publication status\n- Status indicators\n\n### Features:\n- Clean list-based visualization\n- Theme-aware rendering (light/dark mode support)\n-->\n<script lang=\"ts\" module>\n\texport const widgetMeta = {\n\t\tname: 'Last 5 Content',\n\t\ticon: 'mdi:file-document-multiple-outline',\n\t\tdefaultSize: { w: 1, h: 2 }\n\t};\n</script>\n\n<script lang=\"ts\">\n\timport BaseWidget from '../BaseWidget.svelte';\n\timport { formatDistanceToNow } from 'date-fns';\n\timport type { WidgetSize } from '@cms-types';\n\n\tinterface ContentItem {\n\t\tid: string;\n\t\ttitle: string;\n\t\tcollection: string;\n\t\tcreatedAt: string;\n\t\tcreatedBy: string;\n\t\tstatus: string;\n\t}\n\n\ttype FetchedData = ContentItem[] | undefined;\n\n\tconst {\n\t\tlabel = 'Last 5 Content',\n\t\ttheme = 'light',\n\t\ticon = 'mdi:file-document-multiple-outline',\n\t\twidgetId = undefined,\n\t\tsize = { w: 1, h: 1 } as WidgetSize,\n\t\tonSizeChange = (_newSize: WidgetSize) => {},\n\t\tonRemove = () => {}\n\t}: {\n\t\tlabel?: string;\n\t\ttheme?: 'light' | 'dark';\n\t\ticon?: string;\n\t\twidgetId?: string;\n\t\tsize?: WidgetSize;\n\t\tonSizeChange?: (newSize: WidgetSize) => void;\n\t\tonRemove?: () => void;\n\t} = $props();\n\n\tfunction getStatusColor(status: string) {\n\t\tswitch (status.toLowerCase()) {\n\t\t\tcase 'published':\n\t\t\t\treturn 'bg-green-500';\n\t\t\tcase 'draft':\n\t\t\t\treturn 'bg-yellow-500';\n\t\t\tcase 'archived':\n\t\t\t\treturn 'bg-gray-500';\n\t\t\tdefault:\n\t\t\t\treturn 'bg-gray-400';\n\t\t}\n\t}\n</script>\n\n<BaseWidget\n\t{label}\n\t{theme}\n\tendpoint=\"/api/dashboard/last5Content\"\n\tpollInterval={30000}\n\t{icon}\n\t{widgetId}\n\t{size}\n\t{onSizeChange}\n\tonCloseRequest={onRemove}\n>\n\t{#snippet children({ data: fetchedData }: { data: FetchedData })}\n\t\t{#if fetchedData && Array.isArray(fetchedData) && fetchedData.length > 0}\n\t\t\t<div class=\"grid gap-2\" style=\"max-height: 180px; overflow-y: auto;\" role=\"list\" aria-label=\"Last 5 content items\">\n\t\t\t\t{#each fetchedData.slice(0, 5) as item (item.id)}\n\t\t\t\t\t<div class=\"flex items-center justify-between rounded-lg bg-surface-100/80 px-3 py-2 text-xs dark:bg-surface-700/60\" role=\"listitem\">\n\t\t\t\t\t\t<div class=\"flex min-w-0 items-center gap-2\">\n\t\t\t\t\t\t\t<div class=\"h-2 w-2 rounded-full {getStatusColor(item.status)}\" title=\"Status: {item.status}\"></div>\n\t\t\t\t\t\t\t<div class=\"flex min-w-0 flex-col\">\n\t\t\t\t\t\t\t\t<span class=\"text-text-900 dark:text-text-100 truncate font-medium\" title={item.title}>\n\t\t\t\t\t\t\t\t\t{item.title}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"text-xs text-surface-500 dark:text-surface-50\" title={`Collection: ${item.collection}`}>\n\t\t\t\t\t\t\t\t\t{item.collection}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex flex-col items-end\">\n\t\t\t\t\t\t\t<span class=\"text-xs font-medium uppercase text-surface-600 dark:text-surface-300\">\n\t\t\t\t\t\t\t\t{formatDistanceToNow(new Date(item.createdAt), { addSuffix: true })}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class=\"text-xs text-surface-500 dark:text-surface-50\" title={`By: ${item.createdBy}`}>\n\t\t\t\t\t\t\t\t{item.createdBy}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<div class=\"flex flex-1 flex-col items-center justify-center py-6 text-xs text-gray-500 dark:text-gray-400\" role=\"status\" aria-live=\"polite\">\n\t\t\t\t<iconify-icon icon=\"mdi:file-remove-outline\" width=\"32\" class=\"mb-2 text-surface-400 dark:text-surface-500\" aria-hidden=\"true\"></iconify-icon>\n\t\t\t\t<span>No content found</span>\n\t\t\t</div>\n\t\t{/if}\n\t{/snippet}\n</BaseWidget>\n"],"names":["$$renderer","$.ensure_array_like","$.attr_class","$.stringify","$.attr","$.escape"],"mappings":";;;MAsBc,aAAU;AAAA,EACtB,MAAM;AAAA,EACN,MAAM;AAAA,EACN,eAAe,GAAG,GAAG,GAAG,EAAC;;;wCAI3B;;MAiBE,QAAQ;AAAA,MACR,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,WAAW;AAAA,MACX,SAAS,GAAG,GAAG,GAAG,EAAC;AAAA,MACnB,eAAY,CAAI,aAAyB;AAAA,MAAC;AAAA,MAC1C,iBAAiB;AAAA,MAAC;AAAA;aAWV,eAAe,QAAgB;AAC/B,cAAA,OAAO,YAAW,GAAA;AAAA,aACpB;iBACG;AAAA,aACH;iBACG;AAAA,aACH;iBACG;AAAA;iBAEA;AAAA;IAEV;;UAcU,oBAAQA,aAAA,EAAG,MAAM,YAAW,GAAA;YAChC,eAAe,MAAM,QAAQ,WAAW,KAAK,YAAY,SAAS,GAAC;;;AAE/D,gBAAA,aAAAC,kBAAA,YAAY,MAAM,GAAG,CAAC,CAAA;;gBAAK,OAAI,WAAA,OAAA;AAGD,YAAAD,YAAA,KAAA,yLAAAE,WAAA,wBAAAC,UAAA,eAAe,KAAK,MAAM,CAAA,CAAA,EAAA,CAAA,GAAAC,KAAA,SAAA,WAAAD,UAAoB,KAAK,MAAM,CAAA,EAAA,CAAA,iHAAAC,KAAA,SAEf,KAAK,KAAK,iBACnF,KAAK,KAAK,CAAA,sEAAAA,KAAA,SAAA,eAEsE,KAAK,UAAU,EAAA,CAAA,IAAAC,YAC/F,KAAK,UAAU,4JAMhB,oBAAmB,IAAK,KAAK,KAAK,SAAS,GAAA,EAAK,WAAW,KAAI,8FAES,KAAK,SAAS,EAAA,CAAA,IAAAA,YACtF,KAAK,SAAS,CAAA,qBAAA;AAAA;;;;;;;;;QA/BrB;AAAA,QACA;AAAA;sBAEa;AAAA,QACb;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,wBACe;AAAA,QAEN;AAAA;;EAbH,CAAA;;"}