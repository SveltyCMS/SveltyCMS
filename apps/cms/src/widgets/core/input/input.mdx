---
path: 'src/widgets/core/input/input.mdx'
title: 'Input Widget'
description: 'A versatile input widget supporting text, email, phone, and number types with multilingual validation and database aggregation.'
order: 1
icon: 'mdi:form-textbox'
author: 'admin'
created: '2025-01-01'
updated: '2025-10-02'
tags:
  - 'widget'
  - 'input'
  - 'form'
  - 'validation'
  - 'core'
---

# Input Widget

The **Input Widget** is a versatile, foundational widget for handling text-based user input in SveltyCMS. It supports multiple input types and provides dynamic validation based on field configuration.

## Overview

The Input widget implements the Three Pillars Architecture and features:

- **Dynamic Validation**: Schema adapts to field configuration (`required`, `minLength`, `maxLength`, etc.)
- **Multiple Input Types**: Supports text, email, phone, and number inputs via `inputType` property
- **Translatable**: Full multilingual content support by default
- **Database Aggregation**: Case-insensitive text search and sorting
- **Configurable GUI**: Easy configuration in the Collection Builder

## Key Features

### Input Types

The widget supports several input types through the `inputType` property:

| Input Type       | Description         | Validation                     |
| ---------------- | ------------------- | ------------------------------ |
| `text` (default) | Standard text input | Length constraints, patterns   |
| `email`          | Email address input | Email format validation        |
| `phone`          | Phone number input  | E.164 format or custom pattern |
| `number`         | Numeric input       | Min/max value constraints      |

> **Note**: For specialized email, number, and phone inputs, you can use the dedicated custom widgets (`src/widgets/custom/email`, `src/widgets/custom/number`, `src/widgets/custom/phoneNumber`) which extend this core widget with enhanced features.

### Dynamic Validation

The widget automatically generates validation schemas based on field configuration:

```typescript
{
  required: true,           // Requires non-empty value
  minLength: 3,            // Minimum character length
  maxLength: 100,          // Maximum character length
  inputType: 'email',      // Applies email validation
  pattern: '/^\\+[1-9]\\d{1,14}$/' // Custom regex for phone
}
```

### Translation Support

When `translated: true`, the widget stores values as objects with language keys:

```typescript
{
  "en": "Hello World",
  "de": "Hallo Welt",
  "fr": "Bonjour le monde"
}
```

## Configuration Options

### GuiSchema Fields

Configure the widget in the Collection Builder with these options:

| Field          | Type               | Description                    | Required |
| -------------- | ------------------ | ------------------------------ | -------- |
| `label`        | Input              | Display label for the field    | Yes      |
| `db_fieldName` | Input              | Database field name            | No       |
| `required`     | Toggle             | Make field mandatory           | No       |
| `translated`   | Toggle             | Enable multilingual support    | No       |
| `icon`         | IconifyPicker      | Display icon                   | No       |
| `helper`       | Input              | Helper text shown below field  | No       |
| `width`        | Input              | Field width (CSS value)        | No       |
| `permissions`  | PermissionsSetting | Access control                 | No       |
| `placeholder`  | Input              | Placeholder text               | No       |
| `minLength`    | Input              | Minimum character/value length | No       |
| `maxLength`    | Input              | Maximum character/value length | No       |
| `prefix`       | Input              | Text prefix (e.g., "$")        | No       |
| `suffix`       | Input              | Text suffix (e.g., "USD")      | No       |
| `count`        | Input              | Show character counter         | No       |

### Widget Defaults

```typescript
{
	translated: true; // Multilingual by default
}
```

## Usage Examples

### Basic Text Input

```typescript
{
  widget: InputWidget,
  label: "Title",
  placeholder: "Enter page title",
  required: true,
  minLength: 3,
  maxLength: 100
}
```

### Email Input

```typescript
{
  widget: InputWidget,
  label: "Email Address",
  inputType: "email",
  required: true,
  placeholder: "user@example.com"
}
```

### Phone Input

```typescript
{
  widget: InputWidget,
  label: "Phone Number",
  inputType: "phone",
  pattern: "^\\+[1-9]\\d{1,14}$",  // E.164 format
  placeholder: "+1234567890"
}
```

### Number Input

```typescript
{
  widget: InputWidget,
  label: "Age",
  inputType: "number",
  minLength: 18,  // minLength acts as minValue for numbers
  maxLength: 120, // maxLength acts as maxValue for numbers
  required: true
}
```

### Non-Translated Input

```typescript
{
  widget: InputWidget,
  label: "Slug",
  translated: false,
  pattern: "^[a-z0-9-]+$",
  helper: "URL-friendly identifier"
}
```

## Database Aggregations

The widget supports MongoDB aggregation for filtering and sorting:

### Filtering

```typescript
// Case-insensitive text search
aggregations: {
	filters: async ({ field, filter, contentLanguage }) => [
		{
			$match: {
				[`${field.db_fieldName}.${contentLanguage}`]: {
					$regex: filter,
					$options: 'i'
				}
			}
		}
	];
}
```

### Sorting

```typescript
// Sort by field value
aggregations: {
	sorts: async ({ field, sortDirection, contentLanguage }) => ({
		[`${field.db_fieldName}.${contentLanguage}`]: sortDirection
	});
}
```

## Component Structure

### Input Component

- **Path**: `/src/widgets/core/input/Input.svelte`
- **Purpose**: Renders the form input with validation feedback

### Display Component

- **Path**: `/src/widgets/core/input/Display.svelte`
- **Purpose**: Displays the field value in read-only mode

## Type Exports

```typescript
// Field configuration type
export type FieldType = ReturnType<typeof InputWidget>;

// Input data type with validation
export type InputWidgetData = ValibotInput<ReturnType<typeof createValidationSchema>>;
```

## Validation Schema Details

The validation schema is built dynamically:

1. **Base Schema**: Starts with `string()` or `number()` based on `inputType`
2. **Required Check**: Adds `minLength(1)` if `required: true`
3. **Length Constraints**: Applies `minLength` and `maxLength` rules
4. **Format Validation**: Adds email or regex validation based on `inputType`
5. **Translation Handling**: Switches to flexible object schema if `translated: true`
6. **Optional Wrapper**: Wraps in `optional()` if not required

## Migration from Custom Widgets

If you're using the specialized custom widgets (`email`, `number`, `phoneNumber`), you can migrate to using the core Input widget with `inputType`:

**Before** (Custom Widget):

```typescript
import EmailWidget from '@widgets/custom/email';

{
  widget: EmailWidget,
  label: "Email"
}
```

**After** (Core Input Widget):

```typescript
import InputWidget from '@widgets/core/input';

{
  widget: InputWidget,
  inputType: "email",
  label: "Email"
}
```

## Related Widgets

- **Email Widget** (`/src/widgets/custom/email`): Extended email input with additional features
- **Number Widget** (`/src/widgets/custom/number`): Enhanced numeric input with step control
- **Phone Number Widget** (`/src/widgets/custom/phoneNumber`): Advanced phone validation with country codes

## Best Practices

1. **Use Appropriate Input Types**: Choose the correct `inputType` for your data
2. **Provide Clear Labels**: Use descriptive `label` and `helper` text
3. **Set Reasonable Constraints**: Don't over-constrain with `minLength`/`maxLength`
4. **Test Validation**: Verify validation messages are clear and helpful
5. **Consider Translation**: Enable `translated` for user-facing content
6. **Use Placeholders**: Provide example values in `placeholder` text

## Troubleshooting

### Validation Not Working

- Check that `validationSchema` is properly configured
- Verify `minLength` and `maxLength` values are correct
- Ensure `inputType` matches the data format

### Translation Issues

- Confirm `translated: true` in field config
- Check that language keys match `contentLanguage`
- Verify data structure is `{ "en": "value", "de": "Wert" }`

### Database Queries Failing

- Ensure field name in database matches `db_fieldName`
- Check that aggregation pipeline syntax is correct
- Verify translated fields use proper language key paths

## API Reference

### Widget Properties

```typescript
interface InputProps {
	label: string;
	db_fieldName?: string;
	required?: boolean;
	translated?: boolean;
	icon?: string;
	helper?: string;
	width?: string;
	permissions?: PermissionConfig;
	placeholder?: string;
	minLength?: number;
	maxLength?: number;
	prefix?: string;
	suffix?: string;
	count?: boolean;
	inputType?: 'text' | 'email' | 'phone' | 'number';
	pattern?: string;
}
```

### Validation Function

```typescript
createValidationSchema(field: FieldType): BaseSchema<unknown, unknown, BaseIssue<unknown>>
```

Generates a Valibot schema based on field configuration.
