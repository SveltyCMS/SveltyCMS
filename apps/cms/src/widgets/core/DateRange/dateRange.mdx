---
path: 'apps/cms/src/widgets/core/DateRange/dateRange.mdx'
title: 'DateRange Widget'
description: 'Guide for the DateRange widget (start/end), display and input components, and optimization notes.'
order: 3
icon: 'mdi:calendar-range'
author: 'admin'
created: '2025-09-29'
updated: '2025-09-29'
tags:
  - 'field'
  - 'date'
  - 'widget'
  - 'date-range'
---

# DateRange Widget

The DateRange widget stores a compact `{ start, end }` object where both values are ISO 8601 UTC date strings. It's intended for events, availability windows, promotions, and any feature that needs a start and end date.

This page documents the widget's purpose, props, usage examples, implementation notes, and optimization recommendations.

## Features

- Stores start/end dates as ISO 8601 (UTC) to avoid timezone drift.
- Validation ensures `end >= start`.
- Lightweight `Display` component optimized for lists and previews.
- Editor `Input` component provides calendar pickers and presets (today, this week, this month).

## Frontend components

- Input component: `/src/widgets/core/DateRange/Input.svelte` — editor UI with two native date inputs and simple presets.
- Display component: `/src/widgets/core/DateRange/Display.svelte` — renders a compact, localized date-range string plus duration/context.

## Props

- `displayFormat?: 'short' | 'medium' | 'long' | 'full'` — Controls month formatting in the display component. Default: `medium`.

## Validation

The widget uses a Valibot schema that validates the shape and ensures the start date is before or equal to the end date. The canonical schema (implementation) lives in:

`/src/widgets/core/DateRange/index.ts`

Example behavior:

- Missing start or end: validation error when field is required.
- Invalid ISO date string: validation error.
- End date before start date: validation error.

## Example usage (collection)

Add a DateRange field to a collection in one of your collection files (example):

```ts
widgets.DateRange({
	label: 'Event Dates',
	db_fieldName: 'event_dates',
	required: true,
	defaults: { translated: false }
});
```

When rendering a list, the display component will show a localized range such as `Sep 29, 2025 → Oct 2, 2025`, an optional duration like `(4 days)`, and a context badge (`Current`, `Past`, `Future`).

## Implementation notes & optimizations

- The `Display.svelte` component recreates `Intl.DateTimeFormat` when `format` or the runtime locale changes. This keeps formatting correct while staying synchronous and cheap for list rendering.
- For extremely large lists, consider pre-formatting ranges server-side (or caching formatted strings per-locale) to avoid repeated `Intl` allocations.
- The `Input.svelte` uses native date inputs for accessibility and performance; if you need richer UX (time selection, timezone-aware pickers), consider extending the Input component or adding an optional time field.

## Assets

If you add diagrams or screenshots, place them under `static/docs/widget-reference/` and reference them with absolute paths, e.g.:

```
![Date range editor](/docs/widget-reference/date-range/editor-screenshot.png)
```

## Tests and examples

- Unit tests: add small Valibot tests for the validation schema (happy path + end < start).
- UI tests: a Playwright or Storybook snapshot for `Display.svelte` helps catch formatting regressions across locales.

## See also

- `docs/widget-reference` — other widget docs
- `/src/widgets/core/DateRange` — component source and validation schema

---
