---
path: '/widgets/custom/rating'
title: 'Rating Widget'
description: 'Interactive star rating widget with customizable icons and maximum values for SveltyCMS'
order: 303
icon: 'material-symbols:star-outline'
author: 'admin'
created: '2025-01-15'
updated: '2025-01-15'
tags:
  - widget
  - custom
  - rating
  - stars
  - review
  - feedback
  - interactive
---

# Rating Widget

<blockquote>
	**Interactive star rating widget** powered by Skeleton Labs that stores numeric ratings with customizable icons and maximum values.
</blockquote>

## Overview

The **Rating widget** provides an intuitive star-based rating system for capturing user feedback, product reviews, service quality scores, and any other numeric rating needs. It uses the Skeleton Labs Ratings component for professional interaction patterns with click and hover states.

### Key Features

- ‚úÖ **Interactive Stars**: Click-to-select with hover preview
- ‚úÖ **Numeric Storage**: Stores rating as `number` type for calculations
- ‚úÖ **Customizable Icons**: Configure full/empty star icons via Iconify
- ‚úÖ **Flexible Scale**: Supports any maximum rating (default 5)
- ‚úÖ **Database Aggregation**: Calculate average ratings, filter by rating, sort by rating
- ‚úÖ **Non-Translatable**: Ratings are universal numeric values
- ‚úÖ **Skeleton Labs Integration**: Professional UI component with built-in interactions
- ‚úÖ **Accessible**: Full ARIA support and keyboard navigation
- ‚úÖ **Half-Star Support**: Optional half-star increments
- ‚úÖ **Visual Feedback**: Error states with red star coloring

---

## When to Use Rating Widget

### ‚úÖ Use Rating When:

- **Product Reviews**: Customer product ratings (1-5 stars)
- **Service Quality**: Service feedback, support quality ratings
- **Content Rating**: Article usefulness, video quality ratings
- **Skill Assessment**: Employee skill levels, competency ratings
- **Priority Ranking**: Task priority (Low=1, Critical=5)
- **Satisfaction Surveys**: Customer satisfaction scores
- **Performance Reviews**: Employee performance ratings
- **Quality Metrics**: Code quality, design quality scores

### ‚ùå Don't Use Rating When:

- **Binary Choice**: Use Toggle/Checkbox for yes/no questions
- **Multiple Options**: Use Select/Radio for discrete choices
- **Numeric Input**: Use Number widget for quantities, measurements
- **Percentage**: Use Number with suffix="%" or Slider widget
- **Complex Scoring**: Use custom calculation widget for weighted scores

---

## Basic Usage

### Simple Product Rating

```typescript
import Rating from '@src/widgets/custom/rating';

export const productsCollection = {
	name: 'Products',
	fields: [
		Rating({
			label: 'Customer Rating',
			db_fieldName: 'rating',
			max: 5,
			required: true
		})
	]
};
```

### Review System

```typescript
import Rating from '@src/widgets/custom/rating';
import Textarea from '@src/widgets/core/textarea';

export const reviewsCollection = {
	name: 'Product Reviews',
	fields: [
		Rating({
			label: 'Overall Rating',
			db_fieldName: 'overallRating',
			max: 5,
			required: true
		}),

		Rating({
			label: 'Quality',
			db_fieldName: 'qualityRating',
			max: 5,
			required: true,
			iconFull: 'material-symbols:verified',
			iconEmpty: 'material-symbols:verified-outline'
		}),

		Rating({
			label: 'Value for Money',
			db_fieldName: 'valueRating',
			max: 5,
			required: true,
			iconFull: 'mdi:currency-usd',
			iconEmpty: 'mdi:currency-usd-off'
		}),

		Textarea({
			label: 'Review Text',
			db_fieldName: 'reviewText',
			minLength: 50,
			maxLength: 1000,
			required: true
		})
	]
};
```

### Employee Performance

```typescript
import Rating from '@src/widgets/custom/rating';

export const performanceReviewsCollection = {
	name: 'Performance Reviews',
	fields: [
		Rating({
			label: 'Technical Skills',
			db_fieldName: 'technicalSkills',
			max: 10,
			required: true,
			helper: '1 = Beginner, 10 = Expert'
		}),

		Rating({
			label: 'Communication',
			db_fieldName: 'communication',
			max: 10,
			required: true
		}),

		Rating({
			label: 'Leadership',
			db_fieldName: 'leadership',
			max: 10,
			required: false,
			helper: 'Optional for non-leadership roles'
		})
	]
};
```

---

## Configuration Properties

| Property       | Type      | Required  | Default                           | Description                        |
| -------------- | --------- | --------- | --------------------------------- | ---------------------------------- |
| `label`        | `string`  | ‚úÖ Yes    | -                                 | Display label for the field        |
| `db_fieldName` | `string`  | ‚úÖ Yes    | -                                 | Database field name                |
| `max`          | `number`  | ‚ùå No     | `5`                               | Maximum rating value               |
| `required`     | `boolean` | ‚ùå No     | `false`                           | Whether rating is mandatory        |
| `iconFull`     | `string`  | ‚ùå No     | `'material-symbols:star'`         | Iconify icon for filled stars      |
| `iconEmpty`    | `string`  | ‚ùå No     | `'material-symbols:star-outline'` | Iconify icon for empty stars       |
| `helper`       | `string`  | ‚ùå No     | `undefined`                       | Helper text                        |
| `translated`   | `boolean` | üîí Locked | `false`                           | Always false (ratings are numeric) |

---

## Data Structure

### Storage Format

```typescript
// MongoDB Document
{
  "_id": "review_123",
  "productId": "prod_456",
  "rating": 4,              // ‚úÖ Number type (integer)
  "qualityRating": 5,
  "valueRating": 3,
  "averageRating": 4.0,     // Calculated field
  "createdAt": ISODate("2025-01-15T10:00:00Z")
}
```

### Why Numbers?

- **Direct Calculations**: `average = sum(ratings) / count(ratings)`
- **Database Aggregations**: `db.reviews.aggregate([{ $avg: "$rating" }])`
- **Sorting**: `db.reviews.find().sort({ rating: -1 })`
- **Filtering**: `db.reviews.find({ rating: { $gte: 4 } })`
- **Range Queries**: Fast numeric index lookups

---

## Database Operations

### Calculate Average Rating

```typescript
// Aggregate pipeline
db.reviews.aggregate([
	{
		$match: { productId: 'prod_123' }
	},
	{
		$group: {
			_id: null,
			avgRating: { $avg: '$rating' },
			count: { $sum: 1 }
		}
	}
]);

// Result: { avgRating: 4.2, count: 150 }
```

### Filter by Rating

```typescript
// 4-star and above
db.products.find({
	averageRating: { $gte: 4 }
});

// Between 3 and 4 stars
db.products.find({
	averageRating: { $gte: 3, $lte: 4 }
});
```

### Rating Distribution

```typescript
db.reviews.aggregate([
	{
		$group: {
			_id: '$rating',
			count: { $sum: 1 }
		}
	},
	{ $sort: { _id: -1 } }
]);

// Result:
// [
//   { _id: 5, count: 80 },
//   { _id: 4, count: 45 },
//   { _id: 3, count: 15 },
//   { _id: 2, count: 7 },
//   { _id: 1, count: 3 }
// ]
```

---

## Advanced Examples

### Multi-Criteria Rating Summary

```typescript
import Rating from '@src/widgets/custom/rating';

// Calculate weighted average
function calculateOverallRating(data: any) {
	const weights = {
		quality: 0.4,
		value: 0.3,
		service: 0.3
	};

	return data.qualityRating * weights.quality + data.valueRating * weights.value + data.serviceRating * weights.service;
}
```

### Custom Icon Sets

```typescript
// Heart icons for favorites
Rating({
	label: 'Favorite Level',
	db_fieldName: 'favoriteLevel',
	max: 5,
	iconFull: 'mdi:heart',
	iconEmpty: 'mdi:heart-outline'
});

// Thumbs up for approval
Rating({
	label: 'Approval',
	db_fieldName: 'approval',
	max: 5,
	iconFull: 'mdi:thumb-up',
	iconEmpty: 'mdi:thumb-up-outline'
});

// Fire icons for hotness
Rating({
	label: 'Hotness',
	db_fieldName: 'hotness',
	max: 5,
	iconFull: 'mdi:fire',
	iconEmpty: 'mdi:fire-off'
});
```

---

## Accessibility

### ARIA Support

```html
<div role="slider" aria-label="Product Rating" aria-valuenow="4" aria-valuemin="1" aria-valuemax="5" aria-required="true">
	<!-- Stars rendered here -->
</div>
```

### Keyboard Navigation

- **Tab**: Focus rating widget
- **Arrow Left/Right**: Decrease/increase rating
- **Home**: Set to minimum (1)
- **End**: Set to maximum (5)
- **Number Keys**: Jump to specific rating (1-5)

---

## Best Practices

### ‚úÖ Do's

1. **Use Standard Scales**

   ```typescript
   max: 5; // Standard 5-star rating (most intuitive)
   max: 10; // 10-point scale (detailed assessment)
   ```

2. **Provide Context**

   ```typescript
   Rating({
   	label: 'Product Quality',
   	helper: '1 = Poor, 5 = Excellent'
   });
   ```

3. **Calculate Aggregates**
   ```typescript
   // Update product's average rating when new review added
   const avgRating = await calculateAverageRating(productId);
   await updateProduct(productId, { averageRating: avgRating });
   ```

### ‚ùå Don'ts

1. **Don't Use for Binary Choices**

   ```typescript
   // ‚ùå Wrong: Yes/No question
   Rating({ label: 'Do you recommend this?', max: 2 });

   // ‚úÖ Correct: Use Toggle
   Toggles({ label: 'Do you recommend this?' });
   ```

2. **Don't Use Confusing Scales**
   ```typescript
   // ‚ùå Avoid: Non-standard scales
   max: 7; // Why 7? Confusing
   max: 13; // Odd number, unclear
   ```

---

## API Reference

```typescript
function Rating(props: RatingProps): FieldInstance;

interface RatingProps {
	label: string;
	db_fieldName: string;
	max?: number; // Default: 5
	required?: boolean; // Default: false
	iconFull?: string; // Default: 'material-symbols:star'
	iconEmpty?: string; // Default: 'material-symbols:star-outline'
	helper?: string;
	readonly?: boolean;
}

type RatingValue = number | null | undefined;
// Valid: 1, 2, 3, 4, 5 (integers within 1 to max)
// Invalid: 0, 6 (outside range), 3.5 (non-integer)
```

---

## Related Widgets

- **[Number Widget](/widgets/custom/number)** - For numeric input without star visualization
- **[Slider Widget](/widgets/core/slider)** - For continuous value selection
- **[Toggles Widget](/widgets/core/toggles)** - For binary yes/no choices

---

## Changelog

### Version 1.0.0 (2025-01-15)

- ‚úÖ Initial release with Skeleton Labs integration
- ‚úÖ Customizable icons via Iconify
- ‚úÖ Numeric storage with aggregation support
- ‚úÖ Full accessibility and keyboard navigation

---

## License

The Rating widget is part of SveltyCMS and is licensed under the MIT License.
