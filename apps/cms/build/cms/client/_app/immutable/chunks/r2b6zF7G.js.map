{"version":3,"file":"r2b6zF7G.js","sources":["../../../../../../src/widgets/core/Date/Display.svelte"],"sourcesContent":["<!--\n@file src/widgets/core/Date/Display.svelte\n@component\n**Date Widget Display Component**\n\nRenders ISO 8601 date values in localized format using the browser's language settings.\nPart of the Three Pillars Architecture for widget system.\n\n@example\n<DateDisplay value=\"2025-09-24T00:00:00.000Z\" />\n<DateDisplay value=\"2025-09-24T00:00:00.000Z\" format=\"long\" showRelative={true} />\n\n#### Props\n- `value: DateWidgetData` - ISO 8601 date string from validated input\n- `format: 'short' | 'medium' | 'long' | 'full'` - Date format style (default: 'medium')\n- `showRelative: boolean` - Show relative time for recent dates (default: true)\n\n#### Features\n- Automatic localization using browser locale\n- Intl.DateTimeFormat for native date formatting\n- Relative time for recent dates (Today, Yesterday, etc.)\n- Graceful fallbacks for invalid dates\n- Tooltip with ISO string\n- Zero dependencies\n-->\n\n<script lang=\"ts\">\n\timport type { DateWidgetData } from './';\n\timport { logger } from '@shared/utils/logger';\n\n\tinterface Props {\n\t\tvalue: DateWidgetData;\n\t\tformat?: 'short' | 'medium' | 'long' | 'full';\n\t\tshowRelative?: boolean;\n\t}\n\n\tconst { value, format = 'medium', showRelative = true }: Props = $props();\n\n\t// Get the user's preferred language from the browser\n\tconst userLocale = $derived(typeof document !== 'undefined' ? document.documentElement.lang || 'en-US' : 'en-US');\n\n\t// Get date formatting options based on format prop\n\tconst dateOptions = $derived.by(() => {\n\t\tconst optionsMap = {\n\t\t\tshort: { dateStyle: 'short' as const },\n\t\t\tmedium: { dateStyle: 'medium' as const },\n\t\t\tlong: { dateStyle: 'long' as const },\n\t\t\tfull: { dateStyle: 'full' as const }\n\t\t};\n\t\treturn optionsMap[format];\n\t});\n\n\t// Calculate relative time for recent dates\n\tconst relativeTime = $derived.by(() => {\n\t\tif (!value || !showRelative) return null;\n\n\t\ttry {\n\t\t\tconst date = new Date(value);\n\t\t\tif (isNaN(date.getTime())) return null;\n\n\t\t\tconst now = new Date();\n\t\t\tconst diffTime = now.getTime() - date.getTime();\n\t\t\tconst diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n\n\t\t\t// Return relative time for dates within a week\n\t\t\tif (diffDays === 0) return 'Today';\n\t\t\tif (diffDays === 1) return 'Yesterday';\n\t\t\tif (diffDays === -1) return 'Tomorrow';\n\t\t\tif (diffDays > 1 && diffDays <= 7) return `${diffDays} days ago`;\n\t\t\tif (diffDays < -1 && diffDays >= -7) return `In ${Math.abs(diffDays)} days`;\n\n\t\t\treturn null; // Use formatted date for older dates\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t});\n\n\t// Format date using Intl.DateTimeFormat\n\tconst formattedDate = $derived.by(() => {\n\t\tif (!value) return 'â€“';\n\n\t\ttry {\n\t\t\tconst date = new Date(value);\n\t\t\tif (isNaN(date.getTime())) return 'Invalid Date';\n\n\t\t\treturn new Intl.DateTimeFormat(userLocale, dateOptions).format(date);\n\t\t} catch (e) {\n\t\t\tlogger.warn('Date formatting error:', e);\n\t\t\treturn 'Invalid Date';\n\t\t}\n\t});\n\n\t// Get ISO string for tooltip\n\tconst isoString = $derived.by(() => {\n\t\tif (!value) return undefined;\n\t\ttry {\n\t\t\tconst date = new Date(value);\n\t\t\treturn isNaN(date.getTime()) ? undefined : date.toISOString();\n\t\t} catch {\n\t\t\treturn undefined;\n\t\t}\n\t});\n\n\t// Final display text\n\tconst displayText = $derived(relativeTime || formattedDate);\n</script>\n\n<time class=\"inline-flex items-center font-medium text-gray-900 dark:text-gray-100\" title={isoString} datetime={isoString}>\n\t{#if relativeTime}\n\t\t<span class=\"mr-1 text-primary-600 dark:text-primary-400\">\n\t\t\t{displayText}\n\t\t</span>\n\t\t<span class=\"text-xs text-gray-500 dark:text-gray-400\">\n\t\t\t({formattedDate})\n\t\t</span>\n\t{:else}\n\t\t{displayText}\n\t{/if}\n</time>\n"],"names":["format","showRelative","userLocale","$.derived","dateOptions","relativeTime","$$props","date","diffTime","diffDays","formattedDate","$.get","e","logger","isoString","displayText","time","root","span","$.first_child","fragment","span_1","$$render","consequent","alternate","$.set_attribute"],"mappings":"8hBA0BA,SAUgB,MAAAA,iBAAS,QAAQ,EAAEC,uBAAe,EAAI,EAG/CC,EAAUC,EAAA,IAAA,OAAmB,SAAa,KAAc,SAAS,gBAAgB,MAAQ,OAAiB,EAG1GC,EAAWD,EAAA,KACA,CACf,MAAK,CAAI,UAAW,OAAO,EAC3B,OAAM,CAAI,UAAW,QAAQ,EAC7B,KAAI,CAAI,UAAW,MAAM,EACzB,KAAI,CAAI,UAAW,MAAM,IAERH,GAAM,CACxB,EAGKK,EAAYF,EAAA,IAAqB,CACvB,GAAA,CAAAG,EAAA,OAAA,CAAAL,EAAY,SAAS,KAEhC,GAAA,CACG,MAAAM,MAAW,KAAID,EAAA,KAAA,EACjB,GAAA,MAAMC,EAAK,QAAO,UAAY,KAG5B,MAAAC,MADU,KAAI,EACC,QAAO,EAAKD,EAAK,QAAO,EACvCE,EAAW,KAAK,MAAMD,GAAY,IAAO,GAAK,GAAK,GAAE,SAGvDC,IAAa,EAAU,QACvBA,IAAa,EAAU,YACvBA,IAAQ,GAAgB,WACxBA,EAAW,GAAKA,GAAY,KAAaA,CAAQ,YACjDA,EAAQ,IAASA,GAAQ,GAAM,MAAe,KAAK,IAAIA,CAAQ,CAAA,QAE5D,IACR,MAAQ,QACA,IACR,CACD,CAAC,EAGKC,EAAaP,EAAA,IAAqB,mBACpB,IAEf,GAAA,CACG,MAAAI,MAAW,KAAID,EAAA,KAAA,EACjB,OAAA,MAAMC,EAAK,QAAO,GAAY,mBAEvB,KAAK,eAAcI,EAACT,CAAU,IAAEE,CAAW,CAAA,EAAE,OAAOG,CAAI,CACpE,OAASK,EAAG,CACX,OAAAC,EAAO,KAAK,yBAA0BD,CAAC,EAChC,cACR,CACD,CAAC,EAGKE,EAASX,EAAA,IAAqB,YAE/B,GAAA,CACG,MAAAI,MAAW,KAAID,EAAA,KAAA,SACd,MAAMC,EAAK,QAAO,GAAM,OAAYA,EAAK,YAAW,CAC5D,MAAQ,OAER,CACD,CAAC,EAGKQ,EAAWZ,EAAA,IAAAQ,EAAYN,CAAY,GAAAM,EAAID,CAAa,CAAA,MAG1DM,EAAIC,EAAA,MAAJD,CAAI,uBAEFE,EAAIC,EAAAC,CAAA,MAAJF,EAAI,EAAA,IAAJA,CAAI,EAGJ,IAAAG,IAHAH,EAAI,CAAA,MAGJG,CAAI,IAAJA,CAAI,eAFHN,CAAW,CAAA,YAGVL,CAAa,GAAA,EAAA,GAAA,wCAGfK,CAAW,CAAA,CAAA,oBARRV,CAAY,EAAAiB,EAAAC,CAAA,EAAAD,EAAAE,EAAA,EAAA,MADjBR,CAAI,SAAJS,EAAAT,YAA0FF,CAAS,CAAA,EAAnGW,EAAAT,eAA+GF,CAAS,CAAA,QAAxHE,CAAI,KAFG"}