{"version":3,"file":"D8d05dZN.js","sources":["../../../../../../src/widgets/custom/Seo/seoAnalyzer.ts","../../../../../../src/widgets/custom/Seo/Input.svelte"],"sourcesContent":["/**\n * @file src/widgets/custom/Seo/seoAnalyzer.ts\n * @description SEO analysis engine\n */\n\nimport type {\n\tContentStructure,\n\tKeywordAnalysis,\n\tReadabilityAnalysis,\n\tSeoAnalysisConfig,\n\tSeoAnalysisResult,\n\tSeoScore,\n\tSeoSuggestion,\n\tTechnicalSeo\n} from './seoTypes';\n\nexport class SeoAnalyzer {\n\tprivate config: SeoAnalysisConfig;\n\tprivate stopWords: Set<string>;\n\tprivate transitionWords: Set<string>;\n\n\t/**\n\t * Robustly remove all <script> tags and their content from input string.\n\t * Applies replacements repeatedly until no more script tags can be found,\n\t * preventing bypass via malformed or nested tags.\n\t */\n\tprivate removeScriptTags(input: string): string {\n\t\tlet previous: string;\n\t\tdo {\n\t\t\tprevious = input;\n\t\t\t// Remove <script>...</script> blocks (with any whitespace/attributes)\n\t\t\tinput = input.replace(/<script[\\s\\S]*?>[\\s\\S]*?<\\/script\\s*>/gi, '');\n\t\t\t// Remove standalone/orphaned <script> opening tags\n\t\t\tinput = input.replace(/<script[^>]*>/gi, '');\n\t\t} while (input !== previous);\n\t\treturn input;\n\t}\n\n\tconstructor(config: SeoAnalysisConfig) {\n\t\tthis.config = config;\n\t\tthis.stopWords = new Set([\n\t\t\t'a',\n\t\t\t'an',\n\t\t\t'and',\n\t\t\t'are',\n\t\t\t'as',\n\t\t\t'at',\n\t\t\t'be',\n\t\t\t'by',\n\t\t\t'for',\n\t\t\t'from',\n\t\t\t'has',\n\t\t\t'he',\n\t\t\t'in',\n\t\t\t'is',\n\t\t\t'it',\n\t\t\t'its',\n\t\t\t'of',\n\t\t\t'on',\n\t\t\t'that',\n\t\t\t'the',\n\t\t\t'to',\n\t\t\t'was',\n\t\t\t'will',\n\t\t\t'with',\n\t\t\t'would',\n\t\t\t'could',\n\t\t\t'should',\n\t\t\t'may',\n\t\t\t'might',\n\t\t\t'can',\n\t\t\t'shall',\n\t\t\t'must',\n\t\t\t'ought',\n\t\t\t'need',\n\t\t\t'dare'\n\t\t]);\n\t\tthis.transitionWords = new Set([\n\t\t\t'however',\n\t\t\t'therefore',\n\t\t\t'furthermore',\n\t\t\t'moreover',\n\t\t\t'additionally',\n\t\t\t'consequently',\n\t\t\t'meanwhile',\n\t\t\t'nevertheless',\n\t\t\t'nonetheless',\n\t\t\t'alternatively',\n\t\t\t'similarly',\n\t\t\t'likewise',\n\t\t\t'conversely',\n\t\t\t'in contrast',\n\t\t\t'on the other hand',\n\t\t\t'in addition',\n\t\t\t'as a result',\n\t\t\t'for example',\n\t\t\t'for instance',\n\t\t\t'in particular',\n\t\t\t'specifically',\n\t\t\t'namely',\n\t\t\t'that is',\n\t\t\t'in other words',\n\t\t\t'to clarify',\n\t\t\t'to summarize',\n\t\t\t'in conclusion',\n\t\t\t'finally',\n\t\t\t'ultimately',\n\t\t\t'overall'\n\t\t]);\n\t}\n\n\tasync analyze(title: string, description: string, content: string, url?: string): Promise<SeoAnalysisResult> {\n\t\tconst startTime = performance.now();\n\n\t\tconst [keywords, readability, contentStructure, technical] = await Promise.all([\n\t\t\tthis.analyzeKeywords(title, description, content),\n\t\t\tthis.analyzeReadability(content),\n\t\t\tthis.analyzeContentStructure(content),\n\t\t\tthis.analyzeTechnical(title, description, url)\n\t\t]);\n\n\t\tconst score = this.calculateOverallScore(keywords, readability, contentStructure, technical);\n\t\tconst suggestions = this.generateSuggestions(keywords, readability, contentStructure, technical);\n\n\t\tconst analysisTime = performance.now() - startTime;\n\n\t\treturn {\n\t\t\tscore,\n\t\t\tkeywords,\n\t\t\treadability,\n\t\t\tcontentStructure,\n\t\t\ttechnical,\n\t\t\tsocial: {\n\t\t\t\tfacebook: {\n\t\t\t\t\ttitle: title.substring(0, 60),\n\t\t\t\t\tdescription: description.substring(0, 155),\n\t\t\t\t\timage: '',\n\t\t\t\t\ttype: 'article'\n\t\t\t\t},\n\t\t\t\ttwitter: {\n\t\t\t\t\ttitle: title.substring(0, 70),\n\t\t\t\t\tdescription: description.substring(0, 200),\n\t\t\t\t\timage: '',\n\t\t\t\t\tcard: 'summary_large_image'\n\t\t\t\t},\n\t\t\t\tlinkedin: {\n\t\t\t\t\ttitle: title.substring(0, 60),\n\t\t\t\t\tdescription: description.substring(0, 155),\n\t\t\t\t\timage: ''\n\t\t\t\t}\n\t\t\t},\n\t\t\tsuggestions,\n\t\t\tserpPreview: {\n\t\t\t\ttitle: title.substring(0, 60),\n\t\t\t\tdescription: description.substring(0, 160),\n\t\t\t\turl: url || '',\n\t\t\t\tbreadcrumbs: this.extractBreadcrumbs(url)\n\t\t\t},\n\t\t\tlastAnalyzed: new Date(),\n\t\t\tanalysisTime\n\t\t};\n\t}\n\n\tprivate async analyzeKeywords(title: string, description: string, content: string): Promise<KeywordAnalysis[]> {\n\t\tif (!this.config.focusKeyword) return [];\n\n\t\tconst keyword = this.config.focusKeyword.toLowerCase();\n\t\tconst words = this.tokenize(content.toLowerCase());\n\t\tconst totalWords = words.length;\n\n\t\tconst keywordOccurrences = words.filter((word) => word === keyword).length;\n\t\tconst density = (keywordOccurrences / totalWords) * 100;\n\n\t\t// Find first occurrence position\n\t\tconst firstOccurrence = words.indexOf(keyword);\n\t\tconst firstOccurrencePercentage = firstOccurrence !== -1 ? (firstOccurrence / totalWords) * 100 : -1;\n\n\t\t// Check prominence\n\t\tconst inTitle = title.toLowerCase().includes(keyword);\n\t\tconst inDescription = description.toLowerCase().includes(keyword);\n\n\t\t// Analyze distribution\n\t\tconst third = Math.floor(totalWords / 3);\n\t\tconst beginningOccurrences = words.slice(0, third).filter((word) => word === keyword).length;\n\t\tconst middleOccurrences = words.slice(third, third * 2).filter((word) => word === keyword).length;\n\t\tconst endOccurrences = words.slice(third * 2).filter((word) => word === keyword).length;\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tfocusKeyword: keyword,\n\t\t\t\tdensity,\n\t\t\t\tprominence: this.calculateKeywordProminence(inTitle, inDescription, firstOccurrencePercentage),\n\t\t\t\tfirstOccurrence: firstOccurrencePercentage,\n\t\t\t\tinTitle,\n\t\t\t\tinDescription,\n\t\t\t\tinUrl: false, // Would need URL analysis\n\t\t\t\tinHeadings: this.findKeywordInHeadings(content, keyword),\n\t\t\t\tvariations: this.findKeywordVariations(content, keyword),\n\t\t\t\tdistribution: {\n\t\t\t\t\tbeginning: (beginningOccurrences / keywordOccurrences) * 100 || 0,\n\t\t\t\t\tmiddle: (middleOccurrences / keywordOccurrences) * 100 || 0,\n\t\t\t\t\tend: (endOccurrences / keywordOccurrences) * 100 || 0\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\tprivate analyzeReadability(content: string): ReadabilityAnalysis {\n\t\tconst sentences = this.splitIntoSentences(content);\n\t\tconst words = this.tokenize(content);\n\t\tconst syllables = this.countSyllables(content);\n\n\t\tconst averageWordsPerSentence = words.length / sentences.length;\n\t\tconst averageSyllablesPerWord = syllables / words.length;\n\n\t\t// Flesch-Kincaid Reading Ease Score\n\t\tconst fleschKincaidScore = 206.835 - 1.015 * averageWordsPerSentence - 84.6 * averageSyllablesPerWord;\n\n\t\t// Passive voice detection\n\t\tconst passiveVoiceSentences = this.detectPassiveVoice(sentences);\n\t\tconst passiveVoicePercentage = (passiveVoiceSentences.length / sentences.length) * 100;\n\n\t\t// Complex sentences (more than 20 words)\n\t\tconst complexSentences = sentences.filter((sentence) => this.tokenize(sentence).length > 20).length;\n\n\t\t// Transition words\n\t\tconst transitionWordCount = this.countTransitionWords(content);\n\n\t\t// Reading time (average 200 words per minute)\n\t\tconst readingTime = Math.ceil(words.length / 200);\n\n\t\treturn {\n\t\t\tfleschKincaidScore,\n\t\t\treadingLevel: this.getReadingLevel(fleschKincaidScore),\n\t\t\taverageSentenceLength: averageWordsPerSentence,\n\t\t\taverageWordsPerSentence,\n\t\t\tpassiveVoicePercentage,\n\t\t\tsentencesWithPassiveVoice: passiveVoiceSentences.length,\n\t\t\tcomplexSentences,\n\t\t\ttransitionWords: transitionWordCount,\n\t\t\treadingTime,\n\t\t\twordCount: words.length,\n\t\t\tsentenceCount: sentences.length,\n\t\t\tparagraphCount: content.split('\\n\\n').filter((p) => p.trim().length > 0).length\n\t\t};\n\t}\n\n\tprivate analyzeContentStructure(content: string): ContentStructure {\n\t\tconst headingRegex = /<h([1-6])[^>]*>(.*?)<\\/h[1-6]>/gi;\n\t\tconst headings = {\n\t\t\th1: [] as string[],\n\t\t\th2: [] as string[],\n\t\t\th3: [] as string[],\n\t\t\th4: [] as string[],\n\t\t\th5: [] as string[],\n\t\t\th6: [] as string[]\n\t\t};\n\n\t\tlet match;\n\t\twhile ((match = headingRegex.exec(content)) !== null) {\n\t\t\tconst level = parseInt(match[1]) as 1 | 2 | 3 | 4 | 5 | 6;\n\t\t\tconst text = this.removeScriptTags(match[2])\n\t\t\t\t.replace(/<[^>]*>/g, '') // Remove other HTML tags\n\t\t\t\t.trim();\n\t\t\theadings[`h${level}` as keyof typeof headings].push(text);\n\t\t}\n\n\t\tconst hasH1 = headings.h1.length > 0;\n\t\tconst multipleH1 = headings.h1.length > 1;\n\n\t\t// Check heading hierarchy\n\t\tconst headingHierarchy = this.checkHeadingHierarchy(headings);\n\n\t\t// Count lists, images, and links\n\t\tconst listCount = (content.match(/<(?:ul|ol)>/gi) || []).length;\n\t\tconst imageCount = (content.match(/<img[^>]*>/gi) || []).length;\n\t\tconst imagesWithoutAlt = (content.match(/<img(?![^>]*alt=)[^>]*>/gi) || []).length;\n\n\t\tconst internalLinks = (content.match(/<a[^>]*href=[\"'][^\"']*(?:localhost|your-domain)[^\"']*[\"'][^>]*>/gi) || []).length;\n\t\tconst externalLinks = (content.match(/<a[^>]*href=[\"'](?:https?:\\/\\/)[^\"']*[\"'][^>]*>/gi) || []).length - internalLinks;\n\t\tconst nofollowLinks = (content.match(/<a[^>]*rel=[\"'][^\"']*nofollow[^\"']*[\"'][^>]*>/gi) || []).length;\n\n\t\treturn {\n\t\t\theadings,\n\t\t\thasH1,\n\t\t\tmultipleH1,\n\t\t\theadingHierarchy,\n\t\t\tlistCount,\n\t\t\timageCount,\n\t\t\timagesWithoutAlt,\n\t\t\tlinkCount: {\n\t\t\t\tinternal: internalLinks,\n\t\t\t\texternal: externalLinks,\n\t\t\t\tnofollow: nofollowLinks\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate analyzeTechnical(title: string, description: string, url?: string): TechnicalSeo {\n\t\treturn {\n\t\t\ttitleLength: title.length,\n\t\t\tdescriptionLength: description.length,\n\t\t\turlStructure: url\n\t\t\t\t? {\n\t\t\t\t\t\tlength: url.length,\n\t\t\t\t\t\thasKeyword: this.config.focusKeyword ? url.toLowerCase().includes(this.config.focusKeyword.toLowerCase()) : false,\n\t\t\t\t\t\tisReadable: this.isUrlReadable(url),\n\t\t\t\t\t\thasStopWords: this.urlHasStopWords(url)\n\t\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t\tlength: 0,\n\t\t\t\t\t\thasKeyword: false,\n\t\t\t\t\t\tisReadable: true,\n\t\t\t\t\t\thasStopWords: false\n\t\t\t\t\t},\n\t\t\tmetaRobots: 'index, follow',\n\t\t\tschemaMarkup: [],\n\t\t\tsitemap: false,\n\t\t\trobotsTxt: false\n\t\t};\n\t}\n\n\tprivate calculateOverallScore(\n\t\tkeywords: KeywordAnalysis[],\n\t\treadability: ReadabilityAnalysis,\n\t\tcontentStructure: ContentStructure,\n\t\ttechnical: TechnicalSeo\n\t): SeoScore {\n\t\t// Return 0 if insufficient data\n\t\tif (readability.wordCount === 0 && technical.titleLength === 0 && technical.descriptionLength === 0) {\n\t\t\treturn {\n\t\t\t\toverall: 0,\n\t\t\t\tcontent: 0,\n\t\t\t\ttechnical: 0,\n\t\t\t\treadability: 0,\n\t\t\t\tkeywords: 0,\n\t\t\t\tsocial: 0\n\t\t\t};\n\t\t}\n\n\t\t// Content score (0-100)\n\t\tlet contentScore = 50;\n\t\tif (technical.titleLength > 0) contentScore += 10;\n\t\tif (!contentStructure.multipleH1) contentScore += 5;\n\t\tif (contentStructure.headingHierarchy) contentScore += 10;\n\t\tif (readability.wordCount >= 300) contentScore += 15;\n\t\tif (readability.wordCount >= 1000) contentScore += 10;\n\n\t\t// Technical score (0-100)\n\t\tlet technicalScore = 50;\n\t\tif (technical.titleLength >= 30 && technical.titleLength <= 60) technicalScore += 20;\n\t\tif (technical.descriptionLength >= 120 && technical.descriptionLength <= 160) technicalScore += 20;\n\t\tif (technical.urlStructure.isReadable) technicalScore += 10;\n\n\t\t// Readability score (0-100)\n\t\tconst readabilityScore = Math.max(0, Math.min(100, (readability.fleschKincaidScore / 100) * 100));\n\n\t\t// Keywords score (0-100)\n\t\tlet keywordsScore = 50;\n\t\tif (keywords.length > 0) {\n\t\t\tconst keyword = keywords[0];\n\t\t\tif (keyword.inTitle) keywordsScore += 15;\n\t\t\tif (keyword.inDescription) keywordsScore += 15;\n\t\t\tif (keyword.density >= 0.5 && keyword.density <= 2.5) keywordsScore += 20;\n\t\t}\n\n\t\t// Social score (basic implementation)\n\t\tconst socialScore = 75; // Would be calculated based on social meta tags\n\n\t\tconst overall = Math.round((contentScore + technicalScore + readabilityScore + keywordsScore + socialScore) / 5);\n\n\t\treturn {\n\t\t\toverall,\n\t\t\tcontent: contentScore,\n\t\t\ttechnical: technicalScore,\n\t\t\treadability: readabilityScore,\n\t\t\tkeywords: keywordsScore,\n\t\t\tsocial: socialScore\n\t\t};\n\t}\n\n\tprivate generateSuggestions(\n\t\tkeywords: KeywordAnalysis[],\n\t\treadability: ReadabilityAnalysis,\n\t\tcontentStructure: ContentStructure,\n\t\ttechnical: TechnicalSeo\n\t): SeoSuggestion[] {\n\t\tconst suggestions: SeoSuggestion[] = [];\n\n\t\t// Title suggestions\n\t\tif (technical.titleLength < 30) {\n\t\t\tsuggestions.push({\n\t\t\t\tid: 'title-too-short',\n\t\t\t\ttype: 'warning',\n\t\t\t\tcategory: 'technical',\n\t\t\t\ttitle: 'Title is too short',\n\t\t\t\tdescription: 'Your title is shorter than 30 characters. Consider adding more descriptive text.',\n\t\t\t\timpact: 'high',\n\t\t\t\teffort: 'easy',\n\t\t\t\tpriority: 90,\n\t\t\t\tactionable: true,\n\t\t\t\tfix: 'Add more descriptive keywords to your title to reach 30-60 characters.'\n\t\t\t});\n\t\t}\n\n\t\tif (technical.titleLength > 60) {\n\t\t\tsuggestions.push({\n\t\t\t\tid: 'title-too-long',\n\t\t\t\ttype: 'error',\n\t\t\t\tcategory: 'technical',\n\t\t\t\ttitle: 'Title is too long',\n\t\t\t\tdescription: 'Your title exceeds 60 characters and may be truncated in search results.',\n\t\t\t\timpact: 'high',\n\t\t\t\teffort: 'easy',\n\t\t\t\tpriority: 95,\n\t\t\t\tactionable: true,\n\t\t\t\tfix: 'Shorten your title to 30-60 characters for optimal display.'\n\t\t\t});\n\t\t}\n\n\t\t// Description suggestions\n\t\tif (technical.descriptionLength < 120) {\n\t\t\tsuggestions.push({\n\t\t\t\tid: 'description-too-short',\n\t\t\t\ttype: 'warning',\n\t\t\t\tcategory: 'technical',\n\t\t\t\ttitle: 'Meta description is too short',\n\t\t\t\tdescription: 'Your meta description is shorter than 120 characters.',\n\t\t\t\timpact: 'medium',\n\t\t\t\teffort: 'easy',\n\t\t\t\tpriority: 70,\n\t\t\t\tactionable: true,\n\t\t\t\tfix: 'Expand your meta description to 120-160 characters.'\n\t\t\t});\n\t\t}\n\n\t\t// Content structure suggestions\n\n\t\tif (contentStructure.multipleH1) {\n\t\t\tsuggestions.push({\n\t\t\t\tid: 'multiple-h1',\n\t\t\t\ttype: 'warning',\n\t\t\t\tcategory: 'content',\n\t\t\t\ttitle: 'Multiple H1 headings',\n\t\t\t\tdescription: 'Your content has multiple H1 headings. Use only one H1 per page.',\n\t\t\t\timpact: 'medium',\n\t\t\t\teffort: 'easy',\n\t\t\t\tpriority: 60,\n\t\t\t\tactionable: true,\n\t\t\t\tfix: 'Use only one H1 heading and convert others to H2 or H3.'\n\t\t\t});\n\t\t}\n\n\t\t// Readability suggestions\n\t\tif (readability.passiveVoicePercentage > 10) {\n\t\t\tsuggestions.push({\n\t\t\t\tid: 'passive-voice',\n\t\t\t\ttype: 'warning',\n\t\t\t\tcategory: 'readability',\n\t\t\t\ttitle: 'Too much passive voice',\n\t\t\t\tdescription: `${readability.passiveVoicePercentage.toFixed(1)}% of your sentences use passive voice.`,\n\t\t\t\timpact: 'medium',\n\t\t\t\teffort: 'medium',\n\t\t\t\tpriority: 50,\n\t\t\t\tactionable: true,\n\t\t\t\tfix: 'Convert passive voice sentences to active voice for better readability.'\n\t\t\t});\n\t\t}\n\n\t\tif (readability.averageWordsPerSentence > 20) {\n\t\t\tsuggestions.push({\n\t\t\t\tid: 'long-sentences',\n\t\t\t\ttype: 'warning',\n\t\t\t\tcategory: 'readability',\n\t\t\t\ttitle: 'Sentences are too long',\n\t\t\t\tdescription: 'Your average sentence length is high, which may affect readability.',\n\t\t\t\timpact: 'medium',\n\t\t\t\teffort: 'medium',\n\t\t\t\tpriority: 45,\n\t\t\t\tactionable: true,\n\t\t\t\tfix: 'Break long sentences into shorter ones for better readability.'\n\t\t\t});\n\t\t}\n\n\t\t// Keyword suggestions\n\t\tif (keywords.length > 0) {\n\t\t\tconst keyword = keywords[0];\n\t\t\tif (!keyword.inTitle) {\n\t\t\t\tsuggestions.push({\n\t\t\t\t\tid: 'keyword-not-in-title',\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\tcategory: 'keywords',\n\t\t\t\t\ttitle: 'Focus keyword not in title',\n\t\t\t\t\tdescription: 'Your focus keyword does not appear in the title.',\n\t\t\t\t\timpact: 'high',\n\t\t\t\t\teffort: 'easy',\n\t\t\t\t\tpriority: 80,\n\t\t\t\t\tactionable: true,\n\t\t\t\t\tfix: `Include \"${keyword.focusKeyword}\" in your title.`\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (keyword.density < 0.5) {\n\t\t\t\tsuggestions.push({\n\t\t\t\t\tid: 'keyword-density-low',\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tcategory: 'keywords',\n\t\t\t\t\ttitle: 'Low keyword density',\n\t\t\t\t\tdescription: 'Your keyword density is quite low.',\n\t\t\t\t\timpact: 'low',\n\t\t\t\t\teffort: 'easy',\n\t\t\t\t\tpriority: 30,\n\t\t\t\t\tactionable: true,\n\t\t\t\t\tfix: `Use \"${keyword.focusKeyword}\" more frequently in your content.`\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (keyword.density > 2.5) {\n\t\t\t\tsuggestions.push({\n\t\t\t\t\tid: 'keyword-density-high',\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\tcategory: 'keywords',\n\t\t\t\t\ttitle: 'High keyword density',\n\t\t\t\t\tdescription: 'Your keyword density might be too high and could be seen as keyword stuffing.',\n\t\t\t\t\timpact: 'medium',\n\t\t\t\t\teffort: 'easy',\n\t\t\t\t\tpriority: 65,\n\t\t\t\t\tactionable: true,\n\t\t\t\t\tfix: `Reduce the frequency of \"${keyword.focusKeyword}\" in your content.`\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn suggestions.sort((a, b) => b.priority - a.priority);\n\t}\n\n\t// Helper methods\n\tprivate tokenize(text: string): string[] {\n\t\treturn text.toLowerCase().match(/\\b\\w+\\b/g) || [];\n\t}\n\n\tprivate splitIntoSentences(text: string): string[] {\n\t\treturn text.split(/[.!?]+/).filter((s) => s.trim().length > 0);\n\t}\n\n\tprivate countSyllables(text: string): number {\n\t\tconst words = this.tokenize(text);\n\t\treturn words.reduce((total, word) => {\n\t\t\treturn total + this.countSyllablesInWord(word);\n\t\t}, 0);\n\t}\n\n\tprivate countSyllablesInWord(word: string): number {\n\t\tword = word.toLowerCase();\n\t\tif (word.length <= 3) return 1;\n\n\t\tconst vowels = 'aeiouy';\n\t\tlet syllableCount = 0;\n\t\tlet previousWasVowel = false;\n\n\t\tfor (let i = 0; i < word.length; i++) {\n\t\t\tconst isVowel = vowels.includes(word[i]);\n\t\t\tif (isVowel && !previousWasVowel) {\n\t\t\t\tsyllableCount++;\n\t\t\t}\n\t\t\tpreviousWasVowel = isVowel;\n\t\t}\n\n\t\t// Handle silent 'e'\n\t\tif (word.endsWith('e')) {\n\t\t\tsyllableCount--;\n\t\t}\n\n\t\treturn Math.max(1, syllableCount);\n\t}\n\n\tprivate detectPassiveVoice(sentences: string[]): string[] {\n\t\tconst passiveIndicators = [\n\t\t\t'was',\n\t\t\t'were',\n\t\t\t'been',\n\t\t\t'being',\n\t\t\t'is',\n\t\t\t'are',\n\t\t\t'am',\n\t\t\t'was being',\n\t\t\t'were being',\n\t\t\t'has been',\n\t\t\t'have been',\n\t\t\t'had been',\n\t\t\t'will be',\n\t\t\t'will have been'\n\t\t];\n\n\t\treturn sentences.filter((sentence) => {\n\t\t\tconst words = this.tokenize(sentence);\n\t\t\treturn (\n\t\t\t\tpassiveIndicators.some((indicator) => sentence.toLowerCase().includes(indicator)) &&\n\t\t\t\twords.some((word) => word.endsWith('ed') || word.endsWith('en'))\n\t\t\t);\n\t\t});\n\t}\n\n\tprivate countTransitionWords(text: string): number {\n\t\tconst words = this.tokenize(text);\n\t\treturn words.filter((word) => this.transitionWords.has(word)).length;\n\t}\n\n\tprivate getReadingLevel(score: number): ReadabilityAnalysis['readingLevel'] {\n\t\tif (score >= 90) return 'elementary';\n\t\tif (score >= 80) return 'middle-school';\n\t\tif (score >= 70) return 'high-school';\n\t\tif (score >= 60) return 'college';\n\t\treturn 'graduate';\n\t}\n\n\tprivate calculateKeywordProminence(inTitle: boolean, inDescription: boolean, firstOccurrence: number): number {\n\t\tlet prominence = 0;\n\t\tif (inTitle) prominence += 40;\n\t\tif (inDescription) prominence += 30;\n\t\tif (firstOccurrence >= 0 && firstOccurrence < 10) prominence += 30;\n\t\treturn prominence;\n\t}\n\n\tprivate findKeywordInHeadings(content: string, keyword: string): string[] {\n\t\tconst headingRegex = /<h[1-6][^>]*>(.*?)<\\/h[1-6]>/gi;\n\t\tconst headingsWithKeyword: string[] = [];\n\n\t\tlet match;\n\t\twhile ((match = headingRegex.exec(content)) !== null) {\n\t\t\tconst headingText = match[1].replace(/<[^>]*>/g, '').toLowerCase();\n\t\t\tif (headingText.includes(keyword)) {\n\t\t\t\theadingsWithKeyword.push(match[0]);\n\t\t\t}\n\t\t}\n\n\t\treturn headingsWithKeyword;\n\t}\n\n\tprivate findKeywordVariations(content: string, keyword: string): string[] {\n\t\t// Simple implementation - would be more sophisticated in production\n\t\tconst words = this.tokenize(content);\n\t\tconst variations = new Set<string>();\n\n\t\twords.forEach((word) => {\n\t\t\tif (word.includes(keyword) || keyword.includes(word)) {\n\t\t\t\tif (word !== keyword && word.length > 3) {\n\t\t\t\t\tvariations.add(word);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn Array.from(variations).slice(0, 5);\n\t}\n\n\tprivate checkHeadingHierarchy(headings: ContentStructure['headings']): boolean {\n\t\t// Simple check: ensure H1 comes before H2, H2 before H3, etc.\n\t\tlet currentLevel = 0;\n\t\tconst levels = Object.keys(headings) as Array<keyof typeof headings>;\n\n\t\tfor (const level of levels) {\n\t\t\tconst levelNumber = parseInt(level.charAt(1));\n\t\t\tif (headings[level].length > 0) {\n\t\t\t\tif (levelNumber > currentLevel + 1) {\n\t\t\t\t\treturn false; // Skipped a level\n\t\t\t\t}\n\t\t\t\tcurrentLevel = levelNumber;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate isUrlReadable(url: string): boolean {\n\t\t// Check if URL contains readable words vs random characters\n\t\tconst path = url.split('/').pop() || '';\n\t\tconst wordCount = (path.match(/[a-zA-Z]+/g) || []).length;\n\t\tconst totalLength = path.length;\n\n\t\treturn wordCount > 0 && (wordCount * 4) / totalLength > 0.5;\n\t}\n\n\tprivate urlHasStopWords(url: string): boolean {\n\t\tconst path = url.toLowerCase();\n\t\treturn Array.from(this.stopWords).some((stopWord) => path.includes(stopWord));\n\t}\n\n\tprivate extractBreadcrumbs(url?: string): string[] | undefined {\n\t\tif (!url) return undefined;\n\n\t\tconst path = url.replace(/^https?:\\/\\/[^/]+/, '');\n\t\tconst segments = path.split('/').filter((segment) => segment.length > 0);\n\n\t\treturn segments.map((segment) => segment.replace(/-/g, ' ').replace(/\\b\\w/g, (l) => l.toUpperCase()));\n\t}\n}\n\nexport async function analyzeSeo(data: any, content: string): Promise<SeoAnalysisResult> {\n\tconst config: SeoAnalysisConfig = {\n\t\tfocusKeyword: data.focusKeyword || '',\n\t\tlocale: 'en',\n\t\tcontentLanguage: 'en',\n\t\ttargetAudience: 'general',\n\t\tcontentType: 'article',\n\t\tenableRealTimeAnalysis: false,\n\t\tanalysisDepth: 'basic',\n\t\tenabledFeatures: {\n\t\t\tbasic: true,\n\t\t\tadvanced: true,\n\t\t\tsocial: true,\n\t\t\tschema: true,\n\t\t\tai: false,\n\t\t\treadability: true,\n\t\t\tkeywords: true,\n\t\t\tpreview: true\n\t\t}\n\t};\n\n\tconst analyzer = new SeoAnalyzer(config);\n\treturn await analyzer.analyze(\n\t\tdata.title || '',\n\t\tdata.description || '',\n\t\tcontent,\n\t\tdata.canonicalUrl || '' // Use canonical or slug\n\t);\n}\n","<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { slide } from 'svelte/transition';\n\n\t// Stores & Props\n\timport { app } from '@shared/stores/store.svelte';\n\timport { publicEnv } from '@shared/stores/globalSettings.svelte';\n\n\t// Parsers & Services\n\timport { tokenTarget } from '@shared/services/token/tokenTarget';\n\timport type { SeoWidgetData } from '.';\n\n\t// Components\n\timport SeoAnalysisPanel from './components/SeoAnalysisPanel.svelte';\n\timport SeoPreview from './components/SeoPreview.svelte';\n\timport SocialPreview from './components/SocialPreview.svelte';\n\timport SeoField from './components/SeoField.svelte'; // Reusable field component\n\n\t// Logic\n\timport { analyzeSeo } from './seoAnalyzer';\n\n\tinterface Props {\n\t\tfield: any;\n\t\tvalue?: Record<string, SeoWidgetData>;\n\t\tvalidationError?: string | null;\n\t}\n\n\tlet { field, value = $bindable(), validationError: _validationError }: Props = $props();\n\n\t// --- State ---\n\tlet activeTab = $state(0);\n\tlet analysisResults: any = $state(null);\n\tlet showAnalysis = $state(false); // Collapsible analysis panel\n\tlet isAnalyzing = $state(false);\n\n\t// Multi-language handling\n\tlet availableLanguages = $state<string[]>([]);\n\t// Use contentLanguage store value\n\tconst currentLang = $derived(app.contentLanguage);\n\t// Fallback to 'en' if no language selected\n\tlet lang = $derived(currentLang || 'en');\n\n\t// --- Lifecycle ---\n\tonMount(() => {\n\t\t// Initialize value structure if missing\n\t\tif (!value) value = {};\n\t\tif (!value[lang]) {\n\t\t\tvalue[lang] = {\n\t\t\t\ttitle: '',\n\t\t\t\tdescription: '',\n\t\t\t\tfocusKeyword: '',\n\t\t\t\trobotsMeta: 'index, follow',\n\t\t\t\tcanonicalUrl: '',\n\t\t\t\togTitle: '',\n\t\t\t\togDescription: '',\n\t\t\t\togImage: '',\n\t\t\t\ttwitterCard: 'summary_large_image',\n\t\t\t\ttwitterTitle: '',\n\t\t\t\ttwitterDescription: '',\n\t\t\t\ttwitterImage: '',\n\t\t\t\tschemaMarkup: ''\n\t\t\t} as SeoWidgetData;\n\t\t}\n\n\t\t// Get available languages from config/store if possible\n\t\tif (publicEnv.AVAILABLE_CONTENT_LANGUAGES) {\n\t\t\tavailableLanguages = [publicEnv.DEFAULT_CONTENT_LANGUAGE || 'en', ...publicEnv.AVAILABLE_CONTENT_LANGUAGES];\n\t\t} else {\n\t\t\tavailableLanguages = ['en'];\n\t\t}\n\t});\n\n\t// --- Analysis Trigger Optimization ---\n\t// Only run analysis when relevant fields change to improve performance\n\t$effect(() => {\n\t\tconst langData = value?.[lang];\n\t\tif (!langData) return;\n\n\t\t// Create dependency on relevant fields only\n\t\tlangData.title;\n\t\tlangData.description;\n\t\tlangData.focusKeyword;\n\t\tlangData.canonicalUrl;\n\t\tlangData.robotsMeta;\n\n\t\t// Debounce slightly to avoid rapid updates\n\t\tconst timeout = setTimeout(() => {\n\t\t\trunAnalysis();\n\t\t}, 300);\n\n\t\treturn () => clearTimeout(timeout);\n\t});\n\n\t// --- Actions ---\n\n\tasync function runAnalysis() {\n\t\tif (!value || !value[lang]) return;\n\t\tisAnalyzing = true;\n\n\t\t// TODO: Connect to actual content store when available\n\t\tconst contentBody = '';\n\n\t\ttry {\n\t\t\tanalysisResults = await analyzeSeo(value[lang], contentBody);\n\t\t} catch (e) {\n\t\t\tconsole.error('SEO Analysis failed', e);\n\t\t} finally {\n\t\t\tisAnalyzing = false;\n\t\t}\n\t}\n\n\tfunction hasFeature(feature: string): boolean {\n\t\treturn (field as any).defaults?.features?.includes(feature) ?? true;\n\t}\n\n\t// --- Helper: Translation Percentage ---\n\tfunction getFieldTranslationPercentage(fieldName: string): number {\n\t\tif (!value || availableLanguages.length === 0) return 0;\n\t\tconst safeValue = value; // Capture for closure safety\n\t\tconst populatedCount = availableLanguages.filter((l) => {\n\t\t\tconst langData = safeValue[l];\n\t\t\tif (!langData) return false;\n\t\t\tconst fieldData = langData[fieldName as keyof SeoWidgetData];\n\t\t\treturn typeof fieldData === 'string' && fieldData.trim() !== '';\n\t\t}).length;\n\t\treturn Math.round((populatedCount / availableLanguages.length) * 100);\n\t}\n\n\t// --- UI Helpers ---\n\t// Update wrapper for SeoField to bind back to the deeply nested value\n\tconst updateField = (fieldName: keyof SeoWidgetData, newVal: string) => {\n\t\tif (!value || !value[lang]) return;\n\t\t// Cast to any to allow updating union types like twitterCard with strict string\n\t\t(value[lang] as any)[fieldName] = newVal;\n\t};\n\n\t// Determine if field is translated based on widget config\n\tconst isTranslated = $derived(field.translated);\n\n\tconst placeholder = '{\"@context\": \"https://schema.org\", \"@type\": \"Article\", ...}';\n</script>\n\n<div class=\"space-y-4\">\n\t<!-- Top Area: Preview & Analysis -->\n\t<div class=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n\t\t<!-- Left: Preview (Main) -->\n\t\t<div class=\"lg:col-span-2 space-y-4\">\n\t\t\t<SeoPreview\n\t\t\t\ttitle={value?.[lang]?.title || ''}\n\t\t\t\tdescription={value?.[lang]?.description || ''}\n\t\t\t\thostUrl={`${publicEnv.HOST_PROD}/${value?.[lang]?.canonicalUrl || ''}`}\n\t\t\t\tSeoPreviewToggle={false}\n\t\t\t/>\n\t\t</div>\n\n\t\t<!-- Right: Analysis Panel -->\n\t\t<div class=\"lg:col-span-1\">\n\t\t\t<SeoAnalysisPanel analysisResult={analysisResults} {isAnalyzing} bind:expanded={showAnalysis} />\n\t\t</div>\n\t</div>\n\n\t<!-- Bottom Area: Tabs & Inputs -->\n\t<div class=\"card p-4 variant-glass-surface\">\n\t\t<!-- Inline Tabs Implementation -->\n\t\t<div class=\"flex border-b border-surface-400/30 mb-6\">\n\t\t\t<button\n\t\t\t\tclass=\"px-4 py-2 border-b-2 transition-colors hover:bg-surface-100 dark:hover:bg-surface-700/50 {activeTab === 0\n\t\t\t\t\t? 'border-primary-500 font-bold text-primary-500'\n\t\t\t\t\t: 'border-transparent text-surface-600 dark:text-surface-50 hover:text-surface-900 dark:hover:text-surface-200'}\"\n\t\t\t\tonclick={() => (activeTab = 0)}\n\t\t\t>\n\t\t\t\tBasic\n\t\t\t</button>\n\t\t\t{#if hasFeature('social')}\n\t\t\t\t<button\n\t\t\t\t\tclass=\"px-4 py-2 border-b-2 transition-colors hover:bg-surface-100 dark:hover:bg-surface-700/50 {activeTab === 1\n\t\t\t\t\t\t? 'border-primary-500 font-bold text-primary-500'\n\t\t\t\t\t\t: 'border-transparent text-surface-600 dark:text-surface-50 hover:text-surface-900 dark:hover:text-surface-200'}\"\n\t\t\t\t\tonclick={() => (activeTab = 1)}\n\t\t\t\t>\n\t\t\t\t\tSocial\n\t\t\t\t</button>\n\t\t\t{/if}\n\t\t\t{#if hasFeature('advanced')}\n\t\t\t\t<button\n\t\t\t\t\tclass=\"px-4 py-2 border-b-2 transition-colors hover:bg-surface-100 dark:hover:bg-surface-700/50 {activeTab === 2\n\t\t\t\t\t\t? 'border-primary-500 font-bold text-primary-500'\n\t\t\t\t\t\t: 'border-transparent text-surface-600 dark:text-surface-50 hover:text-surface-900 dark:hover:text-surface-200'}\"\n\t\t\t\t\tonclick={() => (activeTab = 2)}\n\t\t\t\t>\n\t\t\t\t\tAdvanced\n\t\t\t\t</button>\n\t\t\t{/if}\n\t\t</div>\n\n\t\t<div class=\"mt-4 space-y-4\" transition:slide>\n\t\t\t{#if value && value[lang]}\n\t\t\t\t{#if activeTab === 0}\n\t\t\t\t\t<!-- Basic Tab -->\n\n\t\t\t\t\t<SeoField\n\t\t\t\t\t\tid=\"seo-title\"\n\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\tvalue={value[lang].title}\n\t\t\t\t\t\t{field}\n\t\t\t\t\t\t{lang}\n\t\t\t\t\t\ttranslated={isTranslated}\n\t\t\t\t\t\ttranslationPct={getFieldTranslationPercentage('title')}\n\t\t\t\t\t\tonUpdate={(v: string) => updateField('title', v)}\n\t\t\t\t\t\tmaxLength={60}\n\t\t\t\t\t\toptimalMin={50}\n\t\t\t\t\t\toptimalMax={60}\n\t\t\t\t\t\tplaceholder=\"Page Title\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<SeoField\n\t\t\t\t\t\tid=\"seo-description\"\n\t\t\t\t\t\tlabel=\"Description\"\n\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\tvalue={value[lang].description}\n\t\t\t\t\t\t{field}\n\t\t\t\t\t\t{lang}\n\t\t\t\t\t\ttranslated={isTranslated}\n\t\t\t\t\t\ttranslationPct={getFieldTranslationPercentage('description')}\n\t\t\t\t\t\tonUpdate={(v: string) => updateField('description', v)}\n\t\t\t\t\t\tmaxLength={160}\n\t\t\t\t\t\toptimalMin={150}\n\t\t\t\t\t\toptimalMax={160}\n\t\t\t\t\t\tplaceholder=\"Page Description\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<SeoField\n\t\t\t\t\t\tid=\"seo-focusKeyword\"\n\t\t\t\t\t\tlabel=\"Focus Keyword\"\n\t\t\t\t\t\tvalue={value[lang].focusKeyword}\n\t\t\t\t\t\t{field}\n\t\t\t\t\t\t{lang}\n\t\t\t\t\t\ttranslated={isTranslated}\n\t\t\t\t\t\ttranslationPct={getFieldTranslationPercentage('focusKeyword')}\n\t\t\t\t\t\tonUpdate={(v: string) => updateField('focusKeyword', v)}\n\t\t\t\t\t\tplaceholder=\"Main keyword\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- Example of using slot for extra icon if needed -->\n\t\t\t\t\t</SeoField>\n\t\t\t\t{:else if activeTab === 1}\n\t\t\t\t\t<!-- Social Tab (includes Preview) -->\n\t\t\t\t\t<div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n\t\t\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t\t\t<h3 class=\"h3 font-bold\">Open Graph (Facebook/LinkedIn)</h3>\n\n\t\t\t\t\t\t\t<SeoField\n\t\t\t\t\t\t\t\tid=\"seo-ogTitle\"\n\t\t\t\t\t\t\t\tlabel=\"OG Title\"\n\t\t\t\t\t\t\t\tvalue={value[lang].ogTitle || ''}\n\t\t\t\t\t\t\t\t{field}\n\t\t\t\t\t\t\t\t{lang}\n\t\t\t\t\t\t\t\ttranslated={isTranslated}\n\t\t\t\t\t\t\t\ttranslationPct={getFieldTranslationPercentage('ogTitle')}\n\t\t\t\t\t\t\t\tonUpdate={(v: string) => updateField('ogTitle', v)}\n\t\t\t\t\t\t\t\tplaceholder=\"Open Graph Title (same as Title if empty)\"\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<SeoField\n\t\t\t\t\t\t\t\tid=\"seo-ogDescription\"\n\t\t\t\t\t\t\t\tlabel=\"OG Description\"\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\tvalue={value[lang].ogDescription || ''}\n\t\t\t\t\t\t\t\t{field}\n\t\t\t\t\t\t\t\t{lang}\n\t\t\t\t\t\t\t\ttranslated={isTranslated}\n\t\t\t\t\t\t\t\ttranslationPct={getFieldTranslationPercentage('ogDescription')}\n\t\t\t\t\t\t\t\tonUpdate={(v: string) => updateField('ogDescription', v)}\n\t\t\t\t\t\t\t\tplaceholder=\"Open Graph Description\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t\t\t<h3 class=\"h3 font-bold\">Twitter Card</h3>\n\n\t\t\t\t\t\t\t<SeoField\n\t\t\t\t\t\t\t\tid=\"seo-twitterTitle\"\n\t\t\t\t\t\t\t\tlabel=\"Twitter Title\"\n\t\t\t\t\t\t\t\tvalue={value[lang].twitterTitle || ''}\n\t\t\t\t\t\t\t\t{field}\n\t\t\t\t\t\t\t\t{lang}\n\t\t\t\t\t\t\t\ttranslated={isTranslated}\n\t\t\t\t\t\t\t\ttranslationPct={getFieldTranslationPercentage('twitterTitle')}\n\t\t\t\t\t\t\t\tonUpdate={(v: string) => updateField('twitterTitle', v)}\n\t\t\t\t\t\t\t\tplaceholder=\"Twitter Title\"\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<SeoField\n\t\t\t\t\t\t\t\tid=\"seo-twitterDescription\"\n\t\t\t\t\t\t\t\tlabel=\"Twitter Description\"\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\tvalue={value[lang].twitterDescription || ''}\n\t\t\t\t\t\t\t\t{field}\n\t\t\t\t\t\t\t\t{lang}\n\t\t\t\t\t\t\t\ttranslated={isTranslated}\n\t\t\t\t\t\t\t\ttranslationPct={getFieldTranslationPercentage('twitterDescription')}\n\t\t\t\t\t\t\t\tonUpdate={(v: string) => updateField('twitterDescription', v)}\n\t\t\t\t\t\t\t\tplaceholder=\"Twitter Description\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"mt-6 pt-4 border-t border-surface-500/30\">\n\t\t\t\t\t\t<SocialPreview\n\t\t\t\t\t\t\togTitle={value[lang].ogTitle || value[lang].title}\n\t\t\t\t\t\t\togDescription={value[lang].ogDescription || value[lang].description}\n\t\t\t\t\t\t\ttwitterTitle={value[lang].twitterTitle || value[lang].title}\n\t\t\t\t\t\t\ttwitterDescription={value[lang].twitterDescription || value[lang].description}\n\t\t\t\t\t\t\thostUrl={publicEnv.HOST_PROD}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t{:else if activeTab === 2}\n\t\t\t\t\t<!-- Advanced Tab -->\n\n\t\t\t\t\t<SeoField\n\t\t\t\t\t\tid=\"seo-robotsMeta\"\n\t\t\t\t\t\tlabel=\"Robots Meta\"\n\t\t\t\t\t\tvalue={value[lang].robotsMeta || ''}\n\t\t\t\t\t\t{field}\n\t\t\t\t\t\t{lang}\n\t\t\t\t\t\ttranslated={isTranslated}\n\t\t\t\t\t\ttranslationPct={getFieldTranslationPercentage('robotsMeta')}\n\t\t\t\t\t\tonUpdate={(v: string) => updateField('robotsMeta', v)}\n\t\t\t\t\t\tplaceholder=\"index, follow\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#snippet icon()}\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:robot-happy-outline\" width=\"16\"></iconify-icon>\n\t\t\t\t\t\t{/snippet}\n\t\t\t\t\t</SeoField>\n\n\t\t\t\t\t<SeoField\n\t\t\t\t\t\tid=\"seo-canonicalUrl\"\n\t\t\t\t\t\tlabel=\"Canonical URL\"\n\t\t\t\t\t\tvalue={value[lang].canonicalUrl || ''}\n\t\t\t\t\t\t{field}\n\t\t\t\t\t\t{lang}\n\t\t\t\t\t\ttranslated={isTranslated}\n\t\t\t\t\t\ttranslationPct={getFieldTranslationPercentage('canonicalUrl')}\n\t\t\t\t\t\tonUpdate={(v: string) => updateField('canonicalUrl', v)}\n\t\t\t\t\t\tplaceholder=\"https://example.com/slug\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#snippet icon()}\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:link-variant\" width=\"16\"></iconify-icon>\n\t\t\t\t\t\t{/snippet}\n\t\t\t\t\t</SeoField>\n\n\t\t\t\t\t<!-- Schema Markup (Textarea) -->\n\t\t\t\t\t<div class=\"space-y-2\">\n\t\t\t\t\t\t<div class=\"flex items-center justify-between mb-1\">\n\t\t\t\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t\t\t\t<span class=\"font-bold text-sm\">Schema.org JSON-LD</span>\n\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:code-json\" width=\"16\"></iconify-icon>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{#if isTranslated}\n\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-1 text-xs\">\n\t\t\t\t\t\t\t\t\t<iconify-icon icon=\"bi:translate\" width=\"16\"></iconify-icon>\n\t\t\t\t\t\t\t\t\t<span class=\"font-medium text-tertiary-500 dark:text-primary-500\">{lang.toUpperCase()}</span>\n\t\t\t\t\t\t\t\t\t<span class=\"font-medium text-surface-400\">({getFieldTranslationPercentage('schemaMarkup')}%)</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"relative\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tid=\"seo-schemaMarkup\"\n\t\t\t\t\t\t\t\tclass=\"textarea font-mono text-xs\"\n\t\t\t\t\t\t\t\trows=\"10\"\n\t\t\t\t\t\t\t\t{placeholder}\n\t\t\t\t\t\t\t\tvalue={value[lang].schemaMarkup || ''}\n\t\t\t\t\t\t\t\toninput={(e) => updateField('schemaMarkup', (e.currentTarget as HTMLTextAreaElement).value)}\n\t\t\t\t\t\t\t\tuse:tokenTarget={{ name: field.db_fieldName, label: field.label, collection: field.collection }}\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p class=\"text-xs text-surface-400\">Paste valid JSON-LD structure here.</p>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n"],"names":["SeoAnalyzer","input","previous","config","title","description","content","url","startTime","keywords","readability","contentStructure","technical","score","suggestions","analysisTime","keyword","words","totalWords","keywordOccurrences","word","density","firstOccurrence","firstOccurrencePercentage","inTitle","inDescription","third","beginningOccurrences","middleOccurrences","endOccurrences","sentences","syllables","averageWordsPerSentence","averageSyllablesPerWord","fleschKincaidScore","passiveVoiceSentences","passiveVoicePercentage","complexSentences","sentence","transitionWordCount","readingTime","p","headingRegex","headings","match","level","text","hasH1","multipleH1","headingHierarchy","listCount","imageCount","imagesWithoutAlt","internalLinks","externalLinks","nofollowLinks","contentScore","technicalScore","readabilityScore","keywordsScore","socialScore","a","b","s","total","vowels","syllableCount","previousWasVowel","i","isVowel","passiveIndicators","indicator","prominence","headingsWithKeyword","variations","currentLevel","levels","levelNumber","path","wordCount","totalLength","stopWord","segment","l","analyzeSeo","data","value","$.prop","$$props","activeTab","$.state","analysisResults","showAnalysis","isAnalyzing","availableLanguages","$.proxy","currentLang","$.derived","app","lang","$.get","onMount","publicEnv","$.set","$.user_effect","langData","timeout","runAnalysis","contentBody","e","hasFeature","feature","getFieldTranslationPercentage","fieldName","safeValue","populatedCount","fieldData","updateField","newVal","isTranslated","placeholder","div","root","div_1","div_2","$0","$1","SeoPreview","node","div_3","SeoAnalysisPanel","node_1","$$value","div_4","div_5","button","$.child","node_2","$.sibling","button_1","root_1","$.template_effect","$.set_class","$.append","$$anchor","$$render","consequent","button_2","root_2","consequent_1","div_6","SeoField","node_6","v","node_7","node_8","div_7","$.first_child","fragment_3","div_8","node_10","node_11","div_9","node_12","node_13","div_10","SocialPreview","node_14","icon","iconify_icon","root_9","node_16","iconify_icon_1","root_10","node_17","div_11","div_12","div_13","iconify_icon_2","div_14","root_11","iconify_icon_3","span","span_1","consequent_4","div_15","textarea","$.remove_textarea_child","$.set_attribute","$.action","$$node","$$action_arg","tokenTarget","$.set_value","consequent_5","consequent_3","alternate","consequent_2","alternate_1","consequent_6","slide"],"mappings":"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"}