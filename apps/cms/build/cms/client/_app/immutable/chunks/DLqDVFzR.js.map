{"version":3,"file":"DLqDVFzR.js","sources":["../../../../../../../../shared/components/src/system/builder/InputSwitch.svelte"],"sourcesContent":["<!-- \n@files src/components/system/builder/InputSwitch.svelte\n@component\n**InputSwitch component**\n\nFeatures:\n- Dynamic rendering of input fields based on provided widget\n\n-->\n\n<script lang=\"ts\">\n\t// sanitizePermissions function moved to component - simplified implementation\n\tfunction sanitizePermissions(permissions: Record<string, Record<string, boolean>>) {\n\t\tconst res = Object.entries(permissions).reduce(\n\t\t\t(acc, [role, actions]) => {\n\t\t\t\tconst nonEmptyActions = Object.entries(actions).reduce(\n\t\t\t\t\t(actionAcc, [action, value]) => {\n\t\t\t\t\t\tif (value !== false) {\n\t\t\t\t\t\t\tactionAcc[action] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn actionAcc;\n\t\t\t\t\t},\n\t\t\t\t\t{} as Record<string, boolean>\n\t\t\t\t);\n\t\t\t\tif (Object.keys(nonEmptyActions).length > 0) {\n\t\t\t\t\tacc[role] = nonEmptyActions;\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{} as Record<string, Record<string, boolean>>\n\t\t);\n\t\treturn Object.keys(res).length === 0 ? undefined : res;\n\t}\n\t// Define props using $props()\n\tconst props = $props();\n\n\t// Create state variables for mutable props\n\tlet value = $state(props.value ?? null);\n\tlet icon = $state(props.icon ?? null);\n\tlet permissions = $state(props.permissions ?? null);\n\n\t// Use $effect for side effects\n\t$effect(() => {\n\t\tif (props.key === 'display' && value?.default === true) {\n\t\t\tvalue = '';\n\t\t}\n\n\t\t// Only update the parent component if the value has changed\n\t\tif (value !== props.value) {\n\t\t\tupdateParent();\n\t\t}\n\t});\n\n\t$effect(() => {\n\t\tif (props.key === 'permissions' && value) {\n\t\t\tpermissions = sanitizePermissions(value);\n\n\t\t\t// Only update the parent component if the permissions have changed\n\t\t\tif (permissions !== props.permissions) {\n\t\t\t\tupdateParent();\n\t\t\t}\n\t\t}\n\t});\n\n\t// Function to update the parent component\n\tfunction updateParent() {\n\t\tif (props.onupdate) {\n\t\t\tprops.onupdate({ value });\n\t\t}\n\t}\n</script>\n\n{#if props.widget}\n\t<props.widget bind:value bind:icon bind:permissions on:update={updateParent} label={props.key} theme=\"dark\" />\n{/if}\n"],"names":["sanitizePermissions","permissions","res","acc","role","actions","nonEmptyActions","actionAcc","action","value","$.state","$.proxy","$$props","icon","$.user_effect","$.get","$.set","updateParent","props_widget","$$anchor","$$value","$$render","consequent"],"mappings":"+MAUA,kBAEUA,EAAoBC,EAAsD,CAC5E,MAAAC,EAAM,OAAO,QAAQD,CAAW,EAAE,OACtC,CAAAE,EAAG,CAAGC,EAAMC,CAAO,IAAM,CACnB,MAAAC,EAAkB,OAAO,QAAQD,CAAO,EAAE,OAC9C,CAAAE,EAAS,CAAGC,EAAQC,CAAK,KACrBA,IAAU,KACbF,EAAUC,CAAM,EAAIC,GAEdF,cAIL,OAAO,KAAKD,CAAe,EAAE,OAAS,IACzCH,EAAIC,CAAI,EAAIE,GAENH,CACR,aAGM,OAAO,KAAKD,CAAG,EAAE,SAAW,EAAI,OAAYA,CACpD,CAKI,IAAAO,EAAQC,EAAMC,EAAAC,EAAO,OAAS,IAAI,CAAA,EAClCC,EAAOH,EAAMC,EAAAC,EAAO,MAAQ,IAAI,CAAA,EAChCX,EAAcS,EAAMC,EAAAC,EAAO,aAAe,IAAI,CAAA,EAGlDE,EAAO,IAAO,GACH,MAAQ,WAASC,EAAIN,CAAK,GAAE,UAAY,IACjDO,EAAAP,EAAQ,EAAE,IAIPA,CAAK,IAAAG,EAAW,OACnBK,EAAY,CAEd,CAAC,EAEDH,EAAO,IAAO,CACHF,EAAA,MAAQ,eAAaG,EAAIN,CAAK,MACvCR,EAAcD,EAAmBe,EAACN,CAAK,CAAA,EAAA,EAAA,IAGnCR,CAAW,IAAAW,EAAW,aACzBK,EAAY,EAGf,CAAC,EAGQ,SAAAA,GAAe,CACbL,EAAA,YACH,SAAQ,CAAG,MAAKG,EAALN,CAAK,CAAA,CAAA,CAExB,uEAICS,EAAYC,EAAA,sBAA6E,sBAA5E,OAAU,kBAAV,MAAUC,EAAA,gBAAC,MAAS,kBAAT,KAASA,EAAA,gBAAC,aAAgB,kBAAhB,YAAgBA,EAAA,6BAAYH,CAAY,wBADjE,QAAMI,EAAAC,CAAA,cAFT"}