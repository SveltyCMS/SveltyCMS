{"version":3,"file":"15.BkKp4AUv.js","sources":["../../../../../../src/routes/config/components/WidgetCard.svelte","../../../../../../src/routes/config/components/WidgetDashboard.svelte","../../../../../../src/routes/config/widgetManagement/+page.svelte"],"sourcesContent":["<!--\n@files src/routes/(app)/config/widgetManagement/WidgetCard.svelte\n@component Enhanced Widget Card\n**Displays widget information**\n\n#### Props\nwidget: {\n\tname: string;\n\ticon: string;\n\tdescription?: string;\n\tisCore: boolean;\n\tisActive: boolean;\n\tdependencies: string[];\n\tcanDisable: boolean;\n\tpillar?: {\n\t\tinput?: { exists: boolean };\n\t\tdisplay?: { exists: boolean };\n\t};\n\thasValidation?: boolean;\n}\nonToggle: (name: string) => void;\nonUninstall?: (name: string) => void;\ncanManage: boolean;\n\n### Features\n- Displays widget information\n- Toggle active status\n- Uninstall widget\n-->\n<script lang=\"ts\">\n\tinterface Props {\n\t\twidget: {\n\t\t\tname: string;\n\t\t\ticon: string;\n\t\t\tdescription?: string;\n\t\t\tisCore: boolean;\n\t\t\tisActive: boolean;\n\t\t\tdependencies: string[];\n\t\t\tcanDisable: boolean;\n\t\t\tpillar?: {\n\t\t\t\tinput?: { exists: boolean };\n\t\t\t\tdisplay?: { exists: boolean };\n\t\t\t};\n\t\t\thasValidation?: boolean;\n\t\t};\n\t\tonToggle: (name: string) => void;\n\t\tonUninstall?: (name: string) => void;\n\t\tcanManage: boolean;\n\t}\n\n\tconst { widget, onToggle, onUninstall, canManage }: Props = $props();\n\n\t/* Function to determine color for boolean status */\n\tfunction getStatusColor(exists: boolean) {\n\t\treturn exists ? 'text-green-500' : 'text-gray-300 dark:text-gray-600';\n\t}\n</script>\n\n<div class=\"card border border-surface-200 dark:text-surface-50 transition-shadow hover:shadow-lg\">\n\t<!-- Widget Header -->\n\t<div class=\"flex flex-col gap-4 p-4 sm:flex-row sm:items-start sm:justify-between\">\n\t\t<div class=\"flex min-w-0 flex-1 items-start gap-4\">\n\t\t\t<div\n\t\t\t\tclass=\"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-surface-100 text-surface-900 dark:bg-surface-800 dark:text-surface-100\"\n\t\t\t>\n\t\t\t\t<iconify-icon icon={widget.icon} class=\"text-3xl\"></iconify-icon>\n\t\t\t</div>\n\t\t\t<div class=\"min-w-0 flex-1 space-y-2\">\n\t\t\t\t<div class=\"flex flex-wrap items-center gap-2\">\n\t\t\t\t\t<h3 class=\"text-lg font-bold text-surface-900 dark:text-surface-50\">\n\t\t\t\t\t\t{widget.name}\n\t\t\t\t\t</h3>\n\t\t\t\t\t{#if widget.isCore}\n\t\t\t\t\t\t<span class=\"badge preset-filled-primary-500\">Core</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"badge preset-filled-tertiary-500\">Custom</span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if widget.isActive}\n\t\t\t\t\t\t<span class=\"badge preset-filled-success-500\">Active</span>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<span class=\"badge preset-filled-surface-500\">Inactive</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t\t{#if widget.description}\n\t\t\t\t\t<p class=\"text-sm text-surface-600 dark:text-surface-50 line-clamp-2\">{widget.description}</p>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- 3-Pillar Architecture Indicators -->\n\t\t\t\t{#if widget.pillar}\n\t\t\t\t\t<div class=\"flex items-center gap-4 pt-1 text-xs text-surface-500\">\n\t\t\t\t\t\t<div class=\"flex items-center gap-1\" title=\"Input Component\">\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:form-textbox\" class={getStatusColor(widget.pillar.input?.exists ?? false)}></iconify-icon>\n\t\t\t\t\t\t\t<span>Input</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-center gap-1\" title=\"Display Component\">\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:monitor-dashboard\" class={getStatusColor(widget.pillar.display?.exists ?? false)}></iconify-icon>\n\t\t\t\t\t\t\t<span>Display</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-center gap-1\" title=\"Database/Validation\">\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:database-check\" class={getStatusColor(widget.hasValidation ?? false)}></iconify-icon>\n\t\t\t\t\t\t\t<span>DB/Valid</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- Dependencies -->\n\t\t\t\t{#if widget.dependencies && widget.dependencies.length > 0}\n\t\t\t\t\t<div class=\"flex flex-wrap gap-1.5 pt-1\">\n\t\t\t\t\t\t<span class=\"text-xs text-surface-500\">Depends on:</span>\n\t\t\t\t\t\t{#each widget.dependencies as dep}\n\t\t\t\t\t\t\t<span class=\"badge variant-soft-secondary text-xs\">\n\t\t\t\t\t\t\t\t{dep}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Actions -->\n\t\t<div class=\"flex items-center gap-2 self-end sm:self-auto\">\n\t\t\t<!-- Toggle Active Status -->\n\t\t\t{#if canManage && widget.canDisable}\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tonclick={() => onToggle(widget.name)}\n\t\t\t\t\tdata-testid=\"widget-toggle-{widget.name}\"\n\t\t\t\t\tclass=\"btn-sm {widget.isActive ? 'preset-filled-error-500' : 'preset-filled-success-500'}\"\n\t\t\t\t>\n\t\t\t\t\t{widget.isActive ? 'Deactivate' : 'Activate'}\n\t\t\t\t</button>\n\t\t\t{:else if widget.isCore}\n\t\t\t\t<span class=\"badge preset-tonal-surface\">System</span>\n\t\t\t{:else if !widget.canDisable}\n\t\t\t\t<span class=\"badge variant-soft-warning\" title=\"Required by other widgets\">Required</span>\n\t\t\t{/if}\n\n\t\t\t<!-- Uninstall (only for inactive custom widgets) -->\n\t\t\t{#if canManage && !widget.isCore && !widget.isActive && onUninstall}\n\t\t\t\t<button type=\"button\" onclick={() => onUninstall?.(widget.name)} class=\"btn-icon btn-icon-sm variant-soft-error\" title=\"Uninstall widget\">\n\t\t\t\t\t<iconify-icon icon=\"mdi:delete\" class=\"text-lg\"></iconify-icon>\n\t\t\t\t</button>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n","<!--\n@component WidgetDashboard\n**Widget Management Dashboard with 3-Pillar Architecture Support**\n\nFeatures:\n- Full 3-pillar architecture visibility\n- Enhanced widget metadata display\n- Better filtering and search\n- Improved UX with widget cards\n- Multi-tenant support\n- Integrated marketplace tab\n-->\n<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { logger } from '@shared/utils/logger';\n\timport WidgetCard from './WidgetCard.svelte';\n\timport { widgetStoreActions } from '@shared/stores/widgetStore.svelte';\n\n\t// Props\n\tconst { data }: { data: any } = $props();\n\n\t// Define the Widget type\n\tinterface Widget {\n\t\tname: string;\n\t\tisCore: boolean;\n\t\tisActive: boolean;\n\t\tdescription?: string;\n\t\ticon: string;\n\t\tdependencies: string[];\n\t\tcanDisable: boolean;\n\t\tpillar?: {\n\t\t\tinput?: { exists: boolean };\n\t\t\tdisplay?: { exists: boolean };\n\t\t};\n\t}\n\n\t// State\n\tlet widgets: Widget[] = $state([]);\n\tlet isLoading = $state(true);\n\tlet searchQuery = $state('');\n\tlet activeFilter = $state('all');\n\tlet activeTab = $state('installed');\n\tlet error: string | null = $state(null);\n\n\t// Get tenant info from page data or user session\n\tconst tenantId = $derived(data?.user?.tenantId || data?.tenantId || 'default-tenant');\n\n\t// User permissions\n\tconst userRole = $derived(data?.user?.role || 'user');\n\tconst userPermissions = $derived(data?.user?.permissions || []);\n\tconst canManageWidgets = $derived(\n\t\tuserRole === 'admin' || userRole === 'super-admin' || userPermissions.includes('manage_widgets') || userPermissions.includes('widget_management')\n\t);\n\n\t// Computed stats\n\tconst stats = $derived({\n\t\ttotal: widgets.length,\n\t\tcore: widgets.filter((w) => w.isCore).length,\n\t\tcustom: widgets.filter((w) => !w.isCore).length,\n\t\tactive: widgets.filter((w) => w.isActive).length,\n\t\tinactive: widgets.filter((w) => !w.isActive).length,\n\t\twithInput: widgets.filter((w) => w.pillar?.input?.exists).length,\n\t\twithDisplay: widgets.filter((w) => w.pillar?.display?.exists).length\n\t});\n\n\t// Filtered widgets\n\tconst filteredWidgets = $derived(\n\t\twidgets.filter((widget) => {\n\t\t\t// Search filter\n\t\t\tconst matchesSearch =\n\t\t\t\tsearchQuery === '' ||\n\t\t\t\twidget.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n\t\t\t\twidget.description?.toLowerCase().includes(searchQuery.toLowerCase());\n\n\t\t\t// Category filter\n\t\t\tlet matchesFilter = false;\n\t\t\tswitch (activeFilter) {\n\t\t\t\tcase 'all':\n\t\t\t\t\tmatchesFilter = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'core':\n\t\t\t\t\tmatchesFilter = widget.isCore;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'custom':\n\t\t\t\t\tmatchesFilter = !widget.isCore;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'active':\n\t\t\t\t\tmatchesFilter = widget.isActive;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'inactive':\n\t\t\t\t\tmatchesFilter = !widget.isActive;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn matchesSearch && matchesFilter;\n\t\t})\n\t);\n\n\tonMount(() => {\n\t\tloadWidgets();\n\n\t\t// Keyboard shortcuts\n\t\tconst handleKeyboard = (e: KeyboardEvent) => {\n\t\t\t// Ctrl/Cmd + F: Focus search\n\t\t\tif ((e.ctrlKey || e.metaKey) && e.key === 'f') {\n\t\t\t\te.preventDefault();\n\t\t\t\t(document.querySelector('input[type=\"text\"]') as HTMLElement)?.focus();\n\t\t\t}\n\t\t\t// Escape: Clear search\n\t\t\tif (e.key === 'Escape' && searchQuery) {\n\t\t\t\tsearchQuery = '';\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener('keydown', handleKeyboard);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('keydown', handleKeyboard);\n\t\t};\n\t});\n\n\tasync function loadWidgets() {\n\t\tisLoading = true;\n\t\terror = null;\n\n\t\ttry {\n\t\t\tconst response = await fetch(`/api/widgets/list?tenantId=${tenantId}`);\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`Failed to load widgets: ${response.statusText}`);\n\t\t\t}\n\n\t\t\tconst result = await response.json();\n\t\t\twidgets = result.widgets || [];\n\n\t\t\tconsole.info('Loaded widgets:', {\n\t\t\t\ttotal: widgets.length,\n\t\t\t\tcore: widgets.filter((w) => w.isCore).length,\n\t\t\t\tcustom: widgets.filter((w) => !w.isCore).length\n\t\t\t});\n\t\t} catch (err) {\n\t\t\terror = err instanceof Error ? err.message : 'Failed to load widgets';\n\t\t\tlogger.error('Error loading widgets:', err);\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n\n\tasync function toggleWidget(widgetName: string) {\n\t\tif (!canManageWidgets) {\n\t\t\talert('You do not have permission to manage widgets. Contact your administrator.');\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst widget = widgets.find((w) => w.name === widgetName);\n\t\t\tif (!widget) return;\n\n\t\t\tconst newStatus = !widget.isActive;\n\n\t\t\tconst response = await fetch('/api/widgets/status', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-Tenant-ID': tenantId\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\twidgetName,\n\t\t\t\t\tisActive: newStatus\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`Failed to update widget status: ${response.statusText}`);\n\t\t\t}\n\n\t\t\t// Force refresh: Clear cache and reload widget store + widget list\n\t\t\t// This ensures the UI is perfectly in sync with database\n\t\t\tawait widgetStoreActions.initializeWidgets(tenantId);\n\t\t\tawait loadWidgets();\n\n\t\t\tconsole.info(`Widget ${widgetName} ${newStatus ? 'activated' : 'deactivated'} - Store and UI refreshed`);\n\t\t} catch (err) {\n\t\t\tconst message = err instanceof Error ? err.message : 'Failed to update widget status';\n\t\t\tlogger.error('Error toggling widget:', err);\n\t\t\talert(`Error: ${message}`);\n\t\t}\n\t}\n\n\tasync function uninstallWidget(widgetName: string) {\n\t\tif (!canManageWidgets) {\n\t\t\talert('You do not have permission to uninstall widgets. Contact your administrator.');\n\t\t\treturn;\n\t\t}\n\n\t\tif (!confirm(`Are you sure you want to uninstall the widget \"${widgetName}\"?`)) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await fetch(`/api/widgets/uninstall`, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'X-Tenant-ID': tenantId\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ widgetName })\n\t\t\t});\n\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`Failed to uninstall widget: ${response.statusText}`);\n\t\t\t}\n\n\t\t\t// Reload widgets after uninstallation\n\t\t\tawait loadWidgets();\n\t\t\tconsole.info(`Widget ${widgetName} uninstalled`);\n\t\t} catch (err) {\n\t\t\tconst message = err instanceof Error ? err.message : 'Failed to uninstall widget';\n\t\t\tlogger.error('Error uninstalling widget:', err);\n\t\t\talert(`Error: ${message}`);\n\t\t}\n\t}\n</script>\n\n<div class=\"wrapper h-full max-h-screen space-y-6 overflow-y-auto p-4 pb-16\">\n\t{#if isLoading}\n\t\t<div class=\"flex items-center justify-center p-8\">\n\t\t\t<div class=\"h-8 w-8 animate-spin rounded-full border-2 border-blue-600 border-t-transparent\"></div>\n\t\t\t<span class=\"ml-3 text-lg\">Loading widgets...</span>\n\t\t</div>\n\t{:else if error}\n\t\t<div class=\"rounded-lg border border-red-200 bg-red-50 p-4 dark:bg-red-900/20\">\n\t\t\t<div class=\"flex items-start gap-3\">\n\t\t\t\t<iconify-icon icon=\"mdi:alert-circle\" class=\"mt-1 text-xl text-red-600\"></iconify-icon>\n\t\t\t\t<div>\n\t\t\t\t\t<h3 class=\"font-semibold text-red-800 dark:text-red-300\">Error Loading Widgets</h3>\n\t\t\t\t\t<p class=\"text-red-700 dark:text-red-400\">{error}</p>\n\t\t\t\t\t<button onclick={() => loadWidgets()} class=\"mt-2 rounded-lg bg-red-600 px-3 py-1 text-sm text-white hover:bg-red-700\"> Retry </button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<!-- Permission Notice -->\n\t\t{#if !canManageWidgets}\n\t\t\t<div class=\"rounded-lg border border-amber-200 bg-amber-50 p-4 dark:bg-amber-900/20\">\n\t\t\t\t<div class=\"flex items-start gap-3\">\n\t\t\t\t\t<iconify-icon icon=\"mdi:shield-alert\" class=\"mt-1 text-xl text-amber-600\"></iconify-icon>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 class=\"font-semibold text-amber-800 dark:text-amber-300\">Limited Access</h3>\n\t\t\t\t\t\t<p class=\"text-amber-700 dark:text-amber-400\">\n\t\t\t\t\t\t\tYou have read-only access to widget management. Contact your administrator to request widget management permissions.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<!-- Tab Navigation -->\n\t\t<div class=\"flex gap-2 border-b border-gray-200 dark:border-gray-700\">\n\t\t\t<button\n\t\t\t\tonclick={() => (activeTab = 'installed')}\n\t\t\t\tclass=\"border-b-2 px-6 py-3 font-medium transition-colors {activeTab === 'installed'\n\t\t\t\t\t? 'border-blue-600 text-blue-600 dark:border-blue-400 dark:text-blue-400'\n\t\t\t\t\t: 'border-transparent text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200'}\"\n\t\t\t>\n\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t<iconify-icon icon=\"mdi:puzzle\" class=\"text-xl\"></iconify-icon>\n\t\t\t\t\t<span>Installed Widgets</span>\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tonclick={() => (activeTab = 'marketplace')}\n\t\t\t\tclass=\"border-b-2 px-6 py-3 font-medium transition-colors {activeTab === 'marketplace'\n\t\t\t\t\t? 'border-blue-600 text-blue-600 dark:border-blue-400 dark:text-blue-400'\n\t\t\t\t\t: 'border-transparent text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200'}\"\n\t\t\t>\n\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t<iconify-icon icon=\"mdi:store\" class=\"text-xl\"></iconify-icon>\n\t\t\t\t\t<span>Marketplace</span>\n\t\t\t\t\t<span class=\"rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700 dark:bg-blue-900/30 dark:text-blue-300\">\n\t\t\t\t\t\tComing Soon\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t</div>\n\n\t\t{#if activeTab === 'installed'}\n\t\t\t<!-- Summary Cards with Colored Backgrounds and Tooltips -->\n\t\t\t<div class=\"grid grid-cols-2 gap-4 md:grid-cols-4\" data-testid=\"widget-stats\">\n\t\t\t\t<!-- Total Widgets -->\n\t\t\t\t<div class=\"relative rounded-lg bg-blue-50 p-4 shadow-sm transition-all hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"btn-icon btn-icon-sm absolute right-2 top-2 text-blue-600 dark:text-blue-400\"\n\t\t\t\t\t\taria-label=\"Information about total widgets\"\n\t\t\t\t\t\ttitle=\"All registered widgets in the system (core + custom)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:information-outline\" class=\"text-lg\"></iconify-icon>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div class=\"flex items-center gap-3\">\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:widgets\" class=\"text-2xl text-blue-600 dark:text-blue-400\"></iconify-icon>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 class=\"font-semibold text-blue-800 dark:text-blue-300\">Total</h3>\n\t\t\t\t\t\t\t<p class=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">{stats.total}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Active Widgets -->\n\t\t\t\t<div class=\"relative rounded-lg bg-green-50 p-4 shadow-sm transition-all hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"btn-icon btn-icon-sm absolute right-2 top-2 text-primary-500\"\n\t\t\t\t\t\taria-label=\"Information about active widgets\"\n\t\t\t\t\t\ttitle=\"Widgets currently enabled and available for use in collections\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:information-outline\" class=\"text-lg\"></iconify-icon>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div class=\"flex items-center gap-3\">\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:check-circle\" class=\"text-2xl text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 class=\"font-semibold text-primary-500\">Active</h3>\n\t\t\t\t\t\t\t<p class=\"text-2xl font-bold text-primary-500\">{stats.active}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Core Widgets -->\n\t\t\t\t<div class=\"relative rounded-lg bg-blue-50 p-4 shadow-sm transition-all hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"btn-icon btn-icon-sm absolute right-2 top-2 text-blue-600 dark:text-blue-400\"\n\t\t\t\t\t\taria-label=\"Information about core widgets\"\n\t\t\t\t\t\ttitle=\"Essential system widgets that are always active and cannot be disabled\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:information-outline\" class=\"text-lg\"></iconify-icon>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div class=\"flex items-center gap-3\">\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:puzzle\" class=\"text-2xl text-blue-600 dark:text-blue-400\"></iconify-icon>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 class=\"font-semibold text-blue-800 dark:text-blue-300\">Core</h3>\n\t\t\t\t\t\t\t<p class=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">{stats.core}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Custom Widgets -->\n\t\t\t\t<div\n\t\t\t\t\tclass=\"relative rounded-lg bg-yellow-50 p-4 shadow-sm transition-all hover:bg-yellow-100 dark:bg-yellow-900/20 dark:hover:bg-yellow-900/30\"\n\t\t\t\t>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"btn-icon btn-icon-sm absolute right-2 top-2 text-yellow-600 dark:text-yellow-400\"\n\t\t\t\t\t\taria-label=\"Information about custom widgets\"\n\t\t\t\t\t\ttitle=\"Optional widgets that can be toggled on/off as needed\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:information-outline\" class=\"text-lg\"></iconify-icon>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div class=\"flex items-center gap-3\">\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:puzzle-plus\" class=\"text-2xl text-yellow-600 dark:text-yellow-400\"></iconify-icon>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h3 class=\"font-semibold text-yellow-800 dark:text-yellow-300\">Custom</h3>\n\t\t\t\t\t\t\t<p class=\"text-2xl font-bold text-yellow-600 dark:text-yellow-400\">{stats.custom}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Filters and Search -->\n\t\t\t<div class=\"card preset-filled-surface-500 mt-6 space-y-4 p-4\">\n\t\t\t\t<!-- Search and Sync Button Row -->\n\t\t\t\t<div class=\"flex flex-col gap-3 sm:flex-row sm:items-center\">\n\t\t\t\t\t<!-- Search -->\n\t\t\t\t\t<div class=\"relative flex-1\">\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:magnify\" class=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></iconify-icon>\n\t\t\t\t\t\t<input type=\"text\" bind:value={searchQuery} placeholder=\"Search widgets... (Ctrl+F)\" class=\"input py-2 pl-10 pr-10 dark:text-white\" />\n\t\t\t\t\t\t{#if searchQuery}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonclick={() => (searchQuery = '')}\n\t\t\t\t\t\t\t\tclass=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200\"\n\t\t\t\t\t\t\t\taria-label=\"Clear search\"\n\t\t\t\t\t\t\t\ttitle=\"Clear search (Esc)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:close-circle\" class=\"text-lg\"></iconify-icon>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Badges Counts -->\n\t\t\t\t<div class=\"flex flex-wrap gap-2\">\n\t\t\t\t\t{#each [{ value: 'all' as const, label: 'All', count: stats.total, icon: 'mdi:widgets' }, { value: 'active' as const, label: 'Active', count: stats.active, icon: 'mdi:check-circle' }, { value: 'inactive' as const, label: 'Inactive', count: stats.inactive, icon: 'mdi:pause-circle' }, { value: 'core' as const, label: 'Core', count: stats.core, icon: 'mdi:puzzle' }, { value: 'custom' as const, label: 'Custom', count: stats.custom, icon: 'mdi:puzzle-plus' }] as filter}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tonclick={() => (activeFilter = filter.value)}\n\t\t\t\t\t\t\tclass=\"btn {activeFilter === filter.value ? 'preset-filled-tertiary-500 text-white' : 'preset-ghost-secondary-500 '}\"\n\t\t\t\t\t\t\taria-label=\"{filter.label} widgets ({filter.count})\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<iconify-icon icon={filter.icon} class=\"text-lg\"></iconify-icon>\n\t\t\t\t\t\t\t<span>{filter.label}</span>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"rounded-full px-2 py-0.5 text-xs font-semibold {activeFilter === filter.value\n\t\t\t\t\t\t\t\t\t? 'bg-blue-500 text-white'\n\t\t\t\t\t\t\t\t\t: 'bg-gray-300 text-gray-700 dark:bg-gray-600 dark:text-gray-300'}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{filter.count}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- Widgets Grid - 2 Column Layout for Desktop -->\n\t\t\t<div class=\"mb-12 grid grid-cols-1 gap-4 lg:grid-cols-2\" data-testid=\"widget-grid\">\n\t\t\t\t{#if filteredWidgets.length === 0}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"col-span-full rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-12 text-center dark:border-gray-600 dark:bg-gray-800\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<iconify-icon icon=\"mdi:package-preset-closed\" class=\"mx-auto text-6xl text-gray-400\"></iconify-icon>\n\t\t\t\t\t\t<h3 class=\"mt-4 text-lg font-semibold text-gray-900 dark:text-white\">No Widgets Found</h3>\n\t\t\t\t\t\t<p class=\"mt-2 text-gray-600 dark:text-gray-400\">\n\t\t\t\t\t\t\t{#if searchQuery}\n\t\t\t\t\t\t\t\tNo widgets match your search \"<strong>{searchQuery}</strong>\"\n\t\t\t\t\t\t\t{:else if activeFilter !== 'all'}\n\t\t\t\t\t\t\t\tNo {activeFilter} widgets available\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\tNo widgets match your criteria\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t{#if searchQuery || activeFilter !== 'all'}\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\t\t\tsearchQuery = '';\n\t\t\t\t\t\t\t\t\tactiveFilter = 'all';\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclass=\"mt-6 inline-flex items-center gap-2 rounded-lg bg-blue-600 px-6 py-3 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n\t\t\t\t\t\t\t\taria-label=\"Clear all filters and search\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:filter-remove\" class=\"text-lg\"></iconify-icon>\n\t\t\t\t\t\t\t\tClear All Filters\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t{:else}\n\t\t\t\t\t{#each filteredWidgets as widget (widget.name)}\n\t\t\t\t\t\t<WidgetCard {widget} onToggle={toggleWidget} onUninstall={uninstallWidget} canManage={canManageWidgets} />\n\t\t\t\t\t{/each}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<!-- Marketplace Tab -->\n\t\t\t<div class=\"rounded-lg border border-gray-200 bg-gray-50 p-12 text-center dark:border-gray-700 dark:bg-gray-800\">\n\t\t\t\t<div class=\"mx-auto max-w-md\">\n\t\t\t\t\t<iconify-icon icon=\"mdi:store\" class=\"mx-auto text-6xl text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t<h3 class=\"mt-4 text-xl font-semibold text-gray-900 dark:text-white\">Marketplace Coming Soon</h3>\n\t\t\t\t\t<p class=\"mt-2 text-gray-600 dark:text-gray-400\">\n\t\t\t\t\t\tThe Widget Marketplace will allow you to discover, install, and manage premium and community widgets to extend your SveltyCMS\n\t\t\t\t\t\tfunctionality.\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class=\"mt-6 space-y-2 text-left\">\n\t\t\t\t\t\t<div class=\"flex items-start gap-3 text-sm text-gray-600 dark:text-gray-400\">\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:check-circle\" class=\"mt-0.5 text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t<span>Browse hundreds of widgets across multiple categories</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-start gap-3 text-sm text-gray-600 dark:text-gray-400\">\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:check-circle\" class=\"mt-0.5 text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t<span>One-click installation and automatic updates</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-start gap-3 text-sm text-gray-600 dark:text-gray-400\">\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:check-circle\" class=\"mt-0.5 text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t<span>Community ratings and reviews</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"flex items-start gap-3 text-sm text-gray-600 dark:text-gray-400\">\n\t\t\t\t\t\t\t<iconify-icon icon=\"mdi:check-circle\" class=\"mt-0.5 text-tertiary-500 dark:text-primary-500\"></iconify-icon>\n\t\t\t\t\t\t\t<span>Support for both free and premium widgets</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tdisabled\n\t\t\t\t\t\tclass=\"mt-6 cursor-not-allowed rounded-lg bg-gray-300 px-6 py-3 font-medium text-gray-500 dark:bg-gray-700 dark:text-gray-500\"\n\t\t\t\t\t>\n\t\t\t\t\t\tComing in Future Update\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t{/if}\n\t{/if}\n</div>\n\n<!-- Tooltip Popups for Metric Cards - Uniform Dark/Light Theme -->\n<div class=\"card preset-filled z-50 max-w-xs p-3 shadow-xl\" data-popup=\"totalTooltip\">\n\t<p class=\"text-sm\">All registered widgets in the system (core + custom)</p>\n\t<div class=\"preset-filled arrow\"></div>\n</div>\n\n<div class=\"card preset-filled z-50 max-w-xs p-3 shadow-xl\" data-popup=\"activeTooltip\">\n\t<p class=\"text-sm\">Widgets currently enabled and available for use in collections</p>\n\t<div class=\"preset-filled arrow\"></div>\n</div>\n\n<div class=\"card preset-filled z-50 max-w-xs p-3 shadow-xl\" data-popup=\"coreTooltip\">\n\t<p class=\"text-sm\">Essential system widgets that are always active and cannot be disabled</p>\n\t<div class=\"preset-filled arrow\"></div>\n</div>\n\n<div class=\"card preset-filled z-50 max-w-xs p-3 shadow-xl\" data-popup=\"customTooltip\">\n\t<p class=\"text-sm\">Optional widgets that can be toggled on/off as needed</p>\n\t<div class=\"preset-filled arrow\"></div>\n</div>\n","<!--\n@file src/routes/(app)/config/widgetManagement/+page.svelte\n@component\n**Widget Management Configuration Page - Provides interface for managing content widgets and their activation status with 3-pillar architecture support.**\n\nFeatures:\n- List all available content widgets (core and custom)\n- Toggle widget status (active/inactive)\n- View widget dependencies and requirements\n- Display 3-pillar architecture components (Definition, Input, Display)\n- Bulk activate required widgets\n- Collection validation against active widgets\n- Multi-tenant widget configuration\n-->\n\n<script lang=\"ts\">\n\t// ParaglideJS\n\t// import * as m from '@shared/paraglide/messages';\n\n\t// Components\n\timport PageTitle from '@cms/components/PageTitle.svelte';\n\timport WidgetDashboard from '../components/WidgetDashboard.svelte';\n\n\tinterface Props {\n\t\tdata: any;\n\t}\n\n\tconst { data }: Props = $props();\n</script>\n\n<!-- Page Title with Back Button -->\n<PageTitle name=\"Widget Management\" icon=\"mdi:widgets\" showBackButton={true} backUrl=\"/config\" />\n\n<!-- Widget Management Dashboard with 3-Pillar Architecture Support -->\n<WidgetDashboard {data} />\n"],"names":["getStatusColor","exists","div","root","div_1","div_2","div_3","$.child","iconify_icon","$.template_effect","$.set_custom_element_data","$.reset","div_4","$.sibling","div_5","h3","span","root_1","span_1","root_2","$$render","consequent","alternate","span_2","root_3","span_3","root_4","consequent_1","alternate_1","p","root_5","consequent_2","div_6","root_6","div_7","iconify_icon_1","div_8","iconify_icon_2","div_9","iconify_icon_3","$0","$1","$2","$.clsx","$$props","consequent_3","div_10","root_7","$.each","node_5","dep","span_4","root_8","consequent_4","div_11","button","root_9","text_3","$.set_attribute","$.set_class","$.append","$$anchor","span_5","root_11","span_6","root_13","consequent_7","consequent_6","alternate_2","consequent_5","alternate_3","button_1","root_14","iconify_icon_4","consequent_8","widgets","$.state","$.proxy","isLoading","searchQuery","activeFilter","activeTab","error","tenantId","userRole","$.derived","userPermissions","canManageWidgets","$.get","stats","w","filteredWidgets","widget","matchesSearch","matchesFilter","onMount","loadWidgets","handleKeyboard","e","$.set","response","result","err","logger","toggleWidget","widgetName","newStatus","widgetStoreActions","message","uninstallWidget","$.first_child","fragment","node_2","button_2","fragment_3","button_3","div_12","iconify_icon_5","div_13","p_1","div_14","button_4","iconify_icon_6","div_15","iconify_icon_7","div_16","p_2","div_17","button_5","iconify_icon_8","div_18","iconify_icon_9","div_19","p_3","div_20","button_6","iconify_icon_10","div_21","iconify_icon_11","div_22","p_4","div_23","div_24","div_25","iconify_icon_12","input","button_7","iconify_icon_13","div_26","filter","button_8","iconify_icon_14","text_6","$.set_text","text_5","div_27","div_28","iconify_icon_15","p_5","strong","fragment_4","button_9","iconify_icon_16","node_9","WidgetCard","text_1","text_2","text_4","$$value","div_29","root_17","div_30","iconify_icon_17","div_31","div_32","iconify_icon_18","div_33","iconify_icon_19","div_34","iconify_icon_20","div_35","iconify_icon_21","alternate_4","alternate_5","PageTitle","node","WidgetDashboard","node_1"],"mappings":"gmFA6BA,mBAwBUA,EAAeC,EAAiB,QACjCA,EAAS,iBAAmB,kCACpC,KAGAC,EAAGC,GAAA,EAEFC,IAFDF,CAAG,EAGDG,IADDD,CAAG,EAEDE,EAAAC,EADDF,CAAG,EAIDG,EAAYD,EAHbD,CAAA,EAGCG,EAAA,IAAAC,EAAAF,kBAA0B,IAAI,CAAA,IAA9BA,EAAY,EAAA,UAAA,EAHbG,EAAAL,CAAA,EAKA,IAAAM,EAAGC,EALHP,EAAA,CAAA,EAMCQ,IADDF,CAAG,EAEDG,IADDD,CAAG,OACFC,EAAE,EAAA,IAAFA,CAAE,UAAFA,EAAE,CAAA,kBAIDC,EAAIC,GAAA,MAAJD,CAAI,cAEJE,EAAIC,GAAA,MAAJD,CAAI,oBAHM,OAAME,EAAAC,EAAA,EAAAD,EAAAE,GAAA,EAAA,kCAMhBC,EAAIC,GAAA,MAAJD,CAAI,cAEJE,EAAIC,GAAA,MAAJD,CAAI,qBAHM,SAAQL,EAAAO,EAAA,EAAAP,EAAAQ,GAAA,EAAA,MATpBd,CAAG,WAAHA,EAAG,CAAA,kBAgBFe,EAACC,GAAA,MAADD,EAAC,EAAA,IAADA,CAAC,qBAA4E,WAAW,CAAA,MAAxFA,CAAC,qBADS,aAAWT,EAAAW,EAAA,mCAMrBC,EAAGC,GAAA,EACFC,IADDF,CAAG,EAEDG,IADDD,CAAG,IACFC,EAAY,OAAA,kBAAA,SADbD,CAAG,EAIH,IAAAE,IAJAF,EAAG,CAAA,EAKFG,IADDD,CAAG,IACFC,EAAY,OAAA,uBAAA,SADbD,CAAG,EAIH,IAAAE,IAJAF,EAAG,CAAA,EAKFG,IADDD,CAAG,IACFC,EAAY,OAAA,oBAAA,SADbD,CAAG,IATJN,CAAG,kBAEDG,EAAY,EAAAK,EAAA,IAIZH,EAAY,EAAAI,CAAA,IAIZF,EAAY,EAAAG,EAAA,IARgC,IAAAC,GAAA3C,WAAsB,OAAO,OAAO,QAAU,EAAK,CAAA,EAI9C,IAAA2C,GAAA3C,WAAsB,OAAO,SAAS,QAAU,EAAK,CAAA,SAIxDA,EAAc4C,EAAA,OAAQ,eAAiB,EAAK,CAAA,QAV5FZ,CAAG,qBADO,QAAMZ,EAAAyB,EAAA,iCAmBhBC,EAAGC,GAAA,QAAHD,CAAG,EAAA,CAAA,EAEWE,GAAAC,EAAA,GAAA,IAAAL,EAAA,OAAA,mBAAgBM,IAAG,KAC/BC,EAAIC,GAAA,MAAJD,EAAI,EAAA,IAAJA,CAAI,cACHD,CAAG,CAAA,CAAA,MADJC,CAAI,MAHNL,CAAG,MAAHA,CAAG,WADOF,EAAA,OAAA,cAAYA,EAAA,OAAW,aAAa,OAAS,GAACxB,EAAAiC,CAAA,MAvC1DzC,CAAG,IANJP,CAAG,EA2DH,IAAAiD,IA3DAjD,EAAG,CAAA,MA2DHiD,CAAG,cAGD,IAAAC,EAAAC,GAAA,EAAAD,EAEA,gCAA+B,IAAI,EAFnC,IAAAE,EAAAlD,EAAAgD,EAAA,EAAA,EAAA5C,EAAA4C,CAAA,SAAAG,GAAAH,EAAA,cAAA,iBAAAX,EAAA,OAGmC,MAAI,EAAA,EAAA,EAHvCe,EAAAJ,EAAA,EAAA,UAAAX,EAAA,OAIsB,SAAW,0BAA4B,2BAA2B,EAAA,eAEhF,SAAW,aAAe,UAAU,IAN5CgB,EAAAC,EAAAN,CAAA,0CASAO,EAAIC,GAAA,MAAJD,CAAI,2CAEJE,GAAIC,GAAA,MAAJD,EAAI,oBADY,YAAU5C,EAAA8C,EAAA,gCAFX,OAAM9C,EAAA+C,CAAA,EAAA/C,EAAAgD,EAAA,EAAA,6CATE,WAAUhD,EAAAiD,EAAA,EAAAjD,EAAAkD,EAAA,EAAA,gCAiBjCC,EAAMC,GAAA,EAAND,EAAqB,QAAO,IAAA3B,EAAA,cAAAA,EAAA,OAA6B,IAAI,EAC5D,IAAA6B,IADDF,CAAM,IACLE,EAAY,OAAA,YAAA,IAAZA,EAAY,EAAA,SAAA,IADbF,CAAM,MAANA,CAAM,WADkB3B,EAAA,WAAA,CAAAA,EAAA,OAAA,kBAAkB,UAAQA,EAAA,aAAAxB,EAAAsD,CAAA,MAlBpDpB,CAAG,IA5DJlD,CAAG,IAFJF,CAAG,sBAYU,IAAI,CAAA,OAZjBA,CAAG,MAFI;k1EC5CR,UAyBK,IAAAyE,EAAoBC,GAAMC,GAAA,CAAA,CAAA,CAAA,EAC1BC,EAAYF,GAAO,EAAI,EACvBG,EAAcH,GAAO,EAAE,EACvBI,EAAeJ,GAAO,KAAK,EAC3BK,EAAYL,GAAO,WAAW,EAC9BM,EAAuBN,GAAO,IAAI,EAGhC,MAAAO,iBAA0B,MAAM,UAAQvC,EAAA,MAAU,UAAY,gBAAgB,EAG9EwC,EAAQC,GAAA,IAAAzC,EAAA,MAAkB,MAAM,MAAQ,MAAM,EAC9C0C,EAAeD,GAAA,IAAAzC,EAAA,MAAkB,MAAM,aAAW,EAAA,EAClD2C,YACLH,CAAQ,IAAK,SAAOI,EAAIJ,CAAQ,IAAK,eAAaI,EAAIF,CAAe,EAAC,SAAS,gBAAgB,GAAAE,EAAKF,CAAe,EAAC,SAAS,mBAAmB,CAAA,EAI3IG,EAAKJ,GAAA,KAAA,CACV,MAAKG,EAAEb,CAAO,EAAC,OACf,KAAIa,EAAEb,CAAO,EAAC,OAAQe,GAAMA,EAAE,MAAM,EAAE,OACtC,OAAMF,EAAEb,CAAO,EAAC,OAAQe,GAAC,CAAMA,EAAE,MAAM,EAAE,OACzC,OAAMF,EAAEb,CAAO,EAAC,OAAQe,GAAMA,EAAE,QAAQ,EAAE,OAC1C,SAAQF,EAAEb,CAAO,EAAC,OAAQe,GAAC,CAAMA,EAAE,QAAQ,EAAE,OAC7C,UAASF,EAAEb,CAAO,EAAC,OAAQe,GAAMA,EAAE,QAAQ,OAAO,MAAM,EAAE,OAC1D,YAAWF,EAAEb,CAAO,EAAC,OAAQe,GAAMA,EAAE,QAAQ,SAAS,MAAM,EAAE,UAIzDC,YACLhB,CAAO,EAAC,OAAQiB,GAAW,OAEpBC,EAAaL,EAClBT,CAAW,IAAK,IAChBa,EAAO,KAAK,YAAW,EAAG,SAAQJ,EAACT,CAAW,EAAC,aAAW,GAC1Da,EAAO,aAAa,YAAW,EAAG,SAAQJ,EAACT,CAAW,EAAC,aAAW,EAG/D,IAAAe,EAAgB,YACZd,CAAY,EAAA,KACd,MACJc,EAAgB,aAEZ,OACJA,EAAgBF,EAAO,iBAEnB,SACJE,EAAa,CAAIF,EAAO,iBAEpB,SACJE,EAAgBF,EAAO,mBAEnB,WACJE,EAAa,CAAIF,EAAO,eAInB,OAAAC,GAAiBC,CACzB,CAAC,CAAA,EAGFC,GAAO,IAAO,CACbC,GAAW,QAGLC,EAAkBC,GAAqB,EAEvCA,EAAE,SAAWA,EAAE,UAAYA,EAAE,MAAQ,MACzCA,EAAE,eAAc,EACf,SAAS,cAAc,oBAAoB,GAAmB,MAAK,GAGjEA,EAAE,MAAQ,UAAQV,EAAIT,CAAW,GACpCoB,EAAApB,EAAc,EAAE,CAElB,EAEA,cAAO,iBAAiB,UAAWkB,CAAc,EAEpC,IAAA,CACZ,OAAO,oBAAoB,UAAWA,CAAc,CACrD,CACD,CAAC,EAEc,eAAAD,IAAc,CAC5BG,EAAArB,EAAY,EAAI,EAChBqB,EAAAjB,EAAQ,IAAI,EAER,GAAA,OACGkB,EAAQ,MAAS,MAAK,8BAAAZ,EAA+BL,CAAQ,CAAA,EAAA,MAE9DiB,EAAS,aACH,MAAK,2BAA4BA,EAAS,UAAU,EAAA,QAGzDC,EAAM,MAASD,EAAS,KAAI,IAClCzB,EAAU0B,EAAO,SAAO,CAAA,EAAA,EAAA,EAExB,QAAQ,KAAK,kBAAiB,CAC7B,MAAKb,EAAEb,CAAO,EAAC,OACf,KAAIa,EAAEb,CAAO,EAAC,OAAQe,GAAMA,EAAE,MAAM,EAAE,OACtC,OAAMF,EAAEb,CAAO,EAAC,OAAQe,GAAC,CAAMA,EAAE,MAAM,EAAE,QAE3C,OAASY,EAAK,GACbpB,EAAQoB,aAAe,MAAQA,EAAI,QAAU,yBAAwB,EAAA,EACrEC,GAAO,MAAM,yBAA0BD,CAAG,CAC3C,QAAC,CACAH,EAAArB,EAAY,EAAK,CAClB,CACD,gBAEe0B,GAAaC,EAAoB,CAC1C,GAAA,CAAAjB,EAAAD,EAAgB,EAAE,CACtB,MAAM,2EAA2E,QAElF,CAEI,GAAA,OACGK,EAAMJ,EAAGb,CAAO,EAAC,KAAMe,IAAMA,GAAE,OAASe,CAAU,MACnDb,EAAM,aAELc,EAAS,CAAId,EAAO,SAEpBQ,EAAQ,MAAS,MAAM,sBAAqB,CACjD,OAAQ,OACR,QAAO,CACN,eAAgB,mBAChB,cAAaZ,EAAEL,CAAA,GAEhB,KAAM,KAAK,WACV,WAAAsB,EACA,SAAUC,CAAA,CAAA,QAIPN,EAAS,aACH,MAAK,mCAAoCA,EAAS,UAAU,EAAA,QAKjEO,GAAmB,kBAAiBnB,EAACL,CAAQ,CAAA,QAC7Ca,GAAW,EAEjB,QAAQ,KAAI,UAAWS,CAAU,IAAIC,EAAY,YAAc,aAAa,2BAAA,CAC7E,OAASJ,EAAK,OACPM,EAAUN,aAAe,MAAQA,EAAI,QAAU,iCACrDC,GAAO,MAAM,yBAA0BD,CAAG,EAC1C,gBAAgBM,CAAO,EAAA,CACxB,CACD,gBAEeC,GAAgBJ,EAAoB,CAC7C,GAAA,CAAAjB,EAAAD,EAAgB,EAAE,CACtB,MAAM,8EAA8E,QAErF,IAEK,QAAO,kDAAmDkB,CAAU,IAAA,EAIrE,GAAA,CACG,MAAAL,QAAiB,MAAK,yBAAA,CAC3B,OAAQ,OACR,QAAO,CACN,eAAgB,mBAChB,cAAaZ,EAAEL,CAAA,GAEhB,KAAM,KAAK,WAAY,WAAAsB,CAAU,CAAA,QAG7BL,EAAS,aACH,MAAK,+BAAgCA,EAAS,UAAU,EAAA,QAI7DJ,GAAW,EACjB,QAAQ,KAAI,UAAWS,CAAU,cAAA,CAClC,OAASH,EAAK,OACPM,EAAUN,aAAe,MAAQA,EAAI,QAAU,6BACrDC,GAAO,MAAM,6BAA8BD,CAAG,EAC9C,gBAAgBM,CAAO,EAAA,CACxB,CACD,aAGA1G,GAAG4G,EAAAC,EAAA,OAAH7G,EAAG,kBAEDE,EAAGa,GAAA,MAAHb,CAAG,2CAKHC,EAAGmB,GAAA,EACFlB,IADDD,CAAG,EAEDG,IADDF,CAAG,IACFE,EAAY,OAAA,kBAAA,IAAZA,EAAY,EAAA,2BAAA,EACZ,IAAAI,IADAJ,EAAY,CAAA,EAGXqB,MAFDjB,CAAG,EAAA,CAAA,MAEFiB,EAAC,EAAA,IAADA,CAAC,EACD,IAAA0B,IADA1B,EAAC,CAAA,EACD0B,EAAO,QAAO,IAAQyC,GAAW,IAHlCpF,CAAG,IAFJN,CAAG,IADJD,CAAG,cAK0C6E,CAAK,CAAA,CAAA,MALlD7E,CAAG,2CAaFS,EAAGgB,GAAA,EACFE,IADDlB,CAAG,EAEDqB,IADDH,CAAG,IACFG,EAAY,OAAA,kBAAA,IAAZA,EAAY,EAAA,6BAAA,SADbH,CAAG,IADJlB,CAAG,MAAHA,CAAG,aADCyE,EAAgB,GAAAnE,EAAAW,CAAA,QAerBG,EAAGrB,EAAAmG,EAAA,CAAA,EACFzC,EAAAhE,EADD2B,CAAG,EACFqC,EACA,QAAO,IAAA4B,EAASlB,EAAY,WAAW,EAKtC,IAAA7C,EAAG7B,EANJgE,CAAA,EAOElC,IADDD,CAAG,IACFC,EAAY,OAAA,YAAA,IAAZA,EAAY,EAAA,SAAA,SADbD,CAAG,EANJzB,EAAA4D,CAAA,MAWA0C,EAAApG,EAXA0D,EAAA,CAAA,EAWA0C,EACA,QAAO,IAAAd,EAASlB,EAAY,aAAa,EAKxC,IAAA3C,EAAG/B,EANJ0G,CAAA,EAOE1E,IADDD,CAAG,IACFC,EAAY,OAAA,WAAA,IAAZA,EAAY,EAAA,SAAA,SADbD,CAAG,EANJ3B,EAAAsG,CAAA,IAZD/E,CAAG,WAAHA,EAAG,CAAA,wBA8BFY,EAAGgE,EAAAI,CAAA,EAEF5D,IAFDR,CAAG,EAGDqE,GAAA5G,EADD+C,CAAG,EAMDmB,GAAYlE,EALb4G,EAAA,IAKC1C,GAAY,OAAA,yBAAA,IAAZA,GAAY,EAAA,SAAA,EALb9D,EAAAwG,EAAA,EAOA,IAAAC,GAAGvG,EAPHsG,GAAA,CAAA,EAQCE,IADDD,EAAG,IACFC,EAAY,OAAA,aAAA,IAAZA,EAAY,EAAA,2CAAA,EACZ,IAAAC,KADAD,EAAY,CAAA,EAGXE,OAFDD,EAAG,EAAA,CAAA,OAEFC,GAAC,EAAA,IAADA,EAAC,IAFFD,EAAG,IAFJF,EAAG,IARJ9D,CAAG,EAkBH,IAAAkE,KAlBAlE,EAAG,CAAA,EAmBFmE,GAAAlH,EADDiH,EAAG,EAMDE,GAAYnH,EALbkH,EAAA,IAKCC,GAAY,OAAA,yBAAA,IAAZA,GAAY,EAAA,SAAA,EALb/G,EAAA8G,EAAA,EAOA,IAAAE,GAAG9G,EAPH4G,GAAA,CAAA,EAQCG,KADDD,EAAG,IACFC,GAAY,OAAA,kBAAA,IAAZA,GAAY,EAAA,2BAAA,EACZ,IAAAC,KADAD,GAAY,CAAA,EAGXE,OAFDD,EAAG,EAAA,CAAA,OAEFC,GAAC,EAAA,IAADA,EAAC,IAFFD,EAAG,IAFJF,EAAG,IARJH,EAAG,EAkBH,IAAAO,KAlBAP,GAAG,CAAA,EAmBFQ,GAAAzH,EADDwH,EAAG,EAMDE,GAAY1H,EALbyH,EAAA,IAKCC,GAAY,OAAA,yBAAA,IAAZA,GAAY,EAAA,SAAA,EALbtH,EAAAqH,EAAA,EAOA,IAAAE,GAAGrH,EAPHmH,GAAA,CAAA,EAQCG,KADDD,EAAG,IACFC,GAAY,OAAA,YAAA,IAAZA,GAAY,EAAA,2CAAA,EACZ,IAAAC,KADAD,GAAY,CAAA,EAGXE,OAFDD,EAAG,EAAA,CAAA,OAEFC,GAAC,EAAA,IAADA,EAAC,IAFFD,EAAG,IAFJF,EAAG,IARJH,EAAG,EAkBH,IAAAO,GAAAzH,EAlBAkH,GAAG,CAAA,EAqBFQ,GAAAhI,EAHD+H,EAAA,EAQEE,GAAYjI,EALbgI,EAAA,IAKCC,GAAY,OAAA,yBAAA,IAAZA,GAAY,EAAA,SAAA,EALb7H,EAAA4H,EAAA,EAOA,IAAAE,GAAG5H,EAPH0H,GAAA,CAAA,EAQCG,KADDD,EAAG,IACFC,GAAY,OAAA,iBAAA,IAAZA,GAAY,EAAA,+CAAA,EACZ,IAAAC,KADAD,GAAY,CAAA,EAGXE,OAFDD,EAAG,EAAA,CAAA,OAEFC,GAAC,EAAA,IAADA,EAAC,IAFFD,EAAG,IAFJF,EAAG,EAVJ9H,EAAA2H,EAAA,IAxDDxF,CAAG,EA6EH,IAAA+F,KA7EA/F,EAAG,CAAA,EA+EFgG,KAFDD,EAAG,EAIDE,KAFDD,EAAG,EAGDE,KADDD,EAAG,IACFC,GAAY,OAAA,aAAA,IAAZA,GAAY,EAAA,4EAAA,EACZ,IAAAC,KADAD,GAAY,CAAA,KACZC,EAAK,WAALA,GAAK,CAAA,cAEJ,IAAAC,EAAAnG,GAAA,EAAAmG,EACA,QAAO,IAAA/C,EAASpB,EAAc,EAAE,EAK/B,IAAAoE,EAAY5I,EANb2I,CAAA,IAMCC,EAAY,OAAA,kBAAA,IAAZA,EAAY,EAAA,SAAA,EANbxI,EAAAuI,CAAA,EAAAtF,EAAAC,EAAAqF,CAAA,cADGnE,CAAW,GAAA3D,EAAAyB,EAAA,MAHhBkG,EAAG,IAFJD,EAAG,EAmBH,IAAAM,KAnBAN,GAAG,CAAA,KAmBHM,YACU,MAAO,MAAgB,MAAO,MAAO,MAAK5D,EAAEC,CAAK,EAAC,MAAO,KAAM,gBAAmB,MAAO,SAAmB,MAAO,SAAU,MAAKD,EAAEC,CAAK,EAAC,OAAQ,KAAM,qBAAwB,MAAO,WAAqB,MAAO,WAAY,MAAKD,EAAEC,CAAK,EAAC,SAAU,KAAM,qBAAwB,MAAO,OAAiB,MAAO,OAAQ,MAAKD,EAAEC,CAAK,EAAC,KAAM,KAAM,eAAkB,MAAO,SAAmB,MAAO,SAAU,MAAKD,EAAEC,CAAK,EAAC,OAAQ,KAAM,0BAAwB4D,IAAM,CACld,IAAAC,EAAAlG,GAAA,EAAAkG,EACA,QAAO,IAAAnD,EAASnB,EAAYQ,EAAG6D,CAAM,EAAC,MAAK,EAAA,EAI1C,IAAAE,EAAYhJ,EALb+I,CAAA,UAKCC,EAAY,OAAA/D,EAAO6D,CAAM,EAAC,IAAI,CAAA,IAA9BE,EAAY,EAAA,SAAA,EACZ,IAAAvI,IADAuI,EAAY,CAAA,OACZvI,EAAI,EAAA,IAAJA,CAAI,EACJ,IAAAE,GAAAL,EADAG,EAAI,CAAA,EACJwI,GAAAjJ,EAAAW,GAAA,EAAA,EAAAP,EAAAO,EAAA,EAPDP,EAAA2I,CAAA,SAAA3F,EAAA2F,EAAA,EAAA,OAAA9D,EAEYR,CAAY,IAAAQ,EAAK6D,CAAM,EAAC,MAAQ,wCAA0C,6BAA6B,EAAA,EAFnH3F,GAAA4F,EAAA,aAAA,GAAA9D,EAGa6D,CAAM,EAAC,OAAK,EAAA,aAAA7D,EAAY6D,CAAM,EAAC,OAAK,EAAA,GAAA,EAG1CI,EAAAC,GAAAlE,EAAA6D,CAAM,EAAC,KAAK,IAClBnI,GAAA,EAAA,kDAAAsE,EACuDR,CAAY,IAAAQ,EAAK6D,CAAM,EAAC,MAC5E,yBACA,+DAA+D,EAAA,EAEjEI,EAAAD,GAAAhE,EAAA6D,CAAM,EAAC,KAAK,IAZdzF,EAAAC,EAAAyF,CAAA,MAFFF,EAAG,IArBJP,EAAG,EA0CH,IAAAc,KA1CAd,GAAG,CAAA,OA0CHc,EAAG,cAED,IAAAC,EAAApG,GAAA,EAGCqG,EAAYtJ,EAHbqJ,CAAA,IAGCC,EAAY,OAAA,2BAAA,IAAZA,EAAY,EAAA,gCAAA,EAEZ,IAAAC,IAFAD,EAAY,CAAA,MAEZC,CAAC,yBAE+BC,EAAMlJ,EAAAiG,EAAAkD,CAAA,CAAA,OAAND,EAAM,EAAA,IAANA,CAAM,mBAAEhF,CAAW,CAAA,CAAA,+EAE9CC,CAAY,GAAA,EAAA,oBAAA,CAAA,mFADPQ,EAAAR,CAAY,IAAK,MAAK5D,GAAAiD,EAAA,EAAAjD,GAAAE,GAAA,EAAA,yBAF3ByD,CAAW,EAAA3D,EAAAiC,EAAA,EAAAjC,EAAAQ,GAAA,EAAA,MADhBkI,CAAC,WAADA,EAAC,CAAA,cAUA,IAAAG,EAAAzF,GAAA,EAAAyF,EACA,QAAO,IAAQ,CACd9D,EAAApB,EAAc,EAAE,EAChBoB,EAAAnB,EAAe,KAAK,CACrB,EAIC,IAAAkF,EAAY3J,EARb0J,CAAA,IAQCC,EAAY,OAAA,mBAAA,IAAZA,EAAY,EAAA,SAAA,MARbvJ,EAAAsJ,CAAA,EAAArG,EAAAC,EAAAoG,CAAA,eADGlF,CAAW,GAAAS,EAAIR,CAAY,IAAK,QAAK5D,EAAA+C,EAAA,IAd1CxD,EAAAiJ,CAAA,EAAAhG,EAAAC,EAAA+F,CAAA,4BA6BM5G,GAAAmH,EAAA,GAAA,IAAA3E,EAAAG,EAAe,EAAIC,GAAQA,EAAO,QAAfA,IAAM,CAC9BwE,GAAUvG,EAAA,uBAAE+B,CAAM,YAAYY,eAA2BK,4BAA4BtB,EAAgB,0BA/BnGI,EAAe,EAAC,SAAW,EAACvE,EAAA8C,EAAA,EAAA9C,EAAAgD,GAAA,EAAA,MADjCuF,EAAG,SAzGgEF,EAAAY,GAAA7E,EAAAC,CAAK,EAAC,KAAK,EAkB3BgE,EAAAa,GAAA9E,EAAAC,CAAK,EAAC,MAAM,EAkBIgE,EAAAhG,GAAA+B,EAAAC,CAAK,EAAC,IAAI,EAoBNgE,EAAAc,GAAA/E,EAAAC,CAAK,EAAC,MAAM,OAahFwD,GAAK,IAAAzD,EAAyBT,CAAW,EAAAyF,GAAArE,EAAXpB,EAAWyF,CAAA,CAAA,qBA0E5CC,EAAGC,GAAA,EACFC,IADDF,CAAG,EAEDG,IADDD,CAAG,IACFC,EAAY,OAAA,WAAA,IAAZA,EAAY,EAAA,0DAAA,EAMZ,IAAAC,KANAD,EAAY,CAAA,EAOXE,KADDD,EAAG,EAEDE,KADDD,EAAG,IACFC,GAAY,OAAA,kBAAA,IAAZA,GAAY,EAAA,gDAAA,SADbD,EAAG,EAIH,IAAAE,IAJAF,GAAG,CAAA,EAKFG,KADDD,CAAG,IACFC,GAAY,OAAA,kBAAA,IAAZA,GAAY,EAAA,gDAAA,SADbD,CAAG,EAIH,IAAAE,KAJAF,EAAG,CAAA,EAKFG,KADDD,EAAG,IACFC,GAAY,OAAA,kBAAA,IAAZA,GAAY,EAAA,gDAAA,SADbD,EAAG,EAIH,IAAAE,KAJAF,GAAG,CAAA,EAKFG,KADDD,EAAG,IACFC,GAAY,OAAA,kBAAA,IAAZA,GAAY,EAAA,gDAAA,SADbD,EAAG,IAbJP,EAAG,SAPJF,CAAG,IADJF,CAAG,MAAHA,CAAG,YA/JAjF,EAAAP,CAAS,IAAK,YAAW7D,EAAAsD,CAAA,EAAAtD,EAAAkD,GAAA,EAAA,aA3B5BC,EAAA,EAAA,sDAAAiB,EAE2DP,CAAS,IAAK,YACtE,wEACA,kGAAkG,EAAA,IAOrGgC,EAAA,EAAA,sDAAAzB,EAE2DP,CAAS,IAAK,cACtE,wEACA,kGAAkG,EAAA,sBA5C9FC,CAAK,EAAA9D,EAAAO,CAAA,EAAAP,EAAAkK,GAAA,EAAA,0BALVxG,CAAS,EAAA1D,EAAAC,EAAA,EAAAD,EAAAmK,GAAA,EAAA,MADdrL,EAAG,oBAFI,sDC/MR,mBAgBCsL,GAASC,EAAA,4DAA6D,oCAGtEC,GAAeC,EAAA,oCANR"}