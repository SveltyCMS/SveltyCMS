---
path: '/widgets/core/relation'
title: 'Relation Widget'
description: 'Universal relationship manager supports One-to-One, One-to-Many, and Many-to-Many linking between collections'
order: 103
icon: 'mdi:relation-one-to-one'
author: 'admin'
created: '2025-01-15'
updated: '2026-02-16'
tags:
  - widget
  - core
  - relation
  - reference
  - foreign-key
  - linking
  - database
  - one-to-one
  - one-to-many
  - many-to-many
---

# Relation Widget

<blockquote>
	**Universal relationship manager** that handles One-to-One, One-to-Many, and Many-to-Many connections between collections. It stores foreign key
	references (IDs) and provides an intuitive modal-based selection UI.
</blockquote>

## Overview

The **Relation widget** is the primary tool for linking content in SveltyCMS. It stores references to entries in other collections, functioning like foreign keys in a relational database. By toggling the `multiple` configuration, it adapts to support all standard relationship types.

### Key Features

- ✅ **Universal Support**: One-to-One, One-to-Many, and Many-to-Many
- ✅ **Foreign Key Storage**: Stores single ID (string) or array of IDs (`string[]`)
- ✅ **Cross-Collection**: Link to any collection in your CMS
- ✅ **Modal Selection**: User-friendly picker with search and preview
- ✅ **Display Field**: Configure which field shows in the UI (e.g., title, name)
- ✅ **Advanced Aggregation**: MongoDB $lookup for filtering and sorting
- ✅ **Non-Translatable**: References are universal across languages
- ✅ **Validation**: Ensures selected entries exist and meet min/max limits
- ✅ **Lazy Loading**: Efficient data fetching

---

## When to Use Relation Widget

### ✅ Use Relation When:

- **Author References**: Link posts to author profiles (One-to-One)
- **Category Assignment**: Assign products to categories (One-to-One or Many-to-Many)
- **Parent Relations**: Link child items to parent items (Hierarchical)
- **User References**: Connect content to user accounts
- **Tags**: Assign multiple tags to an article (Many-to-Many)
- **Related Content**: Link similar articles or products (Many-to-Many)

### ❌ Don't Use Relation When:

- **Simple Options**: Use `Select` or `Radio` for predefined static choices
- **Embedded Data**: Use `Group` widget for nested object data (if you want data _inside_ the document, not referenced)
- **File References**: Use `Media` widget for images/documents

---

## configuration

### Basic Post Author (One-to-One)

```typescript
import Relation from '@src/widgets/core/Relation';

export const postsCollection = {
	name: 'Posts',
	fields: [
		Relation({
			label: 'Author',
			db_fieldName: 'authorId',
			collection: 'users',
			displayField: 'name',
			required: true,
			helper: 'Select the post author'
		})
	]
};
```

### Product Categories (One-to-Many / Many-to-Many)

```typescript
import Relation from '@src/widgets/core/Relation';

export const productsCollection = {
	name: 'Products',
	fields: [
		Relation({
			label: 'Categories',
			db_fieldName: 'categoryIds',
			collection: 'categories',
			displayField: 'name',
			required: true,
			multiple: true, // ✅ Enables multiple selection
			min: 1,
			max: 5
		})
	]
};
```

---

## Configuration Properties

| Property       | Type      | Required | Default     | Description                                    |
| -------------- | --------- | -------- | ----------- | ---------------------------------------------- |
| `label`        | `string`  | ✅ Yes   | -           | Display label for the field                    |
| `db_fieldName` | `string`  | ✅ Yes   | -           | Database field name (stores ID or IDs)         |
| `collection`   | `string`  | ✅ Yes   | -           | Name of target collection                      |
| `displayField` | `string`  | ✅ Yes   | -           | Field to display in UI (e.g., 'name', 'title') |
| `required`     | `boolean` | ❌ No    | `false`     | Whether relation is mandatory                  |
| `multiple`     | `boolean` | ❌ No    | `false`     | **Crucial**: Set `true` to store array of IDs  |
| `min`          | `number`  | ❌ No    | `undefined` | Minimum number of items (if multiple)          |
| `max`          | `number`  | ❌ No    | `undefined` | Maximum number of items (if multiple)          |
| `helper`       | `string`  | ❌ No    | `undefined` | Helper text                                    |
| `icon`         | `string`  | ❌ No    | `undefined` | Iconify icon name                              |
| `permissions`  | `object`  | ❌ No    | `undefined` | Role-based permissions                         |

---

## Data Structure

### Storage Format

### Storage Format

The data stored depends on the `multiple` setting. The format is database-agnostic, storing references as strings or arrays of strings.

#### Single (One-to-One / Many-to-One)

`multiple: false` (default)

```typescript
// Stored Data (JSON/BSON)
{
  "id": "post_123",
  "title": "My Blog Post",
  "authorId": "user_456" // ✅ Single String ID
}
```

#### Multiple (One-to-Many / Many-to-Many)

`multiple: true`

```typescript
// Stored Data (JSON/BSON)
{
  "id": "product_123",
  "name": "Laptop",
  "categoryIds": ["cat_789", "cat_101"] // ✅ Array of String IDs
}
```

---

## Relationship Patterns

### One-to-One

A single link between two entries.

- **Config**: `multiple: false`
- **Example**: User Profile -> User Account

### One-to-Many

One entry links to multiple others.

- **Config**: `multiple: true` in the Parent collection
- **Alternative**: `multiple: false` in the Child collection (pointing back to Parent)

### Many-to-Many

Entries in both collections can link to multiple entries in the other.

- **Config**: `multiple: true`
- **Example**: Products <-> Tags (A product has many tags, a tag belongs to many products)

---

## Database Operations

The `Relation` widget abstraction handles data retrieval regardless of the underlying database (MongoDB, SQL, etc.).

### Populating Relations

```typescript
// Single Relation
const post = await dbAdapter.find('posts', { id: 'post_123' });
const author = await dbAdapter.find('users', { id: post.authorId });

// Multiple Relation
const product = await dbAdapter.find('products', { id: 'prod_123' });
const categories = await dbAdapter.findMany('categories', { id: { $in: product.categoryIds } });
```

### Advanced Querying

For complex joins, use the `dbAdapter`'s aggregation or query capabilities.

**MongoDB Example ($lookup):**

```typescript
db.products.aggregate([
	{
		$lookup: {
			from: 'categories',
			localField: 'categoryIds',
			foreignField: '_id',
			as: 'categories'
		}
	}
]);
```

**SQL Example (Join):**

```sql
SELECT * FROM products
LEFT JOIN categories ON categories.id = ANY(products.categoryIds)
```

---

## Related Widgets

- **[Select Widget](/widgets/core/select)** - For predefined option lists (enums)
- **[Media Widget](/widgets/core/media)** - For file/image references

---

## License

The Relation widget is part of SveltyCMS and is licensed under the MIT License.
