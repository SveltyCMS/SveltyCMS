---
path: 'docs/Widgets/Widget_Marketplace_System.mdx'
title: 'Widget Marketplace System'
description: 'Complete guide to the widget marketplace - installation, development, and publishing with 3-pillar architecture support'
order: 75
icon: 'mdi:store'
author: 'admin'
created: '2025-08-05'
updated: '2025-10-04'
tags:
  - 'developer'
  - 'widgets'
  - 'marketplace'
  - 'extensions'
  - '3-pillar'
---

# Widget Marketplace System

The SveltyCMS Widget Marketplace allows users to discover, install, and manage custom widgets from a central repository. This system supports multi-tenant installations with proper isolation, security, and full 3-pillar architecture compliance.

## ğŸª Marketplace Overview

### Integration Status

The Widget Marketplace is integrated into the Widget Management dashboard at `/config/widgetManagement`:

- **ğŸ“± Tabbed Interface**: Switch between "Installed Widgets" and "Marketplace"
- **ğŸ¯ Unified Experience**: Seamless transition from browsing to installation
- **ğŸ“Š Real-time Stats**: See your installed vs. available widgets
- **ğŸ”„ Status**: Currently in development - "Coming Soon" placeholder active

### System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Marketplace   â”‚    â”‚   CMS Instance  â”‚    â”‚   Widget Store  â”‚
â”‚     (Tab)       â”‚    â”‚   (Dashboard)   â”‚    â”‚                 â”‚
â”‚ â”œâ”€ Browse       â”‚â—„â”€â”€â–ºâ”‚ â”œâ”€ Install      â”‚â—„â”€â”€â–ºâ”‚ â”œâ”€ Core Widgets â”‚
â”‚ â”œâ”€ Search       â”‚    â”‚ â”œâ”€ Activate     â”‚    â”‚ â”œâ”€ Custom       â”‚
â”‚ â”œâ”€ Categories   â”‚    â”‚ â”œâ”€ Configure    â”‚    â”‚ â”œâ”€ Installed    â”‚
â”‚ â””â”€ Purchase     â”‚    â”‚ â””â”€ Uninstall    â”‚    â”‚ â””â”€ Active       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Widget Lifecycle

1. **ğŸ” Discovery** - Browse marketplace, search widgets
2. **ğŸ’¾ Installation** - Download and install to tenant
3. **âš¡ Activation** - Enable widget for use in collections
4. **âš™ï¸ Configuration** - Set up widget parameters
5. **ğŸ“Š Usage** - Use in collections and content
6. **ğŸ”„ Updates** - Automatic or manual widget updates
7. **ğŸ—‘ï¸ Uninstallation** - Remove widget from tenant

## ğŸ¯ Widget Categories

### Core Widgets (Always Available)

- **Input Controls**: Text, Number, Email, Password
- **Selection**: Dropdown, Radio, Checkbox
- **Media**: File Upload, Image, Video
- **Content**: Rich Text, Markdown
- **Date/Time**: Date Picker, DateTime, Range

Note: The core `date` widget supports `timePicker` to provide DateTime behaviour and the `dateRange` core widget covers ranges â€” no separate `DateTime` core widget is required.

- **Relationships**: Entity Selector, References

### Marketplace Categories

- **ğŸ“± Forms & Input** - Advanced form controls
- **ğŸ¨ Media & Gallery** - Image/video management
- **ğŸ’° E-commerce** - Product, Cart, Payment widgets
- **ğŸ“Š Analytics** - Charts, Graphs, Metrics
- **ğŸŒ Social** - Social media integration
- **ğŸ”§ Productivity** - Calendar, Tasks, Notes
- **ğŸ¯ Marketing** - SEO, Analytics, Campaigns
- **ğŸ¢ Business** - CRM, Invoicing, Reports

## ğŸ› ï¸ Widget Management Interface

### Location & Access

```
Route: /config/widgetManagement
Component: WidgetDashboardEnhanced.svelte
Features: Tabbed interface with Installed Widgets and Marketplace tabs
```

### Installed Widgets Tab

- **ğŸ“Š Statistics Cards**: 6 key metrics displayed in a grid
  - Total Widgets: All registered widgets
  - Active: Currently enabled widgets
  - Core: Essential widgets (always on)
  - Custom: Optional widgets
  - Input: Widgets with Input component
  - Display: Widgets with Display component
- **ï¿½ Search Bar**: Real-time search by name or description
- **ğŸ¯ Filter Tabs**: Quick filters (All, Active, Inactive, Core, Custom)
- **ğŸ“‹ 2-Column Grid**: Professional layout for desktop (responsive)
- **ï¿½ Widget Cards**: Expandable cards showing 3-pillar architecture details

### Marketplace Tab (Coming Soon)

- **ğŸª Widget Browse**: Discover new widgets
- **ï¿½ Advanced Search**: Filter by category, price, rating
- **â­ Ratings & Reviews**: Community feedback
- **ğŸ’³ Payment Integration**: Support for premium widgets
- **ğŸ“¦ One-Click Install**: Seamless installation process

### Interface Highlights

```svelte
<!-- Tab Navigation -->
<Tabs>
	<Tab active>
		<Icon name="mdi:puzzle" />
		Installed Widgets
	</Tab>
	<Tab>
		<Icon name="mdi:store" />
		Marketplace
		<Badge>Coming Soon</Badge>
	</Tab>
</Tabs>

<!-- 2-Column Widget Grid (Desktop) -->
<Grid columns={2} responsive>
	<WidgetCard expandable show3Pillar />
</Grid>
```

Migration tips for marketplace authors:

- Prefer adding GUI overrides rather than creating duplicate core functionality. For example, rather than shipping separate email/phone widgets, provide an `Input` wrapper that configures `inputType` and any additional validation.
- Use the `validationSchema: (field) => ...` function form when your widget's validation depends on field options (for example â€“ a currency widget that validates based on a `precision` option).
- **ğŸš¨ Validation Warnings** - Missing widget alerts

### Interface Sections

#### Summary Cards

```svelte
<!-- Core Widgets - Always enabled -->
<div class="rounded-lg bg-blue-50 p-4">
	<h3>Core Widgets</h3>
	<p class="text-2xl font-bold">{coreWidgetsList.length}</p>
	<p class="text-sm">Always enabled</p>
</div>

<!-- Active Custom Widgets -->
<div class="rounded-lg bg-green-50 p-4">
	<h3>Active Custom</h3>
	<p class="text-2xl font-bold">{activeCustomCount}</p>
	<p class="text-sm">Currently enabled</p>
</div>

<!-- Installed from Marketplace -->
<div class="rounded-lg bg-yellow-50 p-4">
	<h3>Installed</h3>
	<p class="text-2xl font-bold">{installedWidgets.length}</p>
	<p class="text-sm">From marketplace</p>
</div>
```

#### Widget Status Indicators

- **ğŸ”µ CORE** - Core widget (cannot disable)
- **ğŸŸ¢ ACTIVE** - Custom widget (enabled)
- **ğŸŸ¡ INSTALLED** - Widget installed but inactive
- **âšª INACTIVE** - Widget disabled or not installed

## ğŸ”§ API Endpoints

### Widget Management APIs

#### Get Installed Widgets

```typescript
GET /api/widgets/installed?tenantId={tenantId}

Response:
{
  "widgets": ["colorPicker", "currency", "rating"],
  "total": 3,
  "tenantId": "tenant-123"
}
```

#### Install Widget

```typescript
POST /api/widgets/install
{
  "widgetId": "premium-gallery",
  "tenantId": "tenant-123"
}

Response:
{
  "success": true,
  "widgetId": "premium-gallery",
  "installedAt": "2025-08-05T10:00:00Z",
  "message": "Widget installed successfully"
}
```

#### Uninstall Widget

```typescript
POST /api/widgets/uninstall
{
  "widgetName": "premiumGallery",
  "tenantId": "tenant-123"
}

Response:
{
  "success": true,
  "widgetName": "premiumGallery",
  "uninstalledAt": "2025-08-05T10:00:00Z",
  "message": "Widget uninstalled successfully"
}
```

### Marketplace APIs

#### Browse Marketplace

```typescript
GET /api/marketplace/widgets?category=media&search=gallery&sort=downloads

Response:
{
  "widgets": [
    {
      "id": "premium-gallery",
      "name": "Premium Gallery",
      "description": "Advanced image gallery with lightbox...",
      "version": "2.1.0",
      "author": "WidgetCorp",
      "icon": "mdi:view-gallery",
      "price": "$29.99",
      "category": "Media",
      "rating": 4.8,
      "downloads": 1250,
      "dependencies": ["mediaUpload"],
      "compatibility": ">=1.0.0"
    }
  ],
  "total": 12,
  "filters": { "category": "media", "search": "gallery" }
}
```

## ğŸ“¦ Widget Installation Process

### 1. Discovery Phase

```typescript
// User browses marketplace
await loadMarketplaceWidgets();

// Filter and search
const widgets = await fetch('/api/marketplace/widgets?category=forms');
```

### 2. Installation Phase

```typescript
// Download and install widget
const result = await fetch('/api/widgets/install', {
	method: 'POST',
	body: JSON.stringify({ widgetId: 'advanced-form', tenantId })
});

// Widget files are downloaded to tenant directory
// Database is updated with installation record
// Widget is registered in the system
```

### 3. Activation Phase

```typescript
// User activates installed widget
await widgetStoreActions.updateWidgetStatus('advancedForm', 'active', tenantId);

// Widget becomes available in collection builder
// Dependencies are validated
// Collections are updated if needed
```

## ğŸ—ï¸ Multi-Tenant Architecture

### Tenant Isolation

```
ğŸ“ widgets/
â”œâ”€â”€ core/                       # Global core widgets
â”‚   â”œâ”€â”€ input/
â”‚   â”œâ”€â”€ checkbox/
â”‚   â””â”€â”€ mediaUpload/
â”‚
â”œâ”€â”€ marketplace/                # Downloaded marketplace widgets
â”‚   â”œâ”€â”€ premium-gallery/
â”‚   â”œâ”€â”€ advanced-calendar/
â”‚   â””â”€â”€ social-embed/
â”‚
â””â”€â”€ tenants/                   # Tenant-specific installations
    â”œâ”€â”€ tenant-123/
    â”‚   â”œâ”€â”€ installed.json      # List of installed widgets
    â”‚   â”œâ”€â”€ active.json        # List of active widgets
    â”‚   â””â”€â”€ widgets/           # Tenant widget files
    â”‚       â”œâ”€â”€ premium-gallery/
    â”‚       â””â”€â”€ custom-form/
    â”‚
    â””â”€â”€ tenant-456/
        â”œâ”€â”€ installed.json
        â”œâ”€â”€ active.json
        â””â”€â”€ widgets/
```

### Database Schema

```typescript
// Widget Installation Record
interface WidgetInstallation {
	id: string;
	tenantId: string;
	widgetId: string; // Marketplace widget ID
	widgetName: string; // Local widget name
	version: string;
	installedAt: Date;
	installedBy: string; // User ID
	isActive: boolean;
	configuration: object; // Widget-specific config
	dependencies: string[]; // Required widgets
}

// Marketplace Widget
interface MarketplaceWidget {
	id: string;
	name: string;
	description: string;
	version: string;
	author: string;
	category: string;
	price: number | 'free';
	rating: number;
	downloads: number;
	dependencies: string[];
	compatibility: string; // Version requirement
	packageUrl: string; // Download URL
	documentation: string; // Docs URL
	screenshots: string[];
}
```

## ğŸ” Security & Permissions

### Permission System

```typescript
// Widget management permissions
const permissions = {
	'config:widgetManagement': 'View widget management page',
	'config:widgetInstall': 'Install widgets from marketplace',
	'config:widgetUninstall': 'Uninstall widgets',
	'config:widgetActivate': 'Activate/deactivate widgets',
	'config:marketplace': 'Access marketplace features'
};
```

### Widget Validation

```typescript
// Validate widget before installation
interface WidgetValidation {
	isValid: boolean;
	errors: string[];
	warnings: string[];
	securityChecks: {
		codeSignature: boolean;
		permissions: boolean;
		dependencies: boolean;
		compatibility: boolean;
	};
}
```

## ğŸ§ª Testing Widget Management

### Unit Tests

```typescript
// Test widget installation
describe('Widget Installation', () => {
	test('should install widget successfully', async () => {
		const result = await installWidget('premium-gallery', 'tenant-123');
		expect(result.success).toBe(true);
		expect(result.widgetId).toBe('premium-gallery');
	});

	test('should validate dependencies', async () => {
		const validation = await validateWidgetDependencies('advanced-form');
		expect(validation.missingDependencies).toEqual([]);
	});
});
```

### Integration Tests

```typescript
// Test marketplace workflow
test('complete marketplace workflow', async ({ page }) => {
	await page.goto('/config/widgetManagement');

	// Browse marketplace
	await page.click('[data-testid="marketplace-tab"]');
	await expect(page.locator('[data-testid="widget-card"]')).toBeVisible();

	// Install widget
	await page.click('[data-testid="install-widget-btn"]');
	await expect(page.locator('.success-message')).toBeVisible();

	// Activate widget
	await page.click('[data-testid="installed-tab"]');
	await page.click('[data-testid="activate-widget-btn"]');
	await expect(page.locator('.widget-active')).toBeVisible();
});
```

## ğŸš€ Future Enhancements

### Planned Features

- **ğŸ“± Widget Store App** - Dedicated marketplace application
- **ğŸ”„ Auto-Updates** - Automatic widget version updates
- **ğŸ’³ Payment Integration** - Stripe/PayPal for paid widgets
- **ğŸ“Š Analytics** - Widget usage and performance metrics
- **ğŸ¨ Widget Themes** - Customizable widget appearances
- **ğŸ”Œ Plugin System** - Extended widget functionality
- **ğŸŒ CDN Integration** - Faster widget downloads
- **ğŸ“ Reviews & Ratings** - Community feedback system

### Development Roadmap

1. **Phase 1**: Basic marketplace functionality âœ…
2. **Phase 2**: Payment processing and premium widgets
3. **Phase 3**: Auto-updates and version management
4. **Phase 4**: Advanced analytics and reporting
5. **Phase 5**: Community features and widget sharing

## ğŸ’¡ Best Practices

### For Widget Management

- **ğŸ” Regular Audits** - Review installed widgets periodically
- **ğŸ“‹ Dependency Tracking** - Monitor widget dependencies
- **ğŸ” Security Updates** - Keep widgets updated for security
- **ğŸ“Š Usage Analysis** - Track which widgets are actually used
- **ğŸ§ª Testing Environment** - Test widgets before production

### For Marketplace Integration

- **ğŸ”’ Security First** - Validate all marketplace widgets
- **ğŸ“š Documentation** - Maintain clear installation guides
- **ğŸ¯ User Experience** - Make installation process simple
- **ğŸ”„ Rollback Plans** - Enable easy widget removal
- **ğŸ“ˆ Performance Monitoring** - Track marketplace performance

---

The Widget Marketplace system provides a scalable, secure way to extend SveltyCMS functionality while maintaining multi-tenant isolation and proper security controls. This architecture supports both free and premium widgets with a complete installation and management workflow.
