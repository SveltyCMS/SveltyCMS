---
title: Image Editor SDK - Functional Specification
description: Technical specification for the Svelte-based Pintura-level Image Editor SDK.
---

# Image Editor SDK - Functional Specification

## 1. Overview

This document outlines the technical specifications for the **Svelte Image Editor SDK**, a high-performance, client-side image editing solution built with **Svelte 5**, **Konva**, and **TailwindCSS**. The goal is to provide a "Pintura-level" experience: premium UI, responsive design, and modular architecture.

## 2. Architecture

### 2.1 Core Technologies

- **Framework**: Svelte 5 (Runes for state management) + SvelteKit
- **Rendering**: Konva (Canvas 2d) for high-performance 2D manipulation.
- **Styling**: TailwindCSS + Skeleton (Premium aesthetic, Glassmorphism).
- **Processing**: Client-side Canvas API (Export) + Optional server-side SharpJS (via `/api/media/edit`).

### 2.2 Directory Structure

The editor follows a Feature-Sliced / Modular Widget architecture:

```
src/components/imageEditor/
├── Editor.svelte          # Main capabilities orchestrator (Headless-ish)
├── EditorToolbar.svelte   # Context-aware bottom toolbar
├── EditorCanvas.svelte    # Responsive Stage wrapper
├── widgets/               # Feature Modules
│   ├── Crop/
│   │   ├── index.ts       # Module definition
│   │   ├── Tool.svelte    # On-canvas interaction (Transformer, Overlay)
│   │   └── Controls.svelte# Toolbar UI (Aspect ratios, Rotate)
│   ├── Blur/
│   ├── Annotate/
│   ├── FineTune/
│   └── ...
└── registry.ts            # Dynamic widget loader
```

## 3. Features & Requirements

### 3.1 Core Editing

- **Crop**:
  - **Constraint**: Square-only (Primary mode) / Presets.
  - **Interactions**: Drag corners, pan image.
- **Rotation**: 90-degree steps (Left/Right) + Flip (H/V).
- **Zoom**: Pan & Zoom support with mouse wheel and gestures.

### 3.2 Adjustments (FineTune)

- Non-destructive filters using Konva filters.
- **Brightness, Contrast, Saturation, Exposure**.
- Real-time preview.

### 3.3 Annotations

- **Text**: Editable text nodes with color/font-size support.
- **Shapes**: Rectangle, Circle, Arrow, Line.
- **Interactions**: Select, Move, Resize, Delete.

### 3.4 Effects

- **Blur**: Region-based blur (Rectangle/Ellipse shapes).
- **Pixelate**: Region-based pixelation.

### 3.5 Output

- **Format**: exports to base64/Blob (WebP/AVIF preferred).
- **Metadata**: Focal point (x,y) preservation.

## 4. UX/UI Design System

### 4.1 Aesthetic "Pintura-Like"

- **Dark Mode First**: Deep charcoal backgrounds (`bg-surface-900`) for image contrast.
- **Glassmorphism**: Floating toolbars with `backdrop-blur-md` and semi-transparent backgrounds.
- **Micro-animations**: Smooth transitions for toolbar switches (`fly`, `fade`).
- **Tactile Controls**: Sliders and buttons should feel responsive.

### 4.2 Responsiveness

- **Desktop**:
  - Canvas centered, max utilized space.
  - Floating bottom toolbar.
- **Mobile**:
  - Full-width bottom sheet control panel.
  - Finger-friendly touch targets (min 44px).

## 5. State Management (Svelte 5)

The `imageEditorStore.svelte.ts` manages the global state:

```typescript
interface ImageEditorState {
	stage: Konva.Stage | null;
	activeState: string; // Current tool ID
	editHistory: EditAction[]; // Undo/Redo stack
	// ...
}
```

- **Undo/Redo**: Snapshot-based (lightweight) architecture.
- **Tool Lifecycle**: `init` -> `activate` -> `deactivate` -> `destroy`.

## 6. Implementation Checklist

- [x] **Project Scaffolding** (Svelte 5, Konva setup)
- [x] **Modular Registry** (Widget loading)
- [x] **Crop Tool** (Square restriction + Rotate/Flip)
- [x] **Blur Tool** (Region based)
- [x] **Annotate Tool** (Text, Shapes)
- [x] **Undo/Redo System**
- [ ] **Premium UI Polish** (Glassmorphism, Animations) -> _In Progress_
